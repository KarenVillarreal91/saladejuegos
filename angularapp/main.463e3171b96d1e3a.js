(self.webpackChunkproyecto1_lab=self.webpackChunkproyecto1_lab||[]).push([[179],{440:(en,Xe,z)=>{"use strict";z.d(Xe,{nm:()=>it});var _=z(5813);z(5e3),z(5867);var dt=z(5861),nt=z(9681),Ye=z(4859),at=z(2090),Dt=z(1877);const ne=new Map,Oe={activated:!1,tokenObservers:[]},W={initialized:!1,enabled:!1};function ze(Ne){return ne.get(Ne)||Oe}function He(Ne,De){ne.set(Ne,De)}function ot(){return W}class hn{constructor(De,Ke,bt,_t,Ut){if(this.operation=De,this.retryPolicy=Ke,this.getWaitDuration=bt,this.lowerBound=_t,this.upperBound=Ut,this.pending=null,this.nextErrorWaitInterval=_t,_t>Ut)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(De){var Ke=this;return(0,dt.Z)(function*(){Ke.stop();try{Ke.pending=new at.BH,yield function Wt(Ne){return new Promise(De=>{setTimeout(De,Ne)})}(Ke.getNextRun(De)),Ke.pending.resolve(),yield Ke.pending.promise,Ke.pending=new at.BH,yield Ke.operation(),Ke.pending.resolve(),yield Ke.pending.promise,Ke.process(!0).catch(()=>{})}catch(bt){Ke.retryPolicy(bt)?Ke.process(!1).catch(()=>{}):Ke.stop()}})()}getNextRun(De){if(De)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const Ke=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),Ke}}}const rn=new at.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function fn(Ne){if(!ze(Ne).activated)throw rn.create("use-before-activation",{appName:Ne.name})}function Mr(Ne,De){return ar.apply(this,arguments)}function ar(){return(ar=(0,dt.Z)(function*({url:Ne,body:De},Ke){const bt={"Content-Type":"application/json"},_t=Ke.getImmediate({optional:!0});if(_t){const $i=yield _t.getHeartbeatsHeader();$i&&(bt["X-Firebase-Client"]=$i)}const Ut={method:"POST",body:JSON.stringify(De),headers:bt};let an,_r;try{an=yield fetch(Ne,Ut)}catch($i){throw rn.create("fetch-network-error",{originalErrorMessage:$i.message})}if(200!==an.status)throw rn.create("fetch-status-error",{httpStatus:an.status});try{_r=yield an.json()}catch($i){throw rn.create("fetch-parse-error",{originalErrorMessage:$i.message})}const wn=_r.ttl.match(/^([\d.]+)(s)$/);if(!wn||!wn[2]||isNaN(Number(wn[1])))throw rn.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${_r.ttl}`});const Si=1e3*Number(wn[1]),ls=Date.now();return{token:_r.attestationToken,expireTimeMillis:ls+Si,issuedAtTimeMillis:ls}})).apply(this,arguments)}function Nr(Ne,De){const{projectId:Ke,appId:bt,apiKey:_t}=Ne.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${Ke}/apps/${bt}:exchangeDebugToken?key=${_t}`,body:{debug_token:De}}}const bn="firebase-app-check-store";let un=null;function zr(){return un||(un=new Promise((Ne,De)=>{try{const Ke=indexedDB.open("firebase-app-check-database",1);Ke.onsuccess=bt=>{Ne(bt.target.result)},Ke.onerror=bt=>{var _t;De(rn.create("storage-open",{originalErrorMessage:null===(_t=bt.target.error)||void 0===_t?void 0:_t.message}))},Ke.onupgradeneeded=bt=>{0===bt.oldVersion&&bt.target.result.createObjectStore(bn,{keyPath:"compositeKey"})}}catch(Ke){De(rn.create("storage-open",{originalErrorMessage:Ke.message}))}}),un)}function Be(){return(Be=(0,dt.Z)(function*(Ne,De){const bt=(yield zr()).transaction(bn,"readwrite"),Ut=bt.objectStore(bn).put({compositeKey:Ne,value:De});return new Promise((an,_r)=>{Ut.onsuccess=wn=>{an()},bt.onerror=wn=>{var Si;_r(rn.create("storage-set",{originalErrorMessage:null===(Si=wn.target.error)||void 0===Si?void 0:Si.message}))}})})).apply(this,arguments)}const In=new Dt.Yd("@firebase/app-check");function br(Ne,De){return(0,at.hl)()?function ct(Ne,De){return function vt(Ne,De){return Be.apply(this,arguments)}(function Kn(Ne){return`${Ne.options.appId}-${Ne.name}`}(Ne),De)}(Ne,De).catch(Ke=>{In.warn(`Failed to write token to IndexedDB. Error: ${Ke}`)}):Promise.resolve()}function tr(){return ot().enabled}function Pn(){return qt.apply(this,arguments)}function qt(){return(qt=(0,dt.Z)(function*(){const Ne=ot();if(Ne.enabled&&Ne.token)return Ne.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Gt={error:"UNKNOWN_ERROR"};function Jt(Ne){return at.US.encodeString(JSON.stringify(Ne),!1)}function Rn(Ne){return Un.apply(this,arguments)}function Un(){return(Un=(0,dt.Z)(function*(Ne,De=!1){const Ke=Ne.app;fn(Ke);const bt=ze(Ke);let Ut,_t=bt.token;if(!_t){const wn=yield bt.cachedTokenPromise;wn&&jt(wn)&&(_t=wn)}if(!De&&_t&&jt(_t))return{token:_t.token};let _r,an=!1;if(tr()){bt.exchangeTokenPromise||(bt.exchangeTokenPromise=Mr(Nr(Ke,yield Pn()),Ne.heartbeatServiceProvider).then(Si=>(bt.exchangeTokenPromise=void 0,Si)),an=!0);const wn=yield bt.exchangeTokenPromise;return yield br(Ke,wn),He(Ke,Object.assign(Object.assign({},bt),{token:wn})),{token:wn.token}}try{bt.exchangeTokenPromise||(bt.exchangeTokenPromise=bt.provider.getToken().then(wn=>(bt.exchangeTokenPromise=void 0,wn)),an=!0),_t=yield bt.exchangeTokenPromise}catch(wn){"appCheck/throttled"===wn.code?In.warn(wn.message):In.error(wn),Ut=wn}return _t?(_r={token:_t.token},He(Ke,Object.assign(Object.assign({},bt),{token:_t})),yield br(Ke,_t)):_r=on(Ut),an&&$e(Ke,_r),_r})).apply(this,arguments)}function he(Ne,De){const Ke=ze(Ne),bt=Ke.tokenObservers.filter(_t=>_t.next!==De);0===bt.length&&Ke.tokenRefresher&&Ke.tokenRefresher.isRunning()&&Ke.tokenRefresher.stop(),He(Ne,Object.assign(Object.assign({},Ke),{tokenObservers:bt}))}function Me(Ne){const{app:De}=Ne,Ke=ze(De);let bt=Ke.tokenRefresher;bt||(bt=function st(Ne){const{app:De}=Ne;return new hn((0,dt.Z)(function*(){let bt;if(bt=ze(De).token?yield Rn(Ne,!0):yield Rn(Ne),bt.error)throw bt.error}),()=>!0,()=>{const Ke=ze(De);if(Ke.token){let bt=Ke.token.issuedAtTimeMillis+.5*(Ke.token.expireTimeMillis-Ke.token.issuedAtTimeMillis)+3e5;return bt=Math.min(bt,Ke.token.expireTimeMillis-3e5),Math.max(0,bt-Date.now())}return 0},3e4,96e4)}(Ne),He(De,Object.assign(Object.assign({},Ke),{tokenRefresher:bt}))),!bt.isRunning()&&Ke.isTokenAutoRefreshEnabled&&bt.start()}function $e(Ne,De){const Ke=ze(Ne).tokenObservers;for(const bt of Ke)try{"EXTERNAL"===bt.type&&null!=De.error?bt.error(De.error):bt.next(De)}catch(_t){}}function jt(Ne){return Ne.expireTimeMillis-Date.now()>0}function on(Ne){return{token:Jt(Gt),error:Ne}}class xn{constructor(De,Ke){this.app=De,this.heartbeatServiceProvider=Ke}_delete(){const{tokenObservers:De}=ze(this.app);for(const Ke of De)he(this.app,Ke.next);return Promise.resolve()}}const we="app-check-internal";!function fe(){(0,nt._registerComponent)(new Ye.wA("app-check",Ne=>function yn(Ne,De){return new xn(Ne,De)}(Ne.getProvider("app").getImmediate(),Ne.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((Ne,De,Ke)=>{Ne.getProvider(we).initialize()})),(0,nt._registerComponent)(new Ye.wA(we,Ne=>function Zn(Ne){return{getToken:De=>Rn(Ne,De),addTokenListener:De=>function Ee(Ne,De,Ke,bt){const{app:_t}=Ne,Ut=ze(_t),an={next:Ke,error:bt,type:De};if(He(_t,Object.assign(Object.assign({},Ut),{tokenObservers:[...Ut.tokenObservers,an]})),Ut.token&&jt(Ut.token)){const _r=Ut.token;Promise.resolve().then(()=>{Ke({token:_r.token}),Me(Ne)}).catch(()=>{})}Ut.cachedTokenPromise.then(()=>Me(Ne))}(Ne,"INTERNAL",De),removeTokenListener:De=>he(Ne.app,De)}}(Ne.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,nt.registerVersion)("@firebase/app-check","0.5.6")}();class it{constructor(){return(0,_.vb)("app-check")}}"undefined"!=typeof window&&window},1205:(en,Xe,z)=>{"use strict";z.d(Xe,{zQ:()=>Qe,rT:()=>W,f7:()=>He,L6:()=>ne,_Q:()=>Oe,lh:()=>ze,Qv:()=>Dt,nw:()=>ot});var _=z(5e3),B=z(7579),oe=z(9646),Pe=z(8306),Ae=z(8996),xe=z(6451),je=z(6063);class Ue extends B.x{constructor(Qt=1/0,Ft=1/0,St=je.l){super(),this._bufferSize=Qt,this._windowTime=Ft,this._timestampProvider=St,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=Ft===1/0,this._bufferSize=Math.max(1,Qt),this._windowTime=Math.max(1,Ft)}next(Qt){const{isStopped:Ft,_buffer:St,_infiniteTimeWindow:hn,_timestampProvider:Wt,_windowTime:Vn}=this;Ft||(St.push(Qt),!hn&&St.push(Wt.now()+Vn)),this._trimBuffer(),super.next(Qt)}_subscribe(Qt){this._throwIfClosed(),this._trimBuffer();const Ft=this._innerSubscribe(Qt),{_infiniteTimeWindow:St,_buffer:hn}=this,Wt=hn.slice();for(let Vn=0;Vn<Wt.length&&!Qt.closed;Vn+=St?1:2)Qt.next(Wt[Vn]);return this._checkFinalizedStatuses(Qt),Ft}_trimBuffer(){const{_bufferSize:Qt,_timestampProvider:Ft,_buffer:St,_infiniteTimeWindow:hn}=this,Wt=(hn?1:2)*Qt;if(Qt<1/0&&Wt<St.length&&St.splice(0,St.length-Wt),!hn){const Vn=Ft.now();let rn=0;for(let Cn=1;Cn<St.length&&St[Cn]<=Vn;Cn+=2)rn=Cn;rn&&St.splice(0,rn+1)}}}var We=z(3099);function _e(dn,Qt,Ft){let St,hn=!1;return dn&&"object"==typeof dn?({bufferSize:St=1/0,windowTime:Qt=1/0,refCount:hn=!1,scheduler:Ft}=dn):St=null!=dn?dn:1/0,(0,We.B)({connector:()=>new Ue(St,Qt,Ft),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:hn})}var de=z(3900),Fe=z(576);function Mt(dn,Qt){return(0,Fe.m)(Qt)?(0,de.w)(()=>dn,Qt):(0,de.w)(()=>dn)}var pt=z(5363),Et=z(4004),Rt=z(590),tt=z(9468),yt=z(9300),ke=z(5813),Ht=z(2011),dt=z(9808),nt=z(440);z(127);const Dt=new _.OlP("angularfire2.auth.use-emulator"),ne=new _.OlP("angularfire2.auth.settings"),Oe=new _.OlP("angularfire2.auth.tenant-id"),W=new _.OlP("angularfire2.auth.langugage-code"),ze=new _.OlP("angularfire2.auth.use-device-language"),He=new _.OlP("angularfire.auth.persistence"),ot=(dn,Qt,Ft,St,hn,Wt,Vn,rn)=>(0,Ht.cc)(`${dn.name}.auth`,"AngularFireAuth",dn.name,()=>{const Cn=Qt.runOutsideAngular(()=>dn.auth());if(Ft&&Cn.useEmulator(...Ft),St&&(Cn.tenantId=St),Cn.languageCode=hn,Wt&&Cn.useDeviceLanguage(),Vn)for(const[fn,On]of Object.entries(Vn))Cn.settings[fn]=On;return rn&&Cn.setPersistence(rn),Cn},[Ft,St,hn,Wt,Vn,rn]);let Qe=(()=>{class dn{constructor(Ft,St,hn,Wt,Vn,rn,Cn,fn,On,ir,Sn,Mr){const ar=new B.x,fr=(0,oe.of)(void 0).pipe((0,pt.Q)(Vn.outsideAngular),(0,de.w)(()=>Wt.runOutsideAngular(()=>Promise.resolve().then(z.bind(z,820)))),(0,Et.U)(()=>(0,Ht.on)(Ft,Wt,St)),(0,Et.U)(vn=>ot(vn,Wt,rn,fn,On,ir,Cn,Sn)),_e({bufferSize:1,refCount:!1}));if((0,dt.PM)(hn))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,oe.of)(null);else{fr.pipe((0,Rt.P)()).subscribe();const Nr=fr.pipe((0,de.w)(bn=>bn.getRedirectResult().then(Fn=>Fn,()=>null)),ke.iC,_e({bufferSize:1,refCount:!1})),er=fr.pipe((0,de.w)(bn=>new Pe.y(Fn=>({unsubscribe:Wt.runOutsideAngular(()=>bn.onAuthStateChanged(un=>Fn.next(un),un=>Fn.error(un),()=>Fn.complete()))})))),zt=fr.pipe((0,de.w)(bn=>new Pe.y(Fn=>({unsubscribe:Wt.runOutsideAngular(()=>bn.onIdTokenChanged(un=>Fn.next(un),un=>Fn.error(un),()=>Fn.complete()))}))));this.authState=Nr.pipe(Mt(er),(0,tt.R)(Vn.outsideAngular),(0,pt.Q)(Vn.insideAngular)),this.user=Nr.pipe(Mt(zt),(0,tt.R)(Vn.outsideAngular),(0,pt.Q)(Vn.insideAngular)),this.idToken=this.user.pipe((0,de.w)(bn=>bn?(0,Ae.D)(bn.getIdToken()):(0,oe.of)(null))),this.idTokenResult=this.user.pipe((0,de.w)(bn=>bn?(0,Ae.D)(bn.getIdTokenResult()):(0,oe.of)(null))),this.credential=(0,xe.T)(Nr,ar,this.authState.pipe((0,yt.h)(bn=>!bn))).pipe((0,Et.U)(bn=>(null==bn?void 0:bn.user)?bn:null),(0,tt.R)(Vn.outsideAngular),(0,pt.Q)(Vn.insideAngular))}return(0,Ht.pX)(this,fr,Wt,{spy:{apply:(vn,Nr,er)=>{(vn.startsWith("signIn")||vn.startsWith("createUser"))&&er.then(zt=>ar.next(zt))}}})}}return dn.\u0275fac=function(Ft){return new(Ft||dn)(_.LFG(Ht.Dh),_.LFG(Ht.xv,8),_.LFG(_.Lbi),_.LFG(_.R0b),_.LFG(ke.HU),_.LFG(Dt,8),_.LFG(ne,8),_.LFG(Oe,8),_.LFG(W,8),_.LFG(ze,8),_.LFG(He,8),_.LFG(nt.nm,8))},dn.\u0275prov=_.Yz7({token:dn,factory:dn.\u0275fac,providedIn:"any"}),dn})()},7407:(en,Xe,z)=>{"use strict";z.d(Xe,{ST:()=>Y_});var _=z(5e3),B=z(4986),oe=z(8306),Pe=z(8996),Ae=z(9646),xe=z(5813),je=z(4482),Ue=z(5403);function We(){return(0,je.e)((i,e)=>{let t,o=!1;i.subscribe((0,Ue.x)(e,c=>{const g=t;t=c,o&&e.next([g,c]),o=!0}))})}var ne,_e=z(8675),de=z(4004),Fe=z(5026),Mt=z(1884),pt=z(9300),Et=z(2011),Rt=z(9808),yt=(z(820),z(3942)),ke=z(5861),Ht=z(9681),dt=z(4859),nt=z(1877),Ye=z(2090),at="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Dt={},Oe=Oe||{},W=at||self;function ze(){}function He(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function ot(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var En="closure_uid_"+(1e9*Math.random()>>>0),dn=0;function Qt(i,e,t){return i.call.apply(i.bind,arguments)}function Ft(i,e,t){if(!i)throw Error();if(2<arguments.length){var o=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(c,o),i.apply(e,c)}}return function(){return i.apply(e,arguments)}}function St(i,e,t){return(St=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Qt:Ft).apply(null,arguments)}function hn(i,e){var t=Array.prototype.slice.call(arguments,1);return function(){var o=t.slice();return o.push.apply(o,arguments),i.apply(this,o)}}function Wt(i,e){function t(){}t.prototype=e.prototype,i.Z=e.prototype,i.prototype=new t,i.prototype.constructor=i,i.Vb=function(o,c,g){for(var w=Array(arguments.length-2),P=2;P<arguments.length;P++)w[P-2]=arguments[P];return e.prototype[c].apply(o,w)}}function Vn(){this.s=this.s,this.o=this.o}var Cn={};Vn.prototype.s=!1,Vn.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var i=function Qe(i){return Object.prototype.hasOwnProperty.call(i,En)&&i[En]||(i[En]=++dn)}(this);delete Cn[i]}},Vn.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const fn=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let t=0;t<i.length;t++)if(t in i&&i[t]===e)return t;return-1},On=Array.prototype.forEach?function(i,e,t){Array.prototype.forEach.call(i,e,t)}:function(i,e,t){const o=i.length,c="string"==typeof i?i.split(""):i;for(let g=0;g<o;g++)g in c&&e.call(t,c[g],g,i)};function Sn(i){return Array.prototype.concat.apply([],arguments)}function Mr(i){const e=i.length;if(0<e){const t=Array(e);for(let o=0;o<e;o++)t[o]=i[o];return t}return[]}function ar(i){return/^[\s\xa0]*$/.test(i)}var er,fr=String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]};function vn(i,e){return-1!=i.indexOf(e)}function Nr(i,e){return i<e?-1:i>e?1:0}e:{var zt=W.navigator;if(zt){var bn=zt.userAgent;if(bn){er=bn;break e}}er=""}function Fn(i,e,t){for(const o in i)e.call(t,i[o],o,i)}function un(i){const e={};for(const t in i)e[t]=i[t];return e}var zr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _i(i,e){let t,o;for(let c=1;c<arguments.length;c++){for(t in o=arguments[c],o)i[t]=o[t];for(let g=0;g<zr.length;g++)t=zr[g],Object.prototype.hasOwnProperty.call(o,t)&&(i[t]=o[t])}}function ct(i){return ct[" "](i),i}ct[" "]=ze;var sn,i,be=vn(er,"Opera"),vt=vn(er,"Trident")||vn(er,"MSIE"),Be=vn(er,"Edge"),gt=Be||vt,xt=vn(er,"Gecko")&&!(vn(er.toLowerCase(),"webkit")&&!vn(er,"Edge"))&&!(vn(er,"Trident")||vn(er,"MSIE"))&&!vn(er,"Edge"),Kn=vn(er.toLowerCase(),"webkit")&&!vn(er,"Edge");function In(){var i=W.document;return i?i.documentMode:void 0}e:{var $r="",br=(i=er,xt?/rv:([^\);]+)(\)|;)/.exec(i):Be?/Edge\/([\d\.]+)/.exec(i):vt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):Kn?/WebKit\/(\S+)/.exec(i):be?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(br&&($r=br?br[1]:""),vt){var sr=In();if(null!=sr&&sr>parseFloat($r)){sn=String(sr);break e}}sn=$r}var Lt={};var Le=W.document&&vt&&(In()||parseInt(sn,10))||void 0,Gt=function(){if(!W.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{W.addEventListener("test",ze,e),W.removeEventListener("test",ze,e)}catch(t){}return i}();function Jt(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}function Rn(i,e){if(Jt.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var t=this.type=i.type,o=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(xt){e:{try{ct(e.nodeName);var c=!0;break e}catch(g){}c=!1}c||(e=null)}}else"mouseover"==t?e=i.fromElement:"mouseout"==t&&(e=i.toElement);this.relatedTarget=e,o?(this.clientX=void 0!==o.clientX?o.clientX:o.pageX,this.clientY=void 0!==o.clientY?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:Un[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&Rn.Z.h.call(this)}}Jt.prototype.h=function(){this.defaultPrevented=!0},Wt(Rn,Jt);var Un={2:"touch",3:"pen",4:"mouse"};Rn.prototype.h=function(){Rn.Z.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var Ee="closure_listenable_"+(1e6*Math.random()|0),he=0;function Me(i,e,t,o,c){this.listener=i,this.proxy=null,this.src=e,this.type=t,this.capture=!!o,this.ia=c,this.key=++he,this.ca=this.fa=!1}function st(i){i.ca=!0,i.listener=null,i.proxy=null,i.src=null,i.ia=null}function $e(i){this.src=i,this.g={},this.h=0}function jt(i,e){var t=e.type;if(t in i.g){var g,o=i.g[t],c=fn(o,e);(g=0<=c)&&Array.prototype.splice.call(o,c,1),g&&(st(e),0==i.g[t].length&&(delete i.g[t],i.h--))}}function on(i,e,t,o){for(var c=0;c<i.length;++c){var g=i[c];if(!g.ca&&g.listener==e&&g.capture==!!t&&g.ia==o)return c}return-1}$e.prototype.add=function(i,e,t,o,c){var g=i.toString();(i=this.g[g])||(i=this.g[g]=[],this.h++);var w=on(i,e,o,c);return-1<w?(e=i[w],t||(e.fa=!1)):((e=new Me(e,this.src,g,!!o,c)).fa=t,i.push(e)),e};var xn="closure_lm_"+(1e6*Math.random()|0),yn={};function Zn(i,e,t,o,c){if(o&&o.once)return cr(i,e,t,o,c);if(Array.isArray(e)){for(var g=0;g<e.length;g++)Zn(i,e[g],t,o,c);return null}return t=Ni(t),i&&i[Ee]?i.N(e,t,ot(o)?!!o.capture:!!o,c):Tr(i,e,t,!1,o,c)}function Tr(i,e,t,o,c,g){if(!e)throw Error("Invalid event type");var w=ot(c)?!!c.capture:!!c,P=Yr(i);if(P||(i[xn]=P=new $e(i)),(t=P.add(e,t,o,w,g)).proxy)return t;if(o=function _n(){var e=Oi;return function i(t){return e.call(i.src,i.listener,t)}}(),t.proxy=o,o.src=i,o.listener=t,i.addEventListener)Gt||(c=w),void 0===c&&(c=!1),i.addEventListener(e.toString(),o,c);else if(i.attachEvent)i.attachEvent(Xi(e.toString()),o);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(o)}return t}function cr(i,e,t,o,c){if(Array.isArray(e)){for(var g=0;g<e.length;g++)cr(i,e[g],t,o,c);return null}return t=Ni(t),i&&i[Ee]?i.O(e,t,ot(o)?!!o.capture:!!o,c):Tr(i,e,t,!0,o,c)}function Zr(i,e,t,o,c){if(Array.isArray(e))for(var g=0;g<e.length;g++)Zr(i,e[g],t,o,c);else o=ot(o)?!!o.capture:!!o,t=Ni(t),i&&i[Ee]?(i=i.i,(e=String(e).toString())in i.g&&-1<(t=on(g=i.g[e],t,o,c))&&(st(g[t]),Array.prototype.splice.call(g,t,1),0==g.length&&(delete i.g[e],i.h--))):i&&(i=Yr(i))&&(e=i.g[e.toString()],i=-1,e&&(i=on(e,t,o,c)),(t=-1<i?e[i]:null)&&Ri(t))}function Ri(i){if("number"!=typeof i&&i&&!i.ca){var e=i.src;if(e&&e[Ee])jt(e.i,i);else{var t=i.type,o=i.proxy;e.removeEventListener?e.removeEventListener(t,o,i.capture):e.detachEvent?e.detachEvent(Xi(t),o):e.addListener&&e.removeListener&&e.removeListener(o),(t=Yr(e))?(jt(t,i),0==t.h&&(t.src=null,e[xn]=null)):st(i)}}}function Xi(i){return i in yn?yn[i]:yn[i]="on"+i}function Oi(i,e){if(i.ca)i=!0;else{e=new Rn(e,this);var t=i.listener,o=i.ia||i.src;i.fa&&Ri(i),i=t.call(o,e)}return i}function Yr(i){return(i=i[xn])instanceof $e?i:null}var Pr="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ni(i){return"function"==typeof i?i:(i[Pr]||(i[Pr]=function(e){return i.handleEvent(e)}),i[Pr])}function Zt(){Vn.call(this),this.i=new $e(this),this.P=this,this.I=null}function Ct(i,e){var t,o=i.I;if(o)for(t=[];o;o=o.I)t.push(o);if(i=i.P,o=e.type||e,"string"==typeof e)e=new Jt(e,i);else if(e instanceof Jt)e.target=e.target||i;else{var c=e;_i(e=new Jt(o,i),c)}if(c=!0,t)for(var g=t.length-1;0<=g;g--){var w=e.g=t[g];c=Nn(w,o,!0,e)&&c}if(c=Nn(w=e.g=i,o,!0,e)&&c,c=Nn(w,o,!1,e)&&c,t)for(g=0;g<t.length;g++)c=Nn(w=e.g=t[g],o,!1,e)&&c}function Nn(i,e,t,o){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var c=!0,g=0;g<e.length;++g){var w=e[g];if(w&&!w.ca&&w.capture==t){var P=w.listener,Y=w.ia||w.src;w.fa&&jt(i.i,w),c=!1!==P.call(Y,o)&&c}}return c&&!o.defaultPrevented}Wt(Zt,Vn),Zt.prototype[Ee]=!0,Zt.prototype.removeEventListener=function(i,e,t,o){Zr(this,i,e,t,o)},Zt.prototype.M=function(){if(Zt.Z.M.call(this),this.i){var e,i=this.i;for(e in i.g){for(var t=i.g[e],o=0;o<t.length;o++)st(t[o]);delete i.g[e],i.h--}}this.I=null},Zt.prototype.N=function(i,e,t,o){return this.i.add(String(i),e,!1,t,o)},Zt.prototype.O=function(i,e,t,o){return this.i.add(String(i),e,!0,t,o)};var lr=W.JSON.stringify;function Lr(){var i=Ki;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var Sr,kr=new class{constructor(i,e){this.i=i,this.j=e,this.h=0,this.g=null}get(){let i;return 0<this.h?(this.h--,i=this.g,this.g=i.next,i.next=null):i=this.i(),i}}(()=>new pi,i=>i.reset());class pi{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function nr(i){W.setTimeout(()=>{throw i},0)}function Rr(i,e){Sr||function Gn(){var i=W.Promise.resolve(void 0);Sr=function(){i.then(bs)}}(),Xr||(Sr(),Xr=!0),Ki.add(i,e)}var Xr=!1,Ki=new class es{constructor(){this.h=this.g=null}add(e,t){const o=kr.get();o.set(e,t),this.h?this.h.next=o:this.g=o,this.h=o}};function bs(){for(var i;i=Lr();){try{i.h.call(i.g)}catch(t){nr(t)}var e=kr;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}Xr=!1}function we(i,e){Zt.call(this),this.h=i||1,this.g=e||W,this.j=St(this.kb,this),this.l=Date.now()}function fe(i){i.da=!1,i.S&&(i.g.clearTimeout(i.S),i.S=null)}function re(i,e,t){if("function"==typeof i)t&&(i=St(i,t));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=St(i.handleEvent,i)}return 2147483647<Number(e)?-1:W.setTimeout(i,e||0)}function Ie(i){i.g=re(()=>{i.g=null,i.i&&(i.i=!1,Ie(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}Wt(we,Zt),(ne=we.prototype).da=!1,ne.S=null,ne.kb=function(){if(this.da){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-i):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Ct(this,"tick"),this.da&&(fe(this),this.start()))}},ne.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ne.M=function(){we.Z.M.call(this),fe(this),delete this.g};class it extends Vn{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Ie(this)}M(){super.M(),this.g&&(W.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Pt(i){Vn.call(this),this.h=i,this.g={}}Wt(Pt,Vn);var kn=[];function pr(i,e,t,o){Array.isArray(t)||(t&&(kn[0]=t.toString()),t=kn);for(var c=0;c<t.length;c++){var g=Zn(e,t[c],o||i.handleEvent,!1,i.h||i);if(!g)break;i.g[g.key]=g}}function Ar(i){Fn(i.g,function(e,t){this.g.hasOwnProperty(t)&&Ri(e)},i),i.g={}}function ei(){this.g=!0}function as(i,e,t,o){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Fs(i,e){if(!i.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(i=0;i<t.length;i++)if(Array.isArray(t[i])){var o=t[i];if(!(2>o.length)){var c=o[1];if(Array.isArray(c)&&!(1>c.length)){var g=c[0];if("noop"!=g&&"stop"!=g&&"close"!=g)for(var w=1;w<c.length;w++)c[w]=""}}}return lr(t)}catch(P){return e}}(i,t)+(o?" "+o:"")})}Pt.prototype.M=function(){Pt.Z.M.call(this),Ar(this)},Pt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ei.prototype.Aa=function(){this.g=!1},ei.prototype.info=function(){};var vi={},Ys=null;function xr(){return Ys=Ys||new Zt}function Ls(i){Jt.call(this,vi.Ma,i)}function _o(i){const e=xr();Ct(e,new Ls(e,i))}function Ne(i,e){Jt.call(this,vi.STAT_EVENT,i),this.stat=e}function De(i){const e=xr();Ct(e,new Ne(e,i))}function Ke(i,e){Jt.call(this,vi.Na,i),this.size=e}function bt(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return W.setTimeout(function(){i()},e)}vi.Ma="serverreachability",Wt(Ls,Jt),vi.STAT_EVENT="statevent",Wt(Ne,Jt),vi.Na="timingevent",Wt(Ke,Jt);var _t={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Ut={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function an(){}function wn(){}an.prototype.h=null;var Cs,Si={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function ls(){Jt.call(this,"d")}function $i(){Jt.call(this,"c")}function mr(){}function Wn(i,e,t,o){this.l=i,this.j=e,this.m=t,this.X=o||1,this.V=new Pt(this),this.P=Ms,this.W=new we(i=gt?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new ai}function ai(){this.i=null,this.g="",this.h=!1}Wt(ls,Jt),Wt($i,Jt),Wt(mr,an),mr.prototype.g=function(){return new XMLHttpRequest},mr.prototype.i=function(){return{}},Cs=new mr;var Ms=45e3,li={},ti={};function Ps(i,e,t){i.K=1,i.v=lt(Yn(e)),i.s=t,i.U=!0,Qs(i,null)}function Qs(i,e){i.F=Date.now(),qr(i),i.A=Yn(i.v);var t=i.A,o=i.X;Array.isArray(o)||(o=[String(o)]),Vs(t.h,"t",o),i.C=0,t=i.l.H,i.h=new ai,i.g=Ro(i.l,t?e:null,!i.s),0<i.O&&(i.L=new it(St(i.Ia,i,i.g),i.O)),pr(i.V,i.g,"readystatechange",i.gb),e=i.H?un(i.H):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.ea(i.A,i.u,i.s,e)):(i.u="GET",i.g.ea(i.A,i.u,null,e)),_o(1),function yo(i,e,t,o,c,g){i.info(function(){if(i.g)if(g)for(var w="",P=g.split("&"),Y=0;Y<P.length;Y++){var ee=P[Y].split("=");if(1<ee.length){var pe=ee[0];ee=ee[1];var Re=pe.split("_");w=2<=Re.length&&"type"==Re[1]?w+(pe+"=")+ee+"&":w+(pe+"=redacted&")}}else w=null;else w=g;return"XMLHTTP REQ ("+o+") [attempt "+c+"]: "+e+"\n"+t+"\n"+w})}(i.j,i.u,i.A,i.m,i.X,i.s)}function Ao(i){return!!i.g&&"GET"==i.u&&2!=i.K&&i.l.Ba}function us(i,e,t){let c,o=!0;for(;!i.I&&i.C<t.length;){if(c=ts(i,t),c==ti){4==e&&(i.o=4,De(14),o=!1),as(i.j,i.m,null,"[Incomplete Response]");break}if(c==li){i.o=4,De(15),as(i.j,i.m,t,"[Invalid Chunk]"),o=!1;break}as(i.j,i.m,c,null),ui(i,c)}Ao(i)&&c!=ti&&c!=li&&(i.h.g="",i.C=0),4!=e||0!=t.length||i.h.h||(i.o=1,De(16),o=!1),i.i=i.i&&o,o?0<t.length&&!i.aa&&(i.aa=!0,(e=i.l).g==i&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),Po(e),e.L=!0,De(11))):(as(i.j,i.m,t,"[Invalid Chunked Response]"),Br(i),Rs(i))}function ts(i,e){var t=i.C,o=e.indexOf("\n",t);return-1==o?ti:(t=Number(e.substring(t,o)),isNaN(t)?li:(o+=1)+t>e.length?ti:(e=e.substr(o,t),i.C=o+t,e))}function qr(i){i.Y=Date.now()+i.P,xi(i,i.P)}function xi(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=bt(St(i.eb,i),e)}function Js(i){i.B&&(W.clearTimeout(i.B),i.B=null)}function Rs(i){0==i.l.G||i.I||Aa(i.l,i)}function Br(i){Js(i);var e=i.L;e&&"function"==typeof e.na&&e.na(),i.L=null,fe(i.W),Ar(i.V),i.g&&(e=i.g,i.g=null,e.abort(),e.na())}function ui(i,e){try{var t=i.l;if(0!=t.G&&(t.g==i||$n(t.i,i)))if(t.I=i.N,!i.J&&$n(t.i,i)&&3==t.G){try{var o=t.Ca.g.parse(e)}catch(ee){o=null}if(Array.isArray(o)&&3==o.length){var c=o;if(0==c[0])e:if(t.u)t.ta=c[1],0<t.ta-t.U&&37500>c[2]&&t.N&&0==t.A&&!t.v&&(t.v=bt(St(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<i.F))break e;mi(t),Is(t)}ki(t),De(18)}if(1>=cn(t.i)&&t.ka){try{t.ka()}catch(ee){}t.ka=void 0}}else Ci(t,11)}else if((i.J||t.g==i)&&mi(t),!ar(e))for(c=t.Ca.g.parse(e),e=0;e<c.length;e++){let ee=c[e];if(t.U=ee[0],ee=ee[1],2==t.G)if("c"==ee[0]){t.J=ee[1],t.la=ee[2];const pe=ee[3];null!=pe&&(t.ma=pe,t.h.info("VER="+t.ma));const Re=ee[4];null!=Re&&(t.za=Re,t.h.info("SVER="+t.za));const ht=ee[5];null!=ht&&"number"==typeof ht&&0<ht&&(t.K=o=1.5*ht,t.h.info("backChannelRequestTimeoutMs_="+o)),o=t;const Ot=i.g;if(Ot){const Vt=Ot.g?Ot.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Vt){var g=o.i;!g.g&&(vn(Vt,"spdy")||vn(Vt,"quic")||vn(Vt,"h2"))&&(g.j=g.l,g.g=new Set,g.h&&(hr(g,g.h),g.h=null))}if(o.D){const An=Ot.g?Ot.g.getResponseHeader("X-HTTP-Session-Id"):null;An&&(o.sa=An,ye(o.F,o.D,An))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-i.F,t.h.info("Handshake RTT: "+t.O+"ms"));var w=i;if((o=t).oa=Ii(o,o.H?o.la:null,o.W),w.J){Ei(o.i,w);var P=w,Y=o.K;Y&&P.setTimeout(Y),P.B&&(Js(P),qr(P)),o.g=w}else to(o);0<t.l.length&&Wa(t)}else"stop"!=ee[0]&&"close"!=ee[0]||Ci(t,7);else 3==t.G&&("stop"==ee[0]||"close"==ee[0]?"stop"==ee[0]?Ci(t,7):bi(t):"noop"!=ee[0]&&t.j&&t.j.wa(ee),t.A=0)}_o(4)}catch(ee){}}function vo(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(He(i)||"string"==typeof i)On(i,e,void 0);else{if(i.T&&"function"==typeof i.T)var t=i.T();else if(i.R&&"function"==typeof i.R)t=void 0;else if(He(i)||"string"==typeof i){t=[];for(var o=i.length,c=0;c<o;c++)t.push(c)}else for(c in t=[],o=0,i)t[o++]=c;o=function Xs(i){if(i.R&&"function"==typeof i.R)return i.R();if("string"==typeof i)return i.split("");if(He(i)){for(var e=[],t=i.length,o=0;o<t;o++)e.push(i[o]);return e}for(o in e=[],t=0,i)e[t++]=i[o];return e}(i),c=o.length;for(var g=0;g<c;g++)e.call(void 0,o[g],t&&t[g],i)}}function Zi(i,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var o=0;o<t;o+=2)this.set(arguments[o],arguments[o+1])}else if(i)if(i instanceof Zi)for(t=i.T(),o=0;o<t.length;o++)this.set(t[o],i.get(t[o]));else for(o in i)this.set(o,i[o])}function Gi(i){if(i.i!=i.g.length){for(var e=0,t=0;e<i.g.length;){var o=i.g[e];Bn(i.h,o)&&(i.g[t++]=o),e++}i.g.length=t}if(i.i!=i.g.length){var c={};for(t=e=0;e<i.g.length;)Bn(c,o=i.g[e])||(i.g[t++]=o,c[o]=1),e++;i.g.length=t}}function Bn(i,e){return Object.prototype.hasOwnProperty.call(i,e)}(ne=Wn.prototype).setTimeout=function(i){this.P=i},ne.gb=function(i){i=i.target;const e=this.L;e&&3==fs(i)?e.l():this.Ia(i)},ne.Ia=function(i){try{if(i==this.g)e:{const pe=fs(this.g);var e=this.g.Da();const Re=this.g.ba();if(!(3>pe)&&(3!=pe||gt||this.g&&(this.h.h||this.g.ga()||Yo(this.g)))){this.I||4!=pe||7==e||_o(8==e||0>=Re?3:2),Js(this);var t=this.g.ba();this.N=t;t:if(Ao(this)){var o=Yo(this.g);i="";var c=o.length,g=4==fs(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Br(this),Rs(this);var w="";break t}this.h.i=new W.TextDecoder}for(e=0;e<c;e++)this.h.h=!0,i+=this.h.i.decode(o[e],{stream:g&&e==c-1});o.splice(0,c),this.h.g+=i,this.C=0,w=this.h.g}else w=this.g.ga();if(this.i=200==t,function os(i,e,t,o,c,g,w){i.info(function(){return"XMLHTTP RESP ("+o+") [ attempt "+c+"]: "+e+"\n"+t+"\n"+g+" "+w})}(this.j,this.u,this.A,this.m,this.X,pe,t),this.i){if(this.$&&!this.J){t:{if(this.g){var P,Y=this.g;if((P=Y.g?Y.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ar(P)){var ee=P;break t}}ee=null}if(!(t=ee)){this.i=!1,this.o=3,De(12),Br(this),Rs(this);break e}as(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,ui(this,t)}this.U?(us(this,pe,w),gt&&this.i&&3==pe&&(pr(this.V,this.W,"tick",this.fb),this.W.start())):(as(this.j,this.m,w,null),ui(this,w)),4==pe&&Br(this),this.i&&!this.I&&(4==pe?Aa(this.l,this):(this.i=!1,qr(this)))}else 400==t&&0<w.indexOf("Unknown SID")?(this.o=3,De(12)):(this.o=0,De(13)),Br(this),Rs(this)}}}catch(pe){}},ne.fb=function(){if(this.g){var i=fs(this.g),e=this.g.ga();this.C<e.length&&(Js(this),us(this,i,e),this.i&&4!=i&&qr(this))}},ne.cancel=function(){this.I=!0,Br(this)},ne.eb=function(){this.B=null;const i=Date.now();0<=i-this.Y?(function Ui(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(_o(3),De(17)),Br(this),this.o=2,Rs(this)):xi(this,this.Y-i)},(ne=Zi.prototype).R=function(){Gi(this);for(var i=[],e=0;e<this.g.length;e++)i.push(this.h[this.g[e]]);return i},ne.T=function(){return Gi(this),this.g.concat()},ne.get=function(i,e){return Bn(this.h,i)?this.h[i]:e},ne.set=function(i,e){Bn(this.h,i)||(this.i++,this.g.push(i)),this.h[i]=e},ne.forEach=function(i,e){for(var t=this.T(),o=0;o<t.length;o++){var c=t[o],g=this.get(c);i.call(e,g,c,this)}};var ci=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function cs(i,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,i instanceof cs){this.g=void 0!==e?e:i.g,U(this,i.j),this.s=i.s,J(this,i.i),V(this,i.m),this.l=i.l,e=i.h;var t=new wi;t.i=e.i,e.g&&(t.g=new Zi(e.g),t.h=e.h),ie(this,t),this.o=i.o}else i&&(t=String(i).match(ci))?(this.g=!!e,U(this,t[1]||"",!0),this.s=vr(t[2]||""),J(this,t[3]||"",!0),V(this,t[4]),this.l=vr(t[5]||"",!0),ie(this,t[6]||"",!0),this.o=vr(t[7]||"")):(this.g=!!e,this.h=new wi(null,this.g))}function Yn(i){return new cs(i)}function U(i,e,t){i.j=t?vr(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function J(i,e,t){i.i=t?vr(e,!0):e}function V(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function ie(i,e,t){e instanceof wi?(i.h=e,function $(i,e){e&&!i.j&&($t(i),i.i=null,i.g.forEach(function(t,o){var c=o.toLowerCase();o!=c&&(eo(this,o),Vs(this,c,t))},i)),i.j=e}(i.h,i.g)):(t||(e=dr(e,Vr)),i.h=new wi(e,i.g))}function ye(i,e,t){i.h.set(e,t)}function lt(i){return ye(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function vr(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function dr(i,e,t){return"string"==typeof i?(i=encodeURI(i).replace(e,Jn),t&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function Jn(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}cs.prototype.toString=function(){var i=[],e=this.j;e&&i.push(dr(e,zn,!0),":");var t=this.i;return(t||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(dr(e,zn,!0),"@"),i.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&i.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&i.push("/"),i.push(dr(t,"/"==t.charAt(0)?Or:jr,!0))),(t=this.h.toString())&&i.push("?",t),(t=this.o)&&i.push("#",dr(t,ds)),i.join("")};var zn=/[#\/\?@]/g,jr=/[#\?:]/g,Or=/[#\?]/g,Vr=/[#\?@]/g,ds=/#/g;function wi(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function $t(i){i.g||(i.g=new Zi,i.h=0,i.i&&function Os(i,e){if(i){i=i.split("&");for(var t=0;t<i.length;t++){var o=i[t].indexOf("="),c=null;if(0<=o){var g=i[t].substring(0,o);c=i[t].substring(o+1)}else g=i[t];e(g,c?decodeURIComponent(c.replace(/\+/g," ")):"")}}}(i.i,function(e,t){i.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function eo(i,e){$t(i),e=Wi(i,e),Bn(i.g.h,e)&&(i.i=null,i.h-=i.g.get(e).length,Bn((i=i.g).h,e)&&(delete i.h[e],i.i--,i.g.length>2*i.i&&Gi(i)))}function wo(i,e){return $t(i),e=Wi(i,e),Bn(i.g.h,e)}function Vs(i,e,t){eo(i,e),0<t.length&&(i.i=null,i.g.set(Wi(i,e),Mr(t)),i.h+=t.length)}function Wi(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function F(i){this.l=i||G,i=W.PerformanceNavigationTiming?0<(i=W.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(W.g&&W.g.Ea&&W.g.Ea()&&W.g.Ea().Zb),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ne=wi.prototype).add=function(i,e){$t(this),this.i=null,i=Wi(this,i);var t=this.g.get(i);return t||this.g.set(i,t=[]),t.push(e),this.h+=1,this},ne.forEach=function(i,e){$t(this),this.g.forEach(function(t,o){On(t,function(c){i.call(e,c,o,this)},this)},this)},ne.T=function(){$t(this);for(var i=this.g.R(),e=this.g.T(),t=[],o=0;o<e.length;o++)for(var c=i[o],g=0;g<c.length;g++)t.push(e[o]);return t},ne.R=function(i){$t(this);var e=[];if("string"==typeof i)wo(this,i)&&(e=Sn(e,this.g.get(Wi(this,i))));else{i=this.g.R();for(var t=0;t<i.length;t++)e=Sn(e,i[t])}return e},ne.set=function(i,e){return $t(this),this.i=null,wo(this,i=Wi(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},ne.get=function(i,e){return i&&0<(i=this.R(i)).length?String(i[0]):e},ne.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var i=[],e=this.g.T(),t=0;t<e.length;t++){var o=e[t],c=encodeURIComponent(String(o));o=this.R(o);for(var g=0;g<o.length;g++){var w=c;""!==o[g]&&(w+="="+encodeURIComponent(String(o[g]))),i.push(w)}}return this.i=i.join("&")};var G=10;function qe(i){return!!i.h||!!i.g&&i.g.size>=i.j}function cn(i){return i.h?1:i.g?i.g.size:0}function $n(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function hr(i,e){i.g?i.g.add(e):i.h=e}function Ei(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function Mi(i){if(null!=i.h)return i.i.concat(i.h.D);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const t of i.g.values())e=e.concat(t.D);return e}return Mr(i.i)}function Us(){}function ns(){this.g=new Us}function ca(i,e,t){const o=t||"";try{vo(i,function(c,g){let w=c;ot(c)&&(w=lr(c)),e.push(o+g+"="+encodeURIComponent(w))})}catch(c){throw e.push(o+"type="+encodeURIComponent("_badmap")),c}}function Lo(i,e,t,o,c){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,c(o)}catch(g){}}function Bs(i){this.l=i.$b||null,this.j=i.ib||!1}function Bi(i,e){Zt.call(this),this.D=i,this.u=e,this.m=void 0,this.readyState=hs,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}F.prototype.cancel=function(){if(this.i=Mi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}},Us.prototype.stringify=function(i){return W.JSON.stringify(i,void 0)},Us.prototype.parse=function(i){return W.JSON.parse(i,void 0)},Wt(Bs,an),Bs.prototype.g=function(){return new Bi(this.l,this.j)},Bs.prototype.i=function(i){return function(){return i}}({}),Wt(Bi,Zt);var hs=0;function da(i){i.j.read().then(i.Sa.bind(i)).catch(i.ha.bind(i))}function Yi(i){i.readyState=4,i.l=null,i.j=null,i.A=null,ji(i)}function ji(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(ne=Bi.prototype).open=function(i,e){if(this.readyState!=hs)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,ji(this)},ne.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.D||W).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},ne.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Yi(this)),this.readyState=hs},ne.Va=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,ji(this)),this.g&&(this.readyState=3,ji(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==W.ReadableStream&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;da(this)}else i.text().then(this.Ua.bind(this),this.ha.bind(this))},ne.Sa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?Yi(this):ji(this),3==this.readyState&&da(this)}},ne.Ua=function(i){this.g&&(this.response=this.responseText=i,Yi(this))},ne.Ta=function(i){this.g&&(this.response=i,Yi(this))},ne.ha=function(){this.g&&Yi(this)},ne.setRequestHeader=function(i,e){this.v.append(i,e)},ne.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},ne.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var t=e.next();!t.done;)i.push((t=t.value)[0]+": "+t[1]),t=e.next();return i.join("\r\n")},Object.defineProperty(Bi.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var So=W.JSON.parse;function ni(i){Zt.call(this),this.headers=new Zi,this.u=i||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Vo,this.K=this.L=!1}Wt(ni,Zt);var Vo="",Ko=/^https?$/i,Ca=["POST","PUT"];function ha(i){return"content-type"==i.toLowerCase()}function rl(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,Zo(i),js(i)}function Zo(i){i.D||(i.D=!0,Ct(i,"complete"),Ct(i,"error"))}function xo(i){if(i.h&&void 0!==Oe&&(!i.C[1]||4!=fs(i)||2!=i.ba()))if(i.v&&4==fs(i))re(i.Fa,0,i);else if(Ct(i,"readystatechange"),4==fs(i)){i.h=!1;try{const P=i.ba();e:switch(P){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var o;if(o=0===P){var c=String(i.H).match(ci)[1]||null;if(!c&&W.self&&W.self.location){var g=W.self.location.protocol;c=g.substr(0,g.length-1)}o=!Ko.test(c?c.toLowerCase():"")}t=o}if(t)Ct(i,"complete"),Ct(i,"success");else{i.m=6;try{var w=2<fs(i)?i.g.statusText:""}catch(Y){w=""}i.j=w+" ["+i.ba()+"]",Zo(i)}}finally{js(i)}}}function js(i,e){if(i.g){Bo(i);const t=i.g,o=i.C[0]?ze:null;i.g=null,i.C=null,e||Ct(i,"ready");try{t.onreadystatechange=o}catch(c){}}}function Bo(i){i.g&&i.K&&(i.g.ontimeout=null),i.A&&(W.clearTimeout(i.A),i.A=null)}function fs(i){return i.g?i.g.readyState:0}function Yo(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.J){case Vo:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Hs(i,e,t){e:{for(o in t){var o=!1;break e}o=!0}o||(t=function $a(i){let e="";return Fn(i,function(t,o){e+=o,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof i?null!=t&&encodeURIComponent(String(t)):ye(i,e,t))}function Mo(i,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[i]||e}function Ga(i){this.za=0,this.l=[],this.h=new ei,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Mo("failFast",!1,i),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Mo("baseRetryDelayMs",5e3,i),this.$a=Mo("retryDelaySeedMs",1e4,i),this.Ya=Mo("forwardChannelMaxRetries",2,i),this.ra=Mo("forwardChannelRequestTimeoutMs",2e4,i),this.qa=i&&i.xmlHttpFactory||void 0,this.Ba=i&&i.Yb||!1,this.K=void 0,this.H=i&&i.supportsCrossDomainXhr||!1,this.J="",this.i=new F(i&&i.concurrentRequestLimit),this.Ca=new ns,this.ja=i&&i.fastHandshake||!1,this.Ra=i&&i.Wb||!1,i&&i.Aa&&this.h.Aa(),i&&i.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&i&&i.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!i||!1!==i.Xb}function bi(i){if(di(i),3==i.G){var e=i.V++,t=Yn(i.F);ye(t,"SID",i.J),ye(t,"RID",e),ye(t,"TYPE","terminate"),Da(i,t),(e=new Wn(i,i.h,e,void 0)).K=2,e.v=lt(Yn(t)),t=!1,W.navigator&&W.navigator.sendBeacon&&(t=W.navigator.sendBeacon(e.v.toString(),"")),!t&&W.Image&&((new Image).src=e.v,t=!0),t||(e.g=Ro(e.l,null),e.g.ea(e.v)),e.F=Date.now(),qr(e)}Ds(i)}function Is(i){i.g&&(Po(i),i.g.cancel(),i.g=null)}function di(i){Is(i),i.u&&(W.clearTimeout(i.u),i.u=null),mi(i),i.i.cancel(),i.m&&("number"==typeof i.m&&W.clearTimeout(i.m),i.m=null)}function Qo(i,e){i.l.push(new class{constructor(i,e){this.h=i,this.g=e}}(i.Za++,e)),3==i.G&&Wa(i)}function Wa(i){qe(i.i)||i.m||(i.m=!0,Rr(i.Ha,i),i.C=0)}function Ia(i,e){var t;t=e?e.m:i.V++;const o=Yn(i.F);ye(o,"SID",i.J),ye(o,"RID",t),ye(o,"AID",i.U),Da(i,o),i.o&&i.s&&Hs(o,i.o,i.s),t=new Wn(i,i.h,t,i.C+1),null===i.o&&(t.H=i.s),e&&(i.l=e.D.concat(i.l)),e=Ta(i,t,1e3),t.setTimeout(Math.round(.5*i.ra)+Math.round(.5*i.ra*Math.random())),hr(i.i,t),Ps(t,o,e)}function Da(i,e){i.j&&vo({},function(t,o){ye(e,o,t)})}function Ta(i,e,t){t=Math.min(i.l.length,t);var o=i.j?St(i.j.Oa,i.j,i):null;e:{var c=i.l;let g=-1;for(;;){const w=["count="+t];-1==g?0<t?(g=c[0].h,w.push("ofs="+g)):g=0:w.push("ofs="+g);let P=!0;for(let Y=0;Y<t;Y++){let ee=c[Y].h;const pe=c[Y].g;if(ee-=g,0>ee)g=Math.max(0,c[Y].h-100),P=!1;else try{ca(pe,w,"req"+ee+"_")}catch(Re){o&&o(pe)}}if(P){o=w.join("&");break e}}}return i=i.l.splice(0,t),e.D=i,o}function to(i){i.g||i.u||(i.Y=1,Rr(i.Ga,i),i.A=0)}function ki(i){return!(i.g||i.u||3<=i.A||(i.Y++,i.u=bt(St(i.Ga,i),rs(i,i.A)),i.A++,0))}function Po(i){null!=i.B&&(W.clearTimeout(i.B),i.B=null)}function gi(i){i.g=new Wn(i,i.h,"rpc",i.Y),null===i.o&&(i.g.H=i.s),i.g.O=0;var e=Yn(i.oa);ye(e,"RID","rpc"),ye(e,"SID",i.J),ye(e,"CI",i.N?"0":"1"),ye(e,"AID",i.U),Da(i,e),ye(e,"TYPE","xmlhttp"),i.o&&i.s&&Hs(e,i.o,i.s),i.K&&i.g.setTimeout(i.K);var t=i.g;i=i.la,t.K=1,t.v=lt(Yn(e)),t.s=null,t.U=!0,Qs(t,i)}function mi(i){null!=i.v&&(W.clearTimeout(i.v),i.v=null)}function Aa(i,e){var t=null;if(i.g==e){mi(i),Po(i),i.g=null;var o=2}else{if(!$n(i.i,e))return;t=e.D,Ei(i.i,e),o=1}if(i.I=e.N,0!=i.G)if(e.i)if(1==o){t=e.s?e.s.length:0,e=Date.now()-e.F;var c=i.C;Ct(o=xr(),new Ke(o,t,e,c)),Wa(i)}else to(i);else if(3==(c=e.o)||0==c&&0<i.I||!(1==o&&function Hl(i,e){return!(cn(i.i)>=i.i.j-(i.m?1:0)||(i.m?(i.l=e.D.concat(i.l),0):1==i.G||2==i.G||i.C>=(i.Xa?0:i.Ya)||(i.m=bt(St(i.Ha,i,e),rs(i,i.C)),i.C++,0)))}(i,e)||2==o&&ki(i)))switch(t&&0<t.length&&(e=i.i,e.i=e.i.concat(t)),c){case 1:Ci(i,5);break;case 4:Ci(i,10);break;case 3:Ci(i,6);break;default:Ci(i,2)}}function rs(i,e){let t=i.Pa+Math.floor(Math.random()*i.$a);return i.j||(t*=2),t*e}function Ci(i,e){if(i.h.info("Error code "+e),2==e){var t=null;i.j&&(t=null);var o=St(i.jb,i);t||(t=new cs("//www.google.com/images/cleardot.gif"),W.location&&"http"==W.location.protocol||U(t,"https"),lt(t)),function nl(i,e){const t=new ei;if(W.Image){const o=new Image;o.onload=hn(Lo,t,o,"TestLoadImage: loaded",!0,e),o.onerror=hn(Lo,t,o,"TestLoadImage: error",!1,e),o.onabort=hn(Lo,t,o,"TestLoadImage: abort",!1,e),o.ontimeout=hn(Lo,t,o,"TestLoadImage: timeout",!1,e),W.setTimeout(function(){o.ontimeout&&o.ontimeout()},1e4),o.src=i}else e(!1)}(t.toString(),o)}else De(2);i.G=0,i.j&&i.j.va(e),Ds(i),di(i)}function Ds(i){i.G=0,i.I=-1,i.j&&((0!=Mi(i.i).length||0!=i.l.length)&&(i.i.i.length=0,Mr(i.l),i.l.length=0),i.j.ua())}function Ii(i,e,t){let o=function It(i){return i instanceof cs?Yn(i):new cs(i,void 0)}(t);if(""!=o.i)e&&J(o,e+"."+o.i),V(o,o.m);else{const c=W.location;o=function Kt(i,e,t,o){var c=new cs(null,void 0);return i&&U(c,i),e&&J(c,e),t&&V(c,t),o&&(c.l=o),c}(c.protocol,e?e+"."+c.hostname:c.hostname,+c.port,t)}return i.aa&&Fn(i.aa,function(c,g){ye(o,g,c)}),t=i.sa,(e=i.D)&&t&&ye(o,e,t),ye(o,"VER",i.ma),Da(i,o),o}function Ro(i,e,t){if(e&&!i.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new ni(t&&i.Ba&&!i.qa?new Bs({ib:!0}):i.qa)).L=i.H,e}function za(){}function Oo(){if(vt&&!(10<=Number(Le)))throw Error("Environmental error: no available transport.")}function Ns(i,e){Zt.call(this),this.g=new Ga(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(i?i["X-WebChannel-Client-Profile"]=e.ya:i={"X-WebChannel-Client-Profile":e.ya}),this.g.P=i,(i=e&&e.httpHeadersOverwriteParam)&&!ar(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!ar(e)&&(this.g.D=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new Ts(this)}function $l(i){ls.call(this);var e=i.__sm__;if(e){e:{for(const t in e){i=t;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function Fi(){$i.call(this),this.status=1}function Ts(i){this.g=i}(ne=ni.prototype).ea=function(i,e,t,o){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+i);e=e?e.toUpperCase():"GET",this.H=i,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Cs.g(),this.C=function _r(i){return i.h||(i.h=i.i())}(this.u?this.u:Cs),this.g.onreadystatechange=St(this.Fa,this);try{this.F=!0,this.g.open(e,String(i),!0),this.F=!1}catch(g){return void rl(this,g)}i=t||"";const c=new Zi(this.headers);o&&vo(o,function(g,w){c.set(w,g)}),o=function ir(i){e:{var e=ha;const t=i.length,o="string"==typeof i?i.split(""):i;for(let c=0;c<t;c++)if(c in o&&e.call(void 0,o[c],c,i)){e=c;break e}e=-1}return 0>e?null:"string"==typeof i?i.charAt(e):i[e]}(c.T()),t=W.FormData&&i instanceof W.FormData,!(0<=fn(Ca,e))||o||t||c.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),c.forEach(function(g,w){this.g.setRequestHeader(w,g)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Bo(this),0<this.B&&((this.K=function Uo(i){return vt&&function tr(){return function ge(i){var e=Lt;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=i(9)}(function(){let i=0;const e=fr(String(sn)).split("."),t=fr("9").split("."),o=Math.max(e.length,t.length);for(let w=0;0==i&&w<o;w++){var c=e[w]||"",g=t[w]||"";do{if(c=/(\d*)(\D*)(.*)/.exec(c)||["","","",""],g=/(\d*)(\D*)(.*)/.exec(g)||["","","",""],0==c[0].length&&0==g[0].length)break;i=Nr(0==c[1].length?0:parseInt(c[1],10),0==g[1].length?0:parseInt(g[1],10))||Nr(0==c[2].length,0==g[2].length)||Nr(c[2],g[2]),c=c[3],g=g[3]}while(0==i)}return 0<=i})}()&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=St(this.pa,this)):this.A=re(this.pa,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(g){rl(this,g)}},ne.pa=function(){void 0!==Oe&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ct(this,"timeout"),this.abort(8))},ne.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,Ct(this,"complete"),Ct(this,"abort"),js(this))},ne.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),js(this,!0)),ni.Z.M.call(this)},ne.Fa=function(){this.s||(this.F||this.v||this.l?xo(this):this.cb())},ne.cb=function(){xo(this)},ne.ba=function(){try{return 2<fs(this)?this.g.status:-1}catch(i){return-1}},ne.ga=function(){try{return this.g?this.g.responseText:""}catch(i){return""}},ne.Qa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),So(e)}},ne.Da=function(){return this.m},ne.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(ne=Ga.prototype).ma=8,ne.G=1,ne.hb=function(i){try{this.h.info("Origin Trials invoked: "+i)}catch(e){}},ne.Ha=function(i){if(this.m)if(this.m=null,1==this.G){if(!i){this.V=Math.floor(1e5*Math.random()),i=this.V++;const c=new Wn(this,this.h,i,void 0);let g=this.s;if(this.P&&(g?(g=un(g),_i(g,this.P)):g=this.P),null===this.o&&(c.H=g),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var o=this.l[t];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Ta(this,c,e),ye(t=Yn(this.F),"RID",i),ye(t,"CVER",22),this.D&&ye(t,"X-HTTP-Session-Id",this.D),Da(this,t),this.o&&g&&Hs(t,this.o,g),hr(this.i,c),this.Ra&&ye(t,"TYPE","init"),this.ja?(ye(t,"$req",e),ye(t,"SID","null"),c.$=!0,Ps(c,t,null)):Ps(c,t,e),this.G=2}}else 3==this.G&&(i?Ia(this,i):0==this.l.length||qe(this.i)||Ia(this))},ne.Ga=function(){if(this.u=null,gi(this),this.$&&!(this.L||null==this.g||0>=this.O)){var i=2*this.O;this.h.info("BP detection timer enabled: "+i),this.B=bt(St(this.bb,this),i)}},ne.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,De(10),Is(this),gi(this))},ne.ab=function(){null!=this.v&&(this.v=null,Is(this),ki(this),De(19))},ne.jb=function(i){i?(this.h.info("Successfully pinged google.com"),De(2)):(this.h.info("Failed to ping google.com"),De(1))},(ne=za.prototype).xa=function(){},ne.wa=function(){},ne.va=function(){},ne.ua=function(){},ne.Oa=function(){},Oo.prototype.g=function(i,e){return new Ns(i,e)},Wt(Ns,Zt),Ns.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var i=this.g,e=this.l,t=this.h||void 0;i.Wa&&(i.h.info("Origin Trials enabled."),Rr(St(i.hb,i,e))),De(0),i.W=e,i.aa=t||{},i.N=i.X,i.F=Ii(i,null,i.W),Wa(i)},Ns.prototype.close=function(){bi(this.g)},Ns.prototype.u=function(i){if("string"==typeof i){var e={};e.__data__=i,Qo(this.g,e)}else this.v?((e={}).__data__=lr(i),Qo(this.g,e)):Qo(this.g,i)},Ns.prototype.M=function(){this.g.j=null,delete this.j,bi(this.g),delete this.g,Ns.Z.M.call(this)},Wt($l,ls),Wt(Fi,$i),Wt(Ts,za),Ts.prototype.xa=function(){Ct(this.g,"a")},Ts.prototype.wa=function(i){Ct(this.g,new $l(i))},Ts.prototype.va=function(i){Ct(this.g,new Fi(i))},Ts.prototype.ua=function(){Ct(this.g,"b")},Oo.prototype.createWebChannel=Oo.prototype.g,Ns.prototype.send=Ns.prototype.u,Ns.prototype.open=Ns.prototype.m,Ns.prototype.close=Ns.prototype.close,_t.NO_ERROR=0,_t.TIMEOUT=8,_t.HTTP_ERROR=6,Ut.COMPLETE="complete",wn.EventType=Si,Si.OPEN="a",Si.CLOSE="b",Si.ERROR="c",Si.MESSAGE="d",Zt.prototype.listen=Zt.prototype.N,ni.prototype.listenOnce=ni.prototype.O,ni.prototype.getLastError=ni.prototype.La,ni.prototype.getLastErrorCode=ni.prototype.Da,ni.prototype.getStatus=ni.prototype.ba,ni.prototype.getResponseJson=ni.prototype.Qa,ni.prototype.getResponseText=ni.prototype.ga,ni.prototype.send=ni.prototype.ea;var $s=Dt.createWebChannelTransport=function(){return new Oo},S=Dt.getStatEventTarget=function(){return xr()},x=Dt.ErrorCode=_t,Q=Dt.EventType=Ut,ve=Dt.Event=vi,Je=Dt.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},pn=Dt.FetchXmlHttpFactory=Bs,Cr=Dt.WebChannel=wn,zi=Dt.XhrIo=ni;const ri="@firebase/firestore";class yi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}yi.UNAUTHENTICATED=new yi(null),yi.GOOGLE_CREDENTIALS=new yi("google-credentials-uid"),yi.FIRST_PARTY=new yi("first-party-uid"),yi.MOCK_USER=new yi("mock-user");let ps="9.6.11";const No=new nt.Yd("@firebase/firestore");function Eo(){return No.logLevel}function Nt(i,...e){if(No.logLevel<=nt.in.DEBUG){const t=e.map(ro);No.debug(`Firestore (${ps}): ${i}`,...t)}}function Gr(i,...e){if(No.logLevel<=nt.in.ERROR){const t=e.map(ro);No.error(`Firestore (${ps}): ${i}`,...t)}}function no(i,...e){if(No.logLevel<=nt.in.WARN){const t=e.map(ro);No.warn(`Firestore (${ps}): ${i}`,...t)}}function ro(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch(t){return i}}function T(i="Unexpected state"){const e=`FIRESTORE (${ps}) INTERNAL ASSERTION FAILED: `+i;throw Gr(e),new Error(e)}function I(i,e){i||T()}function R(i,e){return i}const O={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class q extends Ye.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ue{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Te{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class mt{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(yi.UNAUTHENTICATED))}shutdown(){}}class nn{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Ir{constructor(e){this.t=e,this.currentUser=yi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var o=this;let c=this.i;const g=ee=>this.i!==c?(c=this.i,t(ee)):Promise.resolve();let w=new ue;this.o=()=>{this.i++,this.currentUser=this.u(),w.resolve(),w=new ue,e.enqueueRetryable(()=>g(this.currentUser))};const P=()=>{const ee=w;e.enqueueRetryable((0,ke.Z)(function*(){yield ee.promise,yield g(o.currentUser)}))},Y=ee=>{Nt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=ee,this.auth.addAuthTokenListener(this.o),P()};this.t.onInit(ee=>Y(ee)),setTimeout(()=>{if(!this.auth){const ee=this.t.getImmediate({optional:!0});ee?Y(ee):(Nt("FirebaseAuthCredentialsProvider","Auth not yet detected"),w.resolve(),w=new ue)}},0),P()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(o=>this.i!==e?(Nt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(I("string"==typeof o.accessToken),new Te(o.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return I(null===e||"string"==typeof e),new yi(e)}}class Dn{constructor(e,t,o){this.type="FirstParty",this.user=yi.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const c=e.auth.getAuthHeaderValueForFirstParty([]);c&&this.headers.set("Authorization",c),o&&this.headers.set("X-Goog-Iam-Authorization-Token",o)}}class Wr{constructor(e,t,o){this.h=e,this.l=t,this.m=o}getToken(){return Promise.resolve(new Dn(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(yi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class wr{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Gs{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const o=g=>{null!=g.error&&Nt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${g.error.message}`);const w=g.token!==this.p;return this.p=g.token,Nt("FirebaseAppCheckTokenProvider",`Received ${w?"new":"existing"} token.`),w?t(g.token):Promise.resolve()};this.o=g=>{e.enqueueRetryable(()=>o(g))};const c=g=>{Nt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=g,this.appCheck.addTokenListener(this.o)};this.g.onInit(g=>c(g)),setTimeout(()=>{if(!this.appCheck){const g=this.g.getImmediate({optional:!0});g?c(g):Nt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(I("string"==typeof t.token),this.p=t.token,new wr(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Qi{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=o=>this.I(o),this.T=o=>t.writeSequenceNumber(o))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function bo(i){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let o=0;o<i;o++)t[o]=Math.floor(256*Math.random());return t}Qi.A=-1;class ko{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let o="";for(;o.length<20;){const c=bo(40);for(let g=0;g<c.length;++g)o.length<20&&c[g]<t&&(o+=e.charAt(c[g]%e.length))}return o}}function jn(i,e){return i<e?-1:i>e?1:0}function il(i,e,t){return i.length===e.length&&i.every((o,c)=>t(o,e[c]))}function Gl(i){return i+"\0"}class Di{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new q(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new q(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new q(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new q(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Di.fromMillis(Date.now())}static fromDate(e){return Di.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),o=Math.floor(1e6*(e-1e3*t));return new Di(t,o)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?jn(this.nanoseconds,e.nanoseconds):jn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class qn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new qn(e)}static min(){return new qn(new Di(0,0))}static max(){return new qn(new Di(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function dc(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function hi(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function Wc(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class Lu{constructor(e,t,o){void 0===t?t=0:t>e.length&&T(),void 0===o?o=e.length-t:o>e.length-t&&T(),this.segments=e,this.offset=t,this.len=o}get length(){return this.len}isEqual(e){return 0===Lu.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Lu?e.forEach(o=>{t.push(o)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,o=this.limit();t<o;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const o=Math.min(e.length,t.length);for(let c=0;c<o;c++){const g=e.get(c),w=t.get(c);if(g<w)return-1;if(g>w)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Hr extends Lu{construct(e,t,o){return new Hr(e,t,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const o of e){if(o.indexOf("//")>=0)throw new q(O.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);t.push(...o.split("/").filter(c=>c.length>0))}return new Hr(t)}static emptyPath(){return new Hr([])}}const hc=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class gs extends Lu{construct(e,t,o){return new gs(e,t,o)}static isValidIdentifier(e){return hc.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),gs.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new gs(["__name__"])}static fromServerFormat(e){const t=[];let o="",c=0;const g=()=>{if(0===o.length)throw new q(O.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(o),o=""};let w=!1;for(;c<e.length;){const P=e[c];if("\\"===P){if(c+1===e.length)throw new q(O.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const Y=e[c+1];if("\\"!==Y&&"."!==Y&&"`"!==Y)throw new q(O.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=Y,c+=2}else"`"===P?(w=!w,c++):"."!==P||w?(o+=P,c++):(g(),c++)}if(g(),w)throw new q(O.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new gs(t)}static emptyPath(){return new gs([])}}class qa{constructor(e){this.fields=e,e.sort(gs.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return il(this.fields,e.fields,(t,o)=>t.isEqual(o))}}class Ti{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Ti(t)}static fromUint8Array(e){const t=function(o){let c="";for(let g=0;g<o.length;++g)c+=String.fromCharCode(o[g]);return c}(e);return new Ti(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let o=0;o<e.length;o++)t[o]=e.charCodeAt(o);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return jn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ti.EMPTY_BYTE_STRING=new Ti("");const Td=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ii(i){if(I(!!i),"string"==typeof i){let e=0;const t=Td.exec(i);if(I(!!t),t[1]){let c=t[1];c=(c+"000000000").substr(0,9),e=Number(c)}const o=new Date(i);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:Ai(i.seconds),nanos:Ai(i.nanos)}}function Ai(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function jo(i){return"string"==typeof i?Ti.fromBase64String(i):Ti.fromUint8Array(i)}function pc(i){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==i?void 0:i.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function uu(i){const e=i.mapValue.fields.__previous_value__;return pc(e)?uu(e):e}function ms(i){const e=ii(i.mapValue.fields.__local_write_time__.timestampValue);return new Di(e.seconds,e.nanos)}class Ho{constructor(e,t,o,c,g,w,P,Y){this.databaseId=e,this.appId=t,this.persistenceKey=o,this.host=c,this.ssl=g,this.forceLongPolling=w,this.autoDetectLongPolling=P,this.useFetchStreams=Y}}class pa{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new pa("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof pa&&e.projectId===this.projectId&&e.database===this.database}}function Co(i){return null==i}function Ws(i){return 0===i&&1/i==-1/0}function Jo(i){return"number"==typeof i&&Number.isInteger(i)&&!Ws(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}class Yt{constructor(e){this.path=e}static fromPath(e){return new Yt(Hr.fromString(e))}static fromName(e){return new Yt(Hr.fromString(e).popFirst(5))}static empty(){return new Yt(Hr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Hr.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Hr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Yt(new Hr(e.slice()))}}const Wl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Vu={nullValue:"NULL_VALUE"};function Sa(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?pc(i)?4:na(i)?9:10:T()}function so(i,e){if(i===e)return!0;const t=Sa(i);if(t!==Sa(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return ms(i).isEqual(ms(e));case 3:return function(o,c){if("string"==typeof o.timestampValue&&"string"==typeof c.timestampValue&&o.timestampValue.length===c.timestampValue.length)return o.timestampValue===c.timestampValue;const g=ii(o.timestampValue),w=ii(c.timestampValue);return g.seconds===w.seconds&&g.nanos===w.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return c=e,jo(i.bytesValue).isEqual(jo(c.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(o,c){return Ai(o.geoPointValue.latitude)===Ai(c.geoPointValue.latitude)&&Ai(o.geoPointValue.longitude)===Ai(c.geoPointValue.longitude)}(i,e);case 2:return function(o,c){if("integerValue"in o&&"integerValue"in c)return Ai(o.integerValue)===Ai(c.integerValue);if("doubleValue"in o&&"doubleValue"in c){const g=Ai(o.doubleValue),w=Ai(c.doubleValue);return g===w?Ws(g)===Ws(w):isNaN(g)&&isNaN(w)}return!1}(i,e);case 9:return il(i.arrayValue.values||[],e.arrayValue.values||[],so);case 10:return function(o,c){const g=o.mapValue.fields||{},w=c.mapValue.fields||{};if(dc(g)!==dc(w))return!1;for(const P in g)if(g.hasOwnProperty(P)&&(void 0===w[P]||!so(g[P],w[P])))return!1;return!0}(i,e);default:return T()}var c}function As(i,e){return void 0!==(i.values||[]).find(t=>so(t,e))}function xa(i,e){if(i===e)return 0;const t=Sa(i),o=Sa(e);if(t!==o)return jn(t,o);switch(t){case 0:case 9007199254740991:return 0;case 1:return jn(i.booleanValue,e.booleanValue);case 2:return function(c,g){const w=Ai(c.integerValue||c.doubleValue),P=Ai(g.integerValue||g.doubleValue);return w<P?-1:w>P?1:w===P?0:isNaN(w)?isNaN(P)?0:-1:1}(i,e);case 3:return sl(i.timestampValue,e.timestampValue);case 4:return sl(ms(i),ms(e));case 5:return jn(i.stringValue,e.stringValue);case 6:return function(c,g){const w=jo(c),P=jo(g);return w.compareTo(P)}(i.bytesValue,e.bytesValue);case 7:return function(c,g){const w=c.split("/"),P=g.split("/");for(let Y=0;Y<w.length&&Y<P.length;Y++){const ee=jn(w[Y],P[Y]);if(0!==ee)return ee}return jn(w.length,P.length)}(i.referenceValue,e.referenceValue);case 8:return function(c,g){const w=jn(Ai(c.latitude),Ai(g.latitude));return 0!==w?w:jn(Ai(c.longitude),Ai(g.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(c,g){const w=c.values||[],P=g.values||[];for(let Y=0;Y<w.length&&Y<P.length;++Y){const ee=xa(w[Y],P[Y]);if(ee)return ee}return jn(w.length,P.length)}(i.arrayValue,e.arrayValue);case 10:return function(c,g){const w=c.fields||{},P=Object.keys(w),Y=g.fields||{},ee=Object.keys(Y);P.sort(),ee.sort();for(let pe=0;pe<P.length&&pe<ee.length;++pe){const Re=jn(P[pe],ee[pe]);if(0!==Re)return Re;const ht=xa(w[P[pe]],Y[ee[pe]]);if(0!==ht)return ht}return jn(P.length,ee.length)}(i.mapValue,e.mapValue);default:throw T()}}function sl(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return jn(i,e);const t=ii(i),o=ii(e),c=jn(t.seconds,o.seconds);return 0!==c?c:jn(t.nanos,o.nanos)}function ol(i){return Xo(i)}function Xo(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(o){const c=ii(o);return`time(${c.seconds},${c.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?jo(i.bytesValue).toBase64():"referenceValue"in i?Yt.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(e=i.geoPointValue).latitude},${e.longitude})`:"arrayValue"in i?function(o){let c="[",g=!0;for(const w of o.values||[])g?g=!1:c+=",",c+=Xo(w);return c+"]"}(i.arrayValue):"mapValue"in i?function(o){const c=Object.keys(o.fields||{}).sort();let g="{",w=!0;for(const P of c)w?w=!1:g+=",",g+=`${P}:${Xo(o.fields[P])}`;return g+"}"}(i.mapValue):T();var e}function ea(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Uu(i){return!!i&&"integerValue"in i}function al(i){return!!i&&"arrayValue"in i}function ta(i){return!!i&&"nullValue"in i}function Ma(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function oo(i){return!!i&&"mapValue"in i}function ll(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return hi(i.mapValue.fields,(t,o)=>e.mapValue.fields[t]=ll(o)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ll(i.arrayValue.values[t]);return e}return Object.assign({},i)}function na(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function bl(i){return"nullValue"in i?Vu:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?ea(pa.empty(),Yt.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:T()}function ga(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?ea(pa.empty(),Yt.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?Wl:T()}function Cl(i,e){return void 0===i?e:void 0===e||xa(i,e)>0?i:e}function cu(i,e){return void 0===i?e:void 0===e||xa(i,e)<0?i:e}class k{constructor(e){this.value=e}static empty(){return new k({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let o=0;o<e.length-1;++o)if(t=(t.mapValue.fields||{})[e.get(o)],!oo(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ll(t)}setAll(e){let t=gs.emptyPath(),o={},c=[];e.forEach((w,P)=>{if(!t.isImmediateParentOf(P)){const Y=this.getFieldsMap(t);this.applyChanges(Y,o,c),o={},c=[],t=P.popLast()}w?o[P.lastSegment()]=ll(w):c.push(P.lastSegment())});const g=this.getFieldsMap(t);this.applyChanges(g,o,c)}delete(e){const t=this.field(e.popLast());oo(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return so(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let o=0;o<e.length;++o){let c=t.mapValue.fields[e.get(o)];oo(c)&&c.mapValue.fields||(c={mapValue:{fields:{}}},t.mapValue.fields[e.get(o)]=c),t=c}return t.mapValue.fields}applyChanges(e,t,o){hi(t,(c,g)=>e[c]=g);for(const c of o)delete e[c]}clone(){return new k(ll(this.value))}}function H(i){const e=[];return hi(i.fields,(t,o)=>{const c=new gs([t]);if(oo(o)){const g=H(o.mapValue).fields;if(0===g.length)e.push(c);else for(const w of g)e.push(c.child(w))}else e.push(c)}),new qa(e)}class X{constructor(e,t,o,c,g,w){this.key=e,this.documentType=t,this.version=o,this.readTime=c,this.data=g,this.documentState=w}static newInvalidDocument(e){return new X(e,0,qn.min(),qn.min(),k.empty(),0)}static newFoundDocument(e,t,o){return new X(e,1,t,qn.min(),o,0)}static newNoDocument(e,t){return new X(e,2,t,qn.min(),k.empty(),0)}static newUnknownDocument(e,t){return new X(e,3,t,qn.min(),k.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=k.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=k.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof X&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new X(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class me{constructor(e,t,o,c){this.indexId=e,this.collectionGroup=t,this.fields=o,this.indexState=c}}function Ge(i){return i.fields.find(e=>2===e.kind)}function et(i){return i.fields.filter(e=>2!==e.kind)}me.UNKNOWN_ID=-1;class Bt{constructor(e,t){this.fieldPath=e,this.kind=t}}class mn{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new mn(0,Er.min())}}function Mn(i,e){const t=i.toTimestamp().seconds,o=i.toTimestamp().nanoseconds+1,c=qn.fromTimestamp(1e9===o?new Di(t+1,0):new Di(t,o));return new Er(c,Yt.empty(),e)}function or(i){return new Er(i.readTime,i.key,-1)}class Er{constructor(e,t,o){this.readTime=e,this.documentKey=t,this.largestBatchId=o}static min(){return new Er(qn.min(),Yt.empty(),-1)}static max(){return new Er(qn.max(),Yt.empty(),-1)}}function gr(i,e){let t=i.readTime.compareTo(e.readTime);return 0!==t?t:(t=Yt.comparator(i.documentKey,e.documentKey),0!==t?t:jn(i.largestBatchId,e.largestBatchId))}class ys{constructor(e,t=null,o=[],c=[],g=null,w=null,P=null){this.path=e,this.collectionGroup=t,this.orderBy=o,this.filters=c,this.limit=g,this.startAt=w,this.endAt=P,this.P=null}}function Li(i,e=null,t=[],o=[],c=null,g=null,w=null){return new ys(i,e,t,o,c,g,w)}function $o(i){const e=R(i);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(o=>{return(c=o).field.canonicalString()+c.op.toString()+ol(c.value);var c}).join(","),t+="|ob:",t+=e.orderBy.map(o=>{return(c=o).field.canonicalString()+c.dir;var c}).join(","),Co(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(o=>ol(o)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(o=>ol(o)).join(",")),e.P=t}return e.P}function ao(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let c=0;c<i.orderBy.length;c++)if(!ju(i.orderBy[c],e.orderBy[c]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let c=0;c<i.filters.length;c++)if((t=i.filters[c]).op!==(o=e.filters[c]).op||!t.field.isEqual(o.field)||!so(t.value,o.value))return!1;var t,o;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!Sd(i.startAt,e.startAt)&&Sd(i.endAt,e.endAt)}function lo(i){return Yt.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function Go(i,e){return i.filters.filter(t=>t instanceof Ss&&t.field.isEqual(e))}function ra(i,e,t){let o,c=!0;for(const g of Go(i,e)){let w,P=!0;switch(g.op){case"<":case"<=":w=bl(g.value);break;case"==":case"in":case">=":w=g.value;break;case">":w=g.value,P=!1;break;case"!=":case"not-in":w=Vu}Cl(o,w)===w&&(o=w,c=P)}if(null!==t)for(let g=0;g<i.orderBy.length;++g)if(i.orderBy[g].field.isEqual(e)){const w=t.position[g];Cl(o,w)===w&&(o=w,c=t.inclusive);break}return{value:o,inclusive:c}}function du(i,e,t){let o,c=!0;for(const g of Go(i,e)){let w,P=!0;switch(g.op){case">=":case">":w=ga(g.value),P=!1;break;case"==":case"in":case"<=":w=g.value;break;case"<":w=g.value,P=!1;break;case"!=":case"not-in":w=Wl}cu(o,w)===w&&(o=w,c=P)}if(null!==t)for(let g=0;g<i.orderBy.length;++g)if(i.orderBy[g].field.isEqual(e)){const w=t.position[g];cu(o,w)===w&&(o=w,c=t.inclusive);break}return{value:o,inclusive:c}}class Ss extends class{}{constructor(e,t,o){super(),this.field=e,this.op=t,this.value=o}static create(e,t,o){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,o):new hu(e,t,o):"array-contains"===t?new ch(e,o):"in"===t?new Dl(e,o):"not-in"===t?new Bu(e,o):"array-contains-any"===t?new zc(e,o):new Ss(e,t,o)}static V(e,t,o){return"in"===t?new Il(e,o):new Ad(e,o)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(xa(t,this.value)):null!==t&&Sa(this.value)===Sa(t)&&this.v(xa(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return T()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class hu extends Ss{constructor(e,t,o){super(e,t,o),this.key=Yt.fromName(o.referenceValue)}matches(e){const t=Yt.comparator(e.key,this.key);return this.v(t)}}class Il extends Ss{constructor(e,t){super(e,"in",t),this.keys=fu(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Ad extends Ss{constructor(e,t){super(e,"not-in",t),this.keys=fu(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function fu(i,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(o=>Yt.fromName(o.referenceValue))}class ch extends Ss{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return al(t)&&As(t.arrayValue,this.value)}}class Dl extends Ss{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&As(this.value.arrayValue,t)}}class Bu extends Ss{constructor(e,t){super(e,"not-in",t)}matches(e){if(As(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!As(this.value.arrayValue,t)}}class zc extends Ss{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!al(t)||!t.arrayValue.values)&&t.arrayValue.values.some(o=>As(this.value.arrayValue,o))}}class Ka{constructor(e,t){this.position=e,this.inclusive=t}}class zl{constructor(e,t="asc"){this.field=e,this.dir=t}}function ju(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}function dh(i,e,t){let o=0;for(let c=0;c<i.position.length;c++){const g=e[c],w=i.position[c];if(o=g.field.isKeyField()?Yt.comparator(Yt.fromName(w.referenceValue),t.key):xa(w,t.data.field(g.field)),"desc"===g.dir&&(o*=-1),0!==o)break}return o}function Sd(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!so(i.position[t],e.position[t]))return!1;return!0}class Za{constructor(e,t=null,o=[],c=[],g=null,w="F",P=null,Y=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=o,this.filters=c,this.limit=g,this.limitType=w,this.startAt=P,this.endAt=Y,this.D=null,this.C=null}}function gc(i,e,t,o,c,g,w,P){return new Za(i,e,t,o,c,g,w,P)}function Ra(i){return new Za(i)}function Tl(i){return!Co(i.limit)&&"F"===i.limitType}function ma(i){return!Co(i.limit)&&"L"===i.limitType}function ul(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function ql(i){for(const e of i.filters)if(e.S())return e.field;return null}function qc(i){return null!==i.collectionGroup}function cl(i){const e=R(i);if(null===e.D){e.D=[];const t=ql(e),o=ul(e);if(null!==t&&null===o)t.isKeyField()||e.D.push(new zl(t)),e.D.push(new zl(gs.keyField(),"asc"));else{let c=!1;for(const g of e.explicitOrderBy)e.D.push(g),g.field.isKeyField()&&(c=!0);if(!c){const g=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new zl(gs.keyField(),g))}}}return e.D}function uo(i){const e=R(i);if(!e.C)if("F"===e.limitType)e.C=Li(e.path,e.collectionGroup,cl(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const g of cl(e))t.push(new zl(g.field,"desc"===g.dir?"asc":"desc"));const o=e.endAt?new Ka(e.endAt.position,!e.endAt.inclusive):null,c=e.startAt?new Ka(e.startAt.position,!e.startAt.inclusive):null;e.C=Li(e.path,e.collectionGroup,t,e.filters,e.limit,o,c)}return e.C}function mc(i,e,t){return new Za(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function pu(i,e){return ao(uo(i),uo(e))&&i.limitType===e.limitType}function Al(i){return`${$o(uo(i))}|lt:${i.limitType}`}function gu(i){return`Query(target=${function Pa(i){let e=i.path.canonicalString();return null!==i.collectionGroup&&(e+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(e+=`, filters: [${i.filters.map(t=>{return`${(o=t).field.canonicalString()} ${o.op} ${ol(o.value)}`;var o}).join(", ")}]`),Co(i.limit)||(e+=", limit: "+i.limit),i.orderBy.length>0&&(e+=`, orderBy: [${i.orderBy.map(t=>{return`${(o=t).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),i.startAt&&(e+=", startAt: ",e+=i.startAt.inclusive?"b:":"a:",e+=i.startAt.position.map(t=>ol(t)).join(",")),i.endAt&&(e+=", endAt: ",e+=i.endAt.inclusive?"a:":"b:",e+=i.endAt.position.map(t=>ol(t)).join(",")),`Target(${e})`}(uo(i))}; limitType=${i.limitType})`}function Kc(i,e){return e.isFoundDocument()&&function(t,o){const c=o.key.path;return null!==t.collectionGroup?o.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(c):Yt.isDocumentKey(t.path)?t.path.isEqual(c):t.path.isImmediateParentOf(c)}(i,e)&&function(t,o){for(const c of t.explicitOrderBy)if(!c.field.isKeyField()&&null===o.data.field(c.field))return!1;return!0}(i,e)&&function(t,o){for(const c of t.filters)if(!c.matches(o))return!1;return!0}(i,e)&&(o=e,!((t=i).startAt&&!function(c,g,w){const P=dh(c,g,w);return c.inclusive?P<=0:P<0}(t.startAt,cl(t),o)||t.endAt&&!function(c,g,w){const P=dh(c,g,w);return c.inclusive?P>=0:P>0}(t.endAt,cl(t),o)));var t,o}function xd(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function Md(i){return(e,t)=>{let o=!1;for(const c of cl(i)){const g=Hu(c,e,t);if(0!==g)return g;o=o||c.field.isKeyField()}return 0}}function Hu(i,e,t){const o=i.field.isKeyField()?Yt.comparator(e.key,t.key):function(c,g,w){const P=g.data.field(c),Y=w.data.field(c);return null!==P&&null!==Y?xa(P,Y):T()}(i.field,e,t);switch(i.dir){case"asc":return o;case"desc":return-1*o;default:return T()}}function $u(i,e){if(i.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ws(e)?"-0":e}}function ya(i){return{integerValue:""+i}}function mu(i,e){return Jo(e)?ya(e):$u(i,e)}class dl{constructor(){this._=void 0}}function hl(i,e,t){return i instanceof Kl?function(o,c){const g={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return c&&(g.fields.__previous_value__=c),{mapValue:g}}(t,e):i instanceof fl?Zl(i,e):i instanceof Oa?Pd(i,e):function(o,c){const g=hh(o,c),w=pl(g)+pl(o.k);return Uu(g)&&Uu(o.k)?ya(w):$u(o.M,w)}(i,e)}function yu(i,e,t){return i instanceof fl?Zl(i,e):i instanceof Oa?Pd(i,e):t}function hh(i,e){return i instanceof Io?Uu(t=e)||(o=t)&&"doubleValue"in o?e:{integerValue:0}:null;var o,t}class Kl extends dl{}class fl extends dl{constructor(e){super(),this.elements=e}}function Zl(i,e){const t=fh(e);for(const o of i.elements)t.some(c=>so(c,o))||t.push(o);return{arrayValue:{values:t}}}class Oa extends dl{constructor(e){super(),this.elements=e}}function Pd(i,e){let t=fh(e);for(const o of i.elements)t=t.filter(c=>!so(c,o));return{arrayValue:{values:t}}}class Io extends dl{constructor(e,t){super(),this.M=e,this.k=t}}function pl(i){return Ai(i.integerValue||i.doubleValue)}function fh(i){return al(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class Sl{constructor(e,t){this.field=e,this.transform=t}}class ia{constructor(e,t){this.version=e,this.transformResults=t}}class Qr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Qr}static exists(e){return new Qr(void 0,e)}static updateTime(e){return new Qr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ml(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class _u{}function yc(i,e,t){i instanceof Pl?function(o,c,g){const w=o.value.clone(),P=Zc(o.fieldTransforms,c,g.transformResults);w.setAll(P),c.convertToFoundDocument(g.version,w).setHasCommittedMutations()}(i,e,t):i instanceof Ya?function(o,c,g){if(!Ml(o.precondition,c))return void c.convertToUnknownDocument(g.version);const w=Zc(o.fieldTransforms,c,g.transformResults),P=c.data;P.setAll(wc(o)),P.setAll(w),c.convertToFoundDocument(g.version,P).setHasCommittedMutations()}(i,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function _c(i,e,t){var c;i instanceof Pl?function(o,c,g){if(!Ml(o.precondition,c))return;const w=o.value.clone(),P=Wu(o.fieldTransforms,g,c);w.setAll(P),c.convertToFoundDocument(Gu(c),w).setHasLocalMutations()}(i,e,t):i instanceof Ya?function(o,c,g){if(!Ml(o.precondition,c))return;const w=Wu(o.fieldTransforms,g,c),P=c.data;P.setAll(wc(o)),P.setAll(w),c.convertToFoundDocument(Gu(c),P).setHasLocalMutations()}(i,e,t):Ml(i.precondition,c=e)&&c.convertToNoDocument(qn.min())}function Xh(i,e){let t=null;for(const o of i.fieldTransforms){const c=e.data.field(o.field),g=hh(o.transform,c||null);null!=g&&(null==t&&(t=k.empty()),t.set(o.field,g))}return t||null}function vc(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(o=e.fieldTransforms,!!(void 0===(t=i.fieldTransforms)&&void 0===o||t&&o&&il(t,o,(c,g)=>function xl(i,e){return i.field.isEqual(e.field)&&(o=e.transform,(t=i.transform)instanceof fl&&o instanceof fl||t instanceof Oa&&o instanceof Oa?il(t.elements,o.elements,so):t instanceof Io&&o instanceof Io?so(t.k,o.k):t instanceof Kl&&o instanceof Kl);var t,o}(c,g))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var t,o}function Gu(i){return i.isFoundDocument()?i.version:qn.min()}class Pl extends _u{constructor(e,t,o,c=[]){super(),this.key=e,this.value=t,this.precondition=o,this.fieldTransforms=c,this.type=0}}class Ya extends _u{constructor(e,t,o,c,g=[]){super(),this.key=e,this.data=t,this.fieldMask=o,this.precondition=c,this.fieldTransforms=g,this.type=1}}function wc(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const o=i.data.field(t);e.set(t,o)}}),e}function Zc(i,e,t){const o=new Map;I(i.length===t.length);for(let c=0;c<t.length;c++){const g=i[c],w=g.transform,P=e.data.field(g.field);o.set(g.field,yu(w,P,t[c]))}return o}function Wu(i,e,t){const o=new Map;for(const c of i){const g=c.transform,w=t.data.field(c.field);o.set(c.field,hl(g,w,e))}return o}class Rl extends _u{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class zu extends _u{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class ph{constructor(e){this.count=e}}var is,Ur;function Ec(i){switch(i){default:return T();case O.CANCELLED:case O.UNKNOWN:case O.DEADLINE_EXCEEDED:case O.RESOURCE_EXHAUSTED:case O.INTERNAL:case O.UNAVAILABLE:case O.UNAUTHENTICATED:return!1;case O.INVALID_ARGUMENT:case O.NOT_FOUND:case O.ALREADY_EXISTS:case O.PERMISSION_DENIED:case O.FAILED_PRECONDITION:case O.ABORTED:case O.OUT_OF_RANGE:case O.UNIMPLEMENTED:case O.DATA_LOSS:return!0}}function qu(i){if(void 0===i)return Gr("GRPC error has no .code"),O.UNKNOWN;switch(i){case is.OK:return O.OK;case is.CANCELLED:return O.CANCELLED;case is.UNKNOWN:return O.UNKNOWN;case is.DEADLINE_EXCEEDED:return O.DEADLINE_EXCEEDED;case is.RESOURCE_EXHAUSTED:return O.RESOURCE_EXHAUSTED;case is.INTERNAL:return O.INTERNAL;case is.UNAVAILABLE:return O.UNAVAILABLE;case is.UNAUTHENTICATED:return O.UNAUTHENTICATED;case is.INVALID_ARGUMENT:return O.INVALID_ARGUMENT;case is.NOT_FOUND:return O.NOT_FOUND;case is.ALREADY_EXISTS:return O.ALREADY_EXISTS;case is.PERMISSION_DENIED:return O.PERMISSION_DENIED;case is.FAILED_PRECONDITION:return O.FAILED_PRECONDITION;case is.ABORTED:return O.ABORTED;case is.OUT_OF_RANGE:return O.OUT_OF_RANGE;case is.UNIMPLEMENTED:return O.UNIMPLEMENTED;case is.DATA_LOSS:return O.DATA_LOSS;default:return T()}}(Ur=is||(is={}))[Ur.OK=0]="OK",Ur[Ur.CANCELLED=1]="CANCELLED",Ur[Ur.UNKNOWN=2]="UNKNOWN",Ur[Ur.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ur[Ur.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ur[Ur.NOT_FOUND=5]="NOT_FOUND",Ur[Ur.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ur[Ur.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ur[Ur.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ur[Ur.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ur[Ur.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ur[Ur.ABORTED=10]="ABORTED",Ur[Ur.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ur[Ur.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ur[Ur.INTERNAL=13]="INTERNAL",Ur[Ur.UNAVAILABLE=14]="UNAVAILABLE",Ur[Ur.DATA_LOSS=15]="DATA_LOSS";class Na{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),o=this.inner[t];if(void 0!==o)for(const[c,g]of o)if(this.equalsFn(c,e))return g}has(e){return void 0!==this.get(e)}set(e,t){const o=this.mapKeyFn(e),c=this.inner[o];if(void 0===c)return this.inner[o]=[[e,t]],void this.innerSize++;for(let g=0;g<c.length;g++)if(this.equalsFn(c[g][0],e))return void(c[g]=[e,t]);c.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),o=this.inner[t];if(void 0===o)return!1;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return 1===o.length?delete this.inner[t]:o.splice(c,1),this.innerSize--,!0;return!1}forEach(e){hi(this.inner,(t,o)=>{for(const[c,g]of o)e(c,g)})}isEmpty(){return Wc(this.inner)}size(){return this.innerSize}}class Ji{constructor(e,t){this.comparator=e,this.root=t||Fr.EMPTY}insert(e,t){return new Ji(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Fr.BLACK,null,null))}remove(e){return new Ji(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Fr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const o=this.comparator(e,t.key);if(0===o)return t.value;o<0?t=t.left:o>0&&(t=t.right)}return null}indexOf(e){let t=0,o=this.root;for(;!o.isEmpty();){const c=this.comparator(e,o.key);if(0===c)return t+o.left.size;c<0?o=o.left:(t+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,o)=>(e(t,o),!1))}toString(){const e=[];return this.inorderTraversal((t,o)=>(e.push(`${t}:${o}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new vu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new vu(this.root,e,this.comparator,!1)}getReverseIterator(){return new vu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new vu(this.root,e,this.comparator,!0)}}class vu{constructor(e,t,o,c){this.isReverse=c,this.nodeStack=[];let g=1;for(;!e.isEmpty();)if(g=t?o(e.key,t):1,t&&c&&(g*=-1),g<0)e=this.isReverse?e.left:e.right;else{if(0===g){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Fr{constructor(e,t,o,c,g){this.key=e,this.value=t,this.color=null!=o?o:Fr.RED,this.left=null!=c?c:Fr.EMPTY,this.right=null!=g?g:Fr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,o,c,g){return new Fr(null!=e?e:this.key,null!=t?t:this.value,null!=o?o:this.color,null!=c?c:this.left,null!=g?g:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,o){let c=this;const g=o(e,c.key);return c=g<0?c.copy(null,null,null,c.left.insert(e,t,o),null):0===g?c.copy(null,t,null,null,null):c.copy(null,null,null,null,c.right.insert(e,t,o)),c.fixUp()}removeMin(){if(this.left.isEmpty())return Fr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let o,c=this;if(t(e,c.key)<0)c.left.isEmpty()||c.left.isRed()||c.left.left.isRed()||(c=c.moveRedLeft()),c=c.copy(null,null,null,c.left.remove(e,t),null);else{if(c.left.isRed()&&(c=c.rotateRight()),c.right.isEmpty()||c.right.isRed()||c.right.left.isRed()||(c=c.moveRedRight()),0===t(e,c.key)){if(c.right.isEmpty())return Fr.EMPTY;o=c.right.min(),c=c.copy(o.key,o.value,null,null,c.right.removeMin())}c=c.copy(null,null,null,null,c.right.remove(e,t))}return c.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Fr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Fr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw T();const e=this.left.check();if(e!==this.right.check())throw T();return e+(this.isRed()?0:1)}}Fr.EMPTY=null,Fr.RED=!0,Fr.BLACK=!1,Fr.EMPTY=new class{constructor(){this.size=0}get key(){throw T()}get value(){throw T()}get color(){throw T()}get left(){throw T()}get right(){throw T()}copy(i,e,t,o,c){return this}insert(i,e,t){return new Fr(i,e)}remove(i,e){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Vi{constructor(e){this.comparator=e,this.data=new Ji(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,o)=>(e(t),!1))}forEachInRange(e,t){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const c=o.getNext();if(this.comparator(c.key,e[1])>=0)return;t(c.key)}}forEachWhile(e,t){let o;for(o=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Yl(this.data.getIterator())}getIteratorFrom(e){return new Yl(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(o=>{t=t.add(o)}),t}isEqual(e){if(!(e instanceof Vi)||this.size!==e.size)return!1;const t=this.data.getIterator(),o=e.data.getIterator();for(;t.hasNext();){const c=t.getNext().key,g=o.getNext().key;if(0!==this.comparator(c,g))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Vi(this.comparator);return t.data=e,t}}class Yl{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Fo(i){return i.hasNext()?i.getNext():void 0}const Rd=new Ji(Yt.comparator);function Wo(){return Rd}const Ql=new Ji(Yt.comparator);function Yc(){return Ql}function ka(){return new Na(i=>i.toString(),(i,e)=>i.isEqual(e))}const gh=new Ji(Yt.comparator),mh=new Vi(Yt.comparator);function fi(...i){let e=mh;for(const t of i)e=e.add(t);return e}const wu=new Vi(jn);function ss(){return wu}class Fa{constructor(e,t,o,c,g){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=o,this.documentUpdates=c,this.resolvedLimboDocuments=g}static createSynthesizedRemoteEventForCurrentChange(e,t){const o=new Map;return o.set(e,Qa.createSynthesizedTargetChangeForCurrentChange(e,t)),new Fa(qn.min(),o,ss(),Wo(),fi())}}class Qa{constructor(e,t,o,c,g){this.resumeToken=e,this.current=t,this.addedDocuments=o,this.modifiedDocuments=c,this.removedDocuments=g}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Qa(Ti.EMPTY_BYTE_STRING,t,fi(),fi(),fi())}}class Eu{constructor(e,t,o,c){this.O=e,this.removedTargetIds=t,this.key=o,this.F=c}}class co{constructor(e,t){this.targetId=e,this.$=t}}class Ja{constructor(e,t,o=Ti.EMPTY_BYTE_STRING,c=null){this.state=e,this.targetIds=t,this.resumeToken=o,this.cause=c}}class bc{constructor(){this.B=0,this.L=Ku(),this.U=Ti.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=fi(),t=fi(),o=fi();return this.L.forEach((c,g)=>{switch(g){case 0:e=e.add(c);break;case 2:t=t.add(c);break;case 1:o=o.add(c);break;default:T()}}),new Qa(this.U,this.q,e,t,o)}J(){this.K=!1,this.L=Ku()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class zo{constructor(e){this.nt=e,this.st=new Map,this.it=Wo(),this.rt=Jl(),this.ot=new Vi(jn)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const o=this.lt(t);switch(e.state){case 0:this.ft(t)&&o.W(e.resumeToken);break;case 1:o.tt(),o.G||o.J(),o.W(e.resumeToken);break;case 2:o.tt(),o.G||this.removeTarget(t);break;case 3:this.ft(t)&&(o.et(),o.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),o.W(e.resumeToken));break;default:T()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((o,c)=>{this.ft(c)&&t(c)})}_t(e){const t=e.targetId,o=e.$.count,c=this.wt(t);if(c){const g=c.target;if(lo(g))if(0===o){const w=new Yt(g.path);this.ct(t,w,X.newNoDocument(w,qn.min()))}else I(1===o);else this.gt(t)!==o&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((g,w)=>{const P=this.wt(w);if(P){if(g.current&&lo(P.target)){const Y=new Yt(P.target.path);null!==this.it.get(Y)||this.It(w,Y)||this.ct(w,Y,X.newNoDocument(Y,e))}g.j&&(t.set(w,g.H()),g.J())}});let o=fi();this.rt.forEach((g,w)=>{let P=!0;w.forEachWhile(Y=>{const ee=this.wt(Y);return!ee||2===ee.purpose||(P=!1,!1)}),P&&(o=o.add(g))}),this.it.forEach((g,w)=>w.setReadTime(e));const c=new Fa(e,t,this.ot,this.it,o);return this.it=Wo(),this.rt=Jl(),this.ot=new Vi(jn),c}at(e,t){if(!this.ft(e))return;const o=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,o),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,o){if(!this.ft(e))return;const c=this.lt(e);this.It(e,t)?c.Y(t,1):c.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),o&&(this.it=this.it.insert(t,o))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new bc,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new Vi(jn),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Nt("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new bc),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function Jl(){return new Ji(Yt.comparator)}function Ku(){return new Ji(Yt.comparator)}const Od={asc:"ASCENDING",desc:"DESCENDING"},ho={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class bu{constructor(e,t){this.databaseId=e,this.N=t}}function sa(i,e){return i.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Cu(i,e){return i.N?e.toBase64():e.toUint8Array()}function _a(i,e){return sa(i,e.toTimestamp())}function Kr(i){return I(!!i),qn.fromTimestamp(function(e){const t=ii(e);return new Di(t.seconds,t.nanos)}(i))}function Zu(i,e){return(t=i,new Hr(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Qc(i){const e=Hr.fromString(i);return I(tn(e)),e}function oa(i,e){return Zu(i.databaseId,e.path)}function gl(i,e){const t=Qc(e);if(t.get(1)!==i.databaseId.projectId)throw new q(O.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new q(O.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new Yt(Ic(t))}function Cc(i,e){return Zu(i.databaseId,e)}function zs(i){const e=Qc(i);return 4===e.length?Hr.emptyPath():Ic(e)}function ml(i){return new Hr(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function Ic(i){return I(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function Nd(i,e,t){return{name:oa(i,e),fields:t.value.mapValue.fields}}function Xa(i,e,t){const o=gl(i,e.name),c=Kr(e.updateTime),g=new k({mapValue:{fields:e.fields}}),w=X.newFoundDocument(o,c,g);return t&&w.setHasCommittedMutations(),t?w.setHasCommittedMutations():w}function yl(i,e){let t;if(e instanceof Pl)t={update:Nd(i,e.key,e.value)};else if(e instanceof Rl)t={delete:oa(i,e.key)};else if(e instanceof Ya)t={update:Nd(i,e.key,e.data),updateMask:ft(e.fieldMask)};else{if(!(e instanceof zu))return T();t={verify:oa(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(o=>function(c,g){const w=g.transform;if(w instanceof Kl)return{fieldPath:g.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(w instanceof fl)return{fieldPath:g.field.canonicalString(),appendMissingElements:{values:w.elements}};if(w instanceof Oa)return{fieldPath:g.field.canonicalString(),removeAllFromArray:{values:w.elements}};if(w instanceof Io)return{fieldPath:g.field.canonicalString(),increment:w.k};throw T()}(0,o))),e.precondition.isNone||(t.currentDocument=void 0!==(c=e.precondition).updateTime?{updateTime:_a(i,c.updateTime)}:void 0!==c.exists?{exists:c.exists}:T()),t;var c}function Xl(i,e){const t=e.currentDocument?void 0!==(c=e.currentDocument).updateTime?Qr.updateTime(Kr(c.updateTime)):void 0!==c.exists?Qr.exists(c.exists):Qr.none():Qr.none(),o=e.updateTransforms?e.updateTransforms.map(c=>function(g,w){let P=null;"setToServerValue"in w?(I("REQUEST_TIME"===w.setToServerValue),P=new Kl):"appendMissingElements"in w?P=new fl(w.appendMissingElements.values||[]):"removeAllFromArray"in w?P=new Oa(w.removeAllFromArray.values||[]):"increment"in w?P=new Io(g,w.increment):T();const Y=gs.fromServerFormat(w.fieldPath);return new Sl(Y,P)}(i,c)):[];var c;if(e.update){const c=gl(i,e.update.name),g=new k({mapValue:{fields:e.update.fields}});if(e.updateMask){const w=new qa((e.updateMask.fieldPaths||[]).map(ee=>gs.fromServerFormat(ee)));return new Ya(c,g,w,t,o)}return new Pl(c,g,t,o)}if(e.delete){const c=gl(i,e.delete);return new Rl(c,t)}if(e.verify){const c=gl(i,e.verify);return new zu(c,t)}return T()}function Jc(i,e){return{documents:[Cc(i,e.path)]}}function Xc(i,e){const t={structuredQuery:{}},o=e.path;null!==e.collectionGroup?(t.parent=Cc(i,o),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Cc(i,o.popLast()),t.structuredQuery.from=[{collectionId:o.lastSegment()}]);const c=function(Y){if(0===Y.length)return;const ee=Y.map(pe=>function(Re){if("=="===Re.op){if(Ma(Re.value))return{unaryFilter:{field:D(Re.field),op:"IS_NAN"}};if(ta(Re.value))return{unaryFilter:{field:D(Re.field),op:"IS_NULL"}}}else if("!="===Re.op){if(Ma(Re.value))return{unaryFilter:{field:D(Re.field),op:"IS_NOT_NAN"}};if(ta(Re.value))return{unaryFilter:{field:D(Re.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:D(Re.field),op:y(Re.op),value:Re.value}}}(pe));return 1===ee.length?ee[0]:{compositeFilter:{op:"AND",filters:ee}}}(e.filters);c&&(t.structuredQuery.where=c);const g=function(Y){if(0!==Y.length)return Y.map(ee=>{return{field:D((pe=ee).field),direction:f(pe.dir)};var pe})}(e.orderBy);g&&(t.structuredQuery.orderBy=g);const w=(ee=e.limit,i.N||Co(ee)?ee:{value:ee});var ee,P,Y;return null!==w&&(t.structuredQuery.limit=w),e.startAt&&(t.structuredQuery.startAt={before:(P=e.startAt).inclusive,values:P.position}),e.endAt&&(t.structuredQuery.endAt={before:!(Y=e.endAt).inclusive,values:Y.position}),t}function ed(i){let e=zs(i.parent);const t=i.structuredQuery,o=t.from?t.from.length:0;let c=null;if(o>0){I(1===o);const pe=t.from[0];pe.allDescendants?c=pe.collectionId:e=e.child(pe.collectionId)}let g=[];t.where&&(g=v(t.where));let w=[];t.orderBy&&(w=t.orderBy.map(pe=>{return new zl(K((Re=pe).field),function(ht){switch(ht){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Re.direction));var Re}));let P=null;t.limit&&(P=function(pe){let Re;return Re="object"==typeof pe?pe.value:pe,Co(Re)?null:Re}(t.limit));let Y=null;var pe;t.startAt&&(Y=new Ka((pe=t.startAt).values||[],!!pe.before));let ee=null;return t.endAt&&(ee=function(pe){return new Ka(pe.values||[],!pe.before)}(t.endAt)),gc(e,c,w,g,P,"F",Y,ee)}function v(i){return i?void 0!==i.unaryFilter?[Ve(i)]:void 0!==i.fieldFilter?[ae(i)]:void 0!==i.compositeFilter?i.compositeFilter.filters.map(e=>v(e)).reduce((e,t)=>e.concat(t)):T():[]}function f(i){return Od[i]}function y(i){return ho[i]}function D(i){return{fieldPath:i.canonicalString()}}function K(i){return gs.fromServerFormat(i.fieldPath)}function ae(i){return Ss.create(K(i.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return T()}}(i.fieldFilter.op),i.fieldFilter.value)}function Ve(i){switch(i.unaryFilter.op){case"IS_NAN":const e=K(i.unaryFilter.field);return Ss.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=K(i.unaryFilter.field);return Ss.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=K(i.unaryFilter.field);return Ss.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=K(i.unaryFilter.field);return Ss.create(c,"!=",{nullValue:"NULL_VALUE"});default:return T()}}function ft(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function tn(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}function ln(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=Hn(e)),e=rr(i.get(t),e);return Hn(e)}function rr(i,e){let t=e;const o=i.length;for(let c=0;c<o;c++){const g=i.charAt(c);switch(g){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=g}}return t}function Hn(i){return i+"\x01\x01"}function Jr(i){const e=i.length;if(I(e>=2),2===e)return I("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),Hr.emptyPath();const t=e-2,o=[];let c="";for(let g=0;g<e;){const w=i.indexOf("\x01",g);switch((w<0||w>t)&&T(),i.charAt(w+1)){case"\x01":const P=i.substring(g,w);let Y;0===c.length?Y=P:(c+=P,Y=c,c=""),o.push(Y);break;case"\x10":c+=i.substring(g,w),c+="\0";break;case"\x11":c+=i.substring(g,w+1);break;default:T()}g=w+2}return new Hr(o)}const aa=["userId","batchId"];function Ol(i,e){return[i,ln(e)]}function Ju(i,e,t){return[i,ln(e),t]}const Xu={},td=["prefixPath","collectionGroup","readTime","documentId"],yh=["prefixPath","collectionGroup","documentId"],Nl=["collectionGroup","readTime","prefixPath","documentId"],Dc=["canonicalId","targetId"],nd=["targetId","path"],rd=["path","targetId"],Tc=["collectionId","parent"],La=["indexId","uid"],id=["uid","sequenceNumber"],sd=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],ef=["indexId","uid","orderedDocumentKey"],fp=["userId","collectionPath","documentId"],tf=["userId","collectionPath","largestBatchId"],nf=["userId","collectionGroup","largestBatchId"],Fd=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],rf=[...Fd,"documentOverlays"],Ld=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Zg=[...Ld,"indexConfiguration","indexState","indexEntries"],sf="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class _h{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class wt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&T(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new wt((o,c)=>{this.nextCallback=g=>{this.wrapSuccess(e,g).next(o,c)},this.catchCallback=g=>{this.wrapFailure(t,g).next(o,c)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof wt?t:wt.resolve(t)}catch(t){return wt.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):wt.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):wt.reject(t)}static resolve(e){return new wt((t,o)=>{t(e)})}static reject(e){return new wt((t,o)=>{o(e)})}static waitFor(e){return new wt((t,o)=>{let c=0,g=0,w=!1;e.forEach(P=>{++c,P.next(()=>{++g,w&&g===c&&t()},Y=>o(Y))}),w=!0,g===c&&t()})}static or(e){let t=wt.resolve(!1);for(const o of e)t=t.next(c=>c?wt.resolve(c):o());return t}static forEach(e,t){const o=[];return e.forEach((c,g)=>{o.push(t.call(this,c,g))}),this.waitFor(o)}}class kl{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new ue,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new od(e,t.error)):this.At.resolve()},this.transaction.onerror=o=>{const c=vh(o.target.error);this.At.reject(new od(e,c))}}static open(e,t,o,c){try{return new kl(t,e.transaction(c,o))}catch(g){throw new od(t,g)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Nt("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}Pt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new pp(t)}}class el{constructor(e,t,o){this.name=e,this.version=t,this.bt=o,12.2===el.Vt((0,Ye.z$)())&&Gr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Nt("SimpleDb","Removing database:",e),Du(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,Ye.hl)())return!1;if(el.St())return!0;const e=(0,Ye.z$)(),t=el.Vt(e),o=0<t&&t<10,c=el.Dt(e),g=0<c&&c<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||o||g)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),o=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(o)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),o=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(o)}Nt(e){var t=this;return(0,ke.Z)(function*(){return t.db||(Nt("SimpleDb","Opening database:",t.name),t.db=yield new Promise((o,c)=>{const g=indexedDB.open(t.name,t.version);g.onsuccess=w=>{o(w.target.result)},g.onblocked=()=>{c(new od(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},g.onerror=w=>{const P=w.target.error;c("VersionError"===P.name?new q(O.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===P.name?new q(O.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+P):new od(e,P))},g.onupgradeneeded=w=>{Nt("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',w.oldVersion),t.bt.kt(w.target.result,g.transaction,w.oldVersion,t.version).next(()=>{Nt("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=o=>t.Mt(o)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,o,c){var g=this;return(0,ke.Z)(function*(){const w="readonly"===t;let P=0;for(;;){++P;try{g.db=yield g.Nt(e);const Y=kl.open(g.db,e,w?"readonly":"readwrite",o),ee=c(Y).next(pe=>(Y.Pt(),pe)).catch(pe=>(Y.abort(pe),wt.reject(pe))).toPromise();return ee.catch(()=>{}),yield Y.Rt,ee}catch(Y){const ee="FirebaseError"!==Y.name&&P<3;if(Nt("SimpleDb","Transaction failed with error:",Y.message,"Retrying:",ee),g.close(),!ee)return Promise.reject(Y)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class of{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return Du(this.Ft.delete())}}class od extends q{constructor(e,t){super(O.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Fl(i){return"IndexedDbTransactionError"===i.name}class pp{constructor(e){this.store=e}put(e,t){let o;return void 0!==t?(Nt("SimpleDb","PUT",this.store.name,e,t),o=this.store.put(t,e)):(Nt("SimpleDb","PUT",this.store.name,"<auto-key>",e),o=this.store.put(e)),Du(o)}add(e){return Nt("SimpleDb","ADD",this.store.name,e,e),Du(this.store.add(e))}get(e){return Du(this.store.get(e)).next(t=>(void 0===t&&(t=null),Nt("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Nt("SimpleDb","DELETE",this.store.name,e),Du(this.store.delete(e))}count(){return Nt("SimpleDb","COUNT",this.store.name),Du(this.store.count())}qt(e,t){const o=this.options(e,t);if(o.index||"function"!=typeof this.store.getAll){const c=this.cursor(o),g=[];return this.Kt(c,(w,P)=>{g.push(P)}).next(()=>g)}{const c=this.store.getAll(o.range);return new wt((g,w)=>{c.onerror=P=>{w(P.target.error)},c.onsuccess=P=>{g(P.target.result)}})}}Gt(e,t){const o=this.store.getAll(e,null===t?void 0:t);return new wt((c,g)=>{o.onerror=w=>{g(w.target.error)},o.onsuccess=w=>{c(w.target.result)}})}Qt(e,t){Nt("SimpleDb","DELETE ALL",this.store.name);const o=this.options(e,t);o.jt=!1;const c=this.cursor(o);return this.Kt(c,(g,w,P)=>P.delete())}Wt(e,t){let o;t?o=e:(o={},t=e);const c=this.cursor(o);return this.Kt(c,t)}zt(e){const t=this.cursor({});return new wt((o,c)=>{t.onerror=g=>{const w=vh(g.target.error);c(w)},t.onsuccess=g=>{const w=g.target.result;w?e(w.primaryKey,w.value).next(P=>{P?w.continue():o()}):o()}})}Kt(e,t){const o=[];return new wt((c,g)=>{e.onerror=w=>{g(w.target.error)},e.onsuccess=w=>{const P=w.target.result;if(!P)return void c();const Y=new of(P),ee=t(P.primaryKey,P.value,Y);if(ee instanceof wt){const pe=ee.catch(Re=>(Y.done(),wt.reject(Re)));o.push(pe)}Y.isDone?c():null===Y.Lt?P.continue():P.continue(Y.Lt)}}).next(()=>wt.waitFor(o))}options(e,t){let o;return void 0!==e&&("string"==typeof e?o=e:t=e),{index:o,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const o=this.store.index(e.index);return e.jt?o.openKeyCursor(e.range,t):o.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Du(i){return new wt((e,t)=>{i.onsuccess=o=>{e(o.target.result)},i.onerror=o=>{const c=vh(o.target.error);t(c)}})}let af=!1;function vh(i){const e=el.Vt((0,Ye.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const o=new q("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return af||(af=!0,setTimeout(()=>{throw o},0)),o}}return i}class Vd extends _h{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function fo(i,e){const t=R(i);return el.xt(t.Ht,e)}class Ac{constructor(e,t,o,c){this.batchId=e,this.localWriteTime=t,this.baseMutations=o,this.mutations=c}applyToRemoteDocument(e,t){const o=t.mutationResults;for(let c=0;c<this.mutations.length;c++){const g=this.mutations[c];g.key.isEqual(e.key)&&yc(g,e,o[c])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&_c(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&_c(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const o=e.get(t.key),c=o;this.applyToLocalView(c),o.isValidDocument()||c.convertToNoDocument(qn.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),fi())}isEqual(e){return this.batchId===e.batchId&&il(this.mutations,e.mutations,(t,o)=>vc(t,o))&&il(this.baseMutations,e.baseMutations,(t,o)=>vc(t,o))}}class ec{constructor(e,t,o,c){this.batch=e,this.commitVersion=t,this.mutationResults=o,this.docVersions=c}static from(e,t,o){I(e.mutations.length===o.length);let c=gh;const g=e.mutations;for(let w=0;w<g.length;w++)c=c.insert(g[w].key,o[w].version);return new ec(e,t,o,c)}}class Ud{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Ll{constructor(e,t,o,c,g=qn.min(),w=qn.min(),P=Ti.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=o,this.sequenceNumber=c,this.snapshotVersion=g,this.lastLimboFreeSnapshotVersion=w,this.resumeToken=P}withSequenceNumber(e){return new Ll(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Ll(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Ll(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class wh{constructor(e){this.Jt=e}}function Va(i,e){const t=e.key,o={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:qs(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())o.document={name:oa(c=i.Jt,(g=e).key),fields:g.data.value.mapValue.fields,updateTime:sa(c,g.version.toTimestamp())};else if(e.isNoDocument())o.noDocument={path:t.path.toArray(),readTime:Ks(e.version)};else{if(!e.isUnknownDocument())return T();o.unknownDocument={path:t.path.toArray(),version:Ks(e.version)}}var c,g;return o}function qs(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function Ks(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function _l(i){const e=new Di(i.seconds,i.nanoseconds);return qn.fromTimestamp(e)}function Sc(i,e){const t=(e.baseMutations||[]).map(g=>Xl(i.Jt,g));for(let g=0;g<e.mutations.length-1;++g){const w=e.mutations[g];g+1<e.mutations.length&&void 0!==e.mutations[g+1].transform&&(w.updateTransforms=e.mutations[g+1].transform.fieldTransforms,e.mutations.splice(g+1,1),++g)}const o=e.mutations.map(g=>Xl(i.Jt,g)),c=Di.fromMillis(e.localWriteTimeMs);return new Ac(e.batchId,c,t,o)}function xc(i){const e=_l(i.readTime),t=void 0!==i.lastLimboFreeSnapshotVersion?_l(i.lastLimboFreeSnapshotVersion):qn.min();let o;var c;return void 0!==i.query.documents?(I(1===(c=i.query).documents.length),o=uo(Ra(zs(c.documents[0])))):o=uo(ed(i.query)),new Ll(o,i.targetId,0,i.lastListenSequenceNumber,e,t,Ti.fromBase64String(i.resumeToken))}function Bd(i,e){const t=Ks(e.snapshotVersion),o=Ks(e.lastLimboFreeSnapshotVersion);let c;c=lo(e.target)?Jc(i.Jt,e.target):Xc(i.Jt,e.target);const g=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:$o(e.target),readTime:t,resumeToken:g,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:o,query:c}}function jd(i){const e=ed({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?mc(e,e.limit,"L"):e}function lf(i,e){return new Ud(e.largestBatchId,Xl(i.Jt,e.overlayMutation))}function uf(i,e){const t=e.path.lastSegment();return[i,ln(e.path.popLast()),t]}class gp{getBundleMetadata(e,t){return bh(e).get(t).next(o=>{if(o)return{id:(c=o).bundleId,createTime:_l(c.createTime),version:c.version};var c})}saveBundleMetadata(e,t){return bh(e).put({bundleId:(o=t).id,createTime:Ks(Kr(o.createTime)),version:o.version});var o}getNamedQuery(e,t){return Ch(e).get(t).next(o=>{if(o)return{name:(c=o).name,query:jd(c.bundledQuery),readTime:_l(c.readTime)};var c})}saveNamedQuery(e,t){return Ch(e).put({name:(o=t).name,readTime:Ks(Kr(o.readTime)),bundledQuery:o.bundledQuery});var o}}function bh(i){return fo(i,"bundles")}function Ch(i){return fo(i,"namedQueries")}class Hd{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new Hd(e,t.uid||"")}getOverlay(e,t){return qo(e).get(uf(this.userId,t)).next(o=>o?lf(this.M,o):null)}saveOverlays(e,t,o){const c=[];return o.forEach((g,w)=>{const P=new Ud(t,w);c.push(this.Xt(e,P))}),wt.waitFor(c)}removeOverlaysForBatchId(e,t,o){const c=new Set;t.forEach(w=>c.add(ln(w.getCollectionPath())));const g=[];return c.forEach(w=>{const P=IDBKeyRange.bound([this.userId,w,o],[this.userId,w,o+1],!1,!0);g.push(qo(e).Qt("collectionPathOverlayIndex",P))}),wt.waitFor(g)}getOverlaysForCollection(e,t,o){const c=ka(),g=ln(t),w=IDBKeyRange.bound([this.userId,g,o],[this.userId,g,Number.POSITIVE_INFINITY],!0);return qo(e).qt("collectionPathOverlayIndex",w).next(P=>{for(const Y of P){const ee=lf(this.M,Y);c.set(ee.getKey(),ee)}return c})}getOverlaysForCollectionGroup(e,t,o,c){const g=ka();let w;const P=IDBKeyRange.bound([this.userId,t,o],[this.userId,t,Number.POSITIVE_INFINITY],!0);return qo(e).Wt({index:"collectionGroupOverlayIndex",range:P},(Y,ee,pe)=>{const Re=lf(this.M,ee);g.size()<c||Re.largestBatchId===w?(g.set(Re.getKey(),Re),w=Re.largestBatchId):pe.done()}).next(()=>g)}Xt(e,t){return qo(e).put(function(o,c,g){const[w,P,Y]=uf(c,g.mutation.key);return{userId:c,collectionPath:P,documentId:Y,collectionGroup:g.mutation.key.getCollectionGroup(),largestBatchId:g.largestBatchId,overlayMutation:yl(o.Jt,g.mutation)}}(this.M,this.userId,t))}}function qo(i){return fo(i,"documentOverlays")}class Tu{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Ai(e.integerValue));else if("doubleValue"in e){const o=Ai(e.doubleValue);isNaN(o)?this.ne(t,13):(this.ne(t,15),Ws(o)?t.se(0):t.se(o))}else if("timestampValue"in e){const o=e.timestampValue;this.ne(t,20),"string"==typeof o?t.ie(o):(t.ie(`${o.seconds||""}`),t.se(o.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(jo(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const o=e.geoPointValue;this.ne(t,45),t.se(o.latitude||0),t.se(o.longitude||0)}else"mapValue"in e?na(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):T()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const o=e.fields||{};this.ne(t,55);for(const c of Object.keys(o))this.re(c,t),this.te(o[c],t)}he(e,t){const o=e.values||[];this.ne(t,50);for(const c of o)this.te(c,t)}ae(e,t){this.ne(t,37),Yt.fromName(e).path.forEach(o=>{this.ne(t,60),this.le(o,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function Mc(i){if(0===i)return 8;let e=0;return i>>4==0&&(e+=4,i<<=4),i>>6==0&&(e+=2,i<<=2),i>>7==0&&(e+=1),e}function cf(i){const e=64-function(t){let o=0;for(let c=0;c<8;++c){const g=Mc(255&t[c]);if(o+=g,8!==g)break}return o}(i);return Math.ceil(e/8)}Tu.fe=new Tu;class df{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let o=t.next();for(;!o.done;)this._e(o.value),o=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let o=t.next();for(;!o.done;)this.ge(o.value),o=t.next();this.ye()}pe(e){for(const t of e){const o=t.charCodeAt(0);if(o<128)this._e(o);else if(o<2048)this._e(960|o>>>6),this._e(128|63&o);else if(t<"\ud800"||"\udbff"<t)this._e(480|o>>>12),this._e(128|63&o>>>6),this._e(128|63&o);else{const c=t.codePointAt(0);this._e(240|c>>>18),this._e(128|63&c>>>12),this._e(128|63&c>>>6),this._e(128|63&c)}}this.we()}Ie(e){for(const t of e){const o=t.charCodeAt(0);if(o<128)this.ge(o);else if(o<2048)this.ge(960|o>>>6),this.ge(128|63&o);else if(t<"\ud800"||"\udbff"<t)this.ge(480|o>>>12),this.ge(128|63&o>>>6),this.ge(128|63&o);else{const c=t.codePointAt(0);this.ge(240|c>>>18),this.ge(128|63&c>>>12),this.ge(128|63&c>>>6),this.ge(128|63&c)}}this.ye()}Te(e){const t=this.Ee(e),o=cf(t);this.Ae(1+o),this.buffer[this.position++]=255&o;for(let c=t.length-o;c<t.length;++c)this.buffer[this.position++]=255&t[c]}Re(e){const t=this.Ee(e),o=cf(t);this.Ae(1+o),this.buffer[this.position++]=~(255&o);for(let c=t.length-o;c<t.length;++c)this.buffer[this.position++]=~(255&t[c])}Pe(){this.be(255),this.be(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(c){const g=new DataView(new ArrayBuffer(8));return g.setFloat64(0,c,!1),new Uint8Array(g.buffer)}(e),o=0!=(128&t[0]);t[0]^=o?255:128;for(let c=1;c<t.length;++c)t[c]^=o?255:0;return t}_e(e){const t=255&e;0===t?(this.be(0),this.be(255)):255===t?(this.be(255),this.be(0)):this.be(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.be(0),this.be(1)}ye(){this.ve(0),this.ve(1)}be(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let o=2*this.buffer.length;o<t&&(o=t);const c=new Uint8Array(o);c.set(this.buffer),this.buffer=c}}class mp{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.Pe()}}class yp{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class tc{constructor(){this.De=new df,this.Ce=new mp(this.De),this.xe=new yp(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class eu{constructor(e,t,o,c){this.indexId=e,this.documentKey=t,this.arrayValue=o,this.directionalValue=c}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,o=new Uint8Array(t);return o.set(this.directionalValue,0),t!==e?o.set([0],this.directionalValue.length):++o[o.length-1],new eu(this.indexId,this.documentKey,this.arrayValue,o)}}function Au(i,e){let t=i.indexId-e.indexId;return 0!==t?t:(t=hf(i.arrayValue,e.arrayValue),0!==t?t:(t=hf(i.directionalValue,e.directionalValue),0!==t?t:Yt.comparator(i.documentKey,e.documentKey)))}function hf(i,e){for(let t=0;t<i.length&&t<e.length;++t){const o=i[t]-e[t];if(0!==o)return o}return i.length-e.length}class Dr{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const o=t;o.S()?this.Fe=o:this.Oe.push(o)}}$e(e){const t=Ge(e);if(void 0!==t&&!this.Be(t))return!1;const o=et(e);let c=0,g=0;for(;c<o.length&&this.Be(o[c]);++c);if(c===o.length)return!0;if(void 0!==this.Fe){const w=o[c];if(!this.Le(this.Fe,w)||!this.Ue(this.Me[g++],w))return!1;++c}for(;c<o.length;++c){const w=o[c];if(g>=this.Me.length||!this.Ue(this.Me[g++],w))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class ff{constructor(){this.qe=new ad}addToCollectionParentIndex(e,t){return this.qe.add(t),wt.resolve()}getCollectionParents(e,t){return wt.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return wt.resolve()}deleteFieldIndex(e,t){return wt.resolve()}getDocumentsMatchingTarget(e,t){return wt.resolve(null)}getFieldIndex(e,t){return wt.resolve(null)}getFieldIndexes(e,t){return wt.resolve([])}getNextCollectionGroupToUpdate(e){return wt.resolve(null)}updateCollectionGroup(e,t,o){return wt.resolve()}updateIndexEntries(e,t){return wt.resolve()}}class ad{constructor(){this.index={}}add(e){const t=e.lastSegment(),o=e.popLast(),c=this.index[t]||new Vi(Hr.comparator),g=!c.has(o);return this.index[t]=c.add(o),g}has(e){const t=e.lastSegment(),o=e.popLast(),c=this.index[t];return c&&c.has(o)}getEntries(e){return(this.index[e]||new Vi(Hr.comparator)).toArray()}}const nc=new Uint8Array(0);class $d{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new ad,this.Ge=new Na(o=>$o(o),(o,c)=>ao(o,c)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const o=t.lastSegment(),c=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const g={collectionId:o,parent:ln(c)};return Ua(e).put(g)}return wt.resolve()}getCollectionParents(e,t){const o=[],c=IDBKeyRange.bound([t,""],[Gl(t),""],!1,!0);return Ua(e).qt(c).next(g=>{for(const w of g){if(w.collectionId!==t)break;o.push(Jr(w.parent))}return o})}addFieldIndex(e,t){const o=Gd(e),c={indexId:(g=t).indexId,collectionGroup:g.collectionGroup,fields:g.fields.map(w=>[w.fieldPath.canonicalString(),w.kind])};var g;return delete c.indexId,o.add(c).next()}deleteFieldIndex(e,t){const o=Gd(e),c=Rc(e),g=Pc(e);return o.delete(t.indexId).next(()=>c.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>g.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const o=Pc(e);let c=!0;const g=new Map;return wt.forEach(this.Qe(t),w=>this.getFieldIndex(e,w).next(P=>{c&&(c=!!P),g.set(w,P)})).next(()=>{if(c){let w=fi();const P=[];return wt.forEach(g,(Y,ee)=>{var pe;Nt("IndexedDbIndexManager",`Using index ${pe=Y,`id=${pe.indexId}|cg=${pe.collectionGroup}|f=${pe.fields.map(Hi=>`${Hi.fieldPath}:${Hi.kind}`).join(",")}`} to execute ${$o(t)}`);const Re=function(Hi,xs){const Es=Ge(xs);if(void 0===Es)return null;for(const ks of Go(Hi,Es.fieldPath))switch(ks.op){case"array-contains-any":return ks.value.arrayValue.values||[];case"array-contains":return[ks.value]}return null}(ee,Y),ht=function(Hi,xs){const Es=new Map;for(const ks of et(xs))for(const ba of Go(Hi,ks.fieldPath))switch(ba.op){case"==":case"in":Es.set(ks.fieldPath.canonicalString(),ba.value);break;case"not-in":case"!=":return Es.set(ks.fieldPath.canonicalString(),ba.value),Array.from(Es.values())}return null}(ee,Y),Ot=function(Hi,xs){const Es=[];let ks=!0;for(const ba of et(xs)){const Dd=0===ba.kind?ra(Hi,ba.fieldPath,Hi.startAt):du(Hi,ba.fieldPath,Hi.startAt);if(!Dd.value)return null;Es.push(Dd.value),ks&&(ks=Dd.inclusive)}return new Ka(Es,ks)}(ee,Y),Vt=function(Hi,xs){const Es=[];let ks=!0;for(const ba of et(xs)){const Dd=0===ba.kind?du(Hi,ba.fieldPath,Hi.endAt):ra(Hi,ba.fieldPath,Hi.endAt);if(!Dd.value)return null;Es.push(Dd.value),ks&&(ks=Dd.inclusive)}return new Ka(Es,ks)}(ee,Y),An=this.je(Y,ee,Ot),yr=this.je(Y,ee,Vt),ws=this.We(Y,ee,ht),mo=this.ze(Y.indexId,Re,An,!!Ot&&Ot.inclusive,yr,!!Vt&&Vt.inclusive,ws);return wt.forEach(mo,Hi=>o.Gt(Hi,t.limit).next(xs=>{xs.forEach(Es=>{const ks=Yt.fromSegments(Es.documentKey);w.has(ks)||(w=w.add(ks),P.push(ks))})}))}).next(()=>P)}return wt.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}ze(e,t,o,c,g,w,P){const Y=(null!=t?t.length:1)*Math.max(null!=o?o.length:1,null!=g?g.length:1),ee=Y/(null!=t?t.length:1),pe=[];for(let Re=0;Re<Y;++Re){const ht=t?this.He(t[Re/ee]):nc,Ot=o?this.Je(e,ht,o[Re%ee],c):this.Ye(e),Vt=g?this.Xe(e,ht,g[Re%ee],w):this.Ye(e+1);pe.push(...this.createRange(Ot,Vt,P.map(An=>this.Je(e,ht,An,!0))))}return pe}Je(e,t,o,c){const g=new eu(e,Yt.empty(),t,o);return c?g:g.ke()}Xe(e,t,o,c){const g=new eu(e,Yt.empty(),t,o);return c?g.ke():g}Ye(e){return new eu(e,Yt.empty(),nc,nc)}getFieldIndex(e,t){const o=new Dr(t),c=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,c).next(g=>{const w=g.filter(P=>o.$e(P));return w.sort((P,Y)=>Y.fields.length-P.fields.length),w.length>0?w[0]:null})}Ze(e,t){const o=new tc;for(const c of et(e)){const g=t.data.field(c.fieldPath);if(null==g)return null;const w=o.Ne(c.kind);Tu.fe.Zt(g,w)}return o.Se()}He(e){const t=new tc;return Tu.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const o=new tc;return Tu.fe.Zt(ea(this.databaseId,t),o.Ne(function(c){const g=et(c);return 0===g.length?0:g[g.length-1].kind}(e))),o.Se()}We(e,t,o){if(null===o)return[];let c=[];c.push(new tc);let g=0;for(const w of et(e)){const P=o[g++];for(const Y of c)if(this.en(t,w.fieldPath)&&al(P))c=this.nn(c,w,P);else{const ee=Y.Ne(w.kind);Tu.fe.Zt(P,ee)}}return this.sn(c)}je(e,t,o){return null==o?null:this.We(e,t,o.position)}sn(e){const t=[];for(let o=0;o<e.length;++o)t[o]=e[o].Se();return t}nn(e,t,o){const c=[...e],g=[];for(const w of o.arrayValue.values||[])for(const P of c){const Y=new tc;Y.seed(P.Se()),Tu.fe.Zt(w,Y.Ne(t.kind)),g.push(Y)}return g}en(e,t){return!!e.filters.find(o=>o instanceof Ss&&o.field.isEqual(t)&&("in"===o.op||"not-in"===o.op))}getFieldIndexes(e,t){const o=Gd(e),c=Rc(e);return(t?o.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):o.qt()).next(g=>{const w=[];return wt.forEach(g,P=>c.get([P.indexId,this.uid]).next(Y=>{w.push(function(ee,pe){const Re=pe?new mn(pe.sequenceNumber,new Er(_l(pe.readTime),new Yt(Jr(pe.documentKey)),pe.largestBatchId)):mn.empty(),ht=ee.fields.map(([Ot,Vt])=>new Bt(gs.fromServerFormat(Ot),Vt));return new me(ee.indexId,ee.collectionGroup,ht,Re)}(P,Y))})).next(()=>w)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((o,c)=>{const g=o.indexState.sequenceNumber-c.indexState.sequenceNumber;return 0!==g?g:jn(o.collectionGroup,c.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,o){const c=Gd(e),g=Rc(e);return this.rn(e).next(w=>c.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(P=>wt.forEach(P,Y=>{return g.put({indexId:Y.indexId,uid:this.user.uid||"",sequenceNumber:w,readTime:Ks((ht=o).readTime),documentKey:ln(ht.documentKey.path),largestBatchId:ht.largestBatchId});var ht})))}updateIndexEntries(e,t){const o=new Map;return wt.forEach(t,(c,g)=>{const w=o.get(c.collectionGroup);return(w?wt.resolve(w):this.getFieldIndexes(e,c.collectionGroup)).next(P=>(o.set(c.collectionGroup,P),wt.forEach(P,Y=>this.on(e,c,Y).next(ee=>{const pe=this.un(g,Y);return ee.isEqual(pe)?wt.resolve():this.an(e,g,Y,ee,pe)}))))})}cn(e,t,o,c){return Pc(e).put({indexId:c.indexId,uid:this.uid,arrayValue:c.arrayValue,directionalValue:c.directionalValue,orderedDocumentKey:this.tn(o,t.key),documentKey:t.key.path.toArray()})}hn(e,t,o,c){return Pc(e).delete([c.indexId,this.uid,c.arrayValue,c.directionalValue,this.tn(o,t.key),t.key.path.toArray()])}on(e,t,o){const c=Pc(e);let g=new Vi(Au);return c.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([o.indexId,this.uid,this.tn(o,t)])},(w,P)=>{g=g.add(new eu(o.indexId,t,P.arrayValue,P.directionalValue))}).next(()=>g)}un(e,t){let o=new Vi(Au);const c=this.Ze(t,e);if(null==c)return o;const g=Ge(t);if(null!=g){const w=e.data.field(g.fieldPath);if(al(w))for(const P of w.arrayValue.values||[])o=o.add(new eu(t.indexId,e.key,this.He(P),c))}else o=o.add(new eu(t.indexId,e.key,nc,c));return o}an(e,t,o,c,g){Nt("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const w=[];return function(P,Y,ee,pe,Re){const ht=P.getIterator(),Ot=Y.getIterator();let Vt=Fo(ht),An=Fo(Ot);for(;Vt||An;){let yr=!1,ws=!1;if(Vt&&An){const mo=ee(Vt,An);mo<0?ws=!0:mo>0&&(yr=!0)}else null!=Vt?ws=!0:yr=!0;yr?(pe(An),An=Fo(Ot)):ws?(Re(Vt),Vt=Fo(ht)):(Vt=Fo(ht),An=Fo(Ot))}}(c,g,Au,P=>{w.push(this.cn(e,t,o,P))},P=>{w.push(this.hn(e,t,o,P))}),wt.waitFor(w)}rn(e){let t=1;return Rc(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(o,c,g)=>{g.done(),t=c.sequenceNumber+1}).next(()=>t)}createRange(e,t,o){o=o.sort((w,P)=>Au(w,P)).filter((w,P,Y)=>!P||0!==Au(w,Y[P-1]));const c=[];c.push(e);for(const w of o){const P=Au(w,e),Y=Au(w,t);if(0===P)c[0]=e.ke();else if(P>0&&Y<0)c.push(w),c.push(w.ke());else if(Y>0)break}c.push(t);const g=[];for(let w=0;w<c.length;w+=2)g.push(IDBKeyRange.bound([c[w].indexId,this.uid,c[w].arrayValue,c[w].directionalValue,nc,[]],[c[w+1].indexId,this.uid,c[w+1].arrayValue,c[w+1].directionalValue,nc,[]]));return g}}function Ua(i){return fo(i,"collectionParents")}function Pc(i){return fo(i,"indexEntries")}function Gd(i){return fo(i,"indexConfiguration")}function Rc(i){return fo(i,"indexState")}const Vl={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class la{constructor(e,t,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=o}static withCacheSize(e){return new la(e,la.DEFAULT_COLLECTION_PERCENTILE,la.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Ih(i,e,t){const o=i.store("mutations"),c=i.store("documentMutations"),g=[],w=IDBKeyRange.only(t.batchId);let P=0;const Y=o.Wt({range:w},(pe,Re,ht)=>(P++,ht.delete()));g.push(Y.next(()=>{I(1===P)}));const ee=[];for(const pe of t.mutations){const Re=Ju(e,pe.key.path,t.batchId);g.push(c.delete(Re)),ee.push(pe.key)}return wt.waitFor(g).next(()=>ee)}function d(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw T();e=i.noDocument}return JSON.stringify(e).length}la.DEFAULT_COLLECTION_PERCENTILE=10,la.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,la.DEFAULT=new la(41943040,la.DEFAULT_COLLECTION_PERCENTILE,la.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),la.DISABLED=new la(-1,0,0);class u{constructor(e,t,o,c){this.userId=e,this.M=t,this.indexManager=o,this.referenceDelegate=c,this.ln={}}static Yt(e,t,o,c){I(""!==e.uid);const g=e.isAuthenticated()?e.uid:"";return new u(g,t,o,c)}checkEmpty(e){let t=!0;const o=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return p(e).Wt({index:"userMutationsIndex",range:o},(c,g,w)=>{t=!1,w.done()}).next(()=>t)}addMutationBatch(e,t,o,c){const g=E(e),w=p(e);return w.add({}).next(P=>{I("number"==typeof P);const Y=new Ac(P,t,o,c),ee=function(ht,Ot,Vt){const An=Vt.baseMutations.map(ws=>yl(ht.Jt,ws)),yr=Vt.mutations.map(ws=>yl(ht.Jt,ws));return{userId:Ot,batchId:Vt.batchId,localWriteTimeMs:Vt.localWriteTime.toMillis(),baseMutations:An,mutations:yr}}(this.M,this.userId,Y),pe=[];let Re=new Vi((ht,Ot)=>jn(ht.canonicalString(),Ot.canonicalString()));for(const ht of c){const Ot=Ju(this.userId,ht.key.path,P);Re=Re.add(ht.key.path.popLast()),pe.push(w.put(ee)),pe.push(g.put(Ot,Xu))}return Re.forEach(ht=>{pe.push(this.indexManager.addToCollectionParentIndex(e,ht))}),e.addOnCommittedListener(()=>{this.ln[P]=Y.keys()}),wt.waitFor(pe).next(()=>Y)})}lookupMutationBatch(e,t){return p(e).get(t).next(o=>o?(I(o.userId===this.userId),Sc(this.M,o)):null)}fn(e,t){return this.ln[t]?wt.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(o=>{if(o){const c=o.keys();return this.ln[t]=c,c}return null})}getNextMutationBatchAfterBatchId(e,t){const o=t+1,c=IDBKeyRange.lowerBound([this.userId,o]);let g=null;return p(e).Wt({index:"userMutationsIndex",range:c},(w,P,Y)=>{P.userId===this.userId&&(I(P.batchId>=o),g=Sc(this.M,P)),Y.done()}).next(()=>g)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let o=-1;return p(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(c,g,w)=>{o=g.batchId,w.done()}).next(()=>o)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return p(e).qt("userMutationsIndex",t).next(o=>o.map(c=>Sc(this.M,c)))}getAllMutationBatchesAffectingDocumentKey(e,t){const o=Ol(this.userId,t.path),c=IDBKeyRange.lowerBound(o),g=[];return E(e).Wt({range:c},(w,P,Y)=>{const[ee,pe,Re]=w,ht=Jr(pe);if(ee===this.userId&&t.path.isEqual(ht))return p(e).get(Re).next(Ot=>{if(!Ot)throw T();I(Ot.userId===this.userId),g.push(Sc(this.M,Ot))});Y.done()}).next(()=>g)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new Vi(jn);const c=[];return t.forEach(g=>{const w=Ol(this.userId,g.path),P=IDBKeyRange.lowerBound(w),Y=E(e).Wt({range:P},(ee,pe,Re)=>{const[ht,Ot,Vt]=ee,An=Jr(Ot);ht===this.userId&&g.path.isEqual(An)?o=o.add(Vt):Re.done()});c.push(Y)}),wt.waitFor(c).next(()=>this.dn(e,o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,c=o.length+1,g=Ol(this.userId,o),w=IDBKeyRange.lowerBound(g);let P=new Vi(jn);return E(e).Wt({range:w},(Y,ee,pe)=>{const[Re,ht,Ot]=Y,Vt=Jr(ht);Re===this.userId&&o.isPrefixOf(Vt)?Vt.length===c&&(P=P.add(Ot)):pe.done()}).next(()=>this.dn(e,P))}dn(e,t){const o=[],c=[];return t.forEach(g=>{c.push(p(e).get(g).next(w=>{if(null===w)throw T();I(w.userId===this.userId),o.push(Sc(this.M,w))}))}),wt.waitFor(c).next(()=>o)}removeMutationBatch(e,t){return Ih(e.Ht,this.userId,t).next(o=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),wt.forEach(o,c=>this.referenceDelegate.markPotentiallyOrphaned(e,c))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return wt.resolve();const o=IDBKeyRange.lowerBound([this.userId]),c=[];return E(e).Wt({range:o},(g,w,P)=>{if(g[0]===this.userId){const Y=Jr(g[1]);c.push(Y)}else P.done()}).next(()=>{I(0===c.length)})})}containsKey(e,t){return l(e,this.userId,t)}wn(e){return M(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function l(i,e,t){const o=Ol(e,t.path),c=o[1],g=IDBKeyRange.lowerBound(o);let w=!1;return E(i).Wt({range:g,jt:!0},(P,Y,ee)=>{const[pe,Re,ht]=P;pe===e&&Re===c&&(w=!0),ee.done()}).next(()=>w)}function p(i){return fo(i,"mutations")}function E(i){return fo(i,"documentMutations")}function M(i){return fo(i,"mutationQueues")}class j{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new j(0)}static yn(){return new j(-1)}}class se{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const o=new j(t.highestTargetId);return t.highestTargetId=o.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(t=>qn.fromTimestamp(new Di(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,o){return this.pn(e).next(c=>(c.highestListenSequenceNumber=t,o&&(c.lastRemoteSnapshotVersion=o.toTimestamp()),t>c.highestListenSequenceNumber&&(c.highestListenSequenceNumber=t),this.In(e,c)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(o=>(o.targetCount+=1,this.En(t,o),this.In(e,o))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>le(e).delete(t.targetId)).next(()=>this.pn(e)).next(o=>(I(o.targetCount>0),o.targetCount-=1,this.In(e,o)))}removeTargets(e,t,o){let c=0;const g=[];return le(e).Wt((w,P)=>{const Y=xc(P);Y.sequenceNumber<=t&&null===o.get(Y.targetId)&&(c++,g.push(this.removeTargetData(e,Y)))}).next(()=>wt.waitFor(g)).next(()=>c)}forEachTarget(e,t){return le(e).Wt((o,c)=>{const g=xc(c);t(g)})}pn(e){return Ce(e).get("targetGlobalKey").next(t=>(I(null!==t),t))}In(e,t){return Ce(e).put("targetGlobalKey",t)}Tn(e,t){return le(e).put(Bd(this.M,t))}En(e,t){let o=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,o=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,o=!0),o}getTargetCount(e){return this.pn(e).next(t=>t.targetCount)}getTargetData(e,t){const o=$o(t),c=IDBKeyRange.bound([o,Number.NEGATIVE_INFINITY],[o,Number.POSITIVE_INFINITY]);let g=null;return le(e).Wt({range:c,index:"queryTargetsIndex"},(w,P,Y)=>{const ee=xc(P);ao(t,ee.target)&&(g=ee,Y.done())}).next(()=>g)}addMatchingKeys(e,t,o){const c=[],g=ut(e);return t.forEach(w=>{const P=ln(w.path);c.push(g.put({targetId:o,path:P})),c.push(this.referenceDelegate.addReference(e,o,w))}),wt.waitFor(c)}removeMatchingKeys(e,t,o){const c=ut(e);return wt.forEach(t,g=>{const w=ln(g.path);return wt.waitFor([c.delete([o,w]),this.referenceDelegate.removeReference(e,o,g)])})}removeMatchingKeysForTargetId(e,t){const o=ut(e),c=IDBKeyRange.bound([t],[t+1],!1,!0);return o.delete(c)}getMatchingKeysForTargetId(e,t){const o=IDBKeyRange.bound([t],[t+1],!1,!0),c=ut(e);let g=fi();return c.Wt({range:o,jt:!0},(w,P,Y)=>{const ee=Jr(w[1]),pe=new Yt(ee);g=g.add(pe)}).next(()=>g)}containsKey(e,t){const o=ln(t.path),c=IDBKeyRange.bound([o],[Gl(o)],!1,!0);let g=0;return ut(e).Wt({index:"documentTargetsIndex",jt:!0,range:c},([w,P],Y,ee)=>{0!==w&&(g++,ee.done())}).next(()=>g>0)}Et(e,t){return le(e).get(t).next(o=>o?xc(o):null)}}function le(i){return fo(i,"targets")}function Ce(i){return fo(i,"targetGlobal")}function ut(i){return fo(i,"targetDocuments")}function rt(i){return At.apply(this,arguments)}function At(){return At=(0,ke.Z)(function*(i){if(i.code!==O.FAILED_PRECONDITION||i.message!==sf)throw i;Nt("LocalStore","Unexpectedly lost primary lease")}),At.apply(this,arguments)}function Tn([i,e],[t,o]){const c=jn(i,t);return 0===c?jn(e,o):c}class Qn{constructor(e){this.An=e,this.buffer=new Vi(Tn),this.Rn=0}Pn(){return++this.Rn}bn(e){const t=[e,this.Pn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const o=this.buffer.last();Tn(t,o)<0&&(this.buffer=this.buffer.delete(o).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Pi{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const o=this.Vn?3e5:6e4;Nt("LruGarbageCollector",`Garbage collection scheduled in ${o}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",o,(0,ke.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(c){Fl(c)?Nt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",c):yield rt(c)}yield t.Sn(e)}))}}class Do{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(o=>Math.floor(t/100*o))}nthSequenceNumber(e,t){if(0===t)return wt.resolve(Qi.A);const o=new Qn(t);return this.Dn.forEachTarget(e,c=>o.bn(c.sequenceNumber)).next(()=>this.Dn.xn(e,c=>o.bn(c))).next(()=>o.maxValue)}removeTargets(e,t,o){return this.Dn.removeTargets(e,t,o)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Nt("LruGarbageCollector","Garbage collection skipped; disabled"),wt.resolve(Vl)):this.getCacheSize(e).next(o=>o<this.params.cacheSizeCollectionThreshold?(Nt("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Vl):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let o,c,g,w,P,Y,ee;const pe=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(Re=>(Re>this.params.maximumSequenceNumbersToCollect?(Nt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${Re}`),c=this.params.maximumSequenceNumbersToCollect):c=Re,w=Date.now(),this.nthSequenceNumber(e,c))).next(Re=>(o=Re,P=Date.now(),this.removeTargets(e,o,t))).next(Re=>(g=Re,Y=Date.now(),this.removeOrphanedDocuments(e,o))).next(Re=>(ee=Date.now(),Eo()<=nt.in.DEBUG&&Nt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${w-pe}ms\n\tDetermined least recently used ${c} in `+(P-w)+`ms\n\tRemoved ${g} targets in `+(Y-P)+`ms\n\tRemoved ${Re} documents in `+(ee-Y)+`ms\nTotal Duration: ${ee-pe}ms`),wt.resolve({didRun:!0,sequenceNumbersCollected:c,targetsRemoved:g,documentsRemoved:Re})))}}class Oc{constructor(e,t){this.db=e,this.garbageCollector=new Do(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(o=>t.next(c=>o+c))}kn(e){let t=0;return this.xn(e,o=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(o,c)=>t(c))}addReference(e,t,o){return Ba(e,o)}removeReference(e,t,o){return Ba(e,o)}removeTargets(e,t,o){return this.db.getTargetCache().removeTargets(e,t,o)}markPotentiallyOrphaned(e,t){return Ba(e,t)}On(e,t){return function(o,c){let g=!1;return M(o).zt(w=>l(o,w,c).next(P=>(P&&(g=!0),wt.resolve(!P)))).next(()=>g)}(e,t)}removeOrphanedDocuments(e,t){const o=this.db.getRemoteDocumentCache().newChangeBuffer(),c=[];let g=0;return this.Mn(e,(w,P)=>{if(P<=t){const Y=this.On(e,w).next(ee=>{if(!ee)return g++,o.getEntry(e,w).next(()=>(o.removeEntry(w,qn.min()),ut(e).delete([0,ln(w.path)])))});c.push(Y)}}).next(()=>wt.waitFor(c)).next(()=>o.apply(e)).next(()=>g)}removeTarget(e,t){const o=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,o)}updateLimboDocument(e,t){return Ba(e,t)}Mn(e,t){const o=ut(e);let c,g=Qi.A;return o.Wt({index:"documentTargetsIndex"},([w,P],{path:Y,sequenceNumber:ee})=>{0===w?(g!==Qi.A&&t(new Yt(Jr(c)),g),g=ee,c=Y):g=Qi.A}).next(()=>{g!==Qi.A&&t(new Yt(Jr(c)),g)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Ba(i,e){return ut(i).put((o=i.currentSequenceNumber,{targetId:0,path:ln(e.path),sequenceNumber:o}));var o}class Su{constructor(){this.changes=new Na(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,X.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const o=this.changes.get(t);return void 0!==o?wt.resolve(o):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class _p{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,o){return Wd(e).put(o)}removeEntry(e,t,o){return Wd(e).delete(function(c,g){const w=c.path.toArray();return[w.slice(0,w.length-2),w[w.length-2],qs(g),w[w.length-1]]}(t,o))}updateMetadata(e,t){return this.getMetadata(e).next(o=>(o.byteSize+=t,this.Fn(e,o)))}getEntry(e,t){let o=X.newInvalidDocument(t);return Wd(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(pf(t))},(c,g)=>{o=this.$n(t,g)}).next(()=>o)}Bn(e,t){let o={size:0,document:X.newInvalidDocument(t)};return Wd(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(pf(t))},(c,g)=>{o={document:this.$n(t,g),size:d(g)}}).next(()=>o)}getEntries(e,t){let o=Wo();return this.Ln(e,t,(c,g)=>{const w=this.$n(c,g);o=o.insert(c,w)}).next(()=>o)}Un(e,t){let o=Wo(),c=new Ji(Yt.comparator);return this.Ln(e,t,(g,w)=>{const P=this.$n(g,w);o=o.insert(g,P),c=c.insert(g,d(w))}).next(()=>({documents:o,qn:c}))}Ln(e,t,o){if(t.isEmpty())return wt.resolve();let c=new Vi(Zy);t.forEach(Y=>c=c.add(Y));const g=IDBKeyRange.bound(pf(c.first()),pf(c.last())),w=c.getIterator();let P=w.getNext();return Wd(e).Wt({index:"documentKeyIndex",range:g},(Y,ee,pe)=>{const Re=Yt.fromSegments([...ee.prefixPath,ee.collectionGroup,ee.documentId]);for(;P&&Zy(P,Re)<0;)o(P,null),P=w.getNext();P&&P.isEqual(Re)&&(o(P,ee),P=w.hasNext()?w.getNext():null),P?pe.Ut(pf(P)):pe.done()}).next(()=>{for(;P;)o(P,null),P=w.hasNext()?w.getNext():null})}getAllFromCollection(e,t,o){const c=[t.popLast().toArray(),t.lastSegment(),qs(o.readTime),o.documentKey.path.isEmpty()?"":o.documentKey.path.lastSegment()],g=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Wd(e).qt(IDBKeyRange.bound(c,g,!0)).next(w=>{let P=Wo();for(const Y of w){const ee=this.$n(Yt.fromSegments(Y.prefixPath.concat(Y.collectionGroup,Y.documentId)),Y);P=P.insert(ee.key,ee)}return P})}getAllFromCollectionGroup(e,t,o,c){let g=Wo();const w=Ky(t,o),P=Ky(t,Er.max());return Wd(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(w,P,!0)},(Y,ee,pe)=>{const Re=this.$n(Yt.fromSegments(ee.prefixPath.concat(ee.collectionGroup,ee.documentId)),ee);g=g.insert(Re.key,Re),g.size===c&&pe.done()}).next(()=>g)}newChangeBuffer(e){return new vp(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return qy(e).get("remoteDocumentGlobalKey").next(t=>(I(!!t),t))}Fn(e,t){return qy(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const o=function Eh(i,e){let t;if(e.document)t=Xa(i.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const o=Yt.fromSegments(e.noDocument.path),c=_l(e.noDocument.readTime);t=X.newNoDocument(o,c),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return T();{const o=Yt.fromSegments(e.unknownDocument.path),c=_l(e.unknownDocument.version);t=X.newUnknownDocument(o,c)}}return e.readTime&&t.setReadTime(function(o){const c=new Di(o[0],o[1]);return qn.fromTimestamp(c)}(e.readTime)),t}(this.M,t);if(!o.isNoDocument()||!o.version.isEqual(qn.min()))return o}return X.newInvalidDocument(e)}}class vp extends Su{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new Na(o=>o.toString(),(o,c)=>o.isEqual(c))}applyChanges(e){const t=[];let o=0,c=new Vi((g,w)=>jn(g.canonicalString(),w.canonicalString()));return this.changes.forEach((g,w)=>{const P=this.Gn.get(g);if(t.push(this.Kn.removeEntry(e,g,P.readTime)),w.isValidDocument()){const Y=Va(this.Kn.M,w);c=c.add(g.path.popLast()),o+=d(Y)-P.size,t.push(this.Kn.addEntry(e,g,Y))}else if(o-=P.size,this.trackRemovals){const Y=Va(this.Kn.M,w.convertToNoDocument(qn.min()));t.push(this.Kn.addEntry(e,g,Y))}}),c.forEach(g=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,g))}),t.push(this.Kn.updateMetadata(e,o)),wt.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(o=>(this.Gn.set(t,{size:o.size,readTime:o.document.readTime}),o.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:o,qn:c})=>(c.forEach((g,w)=>{this.Gn.set(g,{size:w,readTime:o.get(g).readTime})}),o))}}function qy(i){return fo(i,"remoteDocumentGlobal")}function Wd(i){return fo(i,"remoteDocumentsV14")}function pf(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Ky(i,e){const t=e.documentKey.path.toArray();return[i,qs(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Zy(i,e){const t=i.path.toArray(),o=e.path.toArray();let c=0;for(let g=0;g<t.length-2&&g<o.length-2;++g)if(c=jn(t[g],o[g]),c)return c;return c=jn(t.length,o.length),c||(c=jn(t[t.length-2],o[o.length-2]),c||jn(t[t.length-1],o[o.length-1]))}class $v{constructor(e){this.M=e}kt(e,t,o,c){const g=new kl("createOrUpgrade",t);var P;o<1&&c>=1&&(e.createObjectStore("owner"),(P=e).createObjectStore("mutationQueues",{keyPath:"userId"}),P.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",aa,{unique:!0}),P.createObjectStore("documentMutations"),Yy(e),function(P){P.createObjectStore("remoteDocuments")}(e));let w=wt.resolve();return o<3&&c>=3&&(0!==o&&(function(P){P.deleteObjectStore("targetDocuments"),P.deleteObjectStore("targets"),P.deleteObjectStore("targetGlobal")}(e),Yy(e)),w=w.next(()=>function(P){const Y=P.store("targetGlobal"),ee={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:qn.min().toTimestamp(),targetCount:0};return Y.put("targetGlobalKey",ee)}(g))),o<4&&c>=4&&(0!==o&&(w=w.next(()=>function(P,Y){return Y.store("mutations").qt().next(ee=>{P.deleteObjectStore("mutations"),P.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",aa,{unique:!0});const pe=Y.store("mutations"),Re=ee.map(ht=>pe.put(ht));return wt.waitFor(Re)})}(e,g))),w=w.next(()=>{!function(P){P.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),o<5&&c>=5&&(w=w.next(()=>this.Qn(g))),o<6&&c>=6&&(w=w.next(()=>(function(P){P.createObjectStore("remoteDocumentGlobal")}(e),this.jn(g)))),o<7&&c>=7&&(w=w.next(()=>this.Wn(g))),o<8&&c>=8&&(w=w.next(()=>this.zn(e,g))),o<9&&c>=9&&(w=w.next(()=>{!function(P){P.objectStoreNames.contains("remoteDocumentChanges")&&P.deleteObjectStore("remoteDocumentChanges")}(e)})),o<10&&c>=10&&(w=w.next(()=>this.Hn(g))),o<11&&c>=11&&(w=w.next(()=>{(function(P){P.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(P){P.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),o<12&&c>=12&&(w=w.next(()=>{!function(P){const Y=P.createObjectStore("documentOverlays",{keyPath:fp});Y.createIndex("collectionPathOverlayIndex",tf,{unique:!1}),Y.createIndex("collectionGroupOverlayIndex",nf,{unique:!1})}(e)})),o<13&&c>=13&&(w=w.next(()=>function(P){const Y=P.createObjectStore("remoteDocumentsV14",{keyPath:td});Y.createIndex("documentKeyIndex",yh),Y.createIndex("collectionGroupIndex",Nl)}(e)).next(()=>this.Jn(e,g)).next(()=>e.deleteObjectStore("remoteDocuments"))),o<14&&c>=14&&(w=w.next(()=>{!function(P){P.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),P.createObjectStore("indexState",{keyPath:La}).createIndex("sequenceNumberIndex",id,{unique:!1}),P.createObjectStore("indexEntries",{keyPath:sd}).createIndex("documentKeyIndex",ef,{unique:!1})}(e)})),w}jn(e){let t=0;return e.store("remoteDocuments").Wt((o,c)=>{t+=d(c)}).next(()=>{const o={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",o)})}Qn(e){const t=e.store("mutationQueues"),o=e.store("mutations");return t.qt().next(c=>wt.forEach(c,g=>{const w=IDBKeyRange.bound([g.userId,-1],[g.userId,g.lastAcknowledgedBatchId]);return o.qt("userMutationsIndex",w).next(P=>wt.forEach(P,Y=>{I(Y.userId===g.userId);const ee=Sc(this.M,Y);return Ih(e,g.userId,ee).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),o=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(c=>{const g=[];return o.Wt((w,P)=>{const Y=new Hr(w),ee=[0,ln(Y)];g.push(t.get(ee).next(pe=>pe?wt.resolve():t.put({targetId:0,path:ln(Y),sequenceNumber:c.highestListenSequenceNumber})))}).next(()=>wt.waitFor(g))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:Tc});const o=t.store("collectionParents"),c=new ad,g=w=>{if(c.add(w)){const P=w.lastSegment(),Y=w.popLast();return o.put({collectionId:P,parent:ln(Y)})}};return t.store("remoteDocuments").Wt({jt:!0},(w,P)=>{const Y=new Hr(w);return g(Y.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([w,P,Y],ee)=>{const pe=Jr(P);return g(pe.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((o,c)=>{const g=xc(c),w=Bd(this.M,g);return t.put(w)})}Jn(e,t){const o=t.store("remoteDocuments"),c=[];return o.Wt((g,w)=>{const P=t.store("remoteDocumentsV14"),Y=(ee=w,ee.document?new Yt(Hr.fromString(ee.document.name).popFirst(5)):ee.noDocument?Yt.fromSegments(ee.noDocument.path):ee.unknownDocument?Yt.fromSegments(ee.unknownDocument.path):T()).path.toArray();var ee;const pe={prefixPath:Y.slice(0,Y.length-2),collectionGroup:Y[Y.length-2],documentId:Y[Y.length-1],readTime:w.readTime||[0,0],unknownDocument:w.unknownDocument,noDocument:w.noDocument,document:w.document,hasCommittedMutations:!!w.hasCommittedMutations};c.push(P.put(pe))}).next(()=>wt.waitFor(c))}}function Yy(i){i.createObjectStore("targetDocuments",{keyPath:nd}).createIndex("documentTargetsIndex",rd,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Dc,{unique:!0}),i.createObjectStore("targetGlobal")}const Yg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Qg{constructor(e,t,o,c,g,w,P,Y,ee,pe,Re=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=o,this.Yn=g,this.window=w,this.document=P,this.Xn=ee,this.Zn=pe,this.ts=Re,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=ht=>Promise.resolve(),!Qg.vt())throw new q(O.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Oc(this,c),this.hs=t+"main",this.M=new wh(Y),this.ls=new el(this.hs,this.ts,new $v(this.M)),this.fs=new se(this.referenceDelegate,this.M),this.ds=new _p(this.M),this._s=new gp,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===pe&&Gr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new q(O.FAILED_PRECONDITION,Yg);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new Qi(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var o=(0,ke.Z)(function*(c){if(t.started)return e(c)});return function(c){return o.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,ke.Z)(function*(o){null===o.newVersion&&(yield e())});return function(o){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,ke.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>tu(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.Ps(e).next(()=>!0))).catch(e=>{if(Fl(e))return Nt("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Nt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return gf(e).get("owner").next(t=>wt.resolve(this.bs(t)))}Vs(e){return tu(e).delete(this.clientId)}vs(){var e=this;return(0,ke.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",o=>{const c=fo(o,"clientMetadata");return c.qt().next(g=>{const w=e.Ds(g,18e5),P=g.filter(Y=>-1===w.indexOf(Y));return wt.forEach(P,Y=>c.delete(Y.clientId)).next(()=>P)})}).catch(()=>[]);if(e.ws)for(const o of t)e.ws.removeItem(e.Cs(o.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}bs(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?wt.resolve(!0):gf(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.bs(t)&&this.networkEnabled)return!0;if(!this.bs(t)){if(!t.allowTabSynchronization)throw new q(O.FAILED_PRECONDITION,Yg);return!1}}return!(!this.networkEnabled||!this.inForeground)||tu(e).qt().next(o=>void 0===this.Ds(o,5e3).find(c=>{if(this.clientId!==c.clientId){const w=!this.inForeground&&c.inForeground,P=this.networkEnabled===c.networkEnabled;if(!this.networkEnabled&&c.networkEnabled||w&&P)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Nt("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ke.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const o=new Vd(t,Qi.A);return e.Rs(o).next(()=>e.Vs(o))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(o=>this.Ss(o.updateTimeMs,t)&&!this.xs(o.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>tu(e).qt().next(t=>this.Ds(t,18e5).map(o=>o.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return u.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new $d(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return Hd.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,o){Nt("IndexedDbPersistence","Starting transaction:",e);const c="readonly"===t?"readonly":"readwrite",g=14===(w=this.ts)?Zg:13===w?Ld:12===w?rf:11===w?Fd:void T();var w;let P;return this.ls.runTransaction(e,c,g,Y=>(P=new Vd(Y,this.es?this.es.next():Qi.A),"readwrite-primary"===t?this.Es(P).next(ee=>!!ee||this.As(P)).next(ee=>{if(!ee)throw Gr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new q(O.FAILED_PRECONDITION,sf);return o(P)}).next(ee=>this.Ps(P).next(()=>ee)):this.$s(P).next(()=>o(P)))).then(Y=>(P.raiseOnCommittedEvent(),Y))}$s(e){return gf(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.bs(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new q(O.FAILED_PRECONDITION,Yg)})}Ps(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return gf(e).put("owner",t)}static vt(){return el.vt()}Rs(e){const t=gf(e);return t.get("owner").next(o=>this.bs(o)?(Nt("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):wt.resolve())}Ss(e,t){const o=Date.now();return!(e<o-t||e>o&&(Gr(`Detected an update time that is in the future: ${e} > ${o}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,Ye.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const o=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return Nt("IndexedDbPersistence",`Client '${e}' ${o?"is":"is not"} zombied in LocalStorage`),o}catch(o){return Gr("IndexedDbPersistence","Failed to get zombied client id.",o),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){Gr("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function gf(i){return fo(i,"owner")}function tu(i){return fo(i,"clientMetadata")}function Dh(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}class Qy{constructor(e,t,o){this.ds=e,this.Bs=t,this.indexManager=o}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(o=>this.Us(e,t,o))}Us(e,t,o){return this.ds.getEntry(e,t).next(c=>{for(const g of o)g.applyToLocalView(c);return c})}qs(e,t){e.forEach((o,c)=>{for(const g of t)g.applyToLocalView(c)})}Ks(e,t){return this.ds.getEntries(e,t).next(o=>this.Gs(e,o).next(()=>o))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>this.qs(t,o))}Qs(e,t,o){return Yt.isDocumentKey((c=t).path)&&null===c.collectionGroup&&0===c.filters.length?this.js(e,t.path):qc(t)?this.Ws(e,t,o):this.zs(e,t,o);var c}js(e,t){return this.Ls(e,new Yt(t)).next(o=>{let c=Yc();return o.isFoundDocument()&&(c=c.insert(o.key,o)),c})}Ws(e,t,o){const c=t.collectionGroup;let g=Yc();return this.indexManager.getCollectionParents(e,c).next(w=>wt.forEach(w,P=>{const Y=(ee=t,pe=P.child(c),new Za(pe,null,ee.explicitOrderBy.slice(),ee.filters.slice(),ee.limit,ee.limitType,ee.startAt,ee.endAt));var ee,pe;return this.zs(e,Y,o).next(ee=>{ee.forEach((pe,Re)=>{g=g.insert(pe,Re)})})}).next(()=>g))}zs(e,t,o){let c;return this.ds.getAllFromCollection(e,t.path,o).next(g=>(c=g,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(g=>{for(const w of g)for(const P of w.mutations){const Y=P.key;let ee=c.get(Y);null==ee&&(ee=X.newInvalidDocument(Y),c=c.insert(Y,ee)),_c(P,ee,w.localWriteTime),ee.isFoundDocument()||(c=c.remove(Y))}}).next(()=>(c.forEach((g,w)=>{Kc(t,w)||(c=c.remove(g))}),c))}}class mf{constructor(e,t,o,c){this.targetId=e,this.fromCache=t,this.Hs=o,this.Js=c}static Ys(e,t){let o=fi(),c=fi();for(const g of t.docChanges)switch(g.type){case 0:o=o.add(g.doc.key);break;case 1:c=c.add(g.doc.key)}return new mf(e,t.fromCache,o,c)}}class yf{Xs(e){this.Zs=e}Qs(e,t,o,c){return 0===(g=t).filters.length&&null===g.limit&&null==g.startAt&&null==g.endAt&&(0===g.explicitOrderBy.length||1===g.explicitOrderBy.length&&g.explicitOrderBy[0].field.isKeyField())||o.isEqual(qn.min())?this.ti(e,t):this.Zs.Ks(e,c).next(g=>{const w=this.ei(t,g);return(Tl(t)||ma(t))&&this.ni(t.limitType,w,c,o)?this.ti(e,t):(Eo()<=nt.in.DEBUG&&Nt("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),gu(t)),this.Zs.Qs(e,t,Mn(o,-1)).next(P=>(w.forEach(Y=>{P=P.insert(Y.key,Y)}),P)))});var g}ei(e,t){let o=new Vi(Md(e));return t.forEach((c,g)=>{Kc(e,g)&&(o=o.add(g))}),o}ni(e,t,o,c){if(o.size!==t.size)return!0;const g="F"===e?t.last():t.first();return!!g&&(g.hasPendingWrites||g.version.compareTo(c)>0)}ti(e,t){return Eo()<=nt.in.DEBUG&&Nt("QueryEngine","Using full collection scan to execute query:",gu(t)),this.Zs.Qs(e,t,Er.min())}}class Jg{constructor(e,t,o,c){this.persistence=e,this.si=t,this.M=c,this.ii=new Ji(jn),this.ri=new Na(g=>$o(g),ao),this.oi=new Map,this.ui=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.ai(o)}ai(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.ci=new Qy(this.ui,this.Bs,this.indexManager),this.ui.setIndexManager(this.indexManager),this.si.Xs(this.ci)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ii))}}function _f(i,e,t,o){return new Jg(i,e,t,o)}function Xg(i,e){return xu.apply(this,arguments)}function xu(){return xu=(0,ke.Z)(function*(i,e){const t=R(i);return yield t.persistence.runTransaction("Handle user change","readonly",o=>{let c;return t.Bs.getAllMutationBatches(o).next(g=>(c=g,t.ai(e),t.Bs.getAllMutationBatches(o))).next(g=>{const w=[],P=[];let Y=fi();for(const ee of c){w.push(ee.batchId);for(const pe of ee.mutations)Y=Y.add(pe.key)}for(const ee of g){P.push(ee.batchId);for(const pe of ee.mutations)Y=Y.add(pe.key)}return t.ci.Ks(o,Y).next(ee=>({hi:ee,removedBatchIds:w,addedBatchIds:P}))})})}),xu.apply(this,arguments)}function em(i,e){const t=R(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",o=>{const c=e.batch.keys(),g=t.ui.newChangeBuffer({trackRemovals:!0});return function(w,P,Y,ee){const pe=Y.batch,Re=pe.keys();let ht=wt.resolve();return Re.forEach(Ot=>{ht=ht.next(()=>ee.getEntry(P,Ot)).next(Vt=>{const An=Y.docVersions.get(Ot);I(null!==An),Vt.version.compareTo(An)<0&&(pe.applyToRemoteDocument(Vt,Y),Vt.isValidDocument()&&(Vt.setReadTime(Y.commitVersion),ee.addEntry(Vt)))})}),ht.next(()=>w.Bs.removeMutationBatch(P,pe))}(t,o,e,g).next(()=>g.apply(o)).next(()=>t.Bs.performConsistencyCheck(o)).next(()=>t.ci.Ks(o,c))})}function tm(i){const e=R(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function wp(i,e){const t=R(i),o=e.snapshotVersion;let c=t.ii;return t.persistence.runTransaction("Apply remote event","readwrite-primary",g=>{const w=t.ui.newChangeBuffer({trackRemovals:!0});c=t.ii;const P=[];e.targetChanges.forEach((ee,pe)=>{const Re=c.get(pe);if(!Re)return;P.push(t.fs.removeMatchingKeys(g,ee.removedDocuments,pe).next(()=>t.fs.addMatchingKeys(g,ee.addedDocuments,pe)));let ht=Re.withSequenceNumber(g.currentSequenceNumber);var Ot,Vt,An;e.targetMismatches.has(pe)?ht=ht.withResumeToken(Ti.EMPTY_BYTE_STRING,qn.min()).withLastLimboFreeSnapshotVersion(qn.min()):ee.resumeToken.approximateByteSize()>0&&(ht=ht.withResumeToken(ee.resumeToken,o)),c=c.insert(pe,ht),Vt=ht,An=ee,(0===(Ot=Re).resumeToken.approximateByteSize()||Vt.snapshotVersion.toMicroseconds()-Ot.snapshotVersion.toMicroseconds()>=3e8||An.addedDocuments.size+An.modifiedDocuments.size+An.removedDocuments.size>0)&&P.push(t.fs.updateTargetData(g,ht))});let Y=Wo();if(e.documentUpdates.forEach(ee=>{e.resolvedLimboDocuments.has(ee)&&P.push(t.persistence.referenceDelegate.updateLimboDocument(g,ee))}),P.push(nm(g,w,e.documentUpdates).next(ee=>{Y=ee})),!o.isEqual(qn.min())){const ee=t.fs.getLastRemoteSnapshotVersion(g).next(pe=>t.fs.setTargetsMetadata(g,g.currentSequenceNumber,o));P.push(ee)}return wt.waitFor(P).next(()=>w.apply(g)).next(()=>t.ci.Gs(g,Y)).next(()=>Y)}).then(g=>(t.ii=c,g))}function nm(i,e,t){let o=fi();return t.forEach(c=>o=o.add(c)),e.getEntries(i,o).next(c=>{let g=Wo();return t.forEach((w,P)=>{const Y=c.get(w);P.isNoDocument()&&P.version.isEqual(qn.min())?(e.removeEntry(w,P.readTime),g=g.insert(w,P)):!Y.isValidDocument()||P.version.compareTo(Y.version)>0||0===P.version.compareTo(Y.version)&&Y.hasPendingWrites?(e.addEntry(P),g=g.insert(w,P)):Nt("LocalStore","Ignoring outdated watch update for ",w,". Current version:",Y.version," Watch version:",P.version)}),g})}function rm(i,e){const t=R(i);return t.persistence.runTransaction("Get next mutation batch","readonly",o=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(o,e)))}function zd(i,e){const t=R(i);return t.persistence.runTransaction("Allocate target","readwrite",o=>{let c;return t.fs.getTargetData(o,e).next(g=>g?(c=g,wt.resolve(c)):t.fs.allocateTargetId(o).next(w=>(c=new Ll(e,w,0,o.currentSequenceNumber),t.fs.addTargetData(o,c).next(()=>c))))}).then(o=>{const c=t.ii.get(o.targetId);return(null===c||o.snapshotVersion.compareTo(c.snapshotVersion)>0)&&(t.ii=t.ii.insert(o.targetId,o),t.ri.set(e,o.targetId)),o})}function qd(i,e,t){return ld.apply(this,arguments)}function ld(){return ld=(0,ke.Z)(function*(i,e,t){const o=R(i),c=o.ii.get(e),g=t?"readwrite":"readwrite-primary";try{t||(yield o.persistence.runTransaction("Release target",g,w=>o.persistence.referenceDelegate.removeTarget(w,c)))}catch(w){if(!Fl(w))throw w;Nt("LocalStore",`Failed to update sequence numbers for target ${e}: ${w}`)}o.ii=o.ii.remove(e),o.ri.delete(c.target)}),ld.apply(this,arguments)}function rc(i,e,t){const o=R(i);let c=qn.min(),g=fi();return o.persistence.runTransaction("Execute query","readonly",w=>function(P,Y,ee){const pe=R(P),Re=pe.ri.get(ee);return void 0!==Re?wt.resolve(pe.ii.get(Re)):pe.fs.getTargetData(Y,ee)}(o,w,uo(e)).next(P=>{if(P)return c=P.lastLimboFreeSnapshotVersion,o.fs.getMatchingKeysForTargetId(w,P.targetId).next(Y=>{g=Y})}).next(()=>o.si.Qs(w,e,t?c:qn.min(),t?g:fi())).next(P=>(Kd(o,xd(e),P),{documents:P,li:g})))}function vf(i,e){const t=R(i),o=R(t.fs),c=t.ii.get(e);return c?Promise.resolve(c.target):t.persistence.runTransaction("Get target data","readonly",g=>o.Et(g,e).next(w=>w?w.target:null))}function ud(i,e){const t=R(i),o=t.oi.get(e)||qn.min();return t.persistence.runTransaction("Get new document changes","readonly",c=>t.ui.getAllFromCollectionGroup(c,e,Mn(o,-1),Number.MAX_SAFE_INTEGER)).then(c=>(Kd(t,e,c),c))}function Kd(i,e,t){let o=qn.min();t.forEach((c,g)=>{g.readTime.compareTo(o)>0&&(o=g.readTime)}),i.oi.set(e,o)}function Ep(){return Ep=(0,ke.Z)(function*(i,e,t,o){const c=R(i);let g=fi(),w=Wo();for(const ee of t){const pe=e.fi(ee.metadata.name);ee.document&&(g=g.add(pe));const Re=e.di(ee);Re.setReadTime(e._i(ee.metadata.readTime)),w=w.insert(pe,Re)}const P=c.ui.newChangeBuffer({trackRemovals:!0}),Y=yield zd(c,(ee=o,uo(Ra(Hr.fromString(`__bundle__/docs/${ee}`)))));var ee;return c.persistence.runTransaction("Apply bundle documents","readwrite",ee=>nm(ee,P,w).next(pe=>(P.apply(ee),pe)).next(pe=>c.fs.removeMatchingKeysForTargetId(ee,Y.targetId).next(()=>c.fs.addMatchingKeys(ee,g,Y.targetId)).next(()=>c.ci.Gs(ee,pe)).next(()=>pe)))}),Ep.apply(this,arguments)}function im(i,e){return wf.apply(this,arguments)}function wf(){return wf=(0,ke.Z)(function*(i,e,t=fi()){const o=yield zd(i,uo(jd(e.bundledQuery))),c=R(i);return c.persistence.runTransaction("Save named query","readwrite",g=>{const w=Kr(e.readTime);if(o.snapshotVersion.compareTo(w)>=0)return c._s.saveNamedQuery(g,e);const P=o.withResumeToken(Ti.EMPTY_BYTE_STRING,w);return c.ii=c.ii.insert(P.targetId,P),c.fs.updateTargetData(g,P).next(()=>c.fs.removeMatchingKeysForTargetId(g,o.targetId)).next(()=>c.fs.addMatchingKeys(g,t,o.targetId)).next(()=>c._s.saveNamedQuery(g,e))})}),wf.apply(this,arguments)}class bp{constructor(e){this.M=e,this.wi=new Map,this.mi=new Map}getBundleMetadata(e,t){return wt.resolve(this.wi.get(t))}saveBundleMetadata(e,t){var o;return this.wi.set(t.id,{id:(o=t).id,version:o.version,createTime:Kr(o.createTime)}),wt.resolve()}getNamedQuery(e,t){return wt.resolve(this.mi.get(t))}saveNamedQuery(e,t){return this.mi.set(t.name,{name:(o=t).name,query:jd(o.bundledQuery),readTime:Kr(o.readTime)}),wt.resolve();var o}}class Cp{constructor(){this.overlays=new Ji(Yt.comparator),this.gi=new Map}getOverlay(e,t){return wt.resolve(this.overlays.get(t))}saveOverlays(e,t,o){return o.forEach((c,g)=>{this.Xt(e,t,g)}),wt.resolve()}removeOverlaysForBatchId(e,t,o){const c=this.gi.get(o);return void 0!==c&&(c.forEach(g=>this.overlays=this.overlays.remove(g)),this.gi.delete(o)),wt.resolve()}getOverlaysForCollection(e,t,o){const c=ka(),g=t.length+1,w=new Yt(t.child("")),P=this.overlays.getIteratorFrom(w);for(;P.hasNext();){const Y=P.getNext().value,ee=Y.getKey();if(!t.isPrefixOf(ee.path))break;ee.path.length===g&&Y.largestBatchId>o&&c.set(Y.getKey(),Y)}return wt.resolve(c)}getOverlaysForCollectionGroup(e,t,o,c){let g=new Ji((ee,pe)=>ee-pe);const w=this.overlays.getIterator();for(;w.hasNext();){const ee=w.getNext().value;if(ee.getKey().getCollectionGroup()===t&&ee.largestBatchId>o){let pe=g.get(ee.largestBatchId);null===pe&&(pe=ka(),g=g.insert(ee.largestBatchId,pe)),pe.set(ee.getKey(),ee)}}const P=ka(),Y=g.getIterator();for(;Y.hasNext()&&(Y.getNext().value.forEach((ee,pe)=>P.set(ee,pe)),!(P.size()>=c)););return wt.resolve(P)}Xt(e,t,o){if(null===o)return;const c=this.overlays.get(o.key);if(null!==c){const w=this.gi.get(c.largestBatchId).delete(o.key);this.gi.set(c.largestBatchId,w)}this.overlays=this.overlays.insert(o.key,new Ud(t,o));let g=this.gi.get(t);void 0===g&&(g=fi(),this.gi.set(t,g)),this.gi.set(t,g.add(o.key))}}class Ef{constructor(){this.yi=new Vi(po.pi),this.Ii=new Vi(po.Ti)}isEmpty(){return this.yi.isEmpty()}addReference(e,t){const o=new po(e,t);this.yi=this.yi.add(o),this.Ii=this.Ii.add(o)}Ei(e,t){e.forEach(o=>this.addReference(o,t))}removeReference(e,t){this.Ai(new po(e,t))}Ri(e,t){e.forEach(o=>this.removeReference(o,t))}Pi(e){const t=new Yt(new Hr([])),o=new po(t,e),c=new po(t,e+1),g=[];return this.Ii.forEachInRange([o,c],w=>{this.Ai(w),g.push(w.key)}),g}bi(){this.yi.forEach(e=>this.Ai(e))}Ai(e){this.yi=this.yi.delete(e),this.Ii=this.Ii.delete(e)}Vi(e){const t=new Yt(new Hr([])),o=new po(t,e),c=new po(t,e+1);let g=fi();return this.Ii.forEachInRange([o,c],w=>{g=g.add(w.key)}),g}containsKey(e){const t=new po(e,0),o=this.yi.firstAfterOrEqual(t);return null!==o&&e.isEqual(o.key)}}class po{constructor(e,t){this.key=e,this.vi=t}static pi(e,t){return Yt.comparator(e.key,t.key)||jn(e.vi,t.vi)}static Ti(e,t){return jn(e.vi,t.vi)||Yt.comparator(e.key,t.key)}}class Jy{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.Si=1,this.Di=new Vi(po.pi)}checkEmpty(e){return wt.resolve(0===this.Bs.length)}addMutationBatch(e,t,o,c){const g=this.Si;this.Si++;const w=new Ac(g,t,o,c);this.Bs.push(w);for(const P of c)this.Di=this.Di.add(new po(P.key,g)),this.indexManager.addToCollectionParentIndex(e,P.key.path.popLast());return wt.resolve(w)}lookupMutationBatch(e,t){return wt.resolve(this.Ci(t))}getNextMutationBatchAfterBatchId(e,t){const c=this.xi(t+1),g=c<0?0:c;return wt.resolve(this.Bs.length>g?this.Bs[g]:null)}getHighestUnacknowledgedBatchId(){return wt.resolve(0===this.Bs.length?-1:this.Si-1)}getAllMutationBatches(e){return wt.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const o=new po(t,0),c=new po(t,Number.POSITIVE_INFINITY),g=[];return this.Di.forEachInRange([o,c],w=>{const P=this.Ci(w.vi);g.push(P)}),wt.resolve(g)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new Vi(jn);return t.forEach(c=>{const g=new po(c,0),w=new po(c,Number.POSITIVE_INFINITY);this.Di.forEachInRange([g,w],P=>{o=o.add(P.vi)})}),wt.resolve(this.Ni(o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,c=o.length+1;let g=o;Yt.isDocumentKey(g)||(g=g.child(""));const w=new po(new Yt(g),0);let P=new Vi(jn);return this.Di.forEachWhile(Y=>{const ee=Y.key.path;return!!o.isPrefixOf(ee)&&(ee.length===c&&(P=P.add(Y.vi)),!0)},w),wt.resolve(this.Ni(P))}Ni(e){const t=[];return e.forEach(o=>{const c=this.Ci(o);null!==c&&t.push(c)}),t}removeMutationBatch(e,t){I(0===this.ki(t.batchId,"removed")),this.Bs.shift();let o=this.Di;return wt.forEach(t.mutations,c=>{const g=new po(c.key,t.batchId);return o=o.delete(g),this.referenceDelegate.markPotentiallyOrphaned(e,c.key)}).next(()=>{this.Di=o})}_n(e){}containsKey(e,t){const o=new po(t,0),c=this.Di.firstAfterOrEqual(o);return wt.resolve(t.isEqual(c&&c.key))}performConsistencyCheck(e){return wt.resolve()}ki(e,t){return this.xi(e)}xi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}Ci(e){const t=this.xi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class sm{constructor(e){this.Mi=e,this.docs=new Ji(Yt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const o=t.key,c=this.docs.get(o),g=c?c.size:0,w=this.Mi(t);return this.docs=this.docs.insert(o,{document:t.mutableCopy(),size:w}),this.size+=w-g,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const o=this.docs.get(t);return wt.resolve(o?o.document.mutableCopy():X.newInvalidDocument(t))}getEntries(e,t){let o=Wo();return t.forEach(c=>{const g=this.docs.get(c);o=o.insert(c,g?g.document.mutableCopy():X.newInvalidDocument(c))}),wt.resolve(o)}getAllFromCollection(e,t,o){let c=Wo();const g=new Yt(t.child("")),w=this.docs.getIteratorFrom(g);for(;w.hasNext();){const{key:P,value:{document:Y}}=w.getNext();if(!t.isPrefixOf(P.path))break;P.path.length>t.length+1||gr(or(Y),o)<=0||(c=c.insert(Y.key,Y.mutableCopy()))}return wt.resolve(c)}getAllFromCollectionGroup(e,t,o,c){T()}Oi(e,t){return wt.forEach(this.docs,o=>t(o))}newChangeBuffer(e){return new Gv(this)}getSize(e){return wt.resolve(this.size)}}class Gv extends Su{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((o,c)=>{c.isValidDocument()?t.push(this.Kn.addEntry(e,c)):this.Kn.removeEntry(o)}),wt.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class om{constructor(e){this.persistence=e,this.Fi=new Na(t=>$o(t),ao),this.lastRemoteSnapshotVersion=qn.min(),this.highestTargetId=0,this.$i=0,this.Bi=new Ef,this.targetCount=0,this.Li=j.gn()}forEachTarget(e,t){return this.Fi.forEach((o,c)=>t(c)),wt.resolve()}getLastRemoteSnapshotVersion(e){return wt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return wt.resolve(this.$i)}allocateTargetId(e){return this.highestTargetId=this.Li.next(),wt.resolve(this.highestTargetId)}setTargetsMetadata(e,t,o){return o&&(this.lastRemoteSnapshotVersion=o),t>this.$i&&(this.$i=t),wt.resolve()}Tn(e){this.Fi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Li=new j(t),this.highestTargetId=t),e.sequenceNumber>this.$i&&(this.$i=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,wt.resolve()}updateTargetData(e,t){return this.Tn(t),wt.resolve()}removeTargetData(e,t){return this.Fi.delete(t.target),this.Bi.Pi(t.targetId),this.targetCount-=1,wt.resolve()}removeTargets(e,t,o){let c=0;const g=[];return this.Fi.forEach((w,P)=>{P.sequenceNumber<=t&&null===o.get(P.targetId)&&(this.Fi.delete(w),g.push(this.removeMatchingKeysForTargetId(e,P.targetId)),c++)}),wt.waitFor(g).next(()=>c)}getTargetCount(e){return wt.resolve(this.targetCount)}getTargetData(e,t){const o=this.Fi.get(t)||null;return wt.resolve(o)}addMatchingKeys(e,t,o){return this.Bi.Ei(t,o),wt.resolve()}removeMatchingKeys(e,t,o){this.Bi.Ri(t,o);const c=this.persistence.referenceDelegate,g=[];return c&&t.forEach(w=>{g.push(c.markPotentiallyOrphaned(e,w))}),wt.waitFor(g)}removeMatchingKeysForTargetId(e,t){return this.Bi.Pi(t),wt.resolve()}getMatchingKeysForTargetId(e,t){const o=this.Bi.Vi(t);return wt.resolve(o)}containsKey(e,t){return wt.resolve(this.Bi.containsKey(t))}}class am{constructor(e,t){this.Ui={},this.overlays={},this.es=new Qi(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new om(this),this.indexManager=new ff,this.ds=new sm(o=>this.referenceDelegate.qi(o)),this.M=new wh(t),this._s=new bp(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Cp,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let o=this.Ui[e.toKey()];return o||(o=new Jy(t,this.referenceDelegate),this.Ui[e.toKey()]=o),o}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,o){Nt("MemoryPersistence","Starting transaction:",e);const c=new Xy(this.es.next());return this.referenceDelegate.Ki(),o(c).next(g=>this.referenceDelegate.Gi(c).next(()=>g)).toPromise().then(g=>(c.raiseOnCommittedEvent(),g))}Qi(e,t){return wt.or(Object.values(this.Ui).map(o=>()=>o.containsKey(e,t)))}}class Xy extends _h{constructor(e){super(),this.currentSequenceNumber=e}}class bf{constructor(e){this.persistence=e,this.ji=new Ef,this.Wi=null}static zi(e){return new bf(e)}get Hi(){if(this.Wi)return this.Wi;throw T()}addReference(e,t,o){return this.ji.addReference(o,t),this.Hi.delete(o.toString()),wt.resolve()}removeReference(e,t,o){return this.ji.removeReference(o,t),this.Hi.add(o.toString()),wt.resolve()}markPotentiallyOrphaned(e,t){return this.Hi.add(t.toString()),wt.resolve()}removeTarget(e,t){this.ji.Pi(t.targetId).forEach(c=>this.Hi.add(c.toString()));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,t.targetId).next(c=>{c.forEach(g=>this.Hi.add(g.toString()))}).next(()=>o.removeTargetData(e,t))}Ki(){this.Wi=new Set}Gi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return wt.forEach(this.Hi,o=>{const c=Yt.fromPath(o);return this.Ji(e,c).next(g=>{g||t.removeEntry(c,qn.min())})}).next(()=>(this.Wi=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ji(e,t).next(o=>{o?this.Hi.delete(t.toString()):this.Hi.add(t.toString())})}qi(e){return 0}Ji(e,t){return wt.or([()=>wt.resolve(this.ji.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Qi(e,t)])}}function lm(i,e){return`firestore_clients_${i}_${e}`}function um(i,e,t){let o=`firestore_mutations_${i}_${t}`;return e.isAuthenticated()&&(o+=`_${e.uid}`),o}function ja(i,e){return`firestore_targets_${i}_${e}`}class Cf{constructor(e,t,o,c){this.user=e,this.batchId=t,this.state=o,this.error=c}static Yi(e,t,o){const c=JSON.parse(o);let g,w="object"==typeof c&&-1!==["pending","acknowledged","rejected"].indexOf(c.state)&&(void 0===c.error||"object"==typeof c.error);return w&&c.error&&(w="string"==typeof c.error.message&&"string"==typeof c.error.code,w&&(g=new q(c.error.code,c.error.message))),w?new Cf(e,t,c.state,g):(Gr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${o}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Th{constructor(e,t,o){this.targetId=e,this.state=t,this.error=o}static Yi(e,t){const o=JSON.parse(t);let c,g="object"==typeof o&&-1!==["not-current","current","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return g&&o.error&&(g="string"==typeof o.error.message&&"string"==typeof o.error.code,g&&(c=new q(o.error.code,o.error.message))),g?new Th(e,o.state,c):(Gr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ip{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Yi(e,t){const o=JSON.parse(t);let c="object"==typeof o&&o.activeTargetIds instanceof Array,g=ss();for(let w=0;c&&w<o.activeTargetIds.length;++w)c=Jo(o.activeTargetIds[w]),g=g.add(o.activeTargetIds[w]);return c?new Ip(e,g):(Gr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class cm{constructor(e,t){this.clientId=e,this.onlineState=t}static Yi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new cm(t.clientId,t.onlineState):(Gr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class If{constructor(){this.activeTargetIds=ss()}Zi(e){this.activeTargetIds=this.activeTargetIds.add(e)}tr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Xi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class dm{constructor(e,t,o,c,g){this.window=e,this.Yn=t,this.persistenceKey=o,this.er=c,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.nr=this.sr.bind(this),this.ir=new Ji(jn),this.started=!1,this.rr=[];const w=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=g,this.ur=lm(this.persistenceKey,this.er),this.ar=`firestore_sequence_number_${this.persistenceKey}`,this.ir=this.ir.insert(this.er,new If),this.cr=new RegExp(`^firestore_clients_${w}_([^_]*)$`),this.hr=new RegExp(`^firestore_mutations_${w}_(\\d+)(?:_(.*))?$`),this.lr=new RegExp(`^firestore_targets_${w}_(\\d+)$`),this.dr=`firestore_online_state_${this.persistenceKey}`,this._r=function(P){return`firestore_bundle_loaded_v2_${P}`}(this.persistenceKey),this.window.addEventListener("storage",this.nr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ke.Z)(function*(){const t=yield e.syncEngine.Fs();for(const c of t){if(c===e.er)continue;const g=e.getItem(lm(e.persistenceKey,c));if(g){const w=Ip.Yi(c,g);w&&(e.ir=e.ir.insert(w.clientId,w))}}e.wr();const o=e.storage.getItem(e.dr);if(o){const c=e.mr(o);c&&e.gr(c)}for(const c of e.rr)e.sr(c);e.rr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ar,JSON.stringify(e))}getAllActiveQueryTargets(){return this.yr(this.ir)}isActiveQueryTarget(e){let t=!1;return this.ir.forEach((o,c)=>{c.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.pr(e,"pending")}updateMutationState(e,t,o){this.pr(e,t,o),this.Ir(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const o=this.storage.getItem(ja(this.persistenceKey,e));if(o){const c=Th.Yi(e,o);c&&(t=c.state)}}return this.Tr.Zi(e),this.wr(),t}removeLocalQueryTarget(e){this.Tr.tr(e),this.wr()}isLocalQueryTarget(e){return this.Tr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(ja(this.persistenceKey,e))}updateQueryState(e,t,o){this.Er(e,t,o)}handleUserChange(e,t,o){t.forEach(c=>{this.Ir(c)}),this.currentUser=e,o.forEach(c=>{this.addPendingMutation(c)})}setOnlineState(e){this.Ar(e)}notifyBundleLoaded(e){this.Rr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.nr),this.removeItem(this.ur),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Nt("SharedClientState","READ",e,t),t}setItem(e,t){Nt("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Nt("SharedClientState","REMOVE",e),this.storage.removeItem(e)}sr(e){var t=this;const o=e;if(o.storageArea===this.storage){if(Nt("SharedClientState","EVENT",o.key,o.newValue),o.key===this.ur)return void Gr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,ke.Z)(function*(){if(t.started){if(null!==o.key)if(t.cr.test(o.key)){if(null==o.newValue){const c=t.Pr(o.key);return t.br(c,null)}{const c=t.Vr(o.key,o.newValue);if(c)return t.br(c.clientId,c)}}else if(t.hr.test(o.key)){if(null!==o.newValue){const c=t.vr(o.key,o.newValue);if(c)return t.Sr(c)}}else if(t.lr.test(o.key)){if(null!==o.newValue){const c=t.Dr(o.key,o.newValue);if(c)return t.Cr(c)}}else if(o.key===t.dr){if(null!==o.newValue){const c=t.mr(o.newValue);if(c)return t.gr(c)}}else if(o.key===t.ar){const c=function(g){let w=Qi.A;if(null!=g)try{const P=JSON.parse(g);I("number"==typeof P),w=P}catch(P){Gr("SharedClientState","Failed to read sequence number from WebStorage",P)}return w}(o.newValue);c!==Qi.A&&t.sequenceNumberHandler(c)}else if(o.key===t._r){const c=t.Nr(o.newValue);yield Promise.all(c.map(g=>t.syncEngine.kr(g)))}}else t.rr.push(o)}))}}get Tr(){return this.ir.get(this.er)}wr(){this.setItem(this.ur,this.Tr.Xi())}pr(e,t,o){const c=new Cf(this.currentUser,e,t,o),g=um(this.persistenceKey,this.currentUser,e);this.setItem(g,c.Xi())}Ir(e){const t=um(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Ar(e){this.storage.setItem(this.dr,JSON.stringify({clientId:this.er,onlineState:e}))}Er(e,t,o){const c=ja(this.persistenceKey,e),g=new Th(e,t,o);this.setItem(c,g.Xi())}Rr(e){const t=JSON.stringify(Array.from(e));this.setItem(this._r,t)}Pr(e){const t=this.cr.exec(e);return t?t[1]:null}Vr(e,t){const o=this.Pr(e);return Ip.Yi(o,t)}vr(e,t){const o=this.hr.exec(e),c=Number(o[1]);return Cf.Yi(new yi(void 0!==o[2]?o[2]:null),c,t)}Dr(e,t){const o=this.lr.exec(e),c=Number(o[1]);return Th.Yi(c,t)}mr(e){return cm.Yi(e)}Nr(e){return JSON.parse(e)}Sr(e){var t=this;return(0,ke.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Mr(e.batchId,e.state,e.error);Nt("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Cr(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}br(e,t){const o=t?this.ir.insert(e,t):this.ir.remove(e),c=this.yr(this.ir),g=this.yr(o),w=[],P=[];return g.forEach(Y=>{c.has(Y)||w.push(Y)}),c.forEach(Y=>{g.has(Y)||P.push(Y)}),this.syncEngine.Fr(w,P).then(()=>{this.ir=o})}gr(e){this.ir.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}yr(e){let t=ss();return e.forEach((o,c)=>{t=t.unionWith(c.activeTargetIds)}),t}}class hm{constructor(){this.$r=new If,this.Br={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,o){}addLocalQueryTarget(e){return this.$r.Zi(e),this.Br[e]||"not-current"}updateQueryState(e,t,o){this.Br[e]=t}removeLocalQueryTarget(e){this.$r.tr(e)}isLocalQueryTarget(e){return this.$r.activeTargetIds.has(e)}clearQueryState(e){delete this.Br[e]}getAllActiveQueryTargets(){return this.$r.activeTargetIds}isActiveQueryTarget(e){return this.$r.activeTargetIds.has(e)}start(){return this.$r=new If,Promise.resolve()}handleUserChange(e,t,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Dp{Lr(e){}shutdown(){}}class Tp{constructor(){this.Ur=()=>this.qr(),this.Kr=()=>this.Gr(),this.Qr=[],this.jr()}Lr(e){this.Qr.push(e)}shutdown(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Kr)}jr(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Kr)}qr(){Nt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Qr)e(0)}Gr(){Nt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Qr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const e_={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class t_{constructor(e){this.Wr=e.Wr,this.zr=e.zr}Hr(e){this.Jr=e}Yr(e){this.Xr=e}onMessage(e){this.Zr=e}close(){this.zr()}send(e){this.Wr(e)}eo(){this.Jr()}no(e){this.Xr(e)}so(e){this.Zr(e)}}class n_ extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.io=(e.ssl?"https":"http")+"://"+e.host,this.ro="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}oo(e,t,o,c,g){const w=this.uo(e,t);Nt("RestConnection","Sending: ",w,o);const P={};return this.ao(P,c,g),this.co(e,w,P,o).then(Y=>(Nt("RestConnection","Received: ",Y),Y),Y=>{throw no("RestConnection",`${e} failed with error: `,Y,"url: ",w,"request:",o),Y})}ho(e,t,o,c,g){return this.oo(e,t,o,c,g)}ao(e,t,o){e["X-Goog-Api-Client"]="gl-js/ fire/"+ps,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((c,g)=>e[g]=c),o&&o.headers.forEach((c,g)=>e[g]=c)}uo(e,t){return`${this.io}/v1/${t}:${e_[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,o,c){return new Promise((g,w)=>{const P=new zi;P.listenOnce(Q.COMPLETE,()=>{try{switch(P.getLastErrorCode()){case x.NO_ERROR:const ee=P.getResponseJson();Nt("Connection","XHR received:",JSON.stringify(ee)),g(ee);break;case x.TIMEOUT:Nt("Connection",'RPC "'+e+'" timed out'),w(new q(O.DEADLINE_EXCEEDED,"Request time out"));break;case x.HTTP_ERROR:const pe=P.getStatus();if(Nt("Connection",'RPC "'+e+'" failed with status:',pe,"response text:",P.getResponseText()),pe>0){const Re=P.getResponseJson().error;if(Re&&Re.status&&Re.message){const ht=function(Ot){const Vt=Ot.toLowerCase().replace(/_/g,"-");return Object.values(O).indexOf(Vt)>=0?Vt:O.UNKNOWN}(Re.status);w(new q(ht,Re.message))}else w(new q(O.UNKNOWN,"Server responded with status "+P.getStatus()))}else w(new q(O.UNAVAILABLE,"Connection failed."));break;default:T()}}finally{Nt("Connection",'RPC "'+e+'" completed.')}});const Y=JSON.stringify(c);P.send(t,"POST",Y,o,15)})}lo(e,t,o){const c=[this.io,"/","google.firestore.v1.Firestore","/",e,"/channel"],g=$s(),w=S(),P={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(P.xmlHttpFactory=new pn({})),this.ao(P.initMessageHeaders,t,o),(0,Ye.uI)()||(0,Ye.b$)()||(0,Ye.d)()||(0,Ye.w1)()||(0,Ye.Mn)()||(0,Ye.ru)()||(P.httpHeadersOverwriteParam="$httpHeaders");const Y=c.join("");Nt("Connection","Creating WebChannel: "+Y,P);const ee=g.createWebChannel(Y,P);let pe=!1,Re=!1;const ht=new t_({Wr:Vt=>{Re?Nt("Connection","Not sending because WebChannel is closed:",Vt):(pe||(Nt("Connection","Opening WebChannel transport."),ee.open(),pe=!0),Nt("Connection","WebChannel sending:",Vt),ee.send(Vt))},zr:()=>ee.close()}),Ot=(Vt,An,yr)=>{Vt.listen(An,ws=>{try{yr(ws)}catch(mo){setTimeout(()=>{throw mo},0)}})};return Ot(ee,Cr.EventType.OPEN,()=>{Re||Nt("Connection","WebChannel transport opened.")}),Ot(ee,Cr.EventType.CLOSE,()=>{Re||(Re=!0,Nt("Connection","WebChannel transport closed"),ht.no())}),Ot(ee,Cr.EventType.ERROR,Vt=>{Re||(Re=!0,no("Connection","WebChannel transport errored:",Vt),ht.no(new q(O.UNAVAILABLE,"The operation could not be completed")))}),Ot(ee,Cr.EventType.MESSAGE,Vt=>{var An;if(!Re){const yr=Vt.data[0];I(!!yr);const ws=yr,mo=ws.error||(null===(An=ws[0])||void 0===An?void 0:An.error);if(mo){Nt("Connection","WebChannel received error:",mo);const Hi=mo.status;let xs=function(ks){const ba=is[ks];if(void 0!==ba)return qu(ba)}(Hi),Es=mo.message;void 0===xs&&(xs=O.INTERNAL,Es="Unknown error status: "+Hi+" with message "+mo.message),Re=!0,ht.no(new q(xs,Es)),ee.close()}else Nt("Connection","WebChannel received:",yr),ht.so(yr)}}),Ot(w,ve.STAT_EVENT,Vt=>{Vt.stat===Je.PROXY?Nt("Connection","Detected buffering proxy"):Vt.stat===Je.NOPROXY&&Nt("Connection","Detected no buffering proxy")}),setTimeout(()=>{ht.eo()},0),ht}}function Ap(){return"undefined"!=typeof window?window:null}function Df(){return"undefined"!=typeof document?document:null}function Yd(i){return new bu(i,!0)}class Sp{constructor(e,t,o=1e3,c=1.5,g=6e4){this.Yn=e,this.timerId=t,this.fo=o,this._o=c,this.wo=g,this.mo=0,this.yo=null,this.po=Date.now(),this.reset()}reset(){this.mo=0}Io(){this.mo=this.wo}To(e){this.cancel();const t=Math.floor(this.mo+this.Eo()),o=Math.max(0,Date.now()-this.po),c=Math.max(0,t-o);c>0&&Nt("ExponentialBackoff",`Backing off for ${c} ms (base delay: ${this.mo} ms, delay with jitter: ${t} ms, last attempt: ${o} ms ago)`),this.yo=this.Yn.enqueueAfterDelay(this.timerId,c,()=>(this.po=Date.now(),e())),this.mo*=this._o,this.mo<this.fo&&(this.mo=this.fo),this.mo>this.wo&&(this.mo=this.wo)}Ao(){null!==this.yo&&(this.yo.skipDelay(),this.yo=null)}cancel(){null!==this.yo&&(this.yo.cancel(),this.yo=null)}Eo(){return(Math.random()-.5)*this.mo}}class fm{constructor(e,t,o,c,g,w,P,Y){this.Yn=e,this.Ro=o,this.Po=c,this.bo=g,this.authCredentialsProvider=w,this.appCheckCredentialsProvider=P,this.listener=Y,this.state=0,this.Vo=0,this.vo=null,this.So=null,this.stream=null,this.Do=new Sp(e,t)}Co(){return 1===this.state||5===this.state||this.xo()}xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.No()}stop(){var e=this;return(0,ke.Z)(function*(){e.Co()&&(yield e.close(0))})()}ko(){this.state=0,this.Do.reset()}Mo(){this.xo()&&null===this.vo&&(this.vo=this.Yn.enqueueAfterDelay(this.Ro,6e4,()=>this.Oo()))}Fo(e){this.$o(),this.stream.send(e)}Oo(){var e=this;return(0,ke.Z)(function*(){if(e.xo())return e.close(0)})()}$o(){this.vo&&(this.vo.cancel(),this.vo=null)}Bo(){this.So&&(this.So.cancel(),this.So=null)}close(e,t){var o=this;return(0,ke.Z)(function*(){o.$o(),o.Bo(),o.Do.cancel(),o.Vo++,4!==e?o.Do.reset():t&&t.code===O.RESOURCE_EXHAUSTED?(Gr(t.toString()),Gr("Using maximum backoff delay to prevent overloading the backend."),o.Do.Io()):t&&t.code===O.UNAUTHENTICATED&&3!==o.state&&(o.authCredentialsProvider.invalidateToken(),o.appCheckCredentialsProvider.invalidateToken()),null!==o.stream&&(o.Lo(),o.stream.close(),o.stream=null),o.state=e,yield o.listener.Yr(t)})()}Lo(){}auth(){this.state=1;const e=this.Uo(this.Vo),t=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([o,c])=>{this.Vo===t&&this.qo(o,c)},o=>{e(()=>{const c=new q(O.UNKNOWN,"Fetching auth token failed: "+o.message);return this.Ko(c)})})}qo(e,t){const o=this.Uo(this.Vo);this.stream=this.Go(e,t),this.stream.Hr(()=>{o(()=>(this.state=2,this.So=this.Yn.enqueueAfterDelay(this.Po,1e4,()=>(this.xo()&&(this.state=3),Promise.resolve())),this.listener.Hr()))}),this.stream.Yr(c=>{o(()=>this.Ko(c))}),this.stream.onMessage(c=>{o(()=>this.onMessage(c))})}No(){var e=this;this.state=5,this.Do.To((0,ke.Z)(function*(){e.state=0,e.start()}))}Ko(e){return Nt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Uo(e){return t=>{this.Yn.enqueueAndForget(()=>this.Vo===e?t():(Nt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class pm extends fm{constructor(e,t,o,c,g,w){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,o,c,w),this.M=g}Go(e,t){return this.bo.lo("Listen",e,t)}onMessage(e){this.Do.reset();const t=function Iu(i,e){let t;if("targetChange"in e){const o="NO_CHANGE"===(Y=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===Y?1:"REMOVE"===Y?2:"CURRENT"===Y?3:"RESET"===Y?4:T(),c=e.targetChange.targetIds||[],g=function(Y,ee){return Y.N?(I(void 0===ee||"string"==typeof ee),Ti.fromBase64String(ee||"")):(I(void 0===ee||ee instanceof Uint8Array),Ti.fromUint8Array(ee||new Uint8Array))}(i,e.targetChange.resumeToken),w=e.targetChange.cause,P=w&&function(Y){const ee=void 0===Y.code?O.UNKNOWN:qu(Y.code);return new q(ee,Y.message||"")}(w);t=new Ja(o,c,g,P||null)}else if("documentChange"in e){const o=e.documentChange,c=gl(i,o.document.name),g=Kr(o.document.updateTime),w=new k({mapValue:{fields:o.document.fields}}),P=X.newFoundDocument(c,g,w);t=new Eu(o.targetIds||[],o.removedTargetIds||[],P.key,P)}else if("documentDelete"in e){const o=e.documentDelete,c=gl(i,o.document),g=o.readTime?Kr(o.readTime):qn.min(),w=X.newNoDocument(c,g);t=new Eu([],o.removedTargetIds||[],w.key,w)}else if("documentRemove"in e){const o=e.documentRemove,c=gl(i,o.document);t=new Eu([],o.removedTargetIds||[],c,null)}else{if(!("filter"in e))return T();{const o=e.filter,g=new ph(o.count||0);t=new co(o.targetId,g)}}var Y;return t}(this.M,e),o=function(c){if(!("targetChange"in c))return qn.min();const g=c.targetChange;return g.targetIds&&g.targetIds.length?qn.min():g.readTime?Kr(g.readTime):qn.min()}(e);return this.listener.Qo(t,o)}jo(e){const t={};t.database=ml(this.M),t.addTarget=function(c,g){let w;const P=g.target;return w=lo(P)?{documents:Jc(c,P)}:{query:Xc(c,P)},w.targetId=g.targetId,g.resumeToken.approximateByteSize()>0?w.resumeToken=Cu(c,g.resumeToken):g.snapshotVersion.compareTo(qn.min())>0&&(w.readTime=sa(c,g.snapshotVersion.toTimestamp())),w}(this.M,e);const o=function kd(i,e){const t=function(o,c){switch(c){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return T()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);o&&(t.labels=o),this.Fo(t)}Wo(e){const t={};t.database=ml(this.M),t.removeTarget=e,this.Fo(t)}}class gm extends fm{constructor(e,t,o,c,g,w){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,o,c,w),this.M=g,this.zo=!1}get Ho(){return this.zo}start(){this.zo=!1,this.lastStreamToken=void 0,super.start()}Lo(){this.zo&&this.Jo([])}Go(e,t){return this.bo.lo("Write",e,t)}onMessage(e){if(I(!!e.streamToken),this.lastStreamToken=e.streamToken,this.zo){this.Do.reset();const t=function Qu(i,e){return i&&i.length>0?(I(void 0!==e),i.map(t=>function(o,c){let g=Kr(o.updateTime?o.updateTime:c);return g.isEqual(qn.min())&&(g=Kr(c)),new ia(g,o.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),o=Kr(e.commitTime);return this.listener.Yo(o,t)}return I(!e.writeResults||0===e.writeResults.length),this.zo=!0,this.listener.Xo()}Zo(){const e={};e.database=ml(this.M),this.Fo(e)}Jo(e){const t={streamToken:this.lastStreamToken,writes:e.map(o=>yl(this.M,o))};this.Fo(t)}}class r_ extends class{}{constructor(e,t,o,c){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=o,this.M=c,this.tu=!1}eu(){if(this.tu)throw new q(O.FAILED_PRECONDITION,"The client has already been terminated.")}oo(e,t,o){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,g])=>this.bo.oo(e,t,o,c,g)).catch(c=>{throw"FirebaseError"===c.name?(c.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new q(O.UNKNOWN,c.toString())})}ho(e,t,o){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,g])=>this.bo.ho(e,t,o,c,g)).catch(c=>{throw"FirebaseError"===c.name?(c.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new q(O.UNKNOWN,c.toString())})}terminate(){this.tu=!0}}class Mu{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.nu=0,this.su=null,this.iu=!0}ru(){0===this.nu&&(this.ou("Unknown"),this.su=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.su=null,this.uu("Backend didn't respond within 10 seconds."),this.ou("Offline"),Promise.resolve())))}au(e){"Online"===this.state?this.ou("Unknown"):(this.nu++,this.nu>=1&&(this.cu(),this.uu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ou("Offline")))}set(e){this.cu(),this.nu=0,"Online"===e&&(this.iu=!1),this.ou(e)}ou(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}uu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.iu?(Gr(t),this.iu=!1):Nt("OnlineStateTracker",t)}cu(){null!==this.su&&(this.su.cancel(),this.su=null)}}class xp{constructor(e,t,o,c,g){var w=this;this.localStore=e,this.datastore=t,this.asyncQueue=o,this.remoteSyncer={},this.hu=[],this.lu=new Map,this.fu=new Set,this.du=[],this._u=g,this._u.Lr(P=>{o.enqueueAndForget((0,ke.Z)(function*(){var Y;nu(w)&&(Nt("RemoteStore","Restarting streams for network reachability change."),yield(Y=(0,ke.Z)(function*(ee){const pe=R(ee);pe.fu.add(4),yield Sh(pe),pe.wu.set("Unknown"),pe.fu.delete(4),yield Ah(pe)}),function(ee){return Y.apply(this,arguments)})(w))}))}),this.wu=new Mu(o,c)}}function Ah(i){return Mp.apply(this,arguments)}function Mp(){return Mp=(0,ke.Z)(function*(i){if(nu(i))for(const e of i.du)yield e(!0)}),Mp.apply(this,arguments)}function Sh(i){return Tf.apply(this,arguments)}function Tf(){return Tf=(0,ke.Z)(function*(i){for(const e of i.du)yield e(!1)}),Tf.apply(this,arguments)}function Af(i,e){const t=R(i);t.lu.has(e.targetId)||(t.lu.set(e.targetId,e),Op(t)?Rp(t):hd(t).xo()&&Pp(t,e))}function xh(i,e){const t=R(i),o=hd(t);t.lu.delete(e),o.xo()&&Sf(t,e),0===t.lu.size&&(o.xo()?o.Mo():nu(t)&&t.wu.set("Unknown"))}function Pp(i,e){i.mu.Z(e.targetId),hd(i).jo(e)}function Sf(i,e){i.mu.Z(e),hd(i).Wo(e)}function Rp(i){i.mu=new zo({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>i.lu.get(e)||null}),hd(i).start(),i.wu.ru()}function Op(i){return nu(i)&&!hd(i).Co()&&i.lu.size>0}function nu(i){return 0===R(i).fu.size}function xf(i){i.mu=void 0}function i_(i){return Mh.apply(this,arguments)}function Mh(){return Mh=(0,ke.Z)(function*(i){i.lu.forEach((e,t)=>{Pp(i,e)})}),Mh.apply(this,arguments)}function Np(i,e){return Mf.apply(this,arguments)}function Mf(){return Mf=(0,ke.Z)(function*(i,e){xf(i),Op(i)?(i.wu.au(e),Rp(i)):i.wu.set("Unknown")}),Mf.apply(this,arguments)}function s_(i,e,t){return kp.apply(this,arguments)}function kp(){return kp=(0,ke.Z)(function*(i,e,t){if(i.wu.set("Online"),e instanceof Ja&&2===e.state&&e.cause)try{yield(o=(0,ke.Z)(function*(c,g){const w=g.cause;for(const P of g.targetIds)c.lu.has(P)&&(yield c.remoteSyncer.rejectListen(P,w),c.lu.delete(P),c.mu.removeTarget(P))}),function(c,g){return o.apply(this,arguments)})(i,e)}catch(o){Nt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),o),yield Qd(i,o)}else if(e instanceof Eu?i.mu.ut(e):e instanceof co?i.mu._t(e):i.mu.ht(e),!t.isEqual(qn.min()))try{const o=yield tm(i.localStore);t.compareTo(o)>=0&&(yield function(c,g){const w=c.mu.yt(g);return w.targetChanges.forEach((P,Y)=>{if(P.resumeToken.approximateByteSize()>0){const ee=c.lu.get(Y);ee&&c.lu.set(Y,ee.withResumeToken(P.resumeToken,g))}}),w.targetMismatches.forEach(P=>{const Y=c.lu.get(P);if(!Y)return;c.lu.set(P,Y.withResumeToken(Ti.EMPTY_BYTE_STRING,Y.snapshotVersion)),Sf(c,P);const ee=new Ll(Y.target,P,1,Y.sequenceNumber);Pp(c,ee)}),c.remoteSyncer.applyRemoteEvent(w)}(i,t))}catch(o){Nt("RemoteStore","Failed to raise snapshot:",o),yield Qd(i,o)}var o}),kp.apply(this,arguments)}function Qd(i,e,t){return mm.apply(this,arguments)}function mm(){return mm=(0,ke.Z)(function*(i,e,t){if(!Fl(e))throw e;i.fu.add(1),yield Sh(i),i.wu.set("Offline"),t||(t=()=>tm(i.localStore)),i.asyncQueue.enqueueRetryable((0,ke.Z)(function*(){Nt("RemoteStore","Retrying IndexedDB access"),yield t(),i.fu.delete(1),yield Ah(i)}))}),mm.apply(this,arguments)}function ym(i,e){return e().catch(t=>Qd(i,t,e))}function cd(i){return Pf.apply(this,arguments)}function Pf(){return Pf=(0,ke.Z)(function*(i){const e=R(i),t=Nc(e);let o=e.hu.length>0?e.hu[e.hu.length-1].batchId:-1;for(;_m(e);)try{const c=yield rm(e.localStore,o);if(null===c){0===e.hu.length&&t.Mo();break}o=c.batchId,vm(e,c)}catch(c){yield Qd(e,c)}Fp(e)&&Pu(e)}),Pf.apply(this,arguments)}function _m(i){return nu(i)&&i.hu.length<10}function vm(i,e){i.hu.push(e);const t=Nc(i);t.xo()&&t.Ho&&t.Jo(e.mutations)}function Fp(i){return nu(i)&&!Nc(i).Co()&&i.hu.length>0}function Pu(i){Nc(i).start()}function Rf(i){return Lp.apply(this,arguments)}function Lp(){return Lp=(0,ke.Z)(function*(i){Nc(i).Zo()}),Lp.apply(this,arguments)}function o_(i){return wm.apply(this,arguments)}function wm(){return wm=(0,ke.Z)(function*(i){const e=Nc(i);for(const t of i.hu)e.Jo(t.mutations)}),wm.apply(this,arguments)}function Vp(i,e,t){return Of.apply(this,arguments)}function Of(){return Of=(0,ke.Z)(function*(i,e,t){const o=i.hu.shift(),c=ec.from(o,e,t);yield ym(i,()=>i.remoteSyncer.applySuccessfulWrite(c)),yield cd(i)}),Of.apply(this,arguments)}function Up(i,e){return dd.apply(this,arguments)}function dd(){return dd=(0,ke.Z)(function*(i,e){var t;e&&Nc(i).Ho&&(yield(t=(0,ke.Z)(function*(o,c){if(Ec(g=c.code)&&g!==O.ABORTED){const w=o.hu.shift();Nc(o).ko(),yield ym(o,()=>o.remoteSyncer.rejectFailedWrite(w.batchId,c)),yield cd(o)}var g}),function(o,c){return t.apply(this,arguments)})(i,e)),Fp(i)&&Pu(i)}),dd.apply(this,arguments)}function Em(i,e){return Ph.apply(this,arguments)}function Ph(){return Ph=(0,ke.Z)(function*(i,e){const t=R(i);t.asyncQueue.verifyOperationInProgress(),Nt("RemoteStore","RemoteStore received new credentials");const o=nu(t);t.fu.add(3),yield Sh(t),o&&t.wu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.fu.delete(3),yield Ah(t)}),Ph.apply(this,arguments)}function Nf(i,e){return kf.apply(this,arguments)}function kf(){return kf=(0,ke.Z)(function*(i,e){const t=R(i);e?(t.fu.delete(2),yield Ah(t)):e||(t.fu.add(2),yield Sh(t),t.wu.set("Unknown"))}),kf.apply(this,arguments)}function hd(i){return i.gu||(i.gu=function(e,t,o){const c=R(e);return c.eu(),new pm(t,c.bo,c.authCredentials,c.appCheckCredentials,c.M,o)}(i.datastore,i.asyncQueue,{Hr:i_.bind(null,i),Yr:Np.bind(null,i),Qo:s_.bind(null,i)}),i.du.push(function(){var e=(0,ke.Z)(function*(t){t?(i.gu.ko(),Op(i)?Rp(i):i.wu.set("Unknown")):(yield i.gu.stop(),xf(i))});return function(t){return e.apply(this,arguments)}}())),i.gu}function Nc(i){return i.yu||(i.yu=function(e,t,o){const c=R(e);return c.eu(),new gm(t,c.bo,c.authCredentials,c.appCheckCredentials,c.M,o)}(i.datastore,i.asyncQueue,{Hr:Rf.bind(null,i),Yr:Up.bind(null,i),Xo:o_.bind(null,i),Yo:Vp.bind(null,i)}),i.du.push(function(){var e=(0,ke.Z)(function*(t){t?(i.yu.ko(),yield cd(i)):(yield i.yu.stop(),i.hu.length>0&&(Nt("RemoteStore",`Stopping write stream with ${i.hu.length} pending writes`),i.hu=[]))});return function(t){return e.apply(this,arguments)}}())),i.yu}class Rh{constructor(e,t,o,c,g){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=o,this.op=c,this.removalCallback=g,this.deferred=new ue,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(w=>{})}static createAndSchedule(e,t,o,c,g){const w=Date.now()+o,P=new Rh(e,t,w,c,g);return P.start(o),P}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new q(O.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Jd(i,e){if(Gr("AsyncQueue",`${e}: ${i}`),Fl(i))return new q(O.UNAVAILABLE,`${e}: ${i}`);throw i}class Xd{constructor(e){this.comparator=e?(t,o)=>e(t,o)||Yt.comparator(t.key,o.key):(t,o)=>Yt.comparator(t.key,o.key),this.keyedMap=Yc(),this.sortedSet=new Ji(this.comparator)}static emptySet(e){return new Xd(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,o)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Xd)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;t.hasNext();){const c=t.getNext().key,g=o.getNext().key;if(!c.isEqual(g))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const o=new Xd;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=t,o}}class Bp{constructor(){this.pu=new Ji(Yt.comparator)}track(e){const t=e.doc.key,o=this.pu.get(t);o?0!==e.type&&3===o.type?this.pu=this.pu.insert(t,e):3===e.type&&1!==o.type?this.pu=this.pu.insert(t,{type:o.type,doc:e.doc}):2===e.type&&2===o.type?this.pu=this.pu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===o.type?this.pu=this.pu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===o.type?this.pu=this.pu.remove(t):1===e.type&&2===o.type?this.pu=this.pu.insert(t,{type:1,doc:o.doc}):0===e.type&&1===o.type?this.pu=this.pu.insert(t,{type:2,doc:e.doc}):T():this.pu=this.pu.insert(t,e)}Iu(){const e=[];return this.pu.inorderTraversal((t,o)=>{e.push(o)}),e}}class ru{constructor(e,t,o,c,g,w,P,Y){this.query=e,this.docs=t,this.oldDocs=o,this.docChanges=c,this.mutatedKeys=g,this.fromCache=w,this.syncStateChanged=P,this.excludesMetadataChanges=Y}static fromInitialDocuments(e,t,o,c){const g=[];return t.forEach(w=>{g.push({type:0,doc:w})}),new ru(e,t,Xd.emptySet(t),g,o,c,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&pu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,o=e.docChanges;if(t.length!==o.length)return!1;for(let c=0;c<t.length;c++)if(t[c].type!==o[c].type||!t[c].doc.isEqual(o[c].doc))return!1;return!0}}class bm{constructor(){this.Tu=void 0,this.listeners=[]}}class a_{constructor(){this.queries=new Na(e=>Al(e),pu),this.onlineState="Unknown",this.Eu=new Set}}function jp(i,e){return kc.apply(this,arguments)}function kc(){return kc=(0,ke.Z)(function*(i,e){const t=R(i),o=e.query;let c=!1,g=t.queries.get(o);if(g||(c=!0,g=new bm),c)try{g.Tu=yield t.onListen(o)}catch(w){const P=Jd(w,`Initialization of query '${gu(e.query)}' failed`);return void e.onError(P)}t.queries.set(o,g),g.listeners.push(e),e.Au(t.onlineState),g.Tu&&e.Ru(g.Tu)&&vl(t)}),kc.apply(this,arguments)}function Hp(i,e){return $p.apply(this,arguments)}function $p(){return $p=(0,ke.Z)(function*(i,e){const t=R(i),o=e.query;let c=!1;const g=t.queries.get(o);if(g){const w=g.listeners.indexOf(e);w>=0&&(g.listeners.splice(w,1),c=0===g.listeners.length)}if(c)return t.queries.delete(o),t.onUnlisten(o)}),$p.apply(this,arguments)}function l_(i,e){const t=R(i);let o=!1;for(const c of e){const w=t.queries.get(c.query);if(w){for(const P of w.listeners)P.Ru(c)&&(o=!0);w.Tu=c}}o&&vl(t)}function u_(i,e,t){const o=R(i),c=o.queries.get(e);if(c)for(const g of c.listeners)g.onError(t);o.queries.delete(e)}function vl(i){i.Eu.forEach(e=>{e.next()})}class Oh{constructor(e,t,o){this.query=e,this.Pu=t,this.bu=!1,this.Vu=null,this.onlineState="Unknown",this.options=o||{}}Ru(e){if(!this.options.includeMetadataChanges){const o=[];for(const c of e.docChanges)3!==c.type&&o.push(c);e=new ru(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Pu.next(e),t=!0):this.Su(e,this.onlineState)&&(this.Du(e),t=!0),this.Vu=e,t}onError(e){this.Pu.error(e)}Au(e){this.onlineState=e;let t=!1;return this.Vu&&!this.bu&&this.Su(this.Vu,e)&&(this.Du(this.Vu),t=!0),t}Su(e,t){return!e.fromCache||!(this.options.Cu&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Vu&&this.Vu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Du(e){e=ru.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Pu.next(e)}}class Cm{constructor(e,t){this.payload=e,this.byteLength=t}xu(){return"metadata"in this.payload}}class Gp{constructor(e){this.M=e}fi(e){return gl(this.M,e)}di(e){return e.metadata.exists?Xa(this.M,e.document,!1):X.newNoDocument(this.fi(e.metadata.name),this._i(e.metadata.readTime))}_i(e){return Kr(e)}}class Im{constructor(e,t,o){this.Nu=e,this.localStore=t,this.M=o,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Wp(e)}ku(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const o=Hr.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(o.get(o.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Mu(e){const t=new Map,o=new Gp(this.M);for(const c of e)if(c.metadata.queries){const g=o.fi(c.metadata.name);for(const w of c.metadata.queries){const P=(t.get(w)||fi()).add(g);t.set(w,P)}}return t}complete(){var e=this;return(0,ke.Z)(function*(){const t=yield function Zd(i,e,t,o){return Ep.apply(this,arguments)}(e.localStore,new Gp(e.M),e.documents,e.Nu.id),o=e.Mu(e.documents);for(const c of e.queries)yield im(e.localStore,c,o.get(c.name));return e.progress.taskState="Success",{progress:e.progress,Ou:e.collectionGroups,Fu:t}})()}}function Wp(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class Dm{constructor(e){this.key=e}}class Tm{constructor(e){this.key=e}}class Am{constructor(e,t){this.query=e,this.$u=t,this.Bu=null,this.current=!1,this.Lu=fi(),this.mutatedKeys=fi(),this.Uu=Md(e),this.qu=new Xd(this.Uu)}get Ku(){return this.$u}Gu(e,t){const o=t?t.Qu:new Bp,c=t?t.qu:this.qu;let g=t?t.mutatedKeys:this.mutatedKeys,w=c,P=!1;const Y=Tl(this.query)&&c.size===this.query.limit?c.last():null,ee=ma(this.query)&&c.size===this.query.limit?c.first():null;if(e.inorderTraversal((pe,Re)=>{const ht=c.get(pe),Ot=Kc(this.query,Re)?Re:null,Vt=!!ht&&this.mutatedKeys.has(ht.key),An=!!Ot&&(Ot.hasLocalMutations||this.mutatedKeys.has(Ot.key)&&Ot.hasCommittedMutations);let yr=!1;ht&&Ot?ht.data.isEqual(Ot.data)?Vt!==An&&(o.track({type:3,doc:Ot}),yr=!0):this.ju(ht,Ot)||(o.track({type:2,doc:Ot}),yr=!0,(Y&&this.Uu(Ot,Y)>0||ee&&this.Uu(Ot,ee)<0)&&(P=!0)):!ht&&Ot?(o.track({type:0,doc:Ot}),yr=!0):ht&&!Ot&&(o.track({type:1,doc:ht}),yr=!0,(Y||ee)&&(P=!0)),yr&&(Ot?(w=w.add(Ot),g=An?g.add(pe):g.delete(pe)):(w=w.delete(pe),g=g.delete(pe)))}),Tl(this.query)||ma(this.query))for(;w.size>this.query.limit;){const pe=Tl(this.query)?w.last():w.first();w=w.delete(pe.key),g=g.delete(pe.key),o.track({type:1,doc:pe})}return{qu:w,Qu:o,ni:P,mutatedKeys:g}}ju(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,o){const c=this.qu;this.qu=e.qu,this.mutatedKeys=e.mutatedKeys;const g=e.Qu.Iu();g.sort((ee,pe)=>function(Re,ht){const Ot=Vt=>{switch(Vt){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return T()}};return Ot(Re)-Ot(ht)}(ee.type,pe.type)||this.Uu(ee.doc,pe.doc)),this.Wu(o);const w=t?this.zu():[],P=0===this.Lu.size&&this.current?1:0,Y=P!==this.Bu;return this.Bu=P,0!==g.length||Y?{snapshot:new ru(this.query,e.qu,c,g,e.mutatedKeys,0===P,Y,!1),Hu:w}:{Hu:w}}Au(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({qu:this.qu,Qu:new Bp,mutatedKeys:this.mutatedKeys,ni:!1},!1)):{Hu:[]}}Ju(e){return!this.$u.has(e)&&!!this.qu.has(e)&&!this.qu.get(e).hasLocalMutations}Wu(e){e&&(e.addedDocuments.forEach(t=>this.$u=this.$u.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.$u=this.$u.delete(t)),this.current=e.current)}zu(){if(!this.current)return[];const e=this.Lu;this.Lu=fi(),this.qu.forEach(o=>{this.Ju(o.key)&&(this.Lu=this.Lu.add(o.key))});const t=[];return e.forEach(o=>{this.Lu.has(o)||t.push(new Tm(o))}),this.Lu.forEach(o=>{e.has(o)||t.push(new Dm(o))}),t}Yu(e){this.$u=e.li,this.Lu=fi();const t=this.Gu(e.documents);return this.applyChanges(t,!0)}Xu(){return ru.fromInitialDocuments(this.query,this.qu,this.mutatedKeys,0===this.Bu)}}class c_{constructor(e,t,o){this.query=e,this.targetId=t,this.view=o}}class Sm{constructor(e){this.key=e,this.Zu=!1}}class Wv{constructor(e,t,o,c,g,w){this.localStore=e,this.remoteStore=t,this.eventManager=o,this.sharedClientState=c,this.currentUser=g,this.maxConcurrentLimboResolutions=w,this.ta={},this.ea=new Na(P=>Al(P),pu),this.na=new Map,this.sa=new Set,this.ia=new Ji(Yt.comparator),this.ra=new Map,this.oa=new Ef,this.ua={},this.aa=new Map,this.ca=j.yn(),this.onlineState="Unknown",this.ha=void 0}get isPrimaryClient(){return!0===this.ha}}function xm(i,e){return zp.apply(this,arguments)}function zp(){return zp=(0,ke.Z)(function*(i,e){const t=Bc(i);let o,c;const g=t.ea.get(e);if(g)o=g.targetId,t.sharedClientState.addLocalQueryTarget(o),c=g.view.Xu();else{const w=yield zd(t.localStore,uo(e));t.isPrimaryClient&&Af(t.remoteStore,w);const P=t.sharedClientState.addLocalQueryTarget(w.targetId);o=w.targetId,c=yield qp(t,e,o,"current"===P)}return c}),zp.apply(this,arguments)}function qp(i,e,t,o){return Mm.apply(this,arguments)}function Mm(){return Mm=(0,ke.Z)(function*(i,e,t,o){i.la=(pe,Re,ht)=>{return(Ot=(0,ke.Z)(function*(Vt,An,yr,ws){let mo=An.view.Gu(yr);mo.ni&&(mo=yield rc(Vt.localStore,An.query,!1).then(({documents:Es})=>An.view.Gu(Es,mo)));const Hi=ws&&ws.targetChanges.get(An.targetId),xs=An.view.applyChanges(mo,Vt.isPrimaryClient,Hi);return Qp(Vt,An.targetId,xs.Hu),xs.snapshot}),function(Vt,An,yr,ws){return Ot.apply(this,arguments)})(i,pe,Re,ht);var Ot};const c=yield rc(i.localStore,e,!0),g=new Am(e,c.li),w=g.Gu(c.documents),P=Qa.createSynthesizedTargetChangeForCurrentChange(t,o&&"Offline"!==i.onlineState),Y=g.applyChanges(w,i.isPrimaryClient,P);Qp(i,t,Y.Hu);const ee=new c_(e,t,g);return i.ea.set(e,ee),i.na.has(t)?i.na.get(t).push(e):i.na.set(t,[e]),Y.snapshot}),Mm.apply(this,arguments)}function zv(i,e){return Nh.apply(this,arguments)}function Nh(){return Nh=(0,ke.Z)(function*(i,e){const t=R(i),o=t.ea.get(e),c=t.na.get(o.targetId);if(c.length>1)return t.na.set(o.targetId,c.filter(g=>!pu(g,e))),void t.ea.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(o.targetId),t.sharedClientState.isActiveQueryTarget(o.targetId)||(yield qd(t.localStore,o.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(o.targetId),xh(t.remoteStore,o.targetId),Fc(t,o.targetId)}).catch(rt))):(Fc(t,o.targetId),yield qd(t.localStore,o.targetId,!0))}),Nh.apply(this,arguments)}function Ff(){return Ff=(0,ke.Z)(function*(i,e,t){const o=jc(i);try{const c=yield function(g,w){const P=R(g),Y=Di.now(),ee=w.reduce((Re,ht)=>Re.add(ht.key),fi());let pe;return P.persistence.runTransaction("Locally write mutations","readwrite",Re=>P.ci.Ks(Re,ee).next(ht=>{pe=ht;const Ot=[];for(const Vt of w){const An=Xh(Vt,pe.get(Vt.key));null!=An&&Ot.push(new Ya(Vt.key,An,H(An.value.mapValue),Qr.exists(!0)))}return P.Bs.addMutationBatch(Re,Y,Ot,w)})).then(Re=>(Re.applyToLocalDocumentSet(pe),{batchId:Re.batchId,changes:pe}))}(o.localStore,e);o.sharedClientState.addPendingMutation(c.batchId),function(g,w,P){let Y=g.ua[g.currentUser.toKey()];Y||(Y=new Ji(jn)),Y=Y.insert(w,P),g.ua[g.currentUser.toKey()]=Y}(o,c.batchId,t),yield ic(o,c.changes),yield cd(o.remoteStore)}catch(c){const g=Jd(c,"Failed to persist write");t.reject(g)}}),Ff.apply(this,arguments)}function Kp(i,e){return Pm.apply(this,arguments)}function Pm(){return Pm=(0,ke.Z)(function*(i,e){const t=R(i);try{const o=yield wp(t.localStore,e);e.targetChanges.forEach((c,g)=>{const w=t.ra.get(g);w&&(I(c.addedDocuments.size+c.modifiedDocuments.size+c.removedDocuments.size<=1),c.addedDocuments.size>0?w.Zu=!0:c.modifiedDocuments.size>0?I(w.Zu):c.removedDocuments.size>0&&(I(w.Zu),w.Zu=!1))}),yield ic(t,o,e)}catch(o){yield rt(o)}}),Pm.apply(this,arguments)}function Ul(i,e,t){const o=R(i);if(o.isPrimaryClient&&0===t||!o.isPrimaryClient&&1===t){const c=[];o.ea.forEach((g,w)=>{const P=w.view.Au(e);P.snapshot&&c.push(P.snapshot)}),function(g,w){const P=R(g);P.onlineState=w;let Y=!1;P.queries.forEach((ee,pe)=>{for(const Re of pe.listeners)Re.Au(w)&&(Y=!0)}),Y&&vl(P)}(o.eventManager,e),c.length&&o.ta.Qo(c),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}function qv(i,e,t){return Rm.apply(this,arguments)}function Rm(){return Rm=(0,ke.Z)(function*(i,e,t){const o=R(i);o.sharedClientState.updateQueryState(e,"rejected",t);const c=o.ra.get(e),g=c&&c.key;if(g){let w=new Ji(Yt.comparator);w=w.insert(g,X.newNoDocument(g,qn.min()));const P=fi().add(g),Y=new Fa(qn.min(),new Map,new Vi(jn),w,P);yield Kp(o,Y),o.ia=o.ia.remove(g),o.ra.delete(e),Jp(o)}else yield qd(o.localStore,e,!1).then(()=>Fc(o,e,t)).catch(rt)}),Rm.apply(this,arguments)}function Om(i,e){return Lf.apply(this,arguments)}function Lf(){return Lf=(0,ke.Z)(function*(i,e){const t=R(i),o=e.batch.batchId;try{const c=yield em(t.localStore,e);Yp(t,o,null),kh(t,o),t.sharedClientState.updateMutationState(o,"acknowledged"),yield ic(t,c)}catch(c){yield rt(c)}}),Lf.apply(this,arguments)}function Nm(i,e,t){return Zp.apply(this,arguments)}function Zp(){return Zp=(0,ke.Z)(function*(i,e,t){const o=R(i);try{const c=yield function(g,w){const P=R(g);return P.persistence.runTransaction("Reject batch","readwrite-primary",Y=>{let ee;return P.Bs.lookupMutationBatch(Y,w).next(pe=>(I(null!==pe),ee=pe.keys(),P.Bs.removeMutationBatch(Y,pe))).next(()=>P.Bs.performConsistencyCheck(Y)).next(()=>P.ci.Ks(Y,ee))})}(o.localStore,e);Yp(o,e,t),kh(o,e),o.sharedClientState.updateMutationState(e,"rejected",t),yield ic(o,c)}catch(c){yield rt(c)}}),Zp.apply(this,arguments)}function Vf(){return Vf=(0,ke.Z)(function*(i,e){const t=R(i);nu(t.remoteStore)||Nt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const o=yield function(g){const w=R(g);return w.persistence.runTransaction("Get highest unacknowledged batch id","readonly",P=>w.Bs.getHighestUnacknowledgedBatchId(P))}(t.localStore);if(-1===o)return void e.resolve();const c=t.aa.get(o)||[];c.push(e),t.aa.set(o,c)}catch(o){const c=Jd(o,"Initialization of waitForPendingWrites() operation failed");e.reject(c)}}),Vf.apply(this,arguments)}function kh(i,e){(i.aa.get(e)||[]).forEach(t=>{t.resolve()}),i.aa.delete(e)}function Yp(i,e,t){const o=R(i);let c=o.ua[o.currentUser.toKey()];if(c){const g=c.get(e);g&&(t?g.reject(t):g.resolve(),c=c.remove(e)),o.ua[o.currentUser.toKey()]=c}}function Fc(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const o of i.na.get(e))i.ea.delete(o),t&&i.ta.fa(o,t);i.na.delete(e),i.isPrimaryClient&&i.oa.Pi(e).forEach(o=>{i.oa.containsKey(o)||km(i,o)})}function km(i,e){i.sa.delete(e.path.canonicalString());const t=i.ia.get(e);null!==t&&(xh(i.remoteStore,t),i.ia=i.ia.remove(e),i.ra.delete(t),Jp(i))}function Qp(i,e,t){for(const o of t)o instanceof Dm?(i.oa.addReference(o.key,e),h_(i,o)):o instanceof Tm?(Nt("SyncEngine","Document no longer in limbo: "+o.key),i.oa.removeReference(o.key,e),i.oa.containsKey(o.key)||km(i,o.key)):T()}function h_(i,e){const t=e.key,o=t.path.canonicalString();i.ia.get(t)||i.sa.has(o)||(Nt("SyncEngine","New document in limbo: "+t),i.sa.add(o),Jp(i))}function Jp(i){for(;i.sa.size>0&&i.ia.size<i.maxConcurrentLimboResolutions;){const e=i.sa.values().next().value;i.sa.delete(e);const t=new Yt(Hr.fromString(e)),o=i.ca.next();i.ra.set(o,new Sm(t)),i.ia=i.ia.insert(t,o),Af(i.remoteStore,new Ll(uo(Ra(t.path)),o,2,Qi.A))}}function ic(i,e,t){return Xp.apply(this,arguments)}function Xp(){return Xp=(0,ke.Z)(function*(i,e,t){const o=R(i),c=[],g=[],w=[];var P;o.ea.isEmpty()||(o.ea.forEach((P,Y)=>{w.push(o.la(Y,e,t).then(ee=>{if(ee){o.isPrimaryClient&&o.sharedClientState.updateQueryState(Y.targetId,ee.fromCache?"not-current":"current"),c.push(ee);const pe=mf.Ys(Y.targetId,ee);g.push(pe)}}))}),yield Promise.all(w),o.ta.Qo(c),yield(P=(0,ke.Z)(function*(Y,ee){const pe=R(Y);try{yield pe.persistence.runTransaction("notifyLocalViewChanges","readwrite",Re=>wt.forEach(ee,ht=>wt.forEach(ht.Hs,Ot=>pe.persistence.referenceDelegate.addReference(Re,ht.targetId,Ot)).next(()=>wt.forEach(ht.Js,Ot=>pe.persistence.referenceDelegate.removeReference(Re,ht.targetId,Ot)))))}catch(Re){if(!Fl(Re))throw Re;Nt("LocalStore","Failed to update sequence numbers: "+Re)}for(const Re of ee){const ht=Re.targetId;if(!Re.fromCache){const Ot=pe.ii.get(ht),An=Ot.withLastLimboFreeSnapshotVersion(Ot.snapshotVersion);pe.ii=pe.ii.insert(ht,An)}}}),function(Y,ee){return P.apply(this,arguments)})(o.localStore,g))}),Xp.apply(this,arguments)}function Uf(i,e){return Lc.apply(this,arguments)}function Lc(){return Lc=(0,ke.Z)(function*(i,e){const t=R(i);if(!t.currentUser.isEqual(e)){Nt("SyncEngine","User change. New user:",e.toKey());const o=yield Xg(t.localStore,e);t.currentUser=e,(c=t).aa.forEach(w=>{w.forEach(P=>{P.reject(new q(O.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),c.aa.clear(),t.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),yield ic(t,o.hi)}var c}),Lc.apply(this,arguments)}function f_(i,e){const t=R(i),o=t.ra.get(e);if(o&&o.Zu)return fi().add(o.key);{let c=fi();const g=t.na.get(e);if(!g)return c;for(const w of g){const P=t.ea.get(w);c=c.unionWith(P.view.Ku)}return c}}function Fh(i,e){return eg.apply(this,arguments)}function eg(){return eg=(0,ke.Z)(function*(i,e){const t=R(i),o=yield rc(t.localStore,e.query,!0),c=e.view.Yu(o);return t.isPrimaryClient&&Qp(t,e.targetId,c.Hu),c}),eg.apply(this,arguments)}function p_(i,e){return Lh.apply(this,arguments)}function Lh(){return Lh=(0,ke.Z)(function*(i,e){const t=R(i);return ud(t.localStore,e).then(o=>ic(t,o))}),Lh.apply(this,arguments)}function Ru(i,e,t,o){return fd.apply(this,arguments)}function fd(){return fd=(0,ke.Z)(function*(i,e,t,o){const c=R(i),g=yield function(w,P){const Y=R(w),ee=R(Y.Bs);return Y.persistence.runTransaction("Lookup mutation documents","readonly",pe=>ee.fn(pe,P).next(Re=>Re?Y.ci.Ks(pe,Re):wt.resolve(null)))}(c.localStore,e);var P;null!==g?("pending"===t?yield cd(c.remoteStore):"acknowledged"===t||"rejected"===t?(Yp(c,e,o||null),kh(c,e),P=e,R(R(c.localStore).Bs)._n(P)):T(),yield ic(c,g)):Nt("SyncEngine","Cannot apply mutation batch with id: "+e)}),fd.apply(this,arguments)}function sc(){return sc=(0,ke.Z)(function*(i,e){const t=R(i);if(Bc(t),jc(t),!0===e&&!0!==t.ha){const o=t.sharedClientState.getAllActiveQueryTargets(),c=yield Vh(t,o.toArray());t.ha=!0,yield Nf(t.remoteStore,!0);for(const g of c)Af(t.remoteStore,g)}else if(!1===e&&!1!==t.ha){const o=[];let c=Promise.resolve();t.na.forEach((g,w)=>{t.sharedClientState.isLocalQueryTarget(w)?o.push(w):c=c.then(()=>(Fc(t,w),qd(t.localStore,w,!0))),xh(t.remoteStore,w)}),yield c,yield Vh(t,o),function(g){const w=R(g);w.ra.forEach((P,Y)=>{xh(w.remoteStore,Y)}),w.oa.bi(),w.ra=new Map,w.ia=new Ji(Yt.comparator)}(t),t.ha=!1,yield Nf(t.remoteStore,!1)}}),sc.apply(this,arguments)}function Vh(i,e,t){return tl.apply(this,arguments)}function tl(){return tl=(0,ke.Z)(function*(i,e,t){const o=R(i),c=[],g=[];for(const w of e){let P;const Y=o.na.get(w);if(Y&&0!==Y.length){P=yield zd(o.localStore,uo(Y[0]));for(const ee of Y){const pe=o.ea.get(ee),Re=yield Fh(o,pe);Re.snapshot&&g.push(Re.snapshot)}}else{const ee=yield vf(o.localStore,w);P=yield zd(o.localStore,ee),yield qp(o,Bf(ee),w,!1)}c.push(P)}return o.ta.Qo(g),c}),tl.apply(this,arguments)}function Bf(i){return gc(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function eh(i){const e=R(i);return R(R(e.localStore).persistence).Fs()}function th(i,e,t,o){return Vc.apply(this,arguments)}function Vc(){return Vc=(0,ke.Z)(function*(i,e,t,o){const c=R(i);if(c.ha)return void Nt("SyncEngine","Ignoring unexpected query state notification.");const g=c.na.get(e);if(g&&g.length>0)switch(t){case"current":case"not-current":{const w=yield ud(c.localStore,xd(g[0])),P=Fa.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield ic(c,w,P);break}case"rejected":yield qd(c.localStore,e,!0),Fc(c,e,o);break;default:T()}}),Vc.apply(this,arguments)}function nh(i,e,t){return Uc.apply(this,arguments)}function Uc(){return Uc=(0,ke.Z)(function*(i,e,t){const o=Bc(i);if(o.ha){for(const c of e){if(o.na.has(c)){Nt("SyncEngine","Adding an already active target "+c);continue}const g=yield vf(o.localStore,c),w=yield zd(o.localStore,g);yield qp(o,Bf(g),w.targetId,!1),Af(o.remoteStore,w)}for(const c of t)o.na.has(c)&&(yield qd(o.localStore,c,!1).then(()=>{xh(o.remoteStore,c),Fc(o,c)}).catch(rt))}}),Uc.apply(this,arguments)}function Bc(i){const e=R(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=Kp.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=f_.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=qv.bind(null,e),e.ta.Qo=l_.bind(null,e.eventManager),e.ta.fa=u_.bind(null,e.eventManager),e}function jc(i){const e=R(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Om.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Nm.bind(null,e),e}class pd{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ke.Z)(function*(){t.M=Yd(e.databaseInfo.databaseId),t.sharedClientState=t._a(e),t.persistence=t.wa(e),yield t.persistence.start(),t.gcScheduler=t.ma(e),t.localStore=t.ga(e)})()}ma(e){return null}ga(e){return _f(this.persistence,new yf,e.initialUser,this.M)}wa(e){return new am(bf.zi,this.M)}_a(e){return new hm}terminate(){var e=this;return(0,ke.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class tg extends pd{constructor(e,t,o){super(),this.ya=e,this.cacheSizeBytes=t,this.forceOwnership=o,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,o=this;return(0,ke.Z)(function*(){yield t().call(o,e),yield o.ya.initialize(o,e),yield jc(o.ya.syncEngine),yield cd(o.ya.remoteStore),yield o.persistence.Ts(()=>(o.gcScheduler&&!o.gcScheduler.started&&o.gcScheduler.start(o.localStore),Promise.resolve()))})()}ga(e){return _f(this.persistence,new yf,e.initialUser,this.M)}ma(e){return new Pi(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}wa(e){const t=Dh(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),o=void 0!==this.cacheSizeBytes?la.withCacheSize(this.cacheSizeBytes):la.DEFAULT;return new Qg(this.synchronizeTabs,t,e.clientId,o,e.asyncQueue,Ap(),Df(),this.M,this.sharedClientState,!!this.forceOwnership)}_a(e){return new hm}}class Fm extends tg{constructor(e,t){super(e,t,!1),this.ya=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,o=this;return(0,ke.Z)(function*(){yield t().call(o,e);const c=o.ya.syncEngine;o.sharedClientState instanceof dm&&(o.sharedClientState.syncEngine={Mr:Ru.bind(null,c),Or:th.bind(null,c),Fr:nh.bind(null,c),Fs:eh.bind(null,c),kr:p_.bind(null,c)},yield o.sharedClientState.start()),yield o.persistence.Ts(function(){var g=(0,ke.Z)(function*(w){yield function va(i,e){return sc.apply(this,arguments)}(o.ya.syncEngine,w),o.gcScheduler&&(w&&!o.gcScheduler.started?o.gcScheduler.start(o.localStore):w||o.gcScheduler.stop())});return function(w){return g.apply(this,arguments)}}())})()}_a(e){const t=Ap();if(!dm.vt(t))throw new q(O.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const o=Dh(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new dm(t,e.asyncQueue,o,e.clientId,e.initialUser)}}class jf{initialize(e,t){var o=this;return(0,ke.Z)(function*(){o.localStore||(o.localStore=e.localStore,o.sharedClientState=e.sharedClientState,o.datastore=o.createDatastore(t),o.remoteStore=o.createRemoteStore(t),o.eventManager=o.createEventManager(t),o.syncEngine=o.createSyncEngine(t,!e.synchronizeTabs),o.sharedClientState.onlineStateHandler=c=>Ul(o.syncEngine,c,1),o.remoteStore.remoteSyncer.handleCredentialChange=Uf.bind(null,o.syncEngine),yield Nf(o.remoteStore,o.syncEngine.isPrimaryClient))})()}createEventManager(e){return new a_}createDatastore(e){const t=Yd(e.databaseInfo.databaseId),o=new n_(e.databaseInfo);return new r_(e.authCredentials,e.appCheckCredentials,o,t)}createRemoteStore(e){return t=this.localStore,o=this.datastore,c=e.asyncQueue,g=P=>Ul(this.syncEngine,P,0),w=Tp.vt()?new Tp:new Dp,new xp(t,o,c,g,w);var t,o,c,g,w}createSyncEngine(e,t){return function(o,c,g,w,P,Y,ee){const pe=new Wv(o,c,g,w,P,Y);return ee&&(pe.ha=!0),pe}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ke.Z)(function*(t){const o=R(t);Nt("RemoteStore","RemoteStore shutting down."),o.fu.add(5),yield Sh(o),o._u.shutdown(),o.wu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function ng(i,e=10240){let t=0;return{read:()=>(0,ke.Z)(function*(){if(t<i.byteLength){const o={value:i.slice(t,t+e),done:!1};return t+=e,o}return{done:!0}})(),cancel:()=>(0,ke.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Uh{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.pa(this.observer.next,e)}error(e){this.observer.error?this.pa(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Ia(){this.muted=!0}pa(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Lm{constructor(e,t){this.Ta=e,this.M=t,this.metadata=new ue,this.buffer=new Uint8Array,this.Ea=new TextDecoder("utf-8"),this.Aa().then(o=>{o&&o.xu()?this.metadata.resolve(o.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==o?void 0:o.payload)}`))},o=>this.metadata.reject(o))}close(){return this.Ta.cancel()}getMetadata(){var e=this;return(0,ke.Z)(function*(){return e.metadata.promise})()}da(){var e=this;return(0,ke.Z)(function*(){return yield e.getMetadata(),e.Aa()})()}Aa(){var e=this;return(0,ke.Z)(function*(){const t=yield e.Ra();if(null===t)return null;const o=e.Ea.decode(t),c=Number(o);isNaN(c)&&e.Pa(`length string (${o}) is not valid number`);const g=yield e.ba(c);return new Cm(JSON.parse(g),t.length+c)})()}Va(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Ra(){var e=this;return(0,ke.Z)(function*(){for(;e.Va()<0&&!(yield e.va()););if(0===e.buffer.length)return null;const t=e.Va();t<0&&e.Pa("Reached the end of bundle when a length string is expected.");const o=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),o})()}ba(e){var t=this;return(0,ke.Z)(function*(){for(;t.buffer.length<e;)(yield t.va())&&t.Pa("Reached the end of bundle when more is expected.");const o=t.Ea.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),o})()}Pa(e){throw this.Ta.cancel(),new Error(`Invalid bundle format: ${e}`)}va(){var e=this;return(0,ke.Z)(function*(){const t=yield e.Ta.read();if(!t.done){const o=new Uint8Array(e.buffer.length+t.value.length);o.set(e.buffer),o.set(t.value,e.buffer.length),e.buffer=o}return t.done})()}}class Vm{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ke.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new q(O.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const o=yield(c=(0,ke.Z)(function*(g,w){const P=R(g),Y=ml(P.M)+"/documents",ee={documents:w.map(Ot=>oa(P.M,Ot))},pe=yield P.ho("BatchGetDocuments",Y,ee),Re=new Map;pe.forEach(Ot=>{const Vt=function Yu(i,e){return"found"in e?function(t,o){I(!!o.found);const c=gl(t,o.found.name),g=Kr(o.found.updateTime),w=new k({mapValue:{fields:o.found.fields}});return X.newFoundDocument(c,g,w)}(i,e):"missing"in e?function(t,o){I(!!o.missing),I(!!o.readTime);const c=gl(t,o.missing),g=Kr(o.readTime);return X.newNoDocument(c,g)}(i,e):T()}(P.M,Ot);Re.set(Vt.key.toString(),Vt)});const ht=[];return w.forEach(Ot=>{const Vt=Re.get(Ot.toString());I(!!Vt),ht.push(Vt)}),ht}),function(g,w){return c.apply(this,arguments)})(t.datastore,e);var c;return o.forEach(c=>t.recordVersion(c)),o})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(o){this.lastWriteError=o}this.writtenDocs.add(e.toString())}delete(e){this.write(new Rl(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ke.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var o;e.mutations.forEach(o=>{t.delete(o.key.toString())}),t.forEach((o,c)=>{const g=Yt.fromPath(c);e.mutations.push(new zu(g,e.precondition(g)))}),yield(o=(0,ke.Z)(function*(c,g){const w=R(c),P=ml(w.M)+"/documents",Y={writes:g.map(ee=>yl(w.M,ee))};yield w.oo("Commit",P,Y)}),function(c,g){return o.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw T();t=qn.min()}const o=this.readVersions.get(e.key.toString());if(o){if(!t.isEqual(o))throw new q(O.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Qr.updateTime(t):Qr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(qn.min()))throw new q(O.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Qr.updateTime(t)}return Qr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Um{constructor(e,t,o,c){this.asyncQueue=e,this.datastore=t,this.updateFunction=o,this.deferred=c,this.Sa=5,this.Do=new Sp(this.asyncQueue,"transaction_retry")}run(){this.Sa-=1,this.Da()}Da(){var e=this;this.Do.To((0,ke.Z)(function*(){const t=new Vm(e.datastore),o=e.Ca(t);o&&o.then(c=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(c)}).catch(g=>{e.xa(g)}))}).catch(c=>{e.xa(c)})}))}Ca(e){try{const t=this.updateFunction(e);return!Co(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}xa(e){this.Sa>0&&this.Na(e)?(this.Sa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Da(),Promise.resolve()))):this.deferred.reject(e)}Na(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!Ec(t)}return!1}}class Bm{constructor(e,t,o,c){var g=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=o,this.databaseInfo=c,this.user=yi.UNAUTHENTICATED,this.clientId=ko.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(o,function(){var w=(0,ke.Z)(function*(P){Nt("FirestoreClient","Received user=",P.uid),yield g.authCredentialListener(P),g.user=P});return function(P){return w.apply(this,arguments)}}()),this.appCheckCredentials.start(o,w=>(Nt("FirestoreClient","Received new app check token=",w),this.appCheckCredentialListener(w,this.user)))}getConfiguration(){var e=this;return(0,ke.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new q(O.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new ue;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ke.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(o){const c=Jd(o,"Failed to shutdown persistence");t.reject(c)}})),t.promise}}function jm(i,e){return Hf.apply(this,arguments)}function Hf(){return Hf=(0,ke.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),Nt("FirestoreClient","Initializing OfflineComponentProvider");const t=yield i.getConfiguration();yield e.initialize(t);let o=t.initialUser;i.setCredentialChangeListener(function(){var c=(0,ke.Z)(function*(g){o.isEqual(g)||(yield Xg(e.localStore,g),o=g)});return function(g){return c.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i.offlineComponents=e}),Hf.apply(this,arguments)}function Hm(i,e){return rg.apply(this,arguments)}function rg(){return rg=(0,ke.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const t=yield $f(i);Nt("FirestoreClient","Initializing OnlineComponentProvider");const o=yield i.getConfiguration();yield e.initialize(t,o),i.setCredentialChangeListener(c=>Em(e.remoteStore,c)),i.setAppCheckTokenChangeListener((c,g)=>Em(e.remoteStore,g)),i.onlineComponents=e}),rg.apply(this,arguments)}function $f(i){return ig.apply(this,arguments)}function ig(){return ig=(0,ke.Z)(function*(i){return i.offlineComponents||(Nt("FirestoreClient","Using default OfflineComponentProvider"),yield jm(i,new pd)),i.offlineComponents}),ig.apply(this,arguments)}function Gf(i){return Wf.apply(this,arguments)}function Wf(){return Wf=(0,ke.Z)(function*(i){return i.onlineComponents||(Nt("FirestoreClient","Using default OnlineComponentProvider"),yield Hm(i,new jf)),i.onlineComponents}),Wf.apply(this,arguments)}function $m(i){return $f(i).then(e=>e.persistence)}function zf(i){return $f(i).then(e=>e.localStore)}function Gm(i){return Gf(i).then(e=>e.remoteStore)}function sg(i){return Gf(i).then(e=>e.syncEngine)}function Bh(i){return og.apply(this,arguments)}function og(){return og=(0,ke.Z)(function*(i){const e=yield Gf(i),t=e.eventManager;return t.onListen=xm.bind(null,e.syncEngine),t.onUnlisten=zv.bind(null,e.syncEngine),t}),og.apply(this,arguments)}function m_(i,e,t={}){const o=new ue;return i.asyncQueue.enqueueAndForget((0,ke.Z)(function*(){return function(c,g,w,P,Y){const ee=new Uh({next:Re=>{g.enqueueAndForget(()=>Hp(c,pe));const ht=Re.docs.has(w);!ht&&Re.fromCache?Y.reject(new q(O.UNAVAILABLE,"Failed to get document because the client is offline.")):ht&&Re.fromCache&&P&&"server"===P.source?Y.reject(new q(O.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):Y.resolve(Re)},error:Re=>Y.reject(Re)}),pe=new Oh(Ra(w.path),ee,{includeMetadataChanges:!0,Cu:!0});return jp(c,pe)}(yield Bh(i),i.asyncQueue,e,t,o)})),o.promise}function y_(i,e,t={}){const o=new ue;return i.asyncQueue.enqueueAndForget((0,ke.Z)(function*(){return function(c,g,w,P,Y){const ee=new Uh({next:Re=>{g.enqueueAndForget(()=>Hp(c,pe)),Re.fromCache&&"server"===P.source?Y.reject(new q(O.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):Y.resolve(Re)},error:Re=>Y.reject(Re)}),pe=new Oh(w,ee,{includeMetadataChanges:!0,Cu:!0});return jp(c,pe)}(yield Bh(i),i.asyncQueue,e,t,o)})),o.promise}const gd=new Map;function ug(i,e,t){if(!t)throw new q(O.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function cg(i,e,t,o){if(!0===e&&!0===o)throw new q(O.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function zm(i){if(!Yt.isDocumentKey(i))throw new q(O.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function dg(i){if(Yt.isDocumentKey(i))throw new q(O.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function md(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(t=i).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof i?"a function":T()}function si(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new q(O.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=md(i);throw new q(O.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}function hg(i,e){if(e<=0)throw new q(O.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}class qm{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new q(O.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new q(O.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,cg("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class jh{constructor(e,t,o){this._authCredentials=t,this._appCheckCredentials=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new qm({}),this._settingsFrozen=!1,e instanceof pa?this._databaseId=e:(this._app=e,this._databaseId=function(c){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new q(O.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new pa(c.options.projectId)}(e))}get app(){if(!this._app)throw new q(O.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new q(O.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new qm(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new mt;switch(t.type){case"gapi":const o=t.client;return I(!("object"!=typeof o||null===o||!o.auth||!o.auth.getAuthHeaderValueForFirstParty)),new Wr(o,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new q(O.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=gd.get(e);t&&(Nt("ComponentProvider","Removing Datastore"),gd.delete(e),t.terminate())}(this),Promise.resolve()}}class _s{constructor(e,t,o){this.converter=t,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new iu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new _s(this.firestore,e,this._key)}}class wa{constructor(e,t,o){this.converter=t,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new wa(this.firestore,e,this._query)}}class iu extends wa{constructor(e,t,o){super(e,t,Ra(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new _s(this.firestore,null,new Yt(e))}withConverter(e){return new iu(this.firestore,e,this._path)}}function Km(i,e,...t){if(i=(0,Ye.m9)(i),ug("collection","path",e),i instanceof jh){const o=Hr.fromString(e,...t);return dg(o),new iu(i,null,o)}{if(!(i instanceof _s||i instanceof iu))throw new q(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(Hr.fromString(e,...t));return dg(o),new iu(i.firestore,null,o)}}function Hh(i,e,...t){if(i=(0,Ye.m9)(i),1===arguments.length&&(e=ko.R()),ug("doc","path",e),i instanceof jh){const o=Hr.fromString(e,...t);return zm(o),new _s(i,null,new Yt(o))}{if(!(i instanceof _s||i instanceof iu))throw new q(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(Hr.fromString(e,...t));return zm(o),new _s(i.firestore,i instanceof iu?i.converter:null,new Yt(o))}}function qf(i,e){return i=(0,Ye.m9)(i),e=(0,Ye.m9)(e),(i instanceof _s||i instanceof iu)&&(e instanceof _s||e instanceof iu)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function E_(i,e){return i=(0,Ye.m9)(i),e=(0,Ye.m9)(e),i instanceof wa&&e instanceof wa&&i.firestore===e.firestore&&pu(i._query,e._query)&&i.converter===e.converter}class fg{constructor(){this.ka=Promise.resolve(),this.Ma=[],this.Oa=!1,this.Fa=[],this.$a=null,this.Ba=!1,this.La=!1,this.Ua=[],this.Do=new Sp(this,"async_queue_retry"),this.qa=()=>{const t=Df();t&&Nt("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Do.Ao()};const e=Df();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.qa)}get isShuttingDown(){return this.Oa}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ka(),this.Ga(e)}enterRestrictedMode(e){if(!this.Oa){this.Oa=!0,this.La=e||!1;const t=Df();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.qa)}}enqueue(e){if(this.Ka(),this.Oa)return new Promise(()=>{});const t=new ue;return this.Ga(()=>this.Oa&&this.La?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ma.push(e),this.Qa()))}Qa(){var e=this;return(0,ke.Z)(function*(){if(0!==e.Ma.length){try{yield e.Ma[0](),e.Ma.shift(),e.Do.reset()}catch(t){if(!Fl(t))throw t;Nt("AsyncQueue","Operation failed with retryable error: "+t)}e.Ma.length>0&&e.Do.To(()=>e.Qa())}})()}Ga(e){const t=this.ka.then(()=>(this.Ba=!0,e().catch(o=>{throw this.$a=o,this.Ba=!1,Gr("INTERNAL UNHANDLED ERROR: ",function(g){let w=g.message||"";return g.stack&&(w=g.stack.includes(g.message)?g.stack:g.message+"\n"+g.stack),w}(o)),o}).then(o=>(this.Ba=!1,o))));return this.ka=t,t}enqueueAfterDelay(e,t,o){this.Ka(),this.Ua.indexOf(e)>-1&&(t=0);const c=Rh.createAndSchedule(this,e,t,o,g=>this.ja(g));return this.Fa.push(c),c}Ka(){this.$a&&T()}verifyOperationInProgress(){}Wa(){var e=this;return(0,ke.Z)(function*(){let t;do{t=e.ka,yield t}while(t!==e.ka)})()}za(e){for(const t of this.Fa)if(t.timerId===e)return!0;return!1}Ha(e){return this.Wa().then(()=>{this.Fa.sort((t,o)=>t.targetTimeMs-o.targetTimeMs);for(const t of this.Fa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Wa()})}Ja(e){this.Ua.push(e)}ja(e){const t=this.Fa.indexOf(e);this.Fa.splice(t,1)}}function pg(i){return function(e,t){if("object"!=typeof e||null===e)return!1;const o=e;for(const c of["next","error","complete"])if(c in o&&"function"==typeof o[c])return!0;return!1}(i)}class Qv{constructor(){this._progressObserver={},this._taskCompletionResolver=new ue,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,o){this._progressObserver={next:e,error:t,complete:o}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class vs extends jh{constructor(e,t,o){super(e,t,o),this.type="firestore",this._queue=new fg,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||Gh(this),this._firestoreClient.terminate()}}function To(i){return i._firestoreClient||Gh(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function Gh(i){var e;const t=i._freezeSettings(),o=(g=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new Ho(i._databaseId,g,i._persistenceKey,(P=t).host,P.ssl,P.experimentalForceLongPolling,P.experimentalAutoDetectLongPolling,P.useFetchStreams));var g,P;i._firestoreClient=new Bm(i._authCredentials,i._appCheckCredentials,i._queue,o)}function b_(i,e,t){const o=new ue;return i.asyncQueue.enqueue((0,ke.Z)(function*(){try{yield jm(i,t),yield Hm(i,e),o.resolve()}catch(c){if(!("FirebaseError"===(g=c).name?g.code===O.FAILED_PRECONDITION||g.code===O.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&g instanceof DOMException)||22===g.code||20===g.code||11===g.code))throw c;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+c),o.reject(c)}var g})).then(()=>o.promise)}function vg(i){if(i._initialized||i._terminated)throw new q(O.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class su{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new q(O.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new gs(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Ou{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ou(Ti.fromBase64String(e))}catch(t){throw new q(O.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ou(Ti.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Hc{constructor(e){this._methodName=e}}class Wh{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new q(O.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new q(O.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return jn(this._lat,e._lat)||jn(this._long,e._long)}}const wg=/^__.*__$/;class ey{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return null!==this.fieldMask?new Ya(e,this.data,this.fieldMask,t,this.fieldTransforms):new Pl(e,this.data,t,this.fieldTransforms)}}class ty{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return new Ya(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function ny(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw T()}}class Zf{constructor(e,t,o,c,g,w){this.settings=e,this.databaseId=t,this.M=o,this.ignoreUndefinedProperties=c,void 0===g&&this.Ya(),this.fieldTransforms=g||[],this.fieldMask=w||[]}get path(){return this.settings.path}get Xa(){return this.settings.Xa}Za(e){return new Zf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}tc(e){var t;const o=null===(t=this.path)||void 0===t?void 0:t.child(e),c=this.Za({path:o,ec:!1});return c.nc(e),c}sc(e){var t;const o=null===(t=this.path)||void 0===t?void 0:t.child(e),c=this.Za({path:o,ec:!1});return c.Ya(),c}ic(e){return this.Za({path:void 0,ec:!0})}rc(e){return qh(e,this.settings.methodName,this.settings.oc||!1,this.path,this.settings.uc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Ya(){if(this.path)for(let e=0;e<this.path.length;e++)this.nc(this.path.get(e))}nc(e){if(0===e.length)throw this.rc("Document fields must not be empty");if(ny(this.Xa)&&wg.test(e))throw this.rc('Document fields cannot begin and end with "__"')}}class Eg{constructor(e,t,o){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=o||Yd(e)}ac(e,t,o,c=!1){return new Zf({Xa:e,methodName:t,uc:o,path:gs.emptyPath(),ec:!1,oc:c},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function Nu(i){const e=i._freezeSettings(),t=Yd(i._databaseId);return new Eg(i._databaseId,!!e.ignoreUndefinedProperties,t)}function zh(i,e,t,o,c,g={}){const w=i.ac(g.merge||g.mergeFields?2:0,e,t,c);go("Data must be an object, but it was:",w,o);const P=Cg(o,w);let Y,ee;if(g.merge)Y=new qa(w.fieldMask),ee=w.fieldTransforms;else if(g.mergeFields){const pe=[];for(const Re of g.mergeFields){const ht=Jf(e,Re,t);if(!w.contains(ht))throw new q(O.INVALID_ARGUMENT,`Field '${ht}' is specified in your field mask but missing from your input data.`);uy(pe,ht)||pe.push(ht)}Y=new qa(pe),ee=w.fieldTransforms.filter(Re=>Y.covers(Re.field))}else Y=null,ee=w.fieldTransforms;return new ey(new k(P),Y,ee)}class ih extends Hc{_toFieldTransform(e){if(2!==e.Xa)throw e.rc(1===e.Xa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ih}}function bg(i,e,t){return new Zf({Xa:3,uc:e.settings.uc,methodName:i._methodName,ec:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class Yf extends Hc{_toFieldTransform(e){return new Sl(e.path,new Kl)}isEqual(e){return e instanceof Yf}}class ry extends Hc{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=bg(this,e,!0),o=this.cc.map(g=>yd(g,t)),c=new fl(o);return new Sl(e.path,c)}isEqual(e){return this===e}}class iy extends Hc{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=bg(this,e,!0),o=this.cc.map(g=>yd(g,t)),c=new Oa(o);return new Sl(e.path,c)}isEqual(e){return this===e}}class sy extends Hc{constructor(e,t){super(e),this.hc=t}_toFieldTransform(e){const t=new Io(e.M,mu(e.M,this.hc));return new Sl(e.path,t)}isEqual(e){return this===e}}function Qf(i,e,t,o){const c=i.ac(1,e,t);go("Data must be an object, but it was:",c,o);const g=[],w=k.empty();hi(o,(Y,ee)=>{const pe=Xf(e,Y,t);ee=(0,Ye.m9)(ee);const Re=c.sc(pe);if(ee instanceof ih)g.push(pe);else{const ht=yd(ee,Re);null!=ht&&(g.push(pe),w.set(pe,ht))}});const P=new qa(g);return new ty(w,P,c.fieldTransforms)}function oy(i,e,t,o,c,g){const w=i.ac(1,e,t),P=[Jf(e,o,t)],Y=[c];if(g.length%2!=0)throw new q(O.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let ht=0;ht<g.length;ht+=2)P.push(Jf(e,g[ht])),Y.push(g[ht+1]);const ee=[],pe=k.empty();for(let ht=P.length-1;ht>=0;--ht)if(!uy(ee,P[ht])){const Ot=P[ht];let Vt=Y[ht];Vt=(0,Ye.m9)(Vt);const An=w.sc(Ot);if(Vt instanceof ih)ee.push(Ot);else{const yr=yd(Vt,An);null!=yr&&(ee.push(Ot),pe.set(Ot,yr))}}const Re=new qa(ee);return new ty(pe,Re,w.fieldTransforms)}function ay(i,e,t,o=!1){return yd(t,i.ac(o?4:3,e))}function yd(i,e){if(ly(i=(0,Ye.m9)(i)))return go("Unsupported field value:",e,i),Cg(i,e);if(i instanceof Hc)return function(t,o){if(!ny(o.Xa))throw o.rc(`${t._methodName}() can only be used with update() and set()`);if(!o.path)throw o.rc(`${t._methodName}() is not currently supported inside arrays`);const c=t._toFieldTransform(o);c&&o.fieldTransforms.push(c)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.ec&&4!==e.Xa)throw e.rc("Nested arrays are not supported");return function(t,o){const c=[];let g=0;for(const w of t){let P=yd(w,o.ic(g));null==P&&(P={nullValue:"NULL_VALUE"}),c.push(P),g++}return{arrayValue:{values:c}}}(i,e)}return function(t,o){if(null===(t=(0,Ye.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return mu(o.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const c=Di.fromDate(t);return{timestampValue:sa(o.M,c)}}if(t instanceof Di){const c=new Di(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:sa(o.M,c)}}if(t instanceof Wh)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Ou)return{bytesValue:Cu(o.M,t._byteString)};if(t instanceof _s){const c=o.databaseId,g=t.firestore._databaseId;if(!g.isEqual(c))throw o.rc(`Document reference is for database ${g.projectId}/${g.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Zu(t.firestore._databaseId||o.databaseId,t._key.path)}}throw o.rc(`Unsupported field value: ${md(t)}`)}(i,e)}function Cg(i,e){const t={};return Wc(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):hi(i,(o,c)=>{const g=yd(c,e.tc(o));null!=g&&(t[o]=g)}),{mapValue:{fields:t}}}function ly(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof Di||i instanceof Wh||i instanceof Ou||i instanceof _s||i instanceof Hc)}function go(i,e,t){if(!ly(t)||"object"!=typeof(o=t)||null===o||Object.getPrototypeOf(o)!==Object.prototype&&null!==Object.getPrototypeOf(o)){const o=md(t);throw e.rc("an object"===o?i+" a custom object":i+" "+o)}var o}function Jf(i,e,t){if((e=(0,Ye.m9)(e))instanceof su)return e._internalPath;if("string"==typeof e)return Xf(i,e);throw qh("Field path arguments must be of type string or ",i,!1,void 0,t)}const T_=new RegExp("[~\\*/\\[\\]]");function Xf(i,e,t){if(e.search(T_)>=0)throw qh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new su(...e.split("."))._internalPath}catch(o){throw qh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function qh(i,e,t,o,c){const g=o&&!o.isEmpty(),w=void 0!==c;let P=`Function ${e}() called with invalid data`;t&&(P+=" (via `toFirestore()`)"),P+=". ";let Y="";return(g||w)&&(Y+=" (found",g&&(Y+=` in field ${o}`),w&&(Y+=` in document ${c}`),Y+=")"),new q(O.INVALID_ARGUMENT,P+i+Y)}function uy(i,e){return i.some(t=>t.isEqual(e))}class sh{constructor(e,t,o,c,g){this._firestore=e,this._userDataWriter=t,this._key=o,this._document=c,this._converter=g}get id(){return this._key.path.lastSegment()}get ref(){return new _s(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new cy(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(oc("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class cy extends sh{data(){return super.data()}}function oc(i,e){return"string"==typeof e?Xf(i,e):e instanceof su?e._internalPath:e._delegate._internalPath}class _d{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ac extends sh{constructor(e,t,o,c,g,w){super(e,t,o,c,w),this._firestore=e,this._firestoreImpl=e,this.metadata=g}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new oh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const o=this._document.data.field(oc("DocumentSnapshot.get",e));if(null!==o)return this._userDataWriter.convertValue(o,t.serverTimestamps)}}}class oh extends ac{data(e={}){return super.data(e)}}class $c{constructor(e,t,o,c){this._firestore=e,this._userDataWriter=t,this._snapshot=c,this.metadata=new _d(c.hasPendingWrites,c.fromCache),this.query=o}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(o=>{e.call(t,new oh(this._firestore,this._userDataWriter,o.key,o,new _d(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new q(O.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,c){if(o._snapshot.oldDocs.isEmpty()){let g=0;return o._snapshot.docChanges.map(w=>({type:"added",doc:new oh(o._firestore,o._userDataWriter,w.doc.key,w.doc,new _d(o._snapshot.mutatedKeys.has(w.doc.key),o._snapshot.fromCache),o.query.converter),oldIndex:-1,newIndex:g++}))}{let g=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(w=>c||3!==w.type).map(w=>{const P=new oh(o._firestore,o._userDataWriter,w.doc.key,w.doc,new _d(o._snapshot.mutatedKeys.has(w.doc.key),o._snapshot.fromCache),o.query.converter);let Y=-1,ee=-1;return 0!==w.type&&(Y=g.indexOf(w.doc.key),g=g.delete(w.doc.key)),1!==w.type&&(g=g.add(w.doc),ee=g.indexOf(w.doc.key)),{type:dy(w.type),doc:P,oldIndex:Y,newIndex:ee}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function dy(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return T()}}function A_(i,e){return i instanceof ac&&e instanceof ac?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof $c&&e instanceof $c&&i._firestore===e._firestore&&E_(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}function Ig(i){if(ma(i)&&0===i.explicitOrderBy.length)throw new q(O.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class vd{}function ua(i,...e){for(const t of e)i=t._apply(i);return i}class S_ extends vd{constructor(e,t,o){super(),this.lc=e,this.fc=t,this.dc=o,this.type="where"}_apply(e){const t=Nu(e.firestore),o=function(c,g,w,P,Y,ee,pe){let Re;if(Y.isKeyField()){if("array-contains"===ee||"array-contains-any"===ee)throw new q(O.INVALID_ARGUMENT,`Invalid Query. You can't perform '${ee}' queries on documentId().`);if("in"===ee||"not-in"===ee){yy(pe,ee);const Ot=[];for(const Vt of pe)Ot.push(Tg(P,c,Vt));Re={arrayValue:{values:Ot}}}else Re=Tg(P,c,pe)}else"in"!==ee&&"not-in"!==ee&&"array-contains-any"!==ee||yy(pe,ee),Re=ay(w,"where",pe,"in"===ee||"not-in"===ee);const ht=Ss.create(Y,ee,Re);return function(Ot,Vt){if(Vt.S()){const yr=ql(Ot);if(null!==yr&&!yr.isEqual(Vt.field))throw new q(O.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${yr.toString()}' and '${Vt.field.toString()}'`);const ws=ul(Ot);null!==ws&&Ag(0,Vt.field,ws)}const An=function(yr,ws){for(const mo of yr.filters)if(ws.indexOf(mo.op)>=0)return mo.op;return null}(Ot,function(yr){switch(yr){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(Vt.op));if(null!==An)throw new q(O.INVALID_ARGUMENT,An===Vt.op?`Invalid query. You cannot use more than one '${Vt.op.toString()}' filter.`:`Invalid query. You cannot use '${Vt.op.toString()}' filters with '${An.toString()}' filters.`)}(c,ht),ht}(e._query,0,t,e.firestore._databaseId,this.lc,this.fc,this.dc);return new wa(e.firestore,e.converter,function(c,g){const w=c.filters.concat([g]);return new Za(c.path,c.collectionGroup,c.explicitOrderBy.slice(),w,c.limit,c.limitType,c.startAt,c.endAt)}(e._query,o))}}class ku extends vd{constructor(e,t){super(),this.lc=e,this._c=t,this.type="orderBy"}_apply(e){const t=function(o,c,g){if(null!==o.startAt)throw new q(O.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==o.endAt)throw new q(O.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const w=new zl(c,g);return function(P,Y){if(null===ul(P)){const ee=ql(P);null!==ee&&Ag(0,ee,Y.field)}}(o,w),w}(e._query,this.lc,this._c);return new wa(e.firestore,e.converter,function(o,c){const g=o.explicitOrderBy.concat([c]);return new Za(o.path,o.collectionGroup,g,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,t))}}class Bl extends vd{constructor(e,t,o){super(),this.type=e,this.wc=t,this.mc=o}_apply(e){return new wa(e.firestore,e.converter,mc(e._query,this.wc,this.mc))}}class py extends vd{constructor(e,t,o){super(),this.type=e,this.gc=t,this.yc=o}_apply(e){const t=my(e,this.type,this.gc,this.yc);return new wa(e.firestore,e.converter,(c=t,new Za((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,c,o.endAt)));var o,c}}class gy extends vd{constructor(e,t,o){super(),this.type=e,this.gc=t,this.yc=o}_apply(e){const t=my(e,this.type,this.gc,this.yc);return new wa(e.firestore,e.converter,(c=t,new Za((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,o.startAt,c)));var o,c}}function my(i,e,t,o){if(t[0]=(0,Ye.m9)(t[0]),t[0]instanceof sh)return function(c,g,w,P,Y){if(!P)throw new q(O.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${w}().`);const ee=[];for(const pe of cl(c))if(pe.field.isKeyField())ee.push(ea(g,P.key));else{const Re=P.data.field(pe.field);if(pc(Re))throw new q(O.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+pe.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===Re){const ht=pe.field.canonicalString();throw new q(O.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${ht}' (used as the orderBy) does not exist.`)}ee.push(Re)}return new Ka(ee,Y)}(i._query,i.firestore._databaseId,e,t[0]._document,o);{const c=Nu(i.firestore);return function(g,w,P,Y,ee,pe){const Re=g.explicitOrderBy;if(ee.length>Re.length)throw new q(O.INVALID_ARGUMENT,`Too many arguments provided to ${Y}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const ht=[];for(let Ot=0;Ot<ee.length;Ot++){const Vt=ee[Ot];if(Re[Ot].field.isKeyField()){if("string"!=typeof Vt)throw new q(O.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${Y}(), but got a ${typeof Vt}`);if(!qc(g)&&-1!==Vt.indexOf("/"))throw new q(O.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${Y}() must be a plain document ID, but '${Vt}' contains a slash.`);const An=g.path.child(Hr.fromString(Vt));if(!Yt.isDocumentKey(An))throw new q(O.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${Y}() must result in a valid document path, but '${An}' is not because it contains an odd number of segments.`);const yr=new Yt(An);ht.push(ea(w,yr))}else{const An=ay(P,Y,Vt);ht.push(An)}}return new Ka(ht,pe)}(i._query,i.firestore._databaseId,c,e,t,o)}}function Tg(i,e,t){if("string"==typeof(t=(0,Ye.m9)(t))){if(""===t)throw new q(O.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!qc(e)&&-1!==t.indexOf("/"))throw new q(O.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const o=e.path.child(Hr.fromString(t));if(!Yt.isDocumentKey(o))throw new q(O.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return ea(i,new Yt(o))}if(t instanceof _s)return ea(i,t._key);throw new q(O.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${md(t)}.`)}function yy(i,e){if(!Array.isArray(i)||0===i.length)throw new q(O.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(i.length>10)throw new q(O.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function Ag(i,e,t){if(!t.isEqual(e))throw new q(O.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class ep{convertValue(e,t="none"){switch(Sa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ai(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(jo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw T()}}convertObject(e,t){const o={};return hi(e.fields,(c,g)=>{o[c]=this.convertValue(g,t)}),o}convertGeoPoint(e){return new Wh(Ai(e.latitude),Ai(e.longitude))}convertArray(e,t){return(e.values||[]).map(o=>this.convertValue(o,t))}convertServerTimestamp(e,t){switch(t){case"previous":const o=uu(e);return null==o?null:this.convertValue(o,t);case"estimate":return this.convertTimestamp(ms(e));default:return null}}convertTimestamp(e){const t=ii(e);return new Di(t.seconds,t.nanos)}convertDocumentKey(e,t){const o=Hr.fromString(e);I(tn(o));const c=new pa(o.get(1),o.get(3)),g=new Yt(o.popFirst(5));return c.isEqual(t)||Gr(`Document ${g} contains a document reference within a different database (${c.projectId}/${c.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),g}}function wd(i,e,t){let o;return o=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,o}class R_ extends ep{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ou(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new _s(this.firestore,null,t)}}class Sg{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Nu(e)}set(e,t,o){this._verifyNotCommitted();const c=lc(e,this._firestore),g=wd(c.converter,t,o),w=zh(this._dataReader,"WriteBatch.set",c._key,g,null!==c.converter,o);return this._mutations.push(w.toMutation(c._key,Qr.none())),this}update(e,t,o,...c){this._verifyNotCommitted();const g=lc(e,this._firestore);let w;return w="string"==typeof(t=(0,Ye.m9)(t))||t instanceof su?oy(this._dataReader,"WriteBatch.update",g._key,t,o,c):Qf(this._dataReader,"WriteBatch.update",g._key,t),this._mutations.push(w.toMutation(g._key,Qr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=lc(e,this._firestore);return this._mutations=this._mutations.concat(new Rl(t._key,Qr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new q(O.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function lc(i,e){if((i=(0,Ye.m9)(i)).firestore!==e)throw new q(O.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class Fu extends ep{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ou(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new _s(this.firestore,null,t)}}function Mg(i,e,t){i=si(i,_s);const o=si(i.firestore,vs),c=wd(i.converter,e,t);return ah(o,[zh(Nu(o),"setDoc",i._key,c,null!==i.converter,t).toMutation(i._key,Qr.none())])}function Pg(i,e,t,...o){i=si(i,_s);const c=si(i.firestore,vs),g=Nu(c);let w;return w="string"==typeof(e=(0,Ye.m9)(e))||e instanceof su?oy(g,"updateDoc",i._key,e,t,o):Qf(g,"updateDoc",i._key,e),ah(c,[w.toMutation(i._key,Qr.exists(!0))])}function Iy(i,...e){var t,o,c;i=(0,Ye.m9)(i);let g={includeMetadataChanges:!1},w=0;"object"!=typeof e[w]||pg(e[w])||(g=e[w],w++);const P={includeMetadataChanges:g.includeMetadataChanges};if(pg(e[w])){const Re=e[w];e[w]=null===(t=Re.next)||void 0===t?void 0:t.bind(Re),e[w+1]=null===(o=Re.error)||void 0===o?void 0:o.bind(Re),e[w+2]=null===(c=Re.complete)||void 0===c?void 0:c.bind(Re)}let Y,ee,pe;if(i instanceof _s)ee=si(i.firestore,vs),pe=Ra(i._key.path),Y={next:Re=>{e[w]&&e[w](Rg(ee,i,Re))},error:e[w+1],complete:e[w+2]};else{const Re=si(i,wa);ee=si(Re.firestore,vs),pe=Re._query;const ht=new Fu(ee);Y={next:Ot=>{e[w]&&e[w](new $c(ee,ht,Re,Ot))},error:e[w+1],complete:e[w+2]},Ig(i._query)}return function(Re,ht,Ot,Vt){const An=new Uh(Vt),yr=new Oh(ht,An,Ot);return Re.asyncQueue.enqueueAndForget((0,ke.Z)(function*(){return jp(yield Bh(Re),yr)})),()=>{An.Ia(),Re.asyncQueue.enqueueAndForget((0,ke.Z)(function*(){return Hp(yield Bh(Re),yr)}))}}(To(ee),pe,P,Y)}function ah(i,e){return function(t,o){const c=new ue;return t.asyncQueue.enqueueAndForget((0,ke.Z)(function*(){return function d_(i,e,t){return Ff.apply(this,arguments)}(yield sg(t),o,c)})),c.promise}(To(i),e)}function Rg(i,e,t){const o=t.docs.get(e._key),c=new Fu(i);return new ac(i,c,e._key,o,new _d(t.hasPendingWrites,t.fromCache),e.converter)}class k_ extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Nu(e)}get(e){const t=lc(e,this._firestore),o=new R_(this._firestore);return this._transaction.lookup([t._key]).then(c=>{if(!c||1!==c.length)return T();const g=c[0];if(g.isFoundDocument())return new sh(this._firestore,o,g.key,g,t.converter);if(g.isNoDocument())return new sh(this._firestore,o,t._key,null,t.converter);throw T()})}set(e,t,o){const c=lc(e,this._firestore),g=wd(c.converter,t,o),w=zh(this._dataReader,"Transaction.set",c._key,g,null!==c.converter,o);return this._transaction.set(c._key,w),this}update(e,t,o,...c){const g=lc(e,this._firestore);let w;return w="string"==typeof(t=(0,Ye.m9)(t))||t instanceof su?oy(this._dataReader,"Transaction.update",g._key,t,o,c):Qf(this._dataReader,"Transaction.update",g._key,t),this._transaction.update(g._key,w),this}delete(e){const t=lc(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=lc(e,this._firestore),o=new Fu(this._firestore);return super.get(e).then(c=>new ac(this._firestore,o,t._key,c._document,new _d(!1,!1),t.converter))}}function Og(i,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new q("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return e}function Ng(){if("undefined"==typeof Uint8Array)throw new q("unimplemented","Uint8Arrays are not available in this environment.")}function kg(){if(!function fc(){return"undefined"!=typeof atob}())throw new q("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(i,e=!0){ps=Ht.SDK_VERSION,(0,Ht._registerComponent)(new dt.wA("firestore",(t,{options:o})=>{const c=t.getProvider("app").getImmediate(),g=new vs(c,new Ir(t.getProvider("auth-internal")),new Gs(t.getProvider("app-check-internal")));return o=Object.assign({useFetchStreams:e},o),g._setSettings(o),g},"PUBLIC")),(0,Ht.registerVersion)(ri,"3.4.8",i),(0,Ht.registerVersion)(ri,"3.4.8","esm2017")}();class lh{constructor(e){this._delegate=e}static fromBase64String(e){return kg(),new lh(Ou.fromBase64String(e))}static fromUint8Array(e){return Ng(),new lh(Ou.fromUint8Array(e))}toBase64(){return kg(),this._delegate.toBase64()}toUint8Array(){return Ng(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function tp(i){return function Ty(i,e){if("object"!=typeof i||null===i)return!1;const t=i;for(const o of e)if(o in t&&"function"==typeof t[o])return!0;return!1}(i,["next","error","complete"])}class Ay{enableIndexedDbPersistence(e,t){return function Kf(i,e){vg(i=si(i,vs));const t=To(i),o=i._freezeSettings(),c=new jf;return b_(t,c,new tg(c,o.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function gg(i){vg(i=si(i,vs));const e=To(i),t=i._freezeSettings(),o=new jf;return b_(e,o,new Fm(o,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function C_(i){if(i._initialized&&!i._terminated)throw new q(O.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new ue;return i._queue.enqueueAndForgetEvenWhileRestricted((0,ke.Z)(function*(){try{yield(t=(0,ke.Z)(function*(o){if(!el.vt())return Promise.resolve();const c=o+"main";yield el.delete(c)}),function(o){return t.apply(this,arguments)})(Dh(i._databaseId,i._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Fg{constructor(e,t,o){this._delegate=t,this._persistenceProvider=o,this.INTERNAL={delete:()=>this.terminate()},e instanceof pa||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&no("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,o={}){!function w_(i,e,t,o={}){var c;const g=(i=si(i,jh))._getSettings();if("firestore.googleapis.com"!==g.host&&g.host!==e&&no("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},g),{host:`${e}:${t}`,ssl:!1})),o.mockUserToken){let w,P;if("string"==typeof o.mockUserToken)w=o.mockUserToken,P=yi.MOCK_USER;else{w=(0,Ye.Sg)(o.mockUserToken,null===(c=i._app)||void 0===c?void 0:c.options.projectId);const Y=o.mockUserToken.sub||o.mockUserToken.user_id;if(!Y)throw new q(O.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");P=new yi(Y)}i._authCredentials=new nn(new Te(w,P))}}(this._delegate,e,t,o)}enableNetwork(){return function yg(i){return function ag(i){return i.asyncQueue.enqueue((0,ke.Z)(function*(){const e=yield $m(i),t=yield Gm(i);return e.setNetworkEnabled(!0),function(o){const c=R(o);return c.fu.delete(0),Ah(c)}(t)}))}(To(i=si(i,vs)))}(this._delegate)}disableNetwork(){return function Jm(i){return function lg(i){return i.asyncQueue.enqueue((0,ke.Z)(function*(){const e=yield $m(i),t=yield Gm(i);return e.setNetworkEnabled(!1),(o=(0,ke.Z)(function*(c){const g=R(c);g.fu.add(0),yield Sh(g),g.wu.set("Offline")}),function(c){return o.apply(this,arguments)})(t);var o}))}(To(i=si(i,vs)))}(this._delegate)}enablePersistence(e){let t=!1,o=!1;return e&&(t=!!e.synchronizeTabs,o=!!e.experimentalForceOwningTab,cg("synchronizeTabs",t,"experimentalForceOwningTab",o)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,o)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function mg(i){return function(e){const t=new ue;return e.asyncQueue.enqueueAndForget((0,ke.Z)(function*(){return function Kv(i,e){return Vf.apply(this,arguments)}(yield sg(e),t)})),t.promise}(To(i=si(i,vs)))}(this._delegate)}onSnapshotsInSync(e){return function N_(i,e){return function __(i,e){const t=new Uh(e);return i.asyncQueue.enqueueAndForget((0,ke.Z)(function*(){return o=yield Bh(i),c=t,R(o).Eu.add(c),void c.next();var o,c})),()=>{t.Ia(),i.asyncQueue.enqueueAndForget((0,ke.Z)(function*(){return o=yield Bh(i),c=t,void R(o).Eu.delete(c);var o,c}))}}(To(i=si(i,vs)),pg(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new q("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Xn(this,Km(this._delegate,e))}catch(t){throw Ha(t,"collection()","Firestore.collection()")}}doc(e){try{return new jl(this,Hh(this._delegate,e))}catch(t){throw Ha(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ea(this,function Zm(i,e){if(i=si(i,jh),ug("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new q(O.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new wa(i,null,(t=e,new Za(Hr.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ha(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function F_(i,e){return function Wm(i,e){const t=new ue;return i.asyncQueue.enqueueAndForget((0,ke.Z)(function*(){const o=yield(c=i,Gf(c).then(g=>g.datastore));var c;new Um(i.asyncQueue,o,e,t).run()})),t.promise}(To(i=si(i,vs)),t=>e(new k_(i,t)))}(this._delegate,t=>e(new Lg(this,t)))}batch(){return To(this._delegate),new Vg(new Sg(this._delegate,e=>ah(this._delegate,e)))}loadBundle(e){return function _g(i,e){const t=To(i=si(i,vs)),o=new Qv;return function Yv(i,e,t,o){const c=function(g,w){let P;return P="string"==typeof g?(new TextEncoder).encode(g):g,Y=function(Y,ee){if(Y instanceof Uint8Array)return ng(Y,void 0);if(Y instanceof ArrayBuffer)return ng(new Uint8Array(Y),void 0);if(Y instanceof ReadableStream)return Y.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(P),new Lm(Y,w);var Y}(t,Yd(e));i.asyncQueue.enqueueAndForget((0,ke.Z)(function*(){!function rh(i,e,t){const o=R(i);var c;(c=(0,ke.Z)(function*(g,w,P){try{const Y=yield w.getMetadata();if(yield function(ht,Ot){const Vt=R(ht),An=Kr(Ot.createTime);return Vt.persistence.runTransaction("hasNewerBundle","readonly",yr=>Vt._s.getBundleMetadata(yr,Ot.id)).then(yr=>!!yr&&yr.createTime.compareTo(An)>=0)}(g.localStore,Y))return yield w.close(),P._completeWith({taskState:"Success",documentsLoaded:(ht=Y).totalDocuments,bytesLoaded:ht.totalBytes,totalDocuments:ht.totalDocuments,totalBytes:ht.totalBytes}),Promise.resolve(new Set);P._updateProgress(Wp(Y));const ee=new Im(Y,g.localStore,w.M);let pe=yield w.da();for(;pe;){const ht=yield ee.ku(pe);ht&&P._updateProgress(ht),pe=yield w.da()}const Re=yield ee.complete();return yield ic(g,Re.Fu,void 0),yield function(ht,Ot){const Vt=R(ht);return Vt.persistence.runTransaction("Save bundle","readwrite",An=>Vt._s.saveBundleMetadata(An,Ot))}(g.localStore,Y),P._completeWith(Re.progress),Promise.resolve(Re.Ou)}catch(Y){return no("SyncEngine",`Loading bundle failed with ${Y}`),P._failWith(Y),Promise.resolve(new Set)}var ht}),function(g,w,P){return c.apply(this,arguments)})(o,e,t).then(c=>{o.sharedClientState.notifyBundleLoaded(c)})}(yield sg(i),c,o)}))}(t,i._databaseId,e,o),o}(this._delegate,e)}namedQuery(e){return function Xm(i,e){return function v_(i,e){return i.asyncQueue.enqueue((0,ke.Z)(function*(){return function(t,o){const c=R(t);return c.persistence.runTransaction("Get named query","readonly",g=>c._s.getNamedQuery(g,o))}(yield zf(i),e)}))}(To(i=si(i,vs)),e).then(t=>t?new wa(i,null,t.query):null)}(this._delegate,e).then(t=>t?new Ea(this,t):null)}}class Zh extends ep{constructor(e){super(),this.firestore=e}convertBytes(e){return new lh(new Ou(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return jl.forKey(t,this.firestore,null)}}class Lg{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Zh(e)}get(e){const t=Cd(e);return this._delegate.get(t).then(o=>new bd(this._firestore,new ac(this._firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,t.converter)))}set(e,t,o){const c=Cd(e);return o?(Og("Transaction.set",o),this._delegate.set(c,t,o)):this._delegate.set(c,t),this}update(e,t,o,...c){const g=Cd(e);return 2===arguments.length?this._delegate.update(g,t):this._delegate.update(g,t,o,...c),this}delete(e){const t=Cd(e);return this._delegate.delete(t),this}}class Vg{constructor(e){this._delegate=e}set(e,t,o){const c=Cd(e);return o?(Og("WriteBatch.set",o),this._delegate.set(c,t,o)):this._delegate.set(c,t),this}update(e,t,o,...c){const g=Cd(e);return 2===arguments.length?this._delegate.update(g,t):this._delegate.update(g,t,o,...c),this}delete(e){const t=Cd(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class wl{constructor(e,t,o){this._firestore=e,this._userDataWriter=t,this._delegate=o}fromFirestore(e,t){const o=new oh(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new np(this._firestore,o),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const o=wl.INSTANCES;let c=o.get(e);c||(c=new WeakMap,o.set(e,c));let g=c.get(t);return g||(g=new wl(e,new Zh(e),t),c.set(t,g)),g}}wl.INSTANCES=new WeakMap;class jl{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Zh(e)}static forPath(e,t,o){if(e.length%2!=0)throw new q("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new jl(t,new _s(t._delegate,o,new Yt(e)))}static forKey(e,t,o){return new jl(t,new _s(t._delegate,o,e))}get id(){return this._delegate.id}get parent(){return new Xn(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Xn(this.firestore,Km(this._delegate,e))}catch(t){throw Ha(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Ye.m9)(e))instanceof _s&&qf(this._delegate,e)}set(e,t){t=Og("DocumentReference.set",t);try{return t?Mg(this._delegate,e,t):Mg(this._delegate,e)}catch(o){throw Ha(o,"setDoc()","DocumentReference.set()")}}update(e,t,...o){try{return 1===arguments.length?Pg(this._delegate,e):Pg(this._delegate,e,t,...o)}catch(c){throw Ha(c,"updateDoc()","DocumentReference.update()")}}delete(){return function Cy(i){return ah(si(i.firestore,vs),[new Rl(i._key,Qr.none())])}(this._delegate)}onSnapshot(...e){const t=Ed(e),o=G_(e,c=>new bd(this.firestore,new ac(this.firestore._delegate,this._userDataWriter,c._key,c._document,c.metadata,this._delegate.converter)));return Iy(this._delegate,t,o)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function _y(i){i=si(i,_s);const e=si(i.firestore,vs),t=To(e),o=new Fu(e);return function g_(i,e){const t=new ue;return i.asyncQueue.enqueueAndForget((0,ke.Z)(function*(){return(o=(0,ke.Z)(function*(c,g,w){try{const P=yield function(Y,ee){const pe=R(Y);return pe.persistence.runTransaction("read document","readonly",Re=>pe.ci.Ls(Re,ee))}(c,g);P.isFoundDocument()?w.resolve(P):P.isNoDocument()?w.resolve(null):w.reject(new q(O.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(P){const Y=Jd(P,`Failed to get document '${g} from cache`);w.reject(Y)}}),function(c,g,w){return o.apply(this,arguments)})(yield zf(i),e,t);var o})),t.promise}(t,i._key).then(c=>new ac(e,o,i._key,c,new _d(null!==c&&c.hasLocalMutations,!0),i.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function vy(i){i=si(i,_s);const e=si(i.firestore,vs);return m_(To(e),i._key,{source:"server"}).then(t=>Rg(e,i,t))}(this._delegate):function xg(i){i=si(i,_s);const e=si(i.firestore,vs);return m_(To(e),i._key).then(t=>Rg(e,i,t))}(this._delegate),t.then(o=>new bd(this.firestore,new ac(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)))}withConverter(e){return new jl(this.firestore,this._delegate.withConverter(e?wl.getInstance(this.firestore,e):null))}}function Ha(i,e,t){return i.message=i.message.replace(e,t),i}function Ed(i){for(const e of i)if("object"==typeof e&&!tp(e))return e;return{}}function G_(i,e){var t,o;let c;return c=tp(i[0])?i[0]:tp(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]},{next:g=>{c.next&&c.next(e(g))},error:null===(t=c.error)||void 0===t?void 0:t.bind(c),complete:null===(o=c.complete)||void 0===o?void 0:o.bind(c)}}class bd{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new jl(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return A_(this._delegate,e._delegate)}}class np extends bd{data(e){const t=this._delegate.data(e);return function C(i,e){i||T()}(void 0!==t),t}}class Ea{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Zh(e)}where(e,t,o){try{return new Ea(this.firestore,ua(this._delegate,function x_(i,e,t){const o=e,c=oc("where",i);return new S_(c,o,t)}(e,t,o)))}catch(c){throw Ha(c,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ea(this.firestore,ua(this._delegate,function ou(i,e="asc"){const t=e,o=oc("orderBy",i);return new ku(o,t)}(e,t)))}catch(o){throw Ha(o,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ea(this.firestore,ua(this._delegate,function hy(i){return hg("limit",i),new Bl("limit",i,"F")}(e)))}catch(t){throw Ha(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ea(this.firestore,ua(this._delegate,function fy(i){return hg("limitToLast",i),new Bl("limitToLast",i,"L")}(e)))}catch(t){throw Ha(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ea(this.firestore,ua(this._delegate,function M_(...i){return new py("startAt",i,!0)}(...e)))}catch(t){throw Ha(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ea(this.firestore,ua(this._delegate,function P_(...i){return new py("startAfter",i,!1)}(...e)))}catch(t){throw Ha(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ea(this.firestore,ua(this._delegate,function Dg(...i){return new gy("endBefore",i,!1)}(...e)))}catch(t){throw Ha(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ea(this.firestore,ua(this._delegate,function Kh(...i){return new gy("endAt",i,!0)}(...e)))}catch(t){throw Ha(t,"endAt()","Query.endAt()")}}isEqual(e){return E_(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function Ey(i){i=si(i,wa);const e=si(i.firestore,vs),t=To(e),o=new Fu(e);return function Zv(i,e){const t=new ue;return i.asyncQueue.enqueueAndForget((0,ke.Z)(function*(){return(o=(0,ke.Z)(function*(c,g,w){try{const P=yield rc(c,g,!0),Y=new Am(g,P.li),ee=Y.Gu(P.documents),pe=Y.applyChanges(ee,!1);w.resolve(pe.snapshot)}catch(P){const Y=Jd(P,`Failed to execute query '${g} against cache`);w.reject(Y)}}),function(c,g,w){return o.apply(this,arguments)})(yield zf(i),e,t);var o})),t.promise}(t,i._query).then(c=>new $c(e,o,i,c))}(this._delegate):"server"===(null==e?void 0:e.source)?function by(i){i=si(i,wa);const e=si(i.firestore,vs),t=To(e),o=new Fu(e);return y_(t,i._query,{source:"server"}).then(c=>new $c(e,o,i,c))}(this._delegate):function wy(i){i=si(i,wa);const e=si(i.firestore,vs),t=To(e),o=new Fu(e);return Ig(i._query),y_(t,i._query).then(c=>new $c(e,o,i,c))}(this._delegate),t.then(o=>new My(this.firestore,new $c(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)))}onSnapshot(...e){const t=Ed(e),o=G_(e,c=>new My(this.firestore,new $c(this.firestore._delegate,this._userDataWriter,this._delegate,c._snapshot)));return Iy(this._delegate,t,o)}withConverter(e){return new Ea(this.firestore,this._delegate.withConverter(e?wl.getInstance(this.firestore,e):null))}}class xy{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new np(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class My{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ea(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new np(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new xy(this._firestore,t))}forEach(e,t){this._delegate.forEach(o=>{e.call(t,new np(this._firestore,o))})}isEqual(e){return A_(this._delegate,e._delegate)}}class Xn extends Ea{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new jl(this.firestore,e):null}doc(e){try{return new jl(this.firestore,void 0===e?Hh(this._delegate):Hh(this._delegate,e))}catch(t){throw Ha(t,"doc()","CollectionReference.doc()")}}add(e){return function O_(i,e){const t=si(i.firestore,vs),o=Hh(i),c=wd(i.converter,e);return ah(t,[zh(Nu(i.firestore),"addDoc",o._key,c,null!==i.converter,{}).toMutation(o._key,Qr.exists(!1))]).then(()=>o)}(this._delegate,e).then(t=>new jl(this.firestore,t))}isEqual(e){return qf(this._delegate,e._delegate)}withConverter(e){return new Xn(this.firestore,this._delegate.withConverter(e?wl.getInstance(this.firestore,e):null))}}function Cd(i){return si(i,_s)}class Ug{constructor(...e){this._delegate=new su(...e)}static documentId(){return new Ug(gs.keyField().canonicalString())}isEqual(e){return(e=(0,Ye.m9)(e))instanceof su&&this._delegate._internalPath.isEqual(e._internalPath)}}class Id{constructor(e){this._delegate=e}static serverTimestamp(){const e=function V_(){return new Yf("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Id(e)}static delete(){const e=function L_(){return new ih("deleteField")}();return e._methodName="FieldValue.delete",new Id(e)}static arrayUnion(...e){const t=function U_(...i){return new ry("arrayUnion",i)}(...e);return t._methodName="FieldValue.arrayUnion",new Id(t)}static arrayRemove(...e){const t=function B_(...i){return new iy("arrayRemove",i)}(...e);return t._methodName="FieldValue.arrayRemove",new Id(t)}static increment(e){const t=function j_(i){return new sy("increment",i)}(e);return t._methodName="FieldValue.increment",new Id(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const rp={Firestore:Fg,GeoPoint:Wh,Timestamp:Di,Blob:lh,Transaction:Lg,WriteBatch:Vg,DocumentReference:jl,DocumentSnapshot:bd,Query:Ea,QueryDocumentSnapshot:np,QuerySnapshot:My,CollectionReference:Xn,FieldPath:Ug,FieldValue:Id,setLogLevel:function Sy(i){!function fa(i){No.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};!function ip(i){(function W_(i,e){i.INTERNAL.registerComponent(new dt.wA("firestore-compat",t=>{const o=t.getProvider("app-compat").getImmediate(),c=t.getProvider("firestore").getImmediate();return e(o,c)},"PUBLIC").setServiceProps(Object.assign({},rp)))})(i,(e,t)=>new Fg(e,t,new Ay)),i.registerVersion("@firebase/firestore-compat","0.1.17")}(yt.Z);var au=z(1205),Zs=z(440);function Ry(i,e){return function Py(i,e=B.z){return new oe.y(t=>{let o;return null!=e?e.schedule(()=>{o=i.onSnapshot({includeMetadataChanges:!0},t)}):o=i.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=o&&o()}})}(i,e)}function sp(i,e){return Ry(i,e).pipe((0,de.U)(t=>({payload:t,type:"query"})))}function Yh(i,e){return sp(i,e).pipe((0,_e.O)(void 0),We(),(0,de.U)(([t,o])=>{const c=o.payload.docChanges(),g=c.map(w=>({type:w.type,payload:w}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(o.payload.metadata)&&o.payload.docs.forEach((w,P)=>{const Y=c.find(pe=>pe.doc.ref.isEqual(w.ref)),ee=null==t?void 0:t.payload.docs.find(pe=>pe.ref.isEqual(w.ref));Y&&JSON.stringify(Y.doc.metadata)===JSON.stringify(w.metadata)||!Y&&ee&&JSON.stringify(ee.metadata)===JSON.stringify(w.metadata)||g.push({type:"modified",payload:{oldIndex:P,newIndex:P,type:"modified",doc:w}})}),g}))}function Bg(i,e,t){return Yh(i,t).pipe((0,Fe.R)((o,c)=>function Oy(i,e,t){return e.forEach(o=>{t.indexOf(o.type)>-1&&(i=function q_(i,e){switch(e.type){case"added":if(!i[e.newIndex]||!i[e.newIndex].doc.ref.isEqual(e.doc.ref))return jg(i,e.newIndex,0,e);break;case"modified":if(null==i[e.oldIndex]||i[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=i.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return jg(i,e.newIndex,1,e)}break;case"removed":if(i[e.oldIndex]&&i[e.oldIndex].doc.ref.isEqual(e.doc.ref))return jg(i,e.oldIndex,1)}return i}(i,o))}),i}(o,c.map(g=>g.payload),e),[]),(0,Mt.x)(),(0,de.U)(o=>o.map(c=>({type:c.type,payload:c}))))}function jg(i,e,t,...o){const c=i.slice();return c.splice(e,t,...o),c}function Ny(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}z(127);class uh{constructor(e,t,o){this.ref=e,this.query=t,this.afs=o}stateChanges(e){let t=Yh(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,de.U)(o=>o.filter(c=>e.indexOf(c.type)>-1)))),t.pipe((0,_e.O)(void 0),We(),(0,pt.h)(([o,c])=>c.length>0||!o),(0,de.U)(([o,c])=>c),xe.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Fe.R)((t,o)=>[...t,...o],[]))}snapshotChanges(e){const t=Ny(e);return Bg(this.query,t,this.afs.schedulers.outsideAngular).pipe(xe.iC)}valueChanges(e={}){return sp(this.query,this.afs.schedulers.outsideAngular).pipe((0,de.U)(t=>t.payload.docs.map(o=>e.idField?Object.assign(Object.assign({},o.data()),{[e.idField]:o.id}):o.data())),xe.iC)}get(e){return(0,Pe.D)(this.query.get(e)).pipe(xe.iC)}add(e){return this.ref.add(e)}doc(e){return new ky(this.ref.doc(e),this.afs)}}class ky{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const o=this.ref.collection(e),{ref:c,query:g}=Hg(o,t);return new uh(c,g,this.afs)}snapshotChanges(){return function z_(i,e){return Ry(i,e).pipe((0,_e.O)(void 0),We(),(0,de.U)(([t,o])=>o.exists?(null==t?void 0:t.exists)?{payload:o,type:"modified"}:{payload:o,type:"added"}:{payload:o,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(xe.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,de.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Pe.D)(this.ref.get(e)).pipe(xe.iC)}}class K_{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Yh(this.query,this.afs.schedulers.outsideAngular).pipe((0,de.U)(t=>t.filter(o=>e.indexOf(o.type)>-1)),(0,pt.h)(t=>t.length>0),xe.iC):Yh(this.query,this.afs.schedulers.outsideAngular).pipe(xe.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Fe.R)((t,o)=>[...t,...o],[]))}snapshotChanges(e){const t=Ny(e);return Bg(this.query,t,this.afs.schedulers.outsideAngular).pipe(xe.iC)}valueChanges(e={}){return sp(this.query,this.afs.schedulers.outsideAngular).pipe((0,de.U)(o=>o.payload.docs.map(c=>e.idField?Object.assign({[e.idField]:c.id},c.data()):c.data())),xe.iC)}get(e){return(0,Pe.D)(this.query.get(e)).pipe(xe.iC)}}const Z_=new _.OlP("angularfire2.enableFirestorePersistence"),op=new _.OlP("angularfire2.firestore.persistenceSettings"),Fy=new _.OlP("angularfire2.firestore.settings"),Ly=new _.OlP("angularfire2.firestore.use-emulator");function Hg(i,e=(t=>t)){return{query:e(i),ref:i}}let Y_=(()=>{class i{constructor(t,o,c,g,w,P,Y,ee,pe,Re,ht,Ot,Vt,An,yr,ws,mo){this.schedulers=Y;const Hi=(0,Et.on)(t,P,o),xs=pe;Re&&(0,au.nw)(Hi,P,ht,Vt,An,yr,Ot,ws),[this.firestore,this.persistenceEnabled$]=(0,Et.cc)(`${Hi.name}.firestore`,"AngularFirestore",Hi.name,()=>{const Es=P.runOutsideAngular(()=>Hi.firestore());if(g&&Es.settings(g),xs&&Es.useEmulator(...xs),c&&!(0,Rt.PM)(w)){const ks=()=>{try{return(0,Pe.D)(Es.enablePersistence(ee||void 0).then(()=>!0,()=>!1))}catch(ba){return"undefined"!=typeof console&&console.warn(ba),(0,Ae.of)(!1)}};return[Es,P.runOutsideAngular(ks)]}return[Es,(0,Ae.of)(!1)]},[g,xs,c])}collection(t,o){let c;c="string"==typeof t?this.firestore.collection(t):t;const{ref:g,query:w}=Hg(c,o),P=this.schedulers.ngZone.run(()=>g);return new uh(P,w,this)}collectionGroup(t,o){const c=o||(w=>w),g=this.firestore.collectionGroup(t);return new K_(c(g),this)}doc(t){let o;o="string"==typeof t?this.firestore.doc(t):t;const c=this.schedulers.ngZone.run(()=>o);return new ky(c,this)}createId(){return this.firestore.collection("_").doc().id}}return i.\u0275fac=function(t){return new(t||i)(_.LFG(Et.Dh),_.LFG(Et.xv,8),_.LFG(Z_,8),_.LFG(Fy,8),_.LFG(_.Lbi),_.LFG(_.R0b),_.LFG(xe.HU),_.LFG(op,8),_.LFG(Ly,8),_.LFG(au.zQ,8),_.LFG(au.Qv,8),_.LFG(au.L6,8),_.LFG(au._Q,8),_.LFG(au.rT,8),_.LFG(au.lh,8),_.LFG(au.f7,8),_.LFG(Zs.nm,8))},i.\u0275prov=_.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})()},2011:(en,Xe,z)=>{"use strict";z.d(Xe,{Dh:()=>Ue,GT:()=>xe,cc:()=>pt,hO:()=>Mt,on:()=>_e,pX:()=>Ae,xv:()=>We});var _=z(5e3),B=z(127),oe=z(5813);en=z.hmd(en);const Pe=["ngOnDestroy"],Ae=(yt,ke,Ht,dt={})=>new Proxy(yt,{get:(nt,Ye)=>Ht.runOutsideAngular(()=>{var at;if(yt[Ye])return(null===(at=null==dt?void 0:dt.spy)||void 0===at?void 0:at.get)&&dt.spy.get(Ye,yt[Ye]),yt[Ye];if(Pe.indexOf(Ye)>-1)return()=>{};const Dt=ke.toPromise().then(ne=>{const Oe=ne&&ne[Ye];return"function"==typeof Oe?Oe.bind(ne):Oe&&Oe.then?Oe.then(W=>Ht.run(()=>W)):Ht.run(()=>Oe)});return new Proxy(()=>{},{get:(ne,Oe)=>Dt[Oe],apply:(ne,Oe,W)=>Dt.then(ze=>{var He;const ot=ze&&ze(...W);return(null===(He=null==dt?void 0:dt.spy)||void 0===He?void 0:He.apply)&&dt.spy.apply(Ye,W,ot),ot})})})}),xe=(yt,ke)=>{ke.forEach(Ht=>{Object.getOwnPropertyNames(Ht.prototype||Ht).forEach(dt=>{Object.defineProperty(yt.prototype,dt,Object.getOwnPropertyDescriptor(Ht.prototype||Ht,dt))})})};class je{constructor(ke){return ke}}const Ue=new _.OlP("angularfire2.app.options"),We=new _.OlP("angularfire2.app.name");function _e(yt,ke,Ht){const nt="object"==typeof Ht&&Ht||{};nt.name=nt.name||"string"==typeof Ht&&Ht||"[DEFAULT]";const at=B.Z.apps.filter(Dt=>Dt&&Dt.name===nt.name)[0]||ke.runOutsideAngular(()=>B.Z.initializeApp(yt,nt));try{JSON.stringify(yt)!==JSON.stringify(at.options)&&de("error",`${at.name} Firebase App already initialized with different options${en.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Dt){}return new je(at)}const de=(yt,...ke)=>{(0,_.X6Q)()&&"undefined"!=typeof console&&console[yt](...ke)},Fe={provide:je,useFactory:_e,deps:[Ue,_.R0b,[new _.FiY,We]]};let Mt=(()=>{class yt{constructor(Ht){B.Z.registerVersion("angularfire",oe.q4.full,"core"),B.Z.registerVersion("angularfire",oe.q4.full,"app-compat"),B.Z.registerVersion("angular",_.q4F.full,Ht.toString())}static initializeApp(Ht,dt){return{ngModule:yt,providers:[{provide:Ue,useValue:Ht},{provide:We,useValue:dt}]}}}return yt.\u0275fac=function(Ht){return new(Ht||yt)(_.LFG(_.Lbi))},yt.\u0275mod=_.oAB({type:yt}),yt.\u0275inj=_.cJS({providers:[Fe]}),yt})();function pt(yt,ke,Ht,dt,nt){const[,Ye,at]=globalThis.\u0275AngularfireInstanceCache.find(Dt=>Dt[0]===yt)||[];if(Ye)return function Et(yt,ke){try{return yt.toString()===ke.toString()}catch(Ht){return yt===ke}}(nt,at)||(tt("error",`${ke} was already initialized on the ${Ht} Firebase App with different settings.${Rt?" You may need to reload as Firebase is not HMR aware.":""}`),tt("warn",{is:nt,was:at})),Ye;{const Dt=dt();return globalThis.\u0275AngularfireInstanceCache.push([yt,Dt,nt]),Dt}}const Rt=!!en.hot,tt=(yt,...ke)=>{(0,_.X6Q)()&&"undefined"!=typeof console&&console[yt](...ke)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(en,Xe,z)=>{"use strict";z.d(Xe,{q4:()=>pa,iC:()=>bl,HU:()=>al,vb:()=>ol,JM:()=>sl});var _=z(5e3),B=z(5867),oe=z(5861),Pe=z(9681),Ae=z(2090),xe=z(4859),je=z(1877);const Ue="@firebase/installations",de="w:0.5.8",Fe="FIS_v2",yt=new Ae.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function ke(k){return k instanceof Ae.ZR&&k.code.includes("request-failed")}function Ht({projectId:k}){return`https://firebaseinstallations.googleapis.com/v1/projects/${k}/installations`}function dt(k){return{token:k.token,requestStatus:2,expiresIn:W(k.expiresIn),creationTime:Date.now()}}function nt(k,H){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,oe.Z)(function*(k,H){const me=(yield H.json()).error;return yt.create("request-failed",{requestName:k,serverCode:me.code,serverMessage:me.message,serverStatus:me.status})})).apply(this,arguments)}function at({apiKey:k}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":k})}function Dt(k,{refreshToken:H}){const X=at(k);return X.append("Authorization",function ze(k){return`${Fe} ${k}`}(H)),X}function ne(k){return Oe.apply(this,arguments)}function Oe(){return(Oe=(0,oe.Z)(function*(k){const H=yield k();return H.status>=500&&H.status<600?k():H})).apply(this,arguments)}function W(k){return Number(k.replace("s","000"))}function He(k,H){return ot.apply(this,arguments)}function ot(){return(ot=(0,oe.Z)(function*({appConfig:k,heartbeatServiceProvider:H},{fid:X}){const me=Ht(k),Ge=at(k),et=H.getImmediate({optional:!0});if(et){const or=yield et.getHeartbeatsHeader();or&&Ge.append("x-firebase-client",or)}const mn={method:"POST",headers:Ge,body:JSON.stringify({fid:X,authVersion:Fe,appId:k.appId,sdkVersion:de})},Mn=yield ne(()=>fetch(me,mn));if(Mn.ok){const or=yield Mn.json();return{fid:or.fid||X,registrationStatus:2,refreshToken:or.refreshToken,authToken:dt(or.authToken)}}throw yield nt("Create Installation",Mn)})).apply(this,arguments)}function Qe(k){return new Promise(H=>{setTimeout(H,k)})}const dn=/^[cdef][\w-]{21}$/;function Ft(){try{const k=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(k),k[0]=112+k[0]%16;const X=function St(k){return function En(k){return btoa(String.fromCharCode(...k)).replace(/\+/g,"-").replace(/\//g,"_")}(k).substr(0,22)}(k);return dn.test(X)?X:""}catch(k){return""}}function hn(k){return`${k.appName}!${k.appId}`}const Wt=new Map;function Vn(k,H){const X=hn(k);fn(X,H),function On(k,H){const X=function Sn(){return!ir&&"BroadcastChannel"in self&&(ir=new BroadcastChannel("[Firebase] FID Change"),ir.onmessage=k=>{fn(k.data.key,k.data.fid)}),ir}();X&&X.postMessage({key:k,fid:H}),function Mr(){0===Wt.size&&ir&&(ir.close(),ir=null)}()}(X,H)}function fn(k,H){const X=Wt.get(k);if(X)for(const me of X)me(H)}let ir=null;const vn="firebase-installations-store";let Nr=null;function er(){return Nr||(Nr=(0,Ae.X3)("firebase-installations-database",1,(k,H)=>{0===H&&k.createObjectStore(vn)})),Nr}function zt(k,H){return bn.apply(this,arguments)}function bn(){return(bn=(0,oe.Z)(function*(k,H){const X=hn(k),Ge=(yield er()).transaction(vn,"readwrite"),et=Ge.objectStore(vn),Bt=yield et.get(X);return yield et.put(H,X),yield Ge.complete,(!Bt||Bt.fid!==H.fid)&&Vn(k,H.fid),H})).apply(this,arguments)}function Fn(k){return un.apply(this,arguments)}function un(){return(un=(0,oe.Z)(function*(k){const H=hn(k),me=(yield er()).transaction(vn,"readwrite");yield me.objectStore(vn).delete(H),yield me.complete})).apply(this,arguments)}function zr(k,H){return _i.apply(this,arguments)}function _i(){return(_i=(0,oe.Z)(function*(k,H){const X=hn(k),Ge=(yield er()).transaction(vn,"readwrite"),et=Ge.objectStore(vn),Bt=yield et.get(X),mn=H(Bt);return void 0===mn?yield et.delete(X):yield et.put(mn,X),yield Ge.complete,mn&&(!Bt||Bt.fid!==mn.fid)&&Vn(k,mn.fid),mn})).apply(this,arguments)}function ct(k){return ge.apply(this,arguments)}function ge(){return(ge=(0,oe.Z)(function*(k){let H;const X=yield zr(k.appConfig,me=>{const Ge=be(me),et=vt(k,Ge);return H=et.registrationPromise,et.installationEntry});return""===X.fid?{installationEntry:yield H}:{installationEntry:X,registrationPromise:H}})).apply(this,arguments)}function be(k){return sn(k||{fid:Ft(),registrationStatus:0})}function vt(k,H){if(0===H.registrationStatus){if(!navigator.onLine)return{installationEntry:H,registrationPromise:Promise.reject(yt.create("app-offline"))};const X={fid:H.fid,registrationStatus:1,registrationTime:Date.now()},me=function Be(k,H){return gt.apply(this,arguments)}(k,X);return{installationEntry:X,registrationPromise:me}}return 1===H.registrationStatus?{installationEntry:H,registrationPromise:xt(k)}:{installationEntry:H}}function gt(){return(gt=(0,oe.Z)(function*(k,H){try{const X=yield He(k,H);return zt(k.appConfig,X)}catch(X){throw ke(X)&&409===X.customData.serverCode?yield Fn(k.appConfig):yield zt(k.appConfig,{fid:H.fid,registrationStatus:0}),X}})).apply(this,arguments)}function xt(k){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,oe.Z)(function*(k){let H=yield In(k.appConfig);for(;1===H.registrationStatus;)yield Qe(100),H=yield In(k.appConfig);if(0===H.registrationStatus){const{installationEntry:X,registrationPromise:me}=yield ct(k);return me||X}return H})).apply(this,arguments)}function In(k){return zr(k,H=>{if(!H)throw yt.create("installation-not-found");return sn(H)})}function sn(k){return function $r(k){return 1===k.registrationStatus&&k.registrationTime+1e4<Date.now()}(k)?{fid:k.fid,registrationStatus:0}:k}function br(k,H){return sr.apply(this,arguments)}function sr(){return(sr=(0,oe.Z)(function*({appConfig:k,heartbeatServiceProvider:H},X){const me=Lt(k,X),Ge=Dt(k,X),et=H.getImmediate({optional:!0});if(et){const or=yield et.getHeartbeatsHeader();or&&Ge.append("x-firebase-client",or)}const mn={method:"POST",headers:Ge,body:JSON.stringify({installation:{sdkVersion:de,appId:k.appId}})},Mn=yield ne(()=>fetch(me,mn));if(Mn.ok)return dt(yield Mn.json());throw yield nt("Generate Auth Token",Mn)})).apply(this,arguments)}function Lt(k,{fid:H}){return`${Ht(k)}/${H}/authTokens:generate`}function tr(k){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,oe.Z)(function*(k,H=!1){let X;const me=yield zr(k.appConfig,et=>{if(!Un(et))throw yt.create("not-registered");const Bt=et.authToken;if(!H&&Ee(Bt))return et;if(1===Bt.requestStatus)return X=qt(k,H),et;{if(!navigator.onLine)throw yt.create("app-offline");const mn=Me(et);return X=Jt(k,mn),mn}});return X?yield X:me.authToken})).apply(this,arguments)}function qt(k,H){return Le.apply(this,arguments)}function Le(){return(Le=(0,oe.Z)(function*(k,H){let X=yield Gt(k.appConfig);for(;1===X.authToken.requestStatus;)yield Qe(100),X=yield Gt(k.appConfig);const me=X.authToken;return 0===me.requestStatus?tr(k,H):me})).apply(this,arguments)}function Gt(k){return zr(k,H=>{if(!Un(H))throw yt.create("not-registered");return function st(k){return 1===k.requestStatus&&k.requestTime+1e4<Date.now()}(H.authToken)?Object.assign(Object.assign({},H),{authToken:{requestStatus:0}}):H})}function Jt(k,H){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,oe.Z)(function*(k,H){try{const X=yield br(k,H),me=Object.assign(Object.assign({},H),{authToken:X});return yield zt(k.appConfig,me),X}catch(X){if(!ke(X)||401!==X.customData.serverCode&&404!==X.customData.serverCode){const me=Object.assign(Object.assign({},H),{authToken:{requestStatus:0}});yield zt(k.appConfig,me)}else yield Fn(k.appConfig);throw X}})).apply(this,arguments)}function Un(k){return void 0!==k&&2===k.registrationStatus}function Ee(k){return 2===k.requestStatus&&!function he(k){const H=Date.now();return H<k.creationTime||k.creationTime+k.expiresIn<H+36e5}(k)}function Me(k){const H={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},k),{authToken:H})}function jt(){return(jt=(0,oe.Z)(function*(k){const H=k,{installationEntry:X,registrationPromise:me}=yield ct(H);return me?me.catch(console.error):tr(H).catch(console.error),X.fid})).apply(this,arguments)}function xn(){return(xn=(0,oe.Z)(function*(k,H=!1){const X=k;return yield yn(X),(yield tr(X,H)).token})).apply(this,arguments)}function yn(k){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,oe.Z)(function*(k){const{registrationPromise:H}=yield ct(k);H&&(yield H)})).apply(this,arguments)}function Pr(k){return yt.create("missing-app-config-values",{valueName:k})}const Ni="installations",Ct=k=>{const H=k.getProvider("app").getImmediate(),X=function Yr(k){if(!k||!k.options)throw Pr("App Configuration");if(!k.name)throw Pr("App Name");const H=["projectId","apiKey","appId"];for(const X of H)if(!k.options[X])throw Pr(X);return{appName:k.name,projectId:k.options.projectId,apiKey:k.options.apiKey,appId:k.options.appId}}(H);return{app:H,appConfig:X,heartbeatServiceProvider:(0,Pe._getProvider)(H,"heartbeat"),_delete:()=>Promise.resolve()}},Nn=k=>{const H=k.getProvider("app").getImmediate(),X=(0,Pe._getProvider)(H,Ni).getImmediate();return{getId:()=>function $e(k){return jt.apply(this,arguments)}(X),getToken:Ge=>function on(k){return xn.apply(this,arguments)}(X,Ge)}};(function lr(){(0,Pe._registerComponent)(new xe.wA(Ni,Ct,"PUBLIC")),(0,Pe._registerComponent)(new xe.wA("installations-internal",Nn,"PRIVATE"))})(),(0,Pe.registerVersion)(Ue,"0.5.8"),(0,Pe.registerVersion)(Ue,"0.5.8","esm2017");const Lr="@firebase/remote-config",Rr=new Ae.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Fs{constructor(H,X,me,Ge){this.client=H,this.storage=X,this.storageCache=me,this.logger=Ge}isCachedDataFresh(H,X){if(!X)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const me=Date.now()-X,Ge=me<=H;return this.logger.debug(`Config fetch cache check. Cache age millis: ${me}. Cache max age millis (minimumFetchIntervalMillis setting): ${H}. Is cache hit: ${Ge}.`),Ge}fetch(H){var X=this;return(0,oe.Z)(function*(){const[me,Ge]=yield Promise.all([X.storage.getLastSuccessfulFetchTimestampMillis(),X.storage.getLastSuccessfulFetchResponse()]);if(Ge&&X.isCachedDataFresh(H.cacheMaxAgeMillis,me))return Ge;H.eTag=Ge&&Ge.eTag;const et=yield X.client.fetch(H),Bt=[X.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===et.status&&Bt.push(X.storage.setLastSuccessfulFetchResponse(et)),yield Promise.all(Bt),et})()}}function vi(k=navigator){return k.languages&&k.languages[0]||k.language}class Ys{constructor(H,X,me,Ge,et,Bt){this.firebaseInstallations=H,this.sdkVersion=X,this.namespace=me,this.projectId=Ge,this.apiKey=et,this.appId=Bt}fetch(H){var X=this;return(0,oe.Z)(function*(){const[me,Ge]=yield Promise.all([X.firebaseInstallations.getId(),X.firebaseInstallations.getToken()]),Bt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${X.projectId}/namespaces/${X.namespace}:fetch?key=${X.apiKey}`,mn={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":H.eTag||"*"},Mn={sdk_version:X.sdkVersion,app_instance_id:me,app_instance_id_token:Ge,app_id:X.appId,language_code:vi()},or={method:"POST",headers:mn,body:JSON.stringify(Mn)},Er=fetch(Bt,or),gr=new Promise((lo,Go)=>{H.signal.addEventListener(()=>{const ra=new Error("The operation was aborted.");ra.name="AbortError",Go(ra)})});let ys;try{yield Promise.race([Er,gr]),ys=yield Er}catch(lo){let Go="fetch-client-network";throw"AbortError"===lo.name&&(Go="fetch-timeout"),Rr.create(Go,{originalErrorMessage:lo.message})}let Li=ys.status;const $o=ys.headers.get("ETag")||void 0;let Pa,ao;if(200===ys.status){let lo;try{lo=yield ys.json()}catch(Go){throw Rr.create("fetch-client-parse",{originalErrorMessage:Go.message})}Pa=lo.entries,ao=lo.state}if("INSTANCE_STATE_UNSPECIFIED"===ao?Li=500:"NO_CHANGE"===ao?Li=304:("NO_TEMPLATE"===ao||"EMPTY_CONFIG"===ao)&&(Pa={}),304!==Li&&200!==Li)throw Rr.create("fetch-status",{httpStatus:Li});return{status:Li,eTag:$o,config:Pa}})()}}class _o{constructor(H,X){this.client=H,this.storage=X}fetch(H){var X=this;return(0,oe.Z)(function*(){const me=(yield X.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return X.attemptFetch(H,me)})()}attemptFetch(H,{throttleEndTimeMillis:X,backoffCount:me}){var Ge=this;return(0,oe.Z)(function*(){yield function xr(k,H){return new Promise((X,me)=>{const Ge=Math.max(H-Date.now(),0),et=setTimeout(X,Ge);k.addEventListener(()=>{clearTimeout(et),me(Rr.create("fetch-throttle",{throttleEndTimeMillis:H}))})})}(H.signal,X);try{const et=yield Ge.client.fetch(H);return yield Ge.storage.deleteThrottleMetadata(),et}catch(et){if(!function Ls(k){if(!(k instanceof Ae.ZR&&k.customData))return!1;const H=Number(k.customData.httpStatus);return 429===H||500===H||503===H||504===H}(et))throw et;const Bt={throttleEndTimeMillis:Date.now()+(0,Ae.$s)(me),backoffCount:me+1};return yield Ge.storage.setThrottleMetadata(Bt),Ge.attemptFetch(H,Bt)}})()}}class Ke{constructor(H,X,me,Ge,et){this.app=H,this._client=X,this._storageCache=me,this._storage=Ge,this._logger=et,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function bt(k,H){const X=k.target.error||void 0;return Rr.create(H,{originalErrorMessage:X&&X.message})}const _t="app_namespace_store";class wn{constructor(H,X,me,Ge=function _r(){return new Promise((k,H)=>{try{const X=indexedDB.open("firebase_remote_config",1);X.onerror=me=>{H(bt(me,"storage-open"))},X.onsuccess=me=>{k(me.target.result)},X.onupgradeneeded=me=>{0===me.oldVersion&&me.target.result.createObjectStore(_t,{keyPath:"compositeKey"})}}catch(X){H(Rr.create("storage-open",{originalErrorMessage:X}))}})}()){this.appId=H,this.appName=X,this.namespace=me,this.openDbPromise=Ge}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(H){return this.set("last_fetch_status",H)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(H){return this.set("last_successful_fetch_timestamp_millis",H)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(H){return this.set("last_successful_fetch_response",H)}getActiveConfig(){return this.get("active_config")}setActiveConfig(H){return this.set("active_config",H)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(H){return this.set("active_config_etag",H)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(H){return this.set("throttle_metadata",H)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(H){var X=this;return(0,oe.Z)(function*(){const me=yield X.openDbPromise;return new Promise((Ge,et)=>{const mn=me.transaction([_t],"readonly").objectStore(_t),Mn=X.createCompositeKey(H);try{const or=mn.get(Mn);or.onerror=Er=>{et(bt(Er,"storage-get"))},or.onsuccess=Er=>{const gr=Er.target.result;Ge(gr?gr.value:void 0)}}catch(or){et(Rr.create("storage-get",{originalErrorMessage:or&&or.message}))}})})()}set(H,X){var me=this;return(0,oe.Z)(function*(){const Ge=yield me.openDbPromise;return new Promise((et,Bt)=>{const Mn=Ge.transaction([_t],"readwrite").objectStore(_t),or=me.createCompositeKey(H);try{const Er=Mn.put({compositeKey:or,value:X});Er.onerror=gr=>{Bt(bt(gr,"storage-set"))},Er.onsuccess=()=>{et()}}catch(Er){Bt(Rr.create("storage-set",{originalErrorMessage:Er&&Er.message}))}})})()}delete(H){var X=this;return(0,oe.Z)(function*(){const me=yield X.openDbPromise;return new Promise((Ge,et)=>{const mn=me.transaction([_t],"readwrite").objectStore(_t),Mn=X.createCompositeKey(H);try{const or=mn.delete(Mn);or.onerror=Er=>{et(bt(Er,"storage-delete"))},or.onsuccess=()=>{Ge()}}catch(or){et(Rr.create("storage-delete",{originalErrorMessage:or&&or.message}))}})})()}createCompositeKey(H){return[this.appId,this.appName,this.namespace,H].join()}}class Si{constructor(H){this.storage=H}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var H=this;return(0,oe.Z)(function*(){const X=H.storage.getLastFetchStatus(),me=H.storage.getLastSuccessfulFetchTimestampMillis(),Ge=H.storage.getActiveConfig(),et=yield X;et&&(H.lastFetchStatus=et);const Bt=yield me;Bt&&(H.lastSuccessfulFetchTimestampMillis=Bt);const mn=yield Ge;mn&&(H.activeConfig=mn)})()}setLastFetchStatus(H){return this.lastFetchStatus=H,this.storage.setLastFetchStatus(H)}setLastSuccessfulFetchTimestampMillis(H){return this.lastSuccessfulFetchTimestampMillis=H,this.storage.setLastSuccessfulFetchTimestampMillis(H)}setActiveConfig(H){return this.activeConfig=H,this.storage.setActiveConfig(H)}}function mr(){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,oe.Z)(function*(){if(!(0,Ae.hl)())return!1;try{return yield(0,Ae.eu)()}catch(k){return!1}})).apply(this,arguments)}!function ls(){(0,Pe._registerComponent)(new xe.wA("remote-config",function k(H,{instanceIdentifier:X}){const me=H.getProvider("app").getImmediate(),Ge=H.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Rr.create("registration-window");if(!(0,Ae.hl)())throw Rr.create("indexed-db-unavailable");const{projectId:et,apiKey:Bt,appId:mn}=me.options;if(!et)throw Rr.create("registration-project-id");if(!Bt)throw Rr.create("registration-api-key");if(!mn)throw Rr.create("registration-app-id");const Mn=new wn(mn,me.name,X=X||"firebase"),or=new Si(Mn),Er=new je.Yd(Lr);Er.logLevel=je.in.ERROR;const gr=new Ys(Ge,Pe.SDK_VERSION,X,et,Bt,mn),ys=new _o(gr,Mn),Li=new Fs(ys,Mn,or,Er),$o=new Ke(me,Li,or,Mn,Er);return function it(k){const H=(0,Ae.m9)(k);H._initializePromise||(H._initializePromise=H._storageCache.loadFromStorage().then(()=>{H._isInitializationComplete=!0}))}($o),$o},"PUBLIC").setMultipleInstances(!0)),(0,Pe.registerVersion)(Lr,"0.3.7"),(0,Pe.registerVersion)(Lr,"0.3.7","esm2017")}();const ai="/firebase-messaging-sw.js",Ms="/firebase-cloud-messaging-push-scope",li="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Ps="google.c.a.c_id",Qs="google.c.a.c_l",Ao="google.c.a.ts",us="google.c.a.e";var qr=(()=>{return(k=qr||(qr={})).PUSH_RECEIVED="push-received",k.NOTIFICATION_CLICKED="notification-clicked",qr;var k})();function xi(k){const H=new Uint8Array(k);return btoa(String.fromCharCode(...H)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Js(k){const X=(k+"=".repeat((4-k.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),me=atob(X),Ge=new Uint8Array(me.length);for(let et=0;et<me.length;++et)Ge[et]=me.charCodeAt(et);return Ge}const Rs="fcm_token_details_db",ui="fcm_token_object_Store";function Xs(k){return vo.apply(this,arguments)}function vo(){return vo=(0,oe.Z)(function*(k){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(et=>et.name).includes(Rs))return null;let H=null;return(yield(0,Ae.X3)(Rs,5,function(){var me=(0,oe.Z)(function*(Ge,et,Bt,mn){var Mn;if(et<2||!Ge.objectStoreNames.contains(ui))return;const or=mn.objectStore(ui),Er=yield or.index("fcmSenderId").get(k);if(yield or.clear(),Er)if(2===et){const gr=Er;if(!gr.auth||!gr.p256dh||!gr.endpoint)return;H={token:gr.fcmToken,createTime:null!==(Mn=gr.createTime)&&void 0!==Mn?Mn:Date.now(),subscriptionOptions:{auth:gr.auth,p256dh:gr.p256dh,endpoint:gr.endpoint,swScope:gr.swScope,vapidKey:"string"==typeof gr.vapidKey?gr.vapidKey:xi(gr.vapidKey)}}}else if(3===et){const gr=Er;H={token:gr.fcmToken,createTime:gr.createTime,subscriptionOptions:{auth:xi(gr.auth),p256dh:xi(gr.p256dh),endpoint:gr.endpoint,swScope:gr.swScope,vapidKey:xi(gr.vapidKey)}}}else if(4===et){const gr=Er;H={token:gr.fcmToken,createTime:gr.createTime,subscriptionOptions:{auth:xi(gr.auth),p256dh:xi(gr.p256dh),endpoint:gr.endpoint,swScope:gr.swScope,vapidKey:xi(gr.vapidKey)}}}});return function(Ge,et,Bt,mn){return me.apply(this,arguments)}}())).close(),yield(0,Ae.Lj)(Rs),yield(0,Ae.Lj)("fcm_vapid_details_db"),yield(0,Ae.Lj)("undefined"),Zi(H)?H:null}),vo.apply(this,arguments)}function Zi(k){if(!k||!k.subscriptionOptions)return!1;const{subscriptionOptions:H}=k;return"number"==typeof k.createTime&&k.createTime>0&&"string"==typeof k.token&&k.token.length>0&&"string"==typeof H.auth&&H.auth.length>0&&"string"==typeof H.p256dh&&H.p256dh.length>0&&"string"==typeof H.endpoint&&H.endpoint.length>0&&"string"==typeof H.swScope&&H.swScope.length>0&&"string"==typeof H.vapidKey&&H.vapidKey.length>0}const ci="firebase-messaging-store";let Os=null;function cs(){return Os||(Os=(0,Ae.X3)("firebase-messaging-database",1,(k,H)=>{0===H&&k.createObjectStore(ci)})),Os}function Yn(k){return U.apply(this,arguments)}function U(){return(U=(0,oe.Z)(function*(k){const H=lt(k),me=yield(yield cs()).transaction(ci).objectStore(ci).get(H);if(me)return me;{const Ge=yield Xs(k.appConfig.senderId);if(Ge)return yield J(k,Ge),Ge}})).apply(this,arguments)}function J(k,H){return V.apply(this,arguments)}function V(){return(V=(0,oe.Z)(function*(k,H){const X=lt(k),Ge=(yield cs()).transaction(ci,"readwrite");return yield Ge.objectStore(ci).put(H,X),yield Ge.complete,H})).apply(this,arguments)}function ie(k){return ye.apply(this,arguments)}function ye(){return(ye=(0,oe.Z)(function*(k){const H=lt(k),me=(yield cs()).transaction(ci,"readwrite");yield me.objectStore(ci).delete(H),yield me.complete})).apply(this,arguments)}function lt({appConfig:k}){return k.appId}const Kt=new Ae.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function vr(k,H){return dr.apply(this,arguments)}function dr(){return(dr=(0,oe.Z)(function*(k,H){const X=yield ds(k),me=$t(H),Ge={method:"POST",headers:X,body:JSON.stringify(me)};let et;try{et=yield(yield fetch(Vr(k.appConfig),Ge)).json()}catch(Bt){throw Kt.create("token-subscribe-failed",{errorInfo:Bt})}if(et.error)throw Kt.create("token-subscribe-failed",{errorInfo:et.error.message});if(!et.token)throw Kt.create("token-subscribe-no-token");return et.token})).apply(this,arguments)}function Jn(k,H){return zn.apply(this,arguments)}function zn(){return(zn=(0,oe.Z)(function*(k,H){const X=yield ds(k),me=$t(H.subscriptionOptions),Ge={method:"PATCH",headers:X,body:JSON.stringify(me)};let et;try{et=yield(yield fetch(`${Vr(k.appConfig)}/${H.token}`,Ge)).json()}catch(Bt){throw Kt.create("token-update-failed",{errorInfo:Bt})}if(et.error)throw Kt.create("token-update-failed",{errorInfo:et.error.message});if(!et.token)throw Kt.create("token-update-no-token");return et.token})).apply(this,arguments)}function jr(k,H){return Or.apply(this,arguments)}function Or(){return(Or=(0,oe.Z)(function*(k,H){const me={method:"DELETE",headers:yield ds(k)};try{const et=yield(yield fetch(`${Vr(k.appConfig)}/${H}`,me)).json();if(et.error)throw Kt.create("token-unsubscribe-failed",{errorInfo:et.error.message})}catch(Ge){throw Kt.create("token-unsubscribe-failed",{errorInfo:Ge})}})).apply(this,arguments)}function Vr({projectId:k}){return`https://fcmregistrations.googleapis.com/v1/projects/${k}/registrations`}function ds(k){return wi.apply(this,arguments)}function wi(){return(wi=(0,oe.Z)(function*({appConfig:k,installations:H}){const X=yield H.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":k.apiKey,"x-goog-firebase-installations-auth":`FIS ${X}`})})).apply(this,arguments)}function $t({p256dh:k,auth:H,endpoint:X,vapidKey:me}){const Ge={web:{endpoint:X,auth:H,p256dh:k}};return me!==li&&(Ge.web.applicationPubKey=me),Ge}const eo=6048e5;function wo(k){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,oe.Z)(function*(k){const H=yield cn(k.swRegistration,k.vapidKey),X={vapidKey:k.vapidKey,swScope:k.swRegistration.scope,endpoint:H.endpoint,auth:xi(H.getKey("auth")),p256dh:xi(H.getKey("p256dh"))},me=yield Yn(k.firebaseDependencies);if(me){if(hr(me.subscriptionOptions,X))return Date.now()>=me.createTime+eo?L(k,{token:me.token,createTime:Date.now(),subscriptionOptions:X}):me.token;try{yield jr(k.firebaseDependencies,me.token)}catch(Ge){console.warn(Ge)}return G(k.firebaseDependencies,X)}return G(k.firebaseDependencies,X)})).apply(this,arguments)}function Wi(k){return $.apply(this,arguments)}function $(){return($=(0,oe.Z)(function*(k){const H=yield Yn(k.firebaseDependencies);H&&(yield jr(k.firebaseDependencies,H.token),yield ie(k.firebaseDependencies));const X=yield k.swRegistration.pushManager.getSubscription();return!X||X.unsubscribe()})).apply(this,arguments)}function L(k,H){return F.apply(this,arguments)}function F(){return(F=(0,oe.Z)(function*(k,H){try{const X=yield Jn(k.firebaseDependencies,H),me=Object.assign(Object.assign({},H),{token:X,createTime:Date.now()});return yield J(k.firebaseDependencies,me),X}catch(X){throw yield Wi(k),X}})).apply(this,arguments)}function G(k,H){return qe.apply(this,arguments)}function qe(){return(qe=(0,oe.Z)(function*(k,H){const me={token:yield vr(k,H),createTime:Date.now(),subscriptionOptions:H};return yield J(k,me),me.token})).apply(this,arguments)}function cn(k,H){return $n.apply(this,arguments)}function $n(){return($n=(0,oe.Z)(function*(k,H){return(yield k.pushManager.getSubscription())||k.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Js(H)})})).apply(this,arguments)}function hr(k,H){return H.vapidKey===k.vapidKey&&H.endpoint===k.endpoint&&H.auth===k.auth&&H.p256dh===k.p256dh}function Ei(k){const H={from:k.from,collapseKey:k.collapse_key,messageId:k.fcmMessageId};return function Mi(k,H){if(!H.notification)return;k.notification={};const X=H.notification.title;X&&(k.notification.title=X);const me=H.notification.body;me&&(k.notification.body=me);const Ge=H.notification.image;Ge&&(k.notification.image=Ge)}(H,k),function Us(k,H){!H.data||(k.data=H.data)}(H,k),function ns(k,H){if(!H.fcmOptions)return;k.fcmOptions={};const X=H.fcmOptions.link;X&&(k.fcmOptions.link=X);const me=H.fcmOptions.analytics_label;me&&(k.fcmOptions.analyticsLabel=me)}(H,k),H}function ca(k){return"object"==typeof k&&!!k&&Ps in k}function nl(k,H){const X=[];for(let me=0;me<k.length;me++)X.push(k.charAt(me)),me<H.length&&X.push(H.charAt(me));return X.join("")}function Bs(k){return Kt.create("missing-app-config-values",{valueName:k})}nl("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),nl("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Bi{constructor(H,X,me){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Ge=function Lo(k){if(!k||!k.options)throw Bs("App Configuration Object");if(!k.name)throw Bs("App Name");const H=["projectId","apiKey","appId","messagingSenderId"],{options:X}=k;for(const me of H)if(!X[me])throw Bs(me);return{appName:k.name,projectId:X.projectId,apiKey:X.apiKey,appId:X.appId,senderId:X.messagingSenderId}}(H);this.firebaseDependencies={app:H,appConfig:Ge,installations:X,analyticsProvider:me}}_delete(){return Promise.resolve()}}function hs(k){return da.apply(this,arguments)}function da(){return(da=(0,oe.Z)(function*(k){try{k.swRegistration=yield navigator.serviceWorker.register(ai,{scope:Ms}),k.swRegistration.update().catch(()=>{})}catch(H){throw Kt.create("failed-service-worker-registration",{browserErrorMessage:H.message})}})).apply(this,arguments)}function Yi(k,H){return ji.apply(this,arguments)}function ji(){return(ji=(0,oe.Z)(function*(k,H){if(!H&&!k.swRegistration&&(yield hs(k)),H||!k.swRegistration){if(!(H instanceof ServiceWorkerRegistration))throw Kt.create("invalid-sw-registration");k.swRegistration=H}})).apply(this,arguments)}function So(k,H){return ni.apply(this,arguments)}function ni(){return(ni=(0,oe.Z)(function*(k,H){H?k.vapidKey=H:k.vapidKey||(k.vapidKey=li)})).apply(this,arguments)}function Ko(){return(Ko=(0,oe.Z)(function*(k,H){if(!navigator)throw Kt.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Kt.create("permission-blocked");return yield So(k,null==H?void 0:H.vapidKey),yield Yi(k,null==H?void 0:H.serviceWorkerRegistration),wo(k)})).apply(this,arguments)}function Ca(k,H,X){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,oe.Z)(function*(k,H,X){const me=ha(H);(yield k.firebaseDependencies.analyticsProvider.get()).logEvent(me,{message_id:X[Ps],message_name:X[Qs],message_time:X[Ao],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function ha(k){switch(k){case qr.NOTIFICATION_CLICKED:return"notification_open";case qr.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Zo(){return(Zo=(0,oe.Z)(function*(k,H){const X=H.data;if(!X.isFirebaseMessaging)return;k.onMessageHandler&&X.messageType===qr.PUSH_RECEIVED&&("function"==typeof k.onMessageHandler?k.onMessageHandler(Ei(X)):k.onMessageHandler.next(Ei(X)));const me=X.data;ca(me)&&"1"===me[us]&&(yield Ca(k,X.messageType,me))})).apply(this,arguments)}const xo="@firebase/messaging",Bo=k=>{const H=new Bi(k.getProvider("app").getImmediate(),k.getProvider("installations-internal").getImmediate(),k.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",X=>function rl(k,H){return Zo.apply(this,arguments)}(H,X)),H},fs=k=>{const H=k.getProvider("messaging").getImmediate();return{getToken:me=>function Vo(k,H){return Ko.apply(this,arguments)}(H,me)}};function $a(){return Hs.apply(this,arguments)}function Hs(){return(Hs=(0,oe.Z)(function*(){try{yield(0,Ae.eu)()}catch(k){return!1}return"undefined"!=typeof window&&(0,Ae.hl)()&&(0,Ae.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Yo(){(0,Pe._registerComponent)(new xe.wA("messaging",Bo,"PUBLIC")),(0,Pe._registerComponent)(new xe.wA("messaging-internal",fs,"PRIVATE")),(0,Pe.registerVersion)(xo,"0.9.12"),(0,Pe.registerVersion)(xo,"0.9.12","esm2017")}();const Ia="analytics",Da="firebase_id",ki="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Po="https://www.googletagmanager.com/gtag/js",gi=new je.Yd("@firebase/analytics");function mi(k){return Promise.all(k.map(H=>H.catch(X=>X)))}function Aa(k,H){const X=document.createElement("script");X.src=`${Po}?l=${k}&id=${H}`,X.async=!0,document.head.appendChild(X)}function Ci(k,H,X,me,Ge,et){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,oe.Z)(function*(k,H,X,me,Ge,et){const Bt=me[Ge];try{if(Bt)yield H[Bt];else{const Mn=(yield mi(X)).find(or=>or.measurementId===Ge);Mn&&(yield H[Mn.appId])}}catch(mn){gi.error(mn)}k("config",Ge,et)})).apply(this,arguments)}function Ii(k,H,X,me,Ge){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,oe.Z)(function*(k,H,X,me,Ge){try{let et=[];if(Ge&&Ge.send_to){let Bt=Ge.send_to;Array.isArray(Bt)||(Bt=[Bt]);const mn=yield mi(X);for(const Mn of Bt){const or=mn.find(gr=>gr.measurementId===Mn),Er=or&&H[or.appId];if(!Er){et=[];break}et.push(Er)}}0===et.length&&(et=Object.values(H)),yield Promise.all(et),k("event",me,Ge||{})}catch(et){gi.error(et)}})).apply(this,arguments)}function Ns(){const k=window.document.getElementsByTagName("script");for(const H of Object.values(k))if(H.src&&H.src.includes(Po))return H;return null}const Fi=new Ae.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),x=new class S{constructor(H={},X=1e3){this.throttleMetadata=H,this.intervalMillis=X}getThrottleMetadata(H){return this.throttleMetadata[H]}setThrottleMetadata(H,X){this.throttleMetadata[H]=X}deleteThrottleMetadata(H){delete this.throttleMetadata[H]}};function Q(k){return new Headers({Accept:"application/json","x-goog-api-key":k})}function ve(k){return Je.apply(this,arguments)}function Je(){return(Je=(0,oe.Z)(function*(k){var H;const{appId:X,apiKey:me}=k,Ge={method:"GET",headers:Q(me)},et=ki.replace("{app-id}",X),Bt=yield fetch(et,Ge);if(200!==Bt.status&&304!==Bt.status){let mn="";try{const Mn=yield Bt.json();(null===(H=Mn.error)||void 0===H?void 0:H.message)&&(mn=Mn.error.message)}catch(Mn){}throw Fi.create("config-fetch-failed",{httpStatus:Bt.status,responseMessage:mn})}return Bt.json()})).apply(this,arguments)}function pn(k){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,oe.Z)(function*(k,H=x,X){const{appId:me,apiKey:Ge,measurementId:et}=k.options;if(!me)throw Fi.create("no-app-id");if(!Ge){if(et)return{measurementId:et,appId:me};throw Fi.create("no-api-key")}const Bt=H.getThrottleMetadata(me)||{backoffCount:0,throttleEndTimeMillis:Date.now()},mn=new No;return setTimeout((0,oe.Z)(function*(){mn.abort()}),void 0!==X?X:6e4),zi({appId:me,apiKey:Ge,measurementId:et},Bt,mn,H)})).apply(this,arguments)}function zi(k,H,X){return ri.apply(this,arguments)}function ri(){return(ri=(0,oe.Z)(function*(k,{throttleEndTimeMillis:H,backoffCount:X},me,Ge=x){const{appId:et,measurementId:Bt}=k;try{yield yi(me,H)}catch(mn){if(Bt)return gi.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Bt} provided in the "measurementId" field in the local Firebase config. [${mn.message}]`),{appId:et,measurementId:Bt};throw mn}try{const mn=yield ve(k);return Ge.deleteThrottleMetadata(et),mn}catch(mn){if(!ps(mn)){if(Ge.deleteThrottleMetadata(et),Bt)return gi.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Bt} provided in the "measurementId" field in the local Firebase config. [${mn.message}]`),{appId:et,measurementId:Bt};throw mn}const Mn=503===Number(mn.customData.httpStatus)?(0,Ae.$s)(X,Ge.intervalMillis,30):(0,Ae.$s)(X,Ge.intervalMillis),or={throttleEndTimeMillis:Date.now()+Mn,backoffCount:X+1};return Ge.setThrottleMetadata(et,or),gi.debug(`Calling attemptFetch again in ${Mn} millis`),zi(k,or,me,Ge)}})).apply(this,arguments)}function yi(k,H){return new Promise((X,me)=>{const Ge=Math.max(H-Date.now(),0),et=setTimeout(X,Ge);k.addEventListener(()=>{clearTimeout(et),me(Fi.create("fetch-throttle",{throttleEndTimeMillis:H}))})})}function ps(k){if(!(k instanceof Ae.ZR&&k.customData))return!1;const H=Number(k.customData.httpStatus);return 429===H||500===H||503===H||504===H}class No{constructor(){this.listeners=[]}addEventListener(H){this.listeners.push(H)}abort(){this.listeners.forEach(H=>H())}}function Eo(){return fa.apply(this,arguments)}function fa(){return(fa=(0,oe.Z)(function*(){if(!(0,Ae.hl)())return gi.warn(Fi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,Ae.eu)()}catch(k){return gi.warn(Fi.create("indexeddb-unavailable",{errorInfo:k}).message),!1}return!0})).apply(this,arguments)}function Gr(){return(Gr=(0,oe.Z)(function*(k,H,X,me,Ge,et,Bt){var mn;const Mn=pn(k);Mn.then(Li=>{X[Li.measurementId]=Li.appId,k.options.measurementId&&Li.measurementId!==k.options.measurementId&&gi.warn(`The measurement ID in the local Firebase config (${k.options.measurementId}) does not match the measurement ID fetched from the server (${Li.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Li=>gi.error(Li)),H.push(Mn);const or=Eo().then(Li=>{if(Li)return me.getId()}),[Er,gr]=yield Promise.all([Mn,or]);Ns()||Aa(et,Er.measurementId),Ge("js",new Date);const ys=null!==(mn=null==Bt?void 0:Bt.config)&&void 0!==mn?mn:{};return ys.origin="firebase",ys.update=!0,null!=gr&&(ys[Da]=gr),Ge("config",Er.measurementId,ys),Er.measurementId})).apply(this,arguments)}class no{constructor(H){this.app=H}_delete(){return delete ro[this.app.options.appId],Promise.resolve()}}let ro={},T=[];const I={};let O,q,C="dataLayer",ue=!1;function nn(k,H,X){!function mt(){const k=[];if((0,Ae.ru)()&&k.push("This is a browser extension environment."),(0,Ae.zI)()||k.push("Cookies are not available."),k.length>0){const H=k.map((me,Ge)=>`(${Ge+1}) ${me}`).join(" "),X=Fi.create("invalid-analytics-context",{errorInfo:H});gi.warn(X.message)}}();const me=k.options.appId;if(!me)throw Fi.create("no-app-id");if(!k.options.apiKey){if(!k.options.measurementId)throw Fi.create("no-api-key");gi.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${k.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ro[me])throw Fi.create("already-exists",{id:me});if(!ue){!function rs(k){let H=[];Array.isArray(window[k])?H=window[k]:window[k]=H}(C);const{wrappedGtag:et,gtagCore:Bt}=function Oo(k,H,X,me,Ge){let et=function(...Bt){window[me].push(arguments)};return window[Ge]&&"function"==typeof window[Ge]&&(et=window[Ge]),window[Ge]=function za(k,H,X,me){function et(){return(et=(0,oe.Z)(function*(Bt,mn,Mn){try{"event"===Bt?yield Ii(k,H,X,mn,Mn):"config"===Bt?yield Ci(k,H,X,me,mn,Mn):k("set",mn)}catch(or){gi.error(or)}})).apply(this,arguments)}return function Ge(Bt,mn,Mn){return et.apply(this,arguments)}}(et,k,H,X),{gtagCore:et,wrappedGtag:window[Ge]}}(ro,T,I,C,"gtag");q=et,O=Bt,ue=!0}return ro[me]=function Nt(k,H,X,me,Ge,et,Bt){return Gr.apply(this,arguments)}(k,T,I,H,O,C,X),new no(k)}function Dn(){return(Dn=(0,oe.Z)(function*(k,H,X,me,Ge){if(Ge&&Ge.global)k("event",X,me);else{const et=yield H;k("event",X,Object.assign(Object.assign({},me),{send_to:et}))}})).apply(this,arguments)}function Di(){return qn.apply(this,arguments)}function qn(){return(qn=(0,oe.Z)(function*(){if((0,Ae.ru)()||!(0,Ae.zI)()||!(0,Ae.hl)())return!1;try{return yield(0,Ae.eu)()}catch(k){return!1}})).apply(this,arguments)}const hc="@firebase/analytics";!function qa(){(0,Pe._registerComponent)(new xe.wA(Ia,(H,{options:X})=>nn(H.getProvider("app").getImmediate(),H.getProvider("installations-internal").getImmediate(),X),"PUBLIC")),(0,Pe._registerComponent)(new xe.wA("analytics-internal",function k(H){try{const X=H.getProvider(Ia).getImmediate();return{logEvent:(me,Ge,et)=>function Hr(k,H,X,me){k=(0,Ae.m9)(k),function Ir(k,H,X,me,Ge){return Dn.apply(this,arguments)}(q,ro[k.app.options.appId],H,X,me).catch(Ge=>gi.error(Ge))}(X,me,Ge,et)}}catch(X){throw Fi.create("interop-component-reg-failed",{reason:X})}},"PRIVATE")),(0,Pe.registerVersion)(hc,"0.7.8"),(0,Pe.registerVersion)(hc,"0.7.8","esm2017")}();var fc=z(4408),Td=z(7565);const Ai=new class ii extends Td.v{}(class Ti extends fc.o{constructor(H,X){super(H,X),this.scheduler=H,this.work=X}schedule(H,X=0){return X>0?super.schedule(H,X):(this.delay=X,this.state=H,this.scheduler.flush(this),this)}execute(H,X){return X>0||this.closed?super.execute(H,X):this._execute(H,X)}requestAsyncId(H,X,me=0){return null!=me&&me>0||null==me&&this.delay>0?super.requestAsyncId(H,X,me):H.flush(this)}});var pc=z(4986),uu=z(8505),ms=z(9468),Ho=z(5363);const pa=new _.GfV("7.3.0"),Co="__angularfire_symbol__analyticsIsSupportedValue",Ws="__angularfire_symbol__analyticsIsSupported",Jo="__angularfire_symbol__remoteConfigIsSupportedValue",Yt="__angularfire_symbol__remoteConfigIsSupported",Wl="__angularfire_symbol__messagingIsSupportedValue",Vu="__angularfire_symbol__messagingIsSupported";function sl(k,H,X){if(H){if(1===H.length)return H[0];const et=H.filter(Bt=>Bt.app===X);if(1===et.length)return et[0]}return X.container.getProvider(k).getImmediate({optional:!0})}globalThis[Ws]||(globalThis[Ws]=Di().then(k=>globalThis[Co]=k).catch(()=>globalThis[Co]=!1)),globalThis[Vu]||(globalThis[Vu]=$a().then(k=>globalThis[Wl]=k).catch(()=>globalThis[Wl]=!1)),globalThis[Yt]||(globalThis[Yt]=mr().then(k=>globalThis[Jo]=k).catch(()=>globalThis[Jo]=!1));const ol=(k,H)=>{const X=H?[H]:(0,B.C6)(),me=[];return X.forEach(Ge=>{Ge.container.getProvider(k).instances.forEach(Bt=>{me.includes(Bt)||me.push(Bt)})}),me};function Xo(){}class ea{constructor(H,X=Ai){this.zone=H,this.delegate=X}now(){return this.delegate.now()}schedule(H,X,me){const Ge=this.zone;return this.delegate.schedule(function(Bt){Ge.runGuarded(()=>{H.apply(this,[Bt])})},X,me)}}class Uu{constructor(H){this.zone=H,this.task=null}call(H,X){const me=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Xo,{},Xo,Xo)),X.pipe((0,uu.b)({next:me,complete:me,error:me})).subscribe(H).add(me)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let al=(()=>{class k{constructor(X){this.ngZone=X,this.outsideAngular=X.runOutsideAngular(()=>new ea(Zone.current)),this.insideAngular=X.run(()=>new ea(Zone.current,pc.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return k.\u0275fac=function(X){return new(X||k)(_.LFG(_.R0b))},k.\u0275prov=_.Yz7({token:k,factory:k.\u0275fac,providedIn:"root"}),k})();function ta(){const k=globalThis.\u0275AngularFireScheduler;if(!k)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return k}function bl(k){return ta(),function ga(k){return function(X){return(X=X.lift(new Uu(k.ngZone))).pipe((0,ms.R)(k.outsideAngular),(0,Ho.Q)(k.insideAngular))}}(ta())(k)}},2090:(en,Xe,z)=>{"use strict";z.d(Xe,{$s:()=>$r,BH:()=>pt,DV:()=>On,Dv:()=>_i,G6:()=>ne,GJ:()=>Cn,L:()=>We,LL:()=>En,Lj:()=>Rn,Mn:()=>at,Pz:()=>St,Sg:()=>Et,UG:()=>yt,UI:()=>Sn,US:()=>je,Wj:()=>be,X3:()=>Jt,Yr:()=>Dt,ZB:()=>Fe,ZR:()=>Qe,b$:()=>dt,cI:()=>Ft,d:()=>nt,dS:()=>Be,eu:()=>W,g5:()=>Pe,gK:()=>ct,gQ:()=>er,h$:()=>Ue,hl:()=>Oe,hu:()=>oe,jU:()=>ke,lb:()=>vt,m9:()=>Lt,ne:()=>zt,p$:()=>de,pd:()=>Nr,r3:()=>fn,ru:()=>Ht,tV:()=>_e,uI:()=>tt,ug:()=>gt,vZ:()=>Mr,w1:()=>Ye,w9:()=>rn,xO:()=>fr,xb:()=>ir,z$:()=>Rt,zI:()=>ze,zd:()=>vn});var _=z(5861);const oe=function(Ee,he){if(!Ee)throw Pe(he)},Pe=function(Ee){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+Ee)},Ae=function(Ee){const he=[];let Me=0;for(let st=0;st<Ee.length;st++){let $e=Ee.charCodeAt(st);$e<128?he[Me++]=$e:$e<2048?(he[Me++]=$e>>6|192,he[Me++]=63&$e|128):55296==(64512&$e)&&st+1<Ee.length&&56320==(64512&Ee.charCodeAt(st+1))?($e=65536+((1023&$e)<<10)+(1023&Ee.charCodeAt(++st)),he[Me++]=$e>>18|240,he[Me++]=$e>>12&63|128,he[Me++]=$e>>6&63|128,he[Me++]=63&$e|128):(he[Me++]=$e>>12|224,he[Me++]=$e>>6&63|128,he[Me++]=63&$e|128)}return he},je={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Ee,he){if(!Array.isArray(Ee))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Me=he?this.byteToCharMapWebSafe_:this.byteToCharMap_,st=[];for(let $e=0;$e<Ee.length;$e+=3){const jt=Ee[$e],on=$e+1<Ee.length,xn=on?Ee[$e+1]:0,yn=$e+2<Ee.length,Zn=yn?Ee[$e+2]:0;let cr=(15&xn)<<2|Zn>>6,Zr=63&Zn;yn||(Zr=64,on||(cr=64)),st.push(Me[jt>>2],Me[(3&jt)<<4|xn>>4],Me[cr],Me[Zr])}return st.join("")},encodeString(Ee,he){return this.HAS_NATIVE_SUPPORT&&!he?btoa(Ee):this.encodeByteArray(Ae(Ee),he)},decodeString(Ee,he){return this.HAS_NATIVE_SUPPORT&&!he?atob(Ee):function(Ee){const he=[];let Me=0,st=0;for(;Me<Ee.length;){const $e=Ee[Me++];if($e<128)he[st++]=String.fromCharCode($e);else if($e>191&&$e<224){const jt=Ee[Me++];he[st++]=String.fromCharCode((31&$e)<<6|63&jt)}else if($e>239&&$e<365){const yn=((7&$e)<<18|(63&Ee[Me++])<<12|(63&Ee[Me++])<<6|63&Ee[Me++])-65536;he[st++]=String.fromCharCode(55296+(yn>>10)),he[st++]=String.fromCharCode(56320+(1023&yn))}else{const jt=Ee[Me++],on=Ee[Me++];he[st++]=String.fromCharCode((15&$e)<<12|(63&jt)<<6|63&on)}}return he.join("")}(this.decodeStringToByteArray(Ee,he))},decodeStringToByteArray(Ee,he){this.init_();const Me=he?this.charToByteMapWebSafe_:this.charToByteMap_,st=[];for(let $e=0;$e<Ee.length;){const jt=Me[Ee.charAt($e++)],xn=$e<Ee.length?Me[Ee.charAt($e)]:0;++$e;const Zn=$e<Ee.length?Me[Ee.charAt($e)]:64;++$e;const _n=$e<Ee.length?Me[Ee.charAt($e)]:64;if(++$e,null==jt||null==xn||null==Zn||null==_n)throw Error();st.push(jt<<2|xn>>4),64!==Zn&&(st.push(xn<<4&240|Zn>>2),64!==_n&&st.push(Zn<<6&192|_n))}return st},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Ee=0;Ee<this.ENCODED_VALS.length;Ee++)this.byteToCharMap_[Ee]=this.ENCODED_VALS.charAt(Ee),this.charToByteMap_[this.byteToCharMap_[Ee]]=Ee,this.byteToCharMapWebSafe_[Ee]=this.ENCODED_VALS_WEBSAFE.charAt(Ee),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Ee]]=Ee,Ee>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Ee)]=Ee,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Ee)]=Ee)}}},Ue=function(Ee){const he=Ae(Ee);return je.encodeByteArray(he,!0)},We=function(Ee){return Ue(Ee).replace(/\./g,"")},_e=function(Ee){try{return je.decodeString(Ee,!0)}catch(he){console.error("base64Decode failed: ",he)}return null};function de(Ee){return Fe(void 0,Ee)}function Fe(Ee,he){if(!(he instanceof Object))return he;switch(he.constructor){case Date:return new Date(he.getTime());case Object:void 0===Ee&&(Ee={});break;case Array:Ee=[];break;default:return he}for(const Me in he)!he.hasOwnProperty(Me)||!Mt(Me)||(Ee[Me]=Fe(Ee[Me],he[Me]));return Ee}function Mt(Ee){return"__proto__"!==Ee}class pt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((he,Me)=>{this.resolve=he,this.reject=Me})}wrapCallback(he){return(Me,st)=>{Me?this.reject(Me):this.resolve(st),"function"==typeof he&&(this.promise.catch(()=>{}),1===he.length?he(Me):he(Me,st))}}}function Et(Ee,he){if(Ee.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const st=he||"demo-project",$e=Ee.iat||0,jt=Ee.sub||Ee.user_id;if(!jt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const on=Object.assign({iss:`https://securetoken.google.com/${st}`,aud:st,iat:$e,exp:$e+3600,auth_time:$e,sub:jt,user_id:jt,firebase:{sign_in_provider:"custom",identities:{}}},Ee);return[We(JSON.stringify({alg:"none",type:"JWT"})),We(JSON.stringify(on)),""].join(".")}function Rt(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function tt(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Rt())}function yt(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(Ee){return!1}}function ke(){return"object"==typeof self&&self.self===self}function Ht(){const Ee="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Ee&&void 0!==Ee.id}function dt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function nt(){return Rt().indexOf("Electron/")>=0}function Ye(){const Ee=Rt();return Ee.indexOf("MSIE ")>=0||Ee.indexOf("Trident/")>=0}function at(){return Rt().indexOf("MSAppHost/")>=0}function Dt(){return!1}function ne(){return!yt()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Oe(){return"object"==typeof indexedDB}function W(){return new Promise((Ee,he)=>{try{let Me=!0;const st="validate-browser-context-for-indexeddb-analytics-module",$e=self.indexedDB.open(st);$e.onsuccess=()=>{$e.result.close(),Me||self.indexedDB.deleteDatabase(st),Ee(!0)},$e.onupgradeneeded=()=>{Me=!1},$e.onerror=()=>{var jt;he((null===(jt=$e.error)||void 0===jt?void 0:jt.message)||"")}}catch(Me){he(Me)}})}function ze(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Qe extends Error{constructor(he,Me,st){super(Me),this.code=he,this.customData=st,this.name="FirebaseError",Object.setPrototypeOf(this,Qe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,En.prototype.create)}}class En{constructor(he,Me,st){this.service=he,this.serviceName=Me,this.errors=st}create(he,...Me){const st=Me[0]||{},$e=`${this.service}/${he}`,jt=this.errors[he],on=jt?function dn(Ee,he){return Ee.replace(Qt,(Me,st)=>{const $e=he[st];return null!=$e?String($e):`<${st}?>`})}(jt,st):"Error";return new Qe($e,`${this.serviceName}: ${on} (${$e}).`,st)}}const Qt=/\{\$([^}]+)}/g;function Ft(Ee){return JSON.parse(Ee)}function St(Ee){return JSON.stringify(Ee)}const hn=function(Ee){let he={},Me={},st={},$e="";try{const jt=Ee.split(".");he=Ft(_e(jt[0])||""),Me=Ft(_e(jt[1])||""),$e=jt[2],st=Me.d||{},delete Me.d}catch(jt){}return{header:he,claims:Me,data:st,signature:$e}},rn=function(Ee){const Me=hn(Ee).claims;return!!Me&&"object"==typeof Me&&Me.hasOwnProperty("iat")},Cn=function(Ee){const he=hn(Ee).claims;return"object"==typeof he&&!0===he.admin};function fn(Ee,he){return Object.prototype.hasOwnProperty.call(Ee,he)}function On(Ee,he){if(Object.prototype.hasOwnProperty.call(Ee,he))return Ee[he]}function ir(Ee){for(const he in Ee)if(Object.prototype.hasOwnProperty.call(Ee,he))return!1;return!0}function Sn(Ee,he,Me){const st={};for(const $e in Ee)Object.prototype.hasOwnProperty.call(Ee,$e)&&(st[$e]=he.call(Me,Ee[$e],$e,Ee));return st}function Mr(Ee,he){if(Ee===he)return!0;const Me=Object.keys(Ee),st=Object.keys(he);for(const $e of Me){if(!st.includes($e))return!1;const jt=Ee[$e],on=he[$e];if(ar(jt)&&ar(on)){if(!Mr(jt,on))return!1}else if(jt!==on)return!1}for(const $e of st)if(!Me.includes($e))return!1;return!0}function ar(Ee){return null!==Ee&&"object"==typeof Ee}function fr(Ee){const he=[];for(const[Me,st]of Object.entries(Ee))Array.isArray(st)?st.forEach($e=>{he.push(encodeURIComponent(Me)+"="+encodeURIComponent($e))}):he.push(encodeURIComponent(Me)+"="+encodeURIComponent(st));return he.length?"&"+he.join("&"):""}function vn(Ee){const he={};return Ee.replace(/^\?/,"").split("&").forEach(st=>{if(st){const[$e,jt]=st.split("=");he[decodeURIComponent($e)]=decodeURIComponent(jt)}}),he}function Nr(Ee){const he=Ee.indexOf("?");if(!he)return"";const Me=Ee.indexOf("#",he);return Ee.substring(he,Me>0?Me:void 0)}class er{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let he=1;he<this.blockSize;++he)this.pad_[he]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(he,Me){Me||(Me=0);const st=this.W_;if("string"==typeof he)for(let _n=0;_n<16;_n++)st[_n]=he.charCodeAt(Me)<<24|he.charCodeAt(Me+1)<<16|he.charCodeAt(Me+2)<<8|he.charCodeAt(Me+3),Me+=4;else for(let _n=0;_n<16;_n++)st[_n]=he[Me]<<24|he[Me+1]<<16|he[Me+2]<<8|he[Me+3],Me+=4;for(let _n=16;_n<80;_n++){const cr=st[_n-3]^st[_n-8]^st[_n-14]^st[_n-16];st[_n]=4294967295&(cr<<1|cr>>>31)}let Zn,Tr,$e=this.chain_[0],jt=this.chain_[1],on=this.chain_[2],xn=this.chain_[3],yn=this.chain_[4];for(let _n=0;_n<80;_n++){_n<40?_n<20?(Zn=xn^jt&(on^xn),Tr=1518500249):(Zn=jt^on^xn,Tr=1859775393):_n<60?(Zn=jt&on|xn&(jt|on),Tr=2400959708):(Zn=jt^on^xn,Tr=3395469782);const cr=($e<<5|$e>>>27)+Zn+yn+Tr+st[_n]&4294967295;yn=xn,xn=on,on=4294967295&(jt<<30|jt>>>2),jt=$e,$e=cr}this.chain_[0]=this.chain_[0]+$e&4294967295,this.chain_[1]=this.chain_[1]+jt&4294967295,this.chain_[2]=this.chain_[2]+on&4294967295,this.chain_[3]=this.chain_[3]+xn&4294967295,this.chain_[4]=this.chain_[4]+yn&4294967295}update(he,Me){if(null==he)return;void 0===Me&&(Me=he.length);const st=Me-this.blockSize;let $e=0;const jt=this.buf_;let on=this.inbuf_;for(;$e<Me;){if(0===on)for(;$e<=st;)this.compress_(he,$e),$e+=this.blockSize;if("string"==typeof he){for(;$e<Me;)if(jt[on]=he.charCodeAt($e),++on,++$e,on===this.blockSize){this.compress_(jt),on=0;break}}else for(;$e<Me;)if(jt[on]=he[$e],++on,++$e,on===this.blockSize){this.compress_(jt),on=0;break}}this.inbuf_=on,this.total_+=Me}digest(){const he=[];let Me=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let $e=this.blockSize-1;$e>=56;$e--)this.buf_[$e]=255&Me,Me/=256;this.compress_(this.buf_);let st=0;for(let $e=0;$e<5;$e++)for(let jt=24;jt>=0;jt-=8)he[st]=this.chain_[$e]>>jt&255,++st;return he}}function zt(Ee,he){const Me=new bn(Ee,he);return Me.subscribe.bind(Me)}class bn{constructor(he,Me){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Me,this.task.then(()=>{he(this)}).catch(st=>{this.error(st)})}next(he){this.forEachObserver(Me=>{Me.next(he)})}error(he){this.forEachObserver(Me=>{Me.error(he)}),this.close(he)}complete(){this.forEachObserver(he=>{he.complete()}),this.close()}subscribe(he,Me,st){let $e;if(void 0===he&&void 0===Me&&void 0===st)throw new Error("Missing Observer.");$e=function un(Ee,he){if("object"!=typeof Ee||null===Ee)return!1;for(const Me of he)if(Me in Ee&&"function"==typeof Ee[Me])return!0;return!1}(he,["next","error","complete"])?he:{next:he,error:Me,complete:st},void 0===$e.next&&($e.next=zr),void 0===$e.error&&($e.error=zr),void 0===$e.complete&&($e.complete=zr);const jt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?$e.error(this.finalError):$e.complete()}catch(on){}}),this.observers.push($e),jt}unsubscribeOne(he){void 0===this.observers||void 0===this.observers[he]||(delete this.observers[he],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(he){if(!this.finalized)for(let Me=0;Me<this.observers.length;Me++)this.sendOne(Me,he)}sendOne(he,Me){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[he])try{Me(this.observers[he])}catch(st){"undefined"!=typeof console&&console.error&&console.error(st)}})}close(he){this.finalized||(this.finalized=!0,void 0!==he&&(this.finalError=he),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function zr(){}const _i=function(Ee,he,Me,st){let $e;if(st<he?$e="at least "+he:st>Me&&($e=0===Me?"none":"no more than "+Me),$e)throw new Error(Ee+" failed: Was called with "+st+(1===st?" argument.":" arguments.")+" Expects "+$e+".")};function ct(Ee,he){return`${Ee} failed: ${he} argument `}function be(Ee,he,Me,st){if((!st||Me)&&"function"!=typeof Me)throw new Error(ct(Ee,he)+"must be a valid function.")}function vt(Ee,he,Me,st){if((!st||Me)&&("object"!=typeof Me||null===Me))throw new Error(ct(Ee,he)+"must be a valid context object.")}const Be=function(Ee){const he=[];let Me=0;for(let st=0;st<Ee.length;st++){let $e=Ee.charCodeAt(st);if($e>=55296&&$e<=56319){const jt=$e-55296;st++,oe(st<Ee.length,"Surrogate pair missing trail surrogate."),$e=65536+(jt<<10)+(Ee.charCodeAt(st)-56320)}$e<128?he[Me++]=$e:$e<2048?(he[Me++]=$e>>6|192,he[Me++]=63&$e|128):$e<65536?(he[Me++]=$e>>12|224,he[Me++]=$e>>6&63|128,he[Me++]=63&$e|128):(he[Me++]=$e>>18|240,he[Me++]=$e>>12&63|128,he[Me++]=$e>>6&63|128,he[Me++]=63&$e|128)}return he},gt=function(Ee){let he=0;for(let Me=0;Me<Ee.length;Me++){const st=Ee.charCodeAt(Me);st<128?he++:st<2048?he+=2:st>=55296&&st<=56319?(he+=4,Me++):he+=3}return he};function $r(Ee,he=1e3,Me=2){const st=he*Math.pow(Me,Ee),$e=Math.round(.5*st*(Math.random()-.5)*2);return Math.min(144e5,st+$e)}function Lt(Ee){return Ee&&Ee._delegate?Ee._delegate:Ee}function tr(Ee,he){return new Promise((Me,st)=>{Ee.onsuccess=$e=>{Me($e.target.result)},Ee.onerror=$e=>{var jt;st(`${he}: ${null===(jt=$e.target.error)||void 0===jt?void 0:jt.message}`)}})}class Pn{constructor(he){this._db=he,this.objectStoreNames=this._db.objectStoreNames}transaction(he,Me="readonly"){return new qt(this._db.transaction.call(this._db,he,Me))}createObjectStore(he,Me){return new Le(this._db.createObjectStore(he,Me))}close(){this._db.close()}}class qt{constructor(he){this._transaction=he,this.complete=new Promise((Me,st)=>{this._transaction.oncomplete=function(){Me()},this._transaction.onerror=()=>{st(this._transaction.error)},this._transaction.onabort=()=>{st(this._transaction.error)}})}objectStore(he){return new Le(this._transaction.objectStore(he))}}class Le{constructor(he){this._store=he}index(he){return new Gt(this._store.index(he))}createIndex(he,Me,st){return new Gt(this._store.createIndex(he,Me,st))}get(he){return tr(this._store.get(he),"Error reading from IndexedDB")}put(he,Me){return tr(this._store.put(he,Me),"Error writing to IndexedDB")}delete(he){return tr(this._store.delete(he),"Error deleting from IndexedDB")}clear(){return tr(this._store.clear(),"Error clearing IndexedDB object store")}}class Gt{constructor(he){this._index=he}get(he){return tr(this._index.get(he),"Error reading from IndexedDB")}}function Jt(Ee,he,Me){return new Promise((st,$e)=>{try{const jt=indexedDB.open(Ee,he);jt.onsuccess=on=>{st(new Pn(on.target.result))},jt.onerror=on=>{var xn;$e(`Error opening indexedDB: ${null===(xn=on.target.error)||void 0===xn?void 0:xn.message}`)},jt.onupgradeneeded=on=>{Me(new Pn(jt.result),on.oldVersion,on.newVersion,new qt(jt.transaction))}}catch(jt){$e(`Error opening indexedDB: ${jt.message}`)}})}function Rn(Ee){return Un.apply(this,arguments)}function Un(){return(Un=(0,_.Z)(function*(Ee){return new Promise((he,Me)=>{try{const st=indexedDB.deleteDatabase(Ee);st.onsuccess=()=>{he()},st.onerror=$e=>{var jt;Me(`Error deleting indexedDB database "${Ee}": ${null===(jt=$e.target.error)||void 0===jt?void 0:jt.message}`)}}catch(st){Me(`Error deleting indexedDB database "${Ee}": ${st.message}`)}})})).apply(this,arguments)}},5830:(en,Xe,z)=>{"use strict";z.d(Xe,{s:()=>oe});var _=z(5e3),B=z(520);let oe=(()=>{class Pe{constructor(xe){this.http=xe,this.url="http://omdbapi.com/?apikey=db528063&"}GetPelicula(xe){return this.http.get(`${this.url}t=${xe}`)}GetPerfil(){return this.http.get("https://api.github.com/users/KarenVillarreal91")}}return Pe.\u0275fac=function(xe){return new(xe||Pe)(_.LFG(B.eN))},Pe.\u0275prov=_.Yz7({token:Pe,factory:Pe.\u0275fac,providedIn:"root"}),Pe})()},5590:(en,Xe,z)=>{"use strict";z.d(Xe,{R:()=>Ih});var _=z(5e3),B=z(1205),oe=z(7407),Pe=z(4986),Ae=z(8306),xe=z(9646),je=z(6451),Ue=z(4004),We=z(3099),_e=z(3900),de=z(5026),Fe=z(1884),Mt=z(4482),pt=z(5403),Et=z(8421),Rt=z(4671),tt=z(5032),yt=z(7669),dt=z(5813),nt=z(2011),at=(z(820),z(3942)),Dt=z(4859),ne=z(5861),Oe=z(9681),W=z(2090),ze=z(1877);const He="@firebase/database";let Qe="";function En(d){Qe=d}class dn{constructor(u){this.domStorage_=u,this.prefix_="firebase:"}set(u,l){null==l?this.domStorage_.removeItem(this.prefixedName_(u)):this.domStorage_.setItem(this.prefixedName_(u),(0,W.Pz)(l))}get(u){const l=this.domStorage_.getItem(this.prefixedName_(u));return null==l?null:(0,W.cI)(l)}remove(u){this.domStorage_.removeItem(this.prefixedName_(u))}prefixedName_(u){return this.prefix_+u}toString(){return this.domStorage_.toString()}}class Qt{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(u,l){null==l?delete this.cache_[u]:this.cache_[u]=l}get(u){return(0,W.r3)(this.cache_,u)?this.cache_[u]:null}remove(u){delete this.cache_[u]}}const Ft=function(d){try{if("undefined"!=typeof window&&void 0!==window[d]){const u=window[d];return u.setItem("firebase:sentinel","cache"),u.removeItem("firebase:sentinel"),new dn(u)}}catch(u){}return new Qt},St=Ft("localStorage"),hn=Ft("sessionStorage"),Wt=new ze.Yd("@firebase/database"),Vn=function(){let d=1;return function(){return d++}}(),rn=function(d){const u=(0,W.dS)(d),l=new W.gQ;l.update(u);const p=l.digest();return W.US.encodeByteArray(p)},Cn=function(...d){let u="";for(let l=0;l<d.length;l++){const p=d[l];Array.isArray(p)||p&&"object"==typeof p&&"number"==typeof p.length?u+=Cn.apply(null,p):u+="object"==typeof p?(0,W.Pz)(p):p,u+=" "}return u};let fn=null,On=!0;const ir=function(d,u){(0,W.hu)(!u||!0===d||!1===d,"Can't turn on custom loggers persistently."),!0===d?(Wt.logLevel=ze.in.VERBOSE,fn=Wt.log.bind(Wt),u&&hn.set("logging_enabled",!0)):"function"==typeof d?fn=d:(fn=null,hn.remove("logging_enabled"))},Sn=function(...d){if(!0===On&&(On=!1,null===fn&&!0===hn.get("logging_enabled")&&ir(!0)),fn){const u=Cn.apply(null,d);fn(u)}},Mr=function(d){return function(...u){Sn(d,...u)}},ar=function(...d){const u="FIREBASE INTERNAL ERROR: "+Cn(...d);Wt.error(u)},fr=function(...d){const u=`FIREBASE FATAL ERROR: ${Cn(...d)}`;throw Wt.error(u),new Error(u)},vn=function(...d){const u="FIREBASE WARNING: "+Cn(...d);Wt.warn(u)},er=function(d){return"number"==typeof d&&(d!=d||d===Number.POSITIVE_INFINITY||d===Number.NEGATIVE_INFINITY)},bn="[MIN_NAME]",Fn="[MAX_NAME]",un=function(d,u){if(d===u)return 0;if(d===bn||u===Fn)return-1;if(u===bn||d===Fn)return 1;{const l=$r(d),p=$r(u);return null!==l?null!==p?l-p==0?d.length-u.length:l-p:-1:null!==p?1:d<u?-1:1}},zr=function(d,u){return d===u?0:d<u?-1:1},_i=function(d,u){if(u&&d in u)return u[d];throw new Error("Missing required key ("+d+") in object: "+(0,W.Pz)(u))},ct=function(d){if("object"!=typeof d||null===d)return(0,W.Pz)(d);const u=[];for(const p in d)u.push(p);u.sort();let l="{";for(let p=0;p<u.length;p++)0!==p&&(l+=","),l+=(0,W.Pz)(u[p]),l+=":",l+=ct(d[u[p]]);return l+="}",l},ge=function(d,u){const l=d.length;if(l<=u)return[d];const p=[];for(let E=0;E<l;E+=u)p.push(d.substring(E,E+u>l?l:E+u));return p};function be(d,u){for(const l in d)d.hasOwnProperty(l)&&u(l,d[l])}const vt=function(d){(0,W.hu)(!er(d),"Invalid JSON number");const p=1023;let E,M,j,se,le;0===d?(M=0,j=0,E=1/d==-1/0?1:0):(E=d<0,(d=Math.abs(d))>=Math.pow(2,1-p)?(se=Math.min(Math.floor(Math.log(d)/Math.LN2),p),M=se+p,j=Math.round(d*Math.pow(2,52-se)-Math.pow(2,52))):(M=0,j=Math.round(d/Math.pow(2,-1074))));const Ce=[];for(le=52;le;le-=1)Ce.push(j%2?1:0),j=Math.floor(j/2);for(le=11;le;le-=1)Ce.push(M%2?1:0),M=Math.floor(M/2);Ce.push(E?1:0),Ce.reverse();const ut=Ce.join("");let rt="";for(le=0;le<64;le+=8){let At=parseInt(ut.substr(le,8),2).toString(16);1===At.length&&(At="0"+At),rt+=At}return rt.toLowerCase()},Kn=new RegExp("^-?(0*)\\d{1,10}$"),In=-2147483648,sn=2147483647,$r=function(d){if(Kn.test(d)){const u=Number(d);if(u>=In&&u<=sn)return u}return null},br=function(d){try{d()}catch(u){setTimeout(()=>{throw vn("Exception was thrown by user callback.",u.stack||""),u},Math.floor(0))}},Lt=function(d,u){const l=setTimeout(d,u);return"object"==typeof l&&l.unref&&l.unref(),l};class tr{constructor(u,l){this.appName_=u,this.appCheckProvider=l,this.appCheck=null==l?void 0:l.getImmediate({optional:!0}),this.appCheck||null==l||l.get().then(p=>this.appCheck=p)}getToken(u){return this.appCheck?this.appCheck.getToken(u):new Promise((l,p)=>{setTimeout(()=>{this.appCheck?this.getToken(u).then(l,p):l(null)},0)})}addTokenChangeListener(u){var l;null===(l=this.appCheckProvider)||void 0===l||l.get().then(p=>p.addTokenListener(u))}notifyForInvalidToken(){vn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Pn{constructor(u,l,p){this.appName_=u,this.firebaseOptions_=l,this.authProvider_=p,this.auth_=null,this.auth_=p.getImmediate({optional:!0}),this.auth_||p.onInit(E=>this.auth_=E)}getToken(u){return this.auth_?this.auth_.getToken(u).catch(l=>l&&"auth/token-not-initialized"===l.code?(Sn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(l)):new Promise((l,p)=>{setTimeout(()=>{this.auth_?this.getToken(u).then(l,p):l(null)},0)})}addTokenChangeListener(u){this.auth_?this.auth_.addAuthTokenListener(u):this.authProvider_.get().then(l=>l.addAuthTokenListener(u))}removeTokenChangeListener(u){this.authProvider_.get().then(l=>l.removeAuthTokenListener(u))}notifyForInvalidToken(){let u='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';u+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',vn(u)}}let qt=(()=>{class d{constructor(l){this.accessToken=l}getToken(l){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(l){l(this.accessToken)}removeTokenChangeListener(l){}notifyForInvalidToken(){}}return d.OWNER="owner",d})();const Ee=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,$e="websocket",jt="long_polling";class on{constructor(u,l,p,E,M=!1,j="",se=!1){this.secure=l,this.namespace=p,this.webSocketOnly=E,this.nodeAdmin=M,this.persistenceKey=j,this.includeNamespaceInQueryParams=se,this._host=u.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=St.get("host:"+u)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(u){u!==this.internalHost&&(this.internalHost=u,this.isCacheableHost()&&St.set("host:"+this._host,this.internalHost))}toString(){let u=this.toURLString();return this.persistenceKey&&(u+="<"+this.persistenceKey+">"),u}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function yn(d,u,l){let p;if((0,W.hu)("string"==typeof u,"typeof type must == string"),(0,W.hu)("object"==typeof l,"typeof params must == object"),u===$e)p=(d.secure?"wss://":"ws://")+d.internalHost+"/.ws?";else{if(u!==jt)throw new Error("Unknown connection type: "+u);p=(d.secure?"https://":"http://")+d.internalHost+"/.lp?"}(function xn(d){return d.host!==d.internalHost||d.isCustomHost()||d.includeNamespaceInQueryParams})(d)&&(l.ns=d.namespace);const E=[];return be(l,(M,j)=>{E.push(M+"="+j)}),p+E.join("&")}class Zn{constructor(){this.counters_={}}incrementCounter(u,l=1){(0,W.r3)(this.counters_,u)||(this.counters_[u]=0),this.counters_[u]+=l}get(){return(0,W.p$)(this.counters_)}}const Tr={},_n={};function cr(d){const u=d.toString();return Tr[u]||(Tr[u]=new Zn),Tr[u]}class Ri{constructor(u){this.onMessage_=u,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(u,l){this.closeAfterResponse=u,this.onClose=l,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(u,l){for(this.pendingResponses[u]=l;this.pendingResponses[this.currentResponseNum];){const p=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let E=0;E<p.length;++E)p[E]&&br(()=>{this.onMessage_(p[E])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Xr{constructor(u,l,p,E,M,j,se){this.connId=u,this.repoInfo=l,this.applicationId=p,this.appCheckToken=E,this.authToken=M,this.transportSessionId=j,this.lastSessionId=se,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Mr(u),this.stats_=cr(l),this.urlFn=le=>(this.appCheckToken&&(le.ac=this.appCheckToken),yn(l,jt,le))}open(u,l){this.curSegmentNum=0,this.onDisconnect_=l,this.myPacketOrderer=new Ri(u),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(d){if((0,W.Yr)()||"complete"===document.readyState)d();else{let u=!1;const l=function(){document.body?u||(u=!0,d()):setTimeout(l,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",l,!1),window.addEventListener("load",l,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&l()}),window.attachEvent("onload",l))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Ki((...M)=>{const[j,se,le,Ce,ut]=M;if(this.incrementIncomingBytes_(M),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===j)this.id=se,this.password=le;else{if("close"!==j)throw new Error("Unrecognized command received: "+j);se?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(se,()=>{this.onClosed_()})):this.onClosed_()}},(...M)=>{const[j,se]=M;this.incrementIncomingBytes_(M),this.myPacketOrderer.handleResponse(j,se)},()=>{this.onClosed_()},this.urlFn);const p={start:"t"};p.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(p.cb=this.scriptTagHolder.uniqueCallbackIdentifier),p.v="5",this.transportSessionId&&(p.s=this.transportSessionId),this.lastSessionId&&(p.ls=this.lastSessionId),this.applicationId&&(p.p=this.applicationId),this.appCheckToken&&(p.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&Ee.test(location.hostname)&&(p.r="f");const E=this.urlFn(p);this.log_("Connecting via long-poll to "+E),this.scriptTagHolder.addTag(E,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Xr.forceAllow_=!0}static forceDisallow(){Xr.forceDisallow_=!0}static isAvailable(){return!((0,W.Yr)()||!Xr.forceAllow_&&(Xr.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(u){const l=(0,W.Pz)(u);this.bytesSent+=l.length,this.stats_.incrementCounter("bytes_sent",l.length);const p=(0,W.h$)(l),E=ge(p,1840);for(let M=0;M<E.length;M++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,E.length,E[M]),this.curSegmentNum++}addDisconnectPingFrame(u,l){if((0,W.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const p={dframe:"t"};p.id=u,p.pw=l,this.myDisconnFrame.src=this.urlFn(p),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(u){const l=(0,W.Pz)(u).length;this.bytesReceived+=l,this.stats_.incrementCounter("bytes_received",l)}}class Ki{constructor(u,l,p,E){if(this.onDisconnect=p,this.urlFn=E,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,W.Yr)())this.commandCB=u,this.onMessageCB=l;else{this.uniqueCallbackIdentifier=Vn(),window["pLPCommand"+this.uniqueCallbackIdentifier]=u,window["pRTLPCB"+this.uniqueCallbackIdentifier]=l,this.myIFrame=Ki.createIFrame_();let M="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(M='<script>document.domain="'+document.domain+'";<\/script>');const j="<html><body>"+M+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(j),this.myIFrame.doc.close()}catch(se){Sn("frame writing exception"),se.stack&&Sn(se.stack),Sn(se)}}}static createIFrame_(){const u=document.createElement("iframe");if(u.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(u);try{u.contentWindow.document||Sn("No IE domain setting required")}catch(l){const p=document.domain;u.src="javascript:void((function(){document.open();document.domain='"+p+"';document.close();})())"}return u.contentDocument?u.doc=u.contentDocument:u.contentWindow?u.doc=u.contentWindow.document:u.document&&(u.doc=u.document),u}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const u=this.onDisconnect;u&&(this.onDisconnect=null,u())}startLongPoll(u,l){for(this.myID=u,this.myPW=l,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const u={};u.id=this.myID,u.pw=this.myPW,u.ser=this.currentSerial;let l=this.urlFn(u),p="",E=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+p.length<=1870;){const j=this.pendingSegs.shift();p=p+"&seg"+E+"="+j.seg+"&ts"+E+"="+j.ts+"&d"+E+"="+j.d,E++}return l+=p,this.addLongPollTag_(l,this.currentSerial),!0}return!1}enqueueSegment(u,l,p){this.pendingSegs.push({seg:u,ts:l,d:p}),this.alive&&this.newRequest_()}addLongPollTag_(u,l){this.outstandingRequests.add(l);const p=()=>{this.outstandingRequests.delete(l),this.newRequest_()},E=setTimeout(p,Math.floor(25e3));this.addTag(u,()=>{clearTimeout(E),p()})}addTag(u,l){(0,W.Yr)()?this.doNodeLongPoll(u,l):setTimeout(()=>{try{if(!this.sendNewPolls)return;const p=this.myIFrame.doc.createElement("script");p.type="text/javascript",p.async=!0,p.src=u,p.onload=p.onreadystatechange=function(){const E=p.readyState;(!E||"loaded"===E||"complete"===E)&&(p.onload=p.onreadystatechange=null,p.parentNode&&p.parentNode.removeChild(p),l())},p.onerror=()=>{Sn("Long-poll script failed to load: "+u),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(p)}catch(p){}},Math.floor(1))}}let fe=null;"undefined"!=typeof MozWebSocket?fe=MozWebSocket:"undefined"!=typeof WebSocket&&(fe=WebSocket);let re=(()=>{class d{constructor(l,p,E,M,j,se,le){this.connId=l,this.applicationId=E,this.appCheckToken=M,this.authToken=j,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Mr(this.connId),this.stats_=cr(p),this.connURL=d.connectionURL_(p,se,le,M),this.nodeAdmin=p.nodeAdmin}static connectionURL_(l,p,E,M){const j={v:"5"};return!(0,W.Yr)()&&"undefined"!=typeof location&&location.hostname&&Ee.test(location.hostname)&&(j.r="f"),p&&(j.s=p),E&&(j.ls=E),M&&(j.ac=M),yn(l,$e,j)}open(l,p){this.onDisconnect=p,this.onMessage=l,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,St.set("previous_websocket_failure",!0);try{if((0,W.Yr)()){const M={headers:{"User-Agent":`Firebase/5/${Qe}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(M.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(M.headers["X-Firebase-AppCheck"]=this.appCheckToken);const j=process.env,se=0===this.connURL.indexOf("wss://")?j.HTTPS_PROXY||j.https_proxy:j.HTTP_PROXY||j.http_proxy;se&&(M.proxy={origin:se}),this.mySock=new fe(this.connURL,[],M)}else this.mySock=new fe(this.connURL,[],{headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(E){this.log_("Error instantiating WebSocket.");const M=E.message||E.data;return M&&this.log_(M),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=E=>{this.handleIncomingFrame(E)},this.mySock.onerror=E=>{this.log_("WebSocket error.  Closing connection.");const M=E.message||E.data;M&&this.log_(M),this.onClosed_()}}start(){}static forceDisallow(){d.forceDisallow_=!0}static isAvailable(){let l=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const E=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);E&&E.length>1&&parseFloat(E[1])<4.4&&(l=!0)}return!l&&null!==fe&&!d.forceDisallow_}static previouslyFailed(){return St.isInMemoryStorage||!0===St.get("previous_websocket_failure")}markConnectionHealthy(){St.remove("previous_websocket_failure")}appendFrame_(l){if(this.frames.push(l),this.frames.length===this.totalFrames){const p=this.frames.join("");this.frames=null;const E=(0,W.cI)(p);this.onMessage(E)}}handleNewFrameCount_(l){this.totalFrames=l,this.frames=[]}extractFrameCount_(l){if((0,W.hu)(null===this.frames,"We already have a frame buffer"),l.length<=6){const p=Number(l);if(!isNaN(p))return this.handleNewFrameCount_(p),null}return this.handleNewFrameCount_(1),l}handleIncomingFrame(l){if(null===this.mySock)return;const p=l.data;if(this.bytesReceived+=p.length,this.stats_.incrementCounter("bytes_received",p.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(p);else{const E=this.extractFrameCount_(p);null!==E&&this.appendFrame_(E)}}send(l){this.resetKeepAlive();const p=(0,W.Pz)(l);this.bytesSent+=p.length,this.stats_.incrementCounter("bytes_sent",p.length);const E=ge(p,16384);E.length>1&&this.sendString_(String(E.length));for(let M=0;M<E.length;M++)this.sendString_(E[M])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(l){try{this.mySock.send(l)}catch(p){this.log_("Exception thrown from WebSocket.send():",p.message||p.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return d.responsesRequiredToBeHealthy=2,d.healthyTimeout=3e4,d})();class Ie{constructor(u){this.initTransports_(u)}static get ALL_TRANSPORTS(){return[Xr,re]}initTransports_(u){const l=re&&re.isAvailable();let p=l&&!re.previouslyFailed();if(u.webSocketOnly&&(l||vn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),p=!0),p)this.transports_=[re];else{const E=this.transports_=[];for(const M of Ie.ALL_TRANSPORTS)M&&M.isAvailable()&&E.push(M)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}class Ls{constructor(u,l,p,E,M,j,se,le,Ce,ut){this.id=u,this.repoInfo_=l,this.applicationId_=p,this.appCheckToken_=E,this.authToken_=M,this.onMessage_=j,this.onReady_=se,this.onDisconnect_=le,this.onKill_=Ce,this.lastSessionId=ut,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Mr("c:"+this.id+":"),this.transportManager_=new Ie(l),this.log_("Connection created"),this.start_()}start_(){const u=this.transportManager_.initialTransport();this.conn_=new u(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=u.responsesRequiredToBeHealthy||0;const l=this.connReceiver_(this.conn_),p=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(l,p)},Math.floor(0));const E=u.healthyTimeout||0;E>0&&(this.healthyTimeout_=Lt(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(E)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(u){return l=>{u===this.conn_?this.onConnectionLost_(l):u===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(u){return l=>{2!==this.state_&&(u===this.rx_?this.onPrimaryMessageReceived_(l):u===this.secondaryConn_?this.onSecondaryMessageReceived_(l):this.log_("message on old connection"))}}sendRequest(u){this.sendData_({t:"d",d:u})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(u){if("t"in u){const l=u.t;"a"===l?this.upgradeIfSecondaryHealthy_():"r"===l?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===l&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(u){const l=_i("t",u),p=_i("d",u);if("c"===l)this.onSecondaryControl_(p);else{if("d"!==l)throw new Error("Unknown protocol layer: "+l);this.pendingDataMessages.push(p)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(u){const l=_i("t",u),p=_i("d",u);"c"===l?this.onControl_(p):"d"===l&&this.onDataMessage_(p)}onDataMessage_(u){this.onPrimaryResponse_(),this.onMessage_(u)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(u){const l=_i("t",u);if("d"in u){const p=u.d;if("h"===l)this.onHandshake_(p);else if("n"===l){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let E=0;E<this.pendingDataMessages.length;++E)this.onDataMessage_(this.pendingDataMessages[E]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===l?this.onConnectionShutdown_(p):"r"===l?this.onReset_(p):"e"===l?ar("Server Error: "+p):"o"===l?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):ar("Unknown control packet command: "+l)}}onHandshake_(u){const l=u.ts,p=u.v,E=u.h;this.sessionId=u.s,this.repoInfo_.host=E,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,l),"5"!==p&&vn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const u=this.transportManager_.upgradeTransport();u&&this.startUpgrade_(u)}startUpgrade_(u){this.secondaryConn_=new u(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=u.responsesRequiredToBeHealthy||0;const l=this.connReceiver_(this.secondaryConn_),p=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(l,p),Lt(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(u){this.log_("Reset packet received.  New host: "+u),this.repoInfo_.host=u,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(u,l){this.log_("Realtime connection established."),this.conn_=u,this.state_=1,this.onReady_&&(this.onReady_(l,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Lt(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const u=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===u||this.rx_===u)&&this.close()}onConnectionLost_(u){this.conn_=null,u||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(St.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(u){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(u),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(u){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(u)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class _o{put(u,l,p,E){}merge(u,l,p,E){}refreshAuthToken(u){}refreshAppCheckToken(u){}onDisconnectPut(u,l,p){}onDisconnectMerge(u,l,p){}onDisconnectCancel(u,l){}reportStats(u){}}class Ne{constructor(u){this.allowedEvents_=u,this.listeners_={},(0,W.hu)(Array.isArray(u)&&u.length>0,"Requires a non-empty array")}trigger(u,...l){if(Array.isArray(this.listeners_[u])){const p=[...this.listeners_[u]];for(let E=0;E<p.length;E++)p[E].callback.apply(p[E].context,l)}}on(u,l,p){this.validateEventType_(u),this.listeners_[u]=this.listeners_[u]||[],this.listeners_[u].push({callback:l,context:p});const E=this.getInitialEvent(u);E&&l.apply(p,E)}off(u,l,p){this.validateEventType_(u);const E=this.listeners_[u]||[];for(let M=0;M<E.length;M++)if(E[M].callback===l&&(!p||p===E[M].context))return void E.splice(M,1)}validateEventType_(u){(0,W.hu)(this.allowedEvents_.find(l=>l===u),"Unknown event: "+u)}}class De extends Ne{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,W.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new De}getInitialEvent(u){return(0,W.hu)("online"===u,"Unknown event type: "+u),[this.online_]}currentlyOnline(){return this.online_}}class _t{constructor(u,l){if(void 0===l){this.pieces_=u.split("/");let p=0;for(let E=0;E<this.pieces_.length;E++)this.pieces_[E].length>0&&(this.pieces_[p]=this.pieces_[E],p++);this.pieces_.length=p,this.pieceNum_=0}else this.pieces_=u,this.pieceNum_=l}toString(){let u="";for(let l=this.pieceNum_;l<this.pieces_.length;l++)""!==this.pieces_[l]&&(u+="/"+this.pieces_[l]);return u||"/"}}function Ut(){return new _t("")}function an(d){return d.pieceNum_>=d.pieces_.length?null:d.pieces_[d.pieceNum_]}function _r(d){return d.pieces_.length-d.pieceNum_}function wn(d){let u=d.pieceNum_;return u<d.pieces_.length&&u++,new _t(d.pieces_,u)}function Si(d){return d.pieceNum_<d.pieces_.length?d.pieces_[d.pieces_.length-1]:null}function $i(d,u=0){return d.pieces_.slice(d.pieceNum_+u)}function Cs(d){if(d.pieceNum_>=d.pieces_.length)return null;const u=[];for(let l=d.pieceNum_;l<d.pieces_.length-1;l++)u.push(d.pieces_[l]);return new _t(u,0)}function mr(d,u){const l=[];for(let p=d.pieceNum_;p<d.pieces_.length;p++)l.push(d.pieces_[p]);if(u instanceof _t)for(let p=u.pieceNum_;p<u.pieces_.length;p++)l.push(u.pieces_[p]);else{const p=u.split("/");for(let E=0;E<p.length;E++)p[E].length>0&&l.push(p[E])}return new _t(l,0)}function Wn(d){return d.pieceNum_>=d.pieces_.length}function ai(d,u){const l=an(d),p=an(u);if(null===l)return u;if(l===p)return ai(wn(d),wn(u));throw new Error("INTERNAL ERROR: innerPath ("+u+") is not within outerPath ("+d+")")}function Ms(d,u){const l=$i(d,0),p=$i(u,0);for(let E=0;E<l.length&&E<p.length;E++){const M=un(l[E],p[E]);if(0!==M)return M}return l.length===p.length?0:l.length<p.length?-1:1}function li(d,u){if(_r(d)!==_r(u))return!1;for(let l=d.pieceNum_,p=u.pieceNum_;l<=d.pieces_.length;l++,p++)if(d.pieces_[l]!==u.pieces_[p])return!1;return!0}function ti(d,u){let l=d.pieceNum_,p=u.pieceNum_;if(_r(d)>_r(u))return!1;for(;l<d.pieces_.length;){if(d.pieces_[l]!==u.pieces_[p])return!1;++l,++p}return!0}class Ps{constructor(u,l){this.errorPrefix_=l,this.parts_=$i(u,0),this.byteLength_=Math.max(1,this.parts_.length);for(let p=0;p<this.parts_.length;p++)this.byteLength_+=(0,W.ug)(this.parts_[p]);us(this)}}function us(d){if(d.byteLength_>768)throw new Error(d.errorPrefix_+"has a key path longer than 768 bytes ("+d.byteLength_+").");if(d.parts_.length>32)throw new Error(d.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+ts(d))}function ts(d){return 0===d.parts_.length?"":"in property '"+d.parts_.join(".")+"'"}class qr extends Ne{constructor(){let u,l;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(l="visibilitychange",u="hidden"):void 0!==document.mozHidden?(l="mozvisibilitychange",u="mozHidden"):void 0!==document.msHidden?(l="msvisibilitychange",u="msHidden"):void 0!==document.webkitHidden&&(l="webkitvisibilitychange",u="webkitHidden")),this.visible_=!0,l&&document.addEventListener(l,()=>{const p=!document[u];p!==this.visible_&&(this.visible_=p,this.trigger("visible",p))},!1)}static getInstance(){return new qr}getInitialEvent(u){return(0,W.hu)("visible"===u,"Unknown event type: "+u),[this.visible_]}}const xi=1e3;let Os,Gi=(()=>{class d extends _o{constructor(l,p,E,M,j,se,le,Ce){if(super(),this.repoInfo_=l,this.applicationId_=p,this.onDataUpdate_=E,this.onConnectStatus_=M,this.onServerInfoUpdate_=j,this.authTokenProvider_=se,this.appCheckTokenProvider_=le,this.authOverride_=Ce,this.id=d.nextPersistentConnectionId_++,this.log_=Mr("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=xi,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,Ce&&!(0,W.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");qr.getInstance().on("visible",this.onVisible_,this),-1===l.host.indexOf("fblocal")&&De.getInstance().on("online",this.onOnline_,this)}sendRequest(l,p,E){const M=++this.requestNumber_,j={r:M,a:l,b:p};this.log_((0,W.Pz)(j)),(0,W.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(j),E&&(this.requestCBHash_[M]=E)}get(l){this.initConnection_();const p=new W.BH,E={p:l._path.toString(),q:l._queryObject},M={action:"g",request:E,onComplete:se=>{const le=se.d;"ok"===se.s?(this.onDataUpdate_(E.p,le,!1,null),p.resolve(le)):p.reject(le)}};this.outstandingGets_.push(M),this.outstandingGetCount_++;const j=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const se=this.outstandingGets_[j];void 0===se||M!==se||(delete this.outstandingGets_[j],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+j+" timed out on connection"),p.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(j),p.promise}listen(l,p,E,M){this.initConnection_();const j=l._queryIdentifier,se=l._path.toString();this.log_("Listen called for "+se+" "+j),this.listens.has(se)||this.listens.set(se,new Map),(0,W.hu)(l._queryParams.isDefault()||!l._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,W.hu)(!this.listens.get(se).has(j),"listen() called twice for same path/queryId.");const le={onComplete:M,hashFn:p,query:l,tag:E};this.listens.get(se).set(j,le),this.connected_&&this.sendListen_(le)}sendGet_(l){const p=this.outstandingGets_[l];this.sendRequest("g",p.request,E=>{delete this.outstandingGets_[l],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),p.onComplete&&p.onComplete(E)})}sendListen_(l){const p=l.query,E=p._path.toString(),M=p._queryIdentifier;this.log_("Listen on "+E+" for "+M);const j={p:E};l.tag&&(j.q=p._queryObject,j.t=l.tag),j.h=l.hashFn(),this.sendRequest("q",j,le=>{const Ce=le.d,ut=le.s;d.warnOnListenWarnings_(Ce,p),(this.listens.get(E)&&this.listens.get(E).get(M))===l&&(this.log_("listen response",le),"ok"!==ut&&this.removeListen_(E,M),l.onComplete&&l.onComplete(ut,Ce))})}static warnOnListenWarnings_(l,p){if(l&&"object"==typeof l&&(0,W.r3)(l,"w")){const E=(0,W.DV)(l,"w");if(Array.isArray(E)&&~E.indexOf("no_index")){const M='".indexOn": "'+p._queryParams.getIndex().toString()+'"',j=p._path.toString();vn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${M} at ${j} to your security rules for better performance.`)}}}refreshAuthToken(l){this.authToken_=l,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(l)}reduceReconnectDelayIfAdminCredential_(l){(l&&40===l.length||(0,W.GJ)(l))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(l){this.appCheckToken_=l,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const l=this.authToken_,p=(0,W.w9)(l)?"auth":"gauth",E={cred:l};null===this.authOverride_?E.noauth=!0:"object"==typeof this.authOverride_&&(E.authvar=this.authOverride_),this.sendRequest(p,E,M=>{const j=M.s,se=M.d||"error";this.authToken_===l&&("ok"===j?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(j,se))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},l=>{const p=l.s,E=l.d||"error";"ok"===p?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(p,E)})}unlisten(l,p){const E=l._path.toString(),M=l._queryIdentifier;this.log_("Unlisten called for "+E+" "+M),(0,W.hu)(l._queryParams.isDefault()||!l._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(E,M)&&this.connected_&&this.sendUnlisten_(E,M,l._queryObject,p)}sendUnlisten_(l,p,E,M){this.log_("Unlisten on "+l+" for "+p);const j={p:l};M&&(j.q=E,j.t=M),this.sendRequest("n",j)}onDisconnectPut(l,p,E){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",l,p,E):this.onDisconnectRequestQueue_.push({pathString:l,action:"o",data:p,onComplete:E})}onDisconnectMerge(l,p,E){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",l,p,E):this.onDisconnectRequestQueue_.push({pathString:l,action:"om",data:p,onComplete:E})}onDisconnectCancel(l,p){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",l,null,p):this.onDisconnectRequestQueue_.push({pathString:l,action:"oc",data:null,onComplete:p})}sendOnDisconnect_(l,p,E,M){const j={p,d:E};this.log_("onDisconnect "+l,j),this.sendRequest(l,j,se=>{M&&setTimeout(()=>{M(se.s,se.d)},Math.floor(0))})}put(l,p,E,M){this.putInternal("p",l,p,E,M)}merge(l,p,E,M){this.putInternal("m",l,p,E,M)}putInternal(l,p,E,M,j){this.initConnection_();const se={p,d:E};void 0!==j&&(se.h=j),this.outstandingPuts_.push({action:l,request:se,onComplete:M}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+p)}sendPut_(l){const p=this.outstandingPuts_[l].action,E=this.outstandingPuts_[l].request,M=this.outstandingPuts_[l].onComplete;this.outstandingPuts_[l].queued=this.connected_,this.sendRequest(p,E,j=>{this.log_(p+" response",j),delete this.outstandingPuts_[l],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),M&&M(j.s,j.d)})}reportStats(l){if(this.connected_){const p={c:l};this.log_("reportStats",p),this.sendRequest("s",p,E=>{"ok"!==E.s&&this.log_("reportStats","Error sending stats: "+E.d)})}}onDataMessage_(l){if("r"in l){this.log_("from server: "+(0,W.Pz)(l));const p=l.r,E=this.requestCBHash_[p];E&&(delete this.requestCBHash_[p],E(l.b))}else{if("error"in l)throw"A server-side error has occurred: "+l.error;"a"in l&&this.onDataPush_(l.a,l.b)}}onDataPush_(l,p){this.log_("handleServerMessage",l,p),"d"===l?this.onDataUpdate_(p.p,p.d,!1,p.t):"m"===l?this.onDataUpdate_(p.p,p.d,!0,p.t):"c"===l?this.onListenRevoked_(p.p,p.q):"ac"===l?this.onAuthRevoked_(p.s,p.d):"apc"===l?this.onAppCheckRevoked_(p.s,p.d):"sd"===l?this.onSecurityDebugPacket_(p):ar("Unrecognized action received from server: "+(0,W.Pz)(l)+"\nAre you using the latest client?")}onReady_(l,p){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(l),this.lastSessionId=p,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(l){(0,W.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(l))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(l){l&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=xi,this.realtime_||this.scheduleConnect_(0)),this.visible_=l}onOnline_(l){l?(this.log_("Browser went online."),this.reconnectDelay_=xi,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=xi),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const l=(new Date).getTime()-this.lastConnectionAttemptTime_;let p=Math.max(0,this.reconnectDelay_-l);p=Math.random()*p,this.log_("Trying to reconnect in "+p+"ms"),this.scheduleConnect_(p),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var l=this;return(0,ne.Z)(function*(){if(l.shouldReconnect_()){l.log_("Making a connection attempt"),l.lastConnectionAttemptTime_=(new Date).getTime(),l.lastConnectionEstablishedTime_=null;const p=l.onDataMessage_.bind(l),E=l.onReady_.bind(l),M=l.onRealtimeDisconnect_.bind(l),j=l.id+":"+d.nextConnectionId_++,se=l.lastSessionId;let le=!1,Ce=null;const ut=function(){Ce?Ce.close():(le=!0,M())};l.realtime_={close:ut,sendRequest:function(Tn){(0,W.hu)(Ce,"sendRequest call when we're not connected not allowed."),Ce.sendRequest(Tn)}};const At=l.forceTokenRefresh_;l.forceTokenRefresh_=!1;try{const[Tn,Qn]=yield Promise.all([l.authTokenProvider_.getToken(At),l.appCheckTokenProvider_.getToken(At)]);le?Sn("getToken() completed but was canceled"):(Sn("getToken() completed. Creating connection."),l.authToken_=Tn&&Tn.accessToken,l.appCheckToken_=Qn&&Qn.token,Ce=new Ls(j,l.repoInfo_,l.applicationId_,l.appCheckToken_,l.authToken_,p,E,M,Pi=>{vn(Pi+" ("+l.repoInfo_.toString()+")"),l.interrupt("server_kill")},se))}catch(Tn){l.log_("Failed to get token: "+Tn),le||(l.repoInfo_.nodeAdmin&&vn(Tn),ut())}}})()}interrupt(l){Sn("Interrupting connection for reason: "+l),this.interruptReasons_[l]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(l){Sn("Resuming connection for reason: "+l),delete this.interruptReasons_[l],(0,W.xb)(this.interruptReasons_)&&(this.reconnectDelay_=xi,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(l){const p=l-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:p})}cancelSentTransactions_(){for(let l=0;l<this.outstandingPuts_.length;l++){const p=this.outstandingPuts_[l];p&&"h"in p.request&&p.queued&&(p.onComplete&&p.onComplete("disconnect"),delete this.outstandingPuts_[l],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(l,p){let E;E=p?p.map(j=>ct(j)).join("$"):"default";const M=this.removeListen_(l,E);M&&M.onComplete&&M.onComplete("permission_denied")}removeListen_(l,p){const E=new _t(l).toString();let M;if(this.listens.has(E)){const j=this.listens.get(E);M=j.get(p),j.delete(p),0===j.size&&this.listens.delete(E)}else M=void 0;return M}onAuthRevoked_(l,p){Sn("Auth token revoked: "+l+"/"+p),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===l||"permission_denied"===l)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(l,p){Sn("App check token revoked: "+l+"/"+p),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===l||"permission_denied"===l)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(l){this.securityDebugCallback_?this.securityDebugCallback_(l):"msg"in l&&console.log("FIREBASE: "+l.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const l of this.listens.values())for(const p of l.values())this.sendListen_(p);for(let l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){const l=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(l.action,l.pathString,l.data,l.onComplete)}for(let l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)}sendConnectStats_(){const l={};let p="js";(0,W.Yr)()&&(p=this.repoInfo_.nodeAdmin?"admin_node":"node"),l["sdk."+p+"."+Qe.replace(/\./g,"-")]=1,(0,W.uI)()?l["framework.cordova"]=1:(0,W.b$)()&&(l["framework.reactnative"]=1),this.reportStats(l)}shouldReconnect_(){const l=De.getInstance().currentlyOnline();return(0,W.xb)(this.interruptReasons_)&&l}}return d.nextPersistentConnectionId_=0,d.nextConnectionId_=0,d})();class Bn{constructor(u,l){this.name=u,this.node=l}static Wrap(u,l){return new Bn(u,l)}}class ci{getCompare(){return this.compare.bind(this)}indexedValueChanged(u,l){const p=new Bn(bn,u),E=new Bn(bn,l);return 0!==this.compare(p,E)}minPost(){return Bn.MIN}}class cs extends ci{static get __EMPTY_NODE(){return Os}static set __EMPTY_NODE(u){Os=u}compare(u,l){return un(u.name,l.name)}isDefinedOn(u){throw(0,W.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(u,l){return!1}minPost(){return Bn.MIN}maxPost(){return new Bn(Fn,Os)}makePost(u,l){return(0,W.hu)("string"==typeof u,"KeyIndex indexValue must always be a string."),new Bn(u,Os)}toString(){return".key"}}const Yn=new cs;class U{constructor(u,l,p,E,M=null){this.isReverse_=E,this.resultGenerator_=M,this.nodeStack_=[];let j=1;for(;!u.isEmpty();)if(u=u,j=l?p(u.key,l):1,E&&(j*=-1),j<0)u=this.isReverse_?u.left:u.right;else{if(0===j){this.nodeStack_.push(u);break}this.nodeStack_.push(u),u=this.isReverse_?u.right:u.left}}getNext(){if(0===this.nodeStack_.length)return null;let l,u=this.nodeStack_.pop();if(l=this.resultGenerator_?this.resultGenerator_(u.key,u.value):{key:u.key,value:u.value},this.isReverse_)for(u=u.left;!u.isEmpty();)this.nodeStack_.push(u),u=u.right;else for(u=u.right;!u.isEmpty();)this.nodeStack_.push(u),u=u.left;return l}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const u=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(u.key,u.value):{key:u.key,value:u.value}}}let It,J=(()=>{class d{constructor(l,p,E,M,j){this.key=l,this.value=p,this.color=null!=E?E:d.RED,this.left=null!=M?M:ie.EMPTY_NODE,this.right=null!=j?j:ie.EMPTY_NODE}copy(l,p,E,M,j){return new d(null!=l?l:this.key,null!=p?p:this.value,null!=E?E:this.color,null!=M?M:this.left,null!=j?j:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(l){return this.left.inorderTraversal(l)||!!l(this.key,this.value)||this.right.inorderTraversal(l)}reverseTraversal(l){return this.right.reverseTraversal(l)||l(this.key,this.value)||this.left.reverseTraversal(l)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(l,p,E){let M=this;const j=E(l,M.key);return M=j<0?M.copy(null,null,null,M.left.insert(l,p,E),null):0===j?M.copy(null,p,null,null,null):M.copy(null,null,null,null,M.right.insert(l,p,E)),M.fixUp_()}removeMin_(){if(this.left.isEmpty())return ie.EMPTY_NODE;let l=this;return!l.left.isRed_()&&!l.left.left.isRed_()&&(l=l.moveRedLeft_()),l=l.copy(null,null,null,l.left.removeMin_(),null),l.fixUp_()}remove(l,p){let E,M;if(E=this,p(l,E.key)<0)!E.left.isEmpty()&&!E.left.isRed_()&&!E.left.left.isRed_()&&(E=E.moveRedLeft_()),E=E.copy(null,null,null,E.left.remove(l,p),null);else{if(E.left.isRed_()&&(E=E.rotateRight_()),!E.right.isEmpty()&&!E.right.isRed_()&&!E.right.left.isRed_()&&(E=E.moveRedRight_()),0===p(l,E.key)){if(E.right.isEmpty())return ie.EMPTY_NODE;M=E.right.min_(),E=E.copy(M.key,M.value,null,null,E.right.removeMin_())}E=E.copy(null,null,null,null,E.right.remove(l,p))}return E.fixUp_()}isRed_(){return this.color}fixUp_(){let l=this;return l.right.isRed_()&&!l.left.isRed_()&&(l=l.rotateLeft_()),l.left.isRed_()&&l.left.left.isRed_()&&(l=l.rotateRight_()),l.left.isRed_()&&l.right.isRed_()&&(l=l.colorFlip_()),l}moveRedLeft_(){let l=this.colorFlip_();return l.right.left.isRed_()&&(l=l.copy(null,null,null,null,l.right.rotateRight_()),l=l.rotateLeft_(),l=l.colorFlip_()),l}moveRedRight_(){let l=this.colorFlip_();return l.left.left.isRed_()&&(l=l.rotateRight_(),l=l.colorFlip_()),l}rotateLeft_(){const l=this.copy(null,null,d.RED,null,this.right.left);return this.right.copy(null,null,this.color,l,null)}rotateRight_(){const l=this.copy(null,null,d.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,l)}colorFlip_(){const l=this.left.copy(null,null,!this.left.color,null,null),p=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,l,p)}checkMaxDepth_(){const l=this.check_();return Math.pow(2,l)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const l=this.left.check_();if(l!==this.right.check_())throw new Error("Black depths differ");return l+(this.isRed_()?0:1)}}return d.RED=!0,d.BLACK=!1,d})();class ie{constructor(u,l=ie.EMPTY_NODE){this.comparator_=u,this.root_=l}insert(u,l){return new ie(this.comparator_,this.root_.insert(u,l,this.comparator_).copy(null,null,J.BLACK,null,null))}remove(u){return new ie(this.comparator_,this.root_.remove(u,this.comparator_).copy(null,null,J.BLACK,null,null))}get(u){let l,p=this.root_;for(;!p.isEmpty();){if(l=this.comparator_(u,p.key),0===l)return p.value;l<0?p=p.left:l>0&&(p=p.right)}return null}getPredecessorKey(u){let l,p=this.root_,E=null;for(;!p.isEmpty();){if(l=this.comparator_(u,p.key),0===l){if(p.left.isEmpty())return E?E.key:null;for(p=p.left;!p.right.isEmpty();)p=p.right;return p.key}l<0?p=p.left:l>0&&(E=p,p=p.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(u){return this.root_.inorderTraversal(u)}reverseTraversal(u){return this.root_.reverseTraversal(u)}getIterator(u){return new U(this.root_,null,this.comparator_,!1,u)}getIteratorFrom(u,l){return new U(this.root_,u,this.comparator_,!1,l)}getReverseIteratorFrom(u,l){return new U(this.root_,u,this.comparator_,!0,l)}getReverseIterator(u){return new U(this.root_,null,this.comparator_,!0,u)}}function ye(d,u){return un(d.name,u.name)}function lt(d,u){return un(d,u)}ie.EMPTY_NODE=new class V{copy(u,l,p,E,M){return this}insert(u,l,p){return new J(u,l,null)}remove(u,l){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(u){return!1}reverseTraversal(u){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const vr=function(d){return"number"==typeof d?"number:"+vt(d):"string:"+d},dr=function(d){if(d.isLeafNode()){const u=d.val();(0,W.hu)("string"==typeof u||"number"==typeof u||"object"==typeof u&&(0,W.r3)(u,".sv"),"Priority must be a string or number.")}else(0,W.hu)(d===It||d.isEmpty(),"priority of unexpected type.");(0,W.hu)(d===It||d.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Jn,jr,Or,zn=(()=>{class d{constructor(l,p=d.__childrenNodeConstructor.EMPTY_NODE){this.value_=l,this.priorityNode_=p,this.lazyHash_=null,(0,W.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),dr(this.priorityNode_)}static set __childrenNodeConstructor(l){Jn=l}static get __childrenNodeConstructor(){return Jn}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(l){return new d(this.value_,l)}getImmediateChild(l){return".priority"===l?this.priorityNode_:d.__childrenNodeConstructor.EMPTY_NODE}getChild(l){return Wn(l)?this:".priority"===an(l)?this.priorityNode_:d.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(l,p){return null}updateImmediateChild(l,p){return".priority"===l?this.updatePriority(p):p.isEmpty()&&".priority"!==l?this:d.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(l,p).updatePriority(this.priorityNode_)}updateChild(l,p){const E=an(l);return null===E?p:p.isEmpty()&&".priority"!==E?this:((0,W.hu)(".priority"!==E||1===_r(l),".priority must be the last token in a path"),this.updateImmediateChild(E,d.__childrenNodeConstructor.EMPTY_NODE.updateChild(wn(l),p)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(l,p){return!1}val(l){return l&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let l="";this.priorityNode_.isEmpty()||(l+="priority:"+vr(this.priorityNode_.val())+":");const p=typeof this.value_;l+=p+":",l+="number"===p?vt(this.value_):this.value_,this.lazyHash_=rn(l)}return this.lazyHash_}getValue(){return this.value_}compareTo(l){return l===d.__childrenNodeConstructor.EMPTY_NODE?1:l instanceof d.__childrenNodeConstructor?-1:((0,W.hu)(l.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(l))}compareToLeafNode_(l){const p=typeof l.value_,E=typeof this.value_,M=d.VALUE_TYPE_ORDER.indexOf(p),j=d.VALUE_TYPE_ORDER.indexOf(E);return(0,W.hu)(M>=0,"Unknown leaf type: "+p),(0,W.hu)(j>=0,"Unknown leaf type: "+E),M===j?"object"===E?0:this.value_<l.value_?-1:this.value_===l.value_?0:1:j-M}withIndex(){return this}isIndexed(){return!0}equals(l){if(l===this)return!0;if(l.isLeafNode()){const p=l;return this.value_===p.value_&&this.priorityNode_.equals(p.priorityNode_)}return!1}}return d.VALUE_TYPE_ORDER=["object","boolean","number","string"],d})();const $t=new class wi extends ci{compare(u,l){const p=u.node.getPriority(),E=l.node.getPriority(),M=p.compareTo(E);return 0===M?un(u.name,l.name):M}isDefinedOn(u){return!u.getPriority().isEmpty()}indexedValueChanged(u,l){return!u.getPriority().equals(l.getPriority())}minPost(){return Bn.MIN}maxPost(){return new Bn(Fn,new zn("[PRIORITY-POST]",Or))}makePost(u,l){const p=jr(u);return new Bn(l,new zn("[PRIORITY-POST]",p))}toString(){return".priority"}},eo=Math.log(2);class wo{constructor(u){this.count=parseInt(Math.log(u+1)/eo,10),this.current_=this.count-1;const E=(M=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=u+1&E}nextBitIsOne(){const u=!(this.bits_&1<<this.current_);return this.current_--,u}}const Vs=function(d,u,l,p){d.sort(u);const E=function(le,Ce){const ut=Ce-le;let rt,At;if(0===ut)return null;if(1===ut)return rt=d[le],At=l?l(rt):rt,new J(At,rt.node,J.BLACK,null,null);{const Tn=parseInt(ut/2,10)+le,Qn=E(le,Tn),Pi=E(Tn+1,Ce);return rt=d[Tn],At=l?l(rt):rt,new J(At,rt.node,J.BLACK,Qn,Pi)}},se=function(le){let Ce=null,ut=null,rt=d.length;const At=function(Qn,Pi){const Do=rt-Qn,Oc=rt;rt-=Qn;const Ba=E(Do+1,Oc),Su=d[Do],_p=l?l(Su):Su;Tn(new J(_p,Su.node,Pi,null,Ba))},Tn=function(Qn){Ce?(Ce.left=Qn,Ce=Qn):(ut=Qn,Ce=Qn)};for(let Qn=0;Qn<le.count;++Qn){const Pi=le.nextBitIsOne(),Do=Math.pow(2,le.count-(Qn+1));Pi?At(Do,J.BLACK):(At(Do,J.BLACK),At(Do,J.RED))}return ut}(new wo(d.length));return new ie(p||u,se)};let Wi;const $={};class L{constructor(u,l){this.indexes_=u,this.indexSet_=l}static get Default(){return(0,W.hu)($&&$t,"ChildrenNode.ts has not been loaded"),Wi=Wi||new L({".priority":$},{".priority":$t}),Wi}get(u){const l=(0,W.DV)(this.indexes_,u);if(!l)throw new Error("No index defined for "+u);return l instanceof ie?l:null}hasIndex(u){return(0,W.r3)(this.indexSet_,u.toString())}addIndex(u,l){(0,W.hu)(u!==Yn,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const p=[];let E=!1;const M=l.getIterator(Bn.Wrap);let se,j=M.getNext();for(;j;)E=E||u.isDefinedOn(j.node),p.push(j),j=M.getNext();se=E?Vs(p,u.getCompare()):$;const le=u.toString(),Ce=Object.assign({},this.indexSet_);Ce[le]=u;const ut=Object.assign({},this.indexes_);return ut[le]=se,new L(ut,Ce)}addToIndexes(u,l){const p=(0,W.UI)(this.indexes_,(E,M)=>{const j=(0,W.DV)(this.indexSet_,M);if((0,W.hu)(j,"Missing index implementation for "+M),E===$){if(j.isDefinedOn(u.node)){const se=[],le=l.getIterator(Bn.Wrap);let Ce=le.getNext();for(;Ce;)Ce.name!==u.name&&se.push(Ce),Ce=le.getNext();return se.push(u),Vs(se,j.getCompare())}return $}{const se=l.get(u.name);let le=E;return se&&(le=le.remove(new Bn(u.name,se))),le.insert(u,u.node)}});return new L(p,this.indexSet_)}removeFromIndexes(u,l){const p=(0,W.UI)(this.indexes_,E=>{if(E===$)return E;{const M=l.get(u.name);return M?E.remove(new Bn(u.name,M)):E}});return new L(p,this.indexSet_)}}let F,G=(()=>{class d{constructor(l,p,E){this.children_=l,this.priorityNode_=p,this.indexMap_=E,this.lazyHash_=null,this.priorityNode_&&dr(this.priorityNode_),this.children_.isEmpty()&&(0,W.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return F||(F=new d(new ie(lt),null,L.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||F}updatePriority(l){return this.children_.isEmpty()?this:new d(this.children_,l,this.indexMap_)}getImmediateChild(l){if(".priority"===l)return this.getPriority();{const p=this.children_.get(l);return null===p?F:p}}getChild(l){const p=an(l);return null===p?this:this.getImmediateChild(p).getChild(wn(l))}hasChild(l){return null!==this.children_.get(l)}updateImmediateChild(l,p){if((0,W.hu)(p,"We should always be passing snapshot nodes"),".priority"===l)return this.updatePriority(p);{const E=new Bn(l,p);let M,j;p.isEmpty()?(M=this.children_.remove(l),j=this.indexMap_.removeFromIndexes(E,this.children_)):(M=this.children_.insert(l,p),j=this.indexMap_.addToIndexes(E,this.children_));const se=M.isEmpty()?F:this.priorityNode_;return new d(M,se,j)}}updateChild(l,p){const E=an(l);if(null===E)return p;{(0,W.hu)(".priority"!==an(l)||1===_r(l),".priority must be the last token in a path");const M=this.getImmediateChild(E).updateChild(wn(l),p);return this.updateImmediateChild(E,M)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(l){if(this.isEmpty())return null;const p={};let E=0,M=0,j=!0;if(this.forEachChild($t,(se,le)=>{p[se]=le.val(l),E++,j&&d.INTEGER_REGEXP_.test(se)?M=Math.max(M,Number(se)):j=!1}),!l&&j&&M<2*E){const se=[];for(const le in p)se[le]=p[le];return se}return l&&!this.getPriority().isEmpty()&&(p[".priority"]=this.getPriority().val()),p}hash(){if(null===this.lazyHash_){let l="";this.getPriority().isEmpty()||(l+="priority:"+vr(this.getPriority().val())+":"),this.forEachChild($t,(p,E)=>{const M=E.hash();""!==M&&(l+=":"+p+":"+M)}),this.lazyHash_=""===l?"":rn(l)}return this.lazyHash_}getPredecessorChildName(l,p,E){const M=this.resolveIndex_(E);if(M){const j=M.getPredecessorKey(new Bn(l,p));return j?j.name:null}return this.children_.getPredecessorKey(l)}getFirstChildName(l){const p=this.resolveIndex_(l);if(p){const E=p.minKey();return E&&E.name}return this.children_.minKey()}getFirstChild(l){const p=this.getFirstChildName(l);return p?new Bn(p,this.children_.get(p)):null}getLastChildName(l){const p=this.resolveIndex_(l);if(p){const E=p.maxKey();return E&&E.name}return this.children_.maxKey()}getLastChild(l){const p=this.getLastChildName(l);return p?new Bn(p,this.children_.get(p)):null}forEachChild(l,p){const E=this.resolveIndex_(l);return E?E.inorderTraversal(M=>p(M.name,M.node)):this.children_.inorderTraversal(p)}getIterator(l){return this.getIteratorFrom(l.minPost(),l)}getIteratorFrom(l,p){const E=this.resolveIndex_(p);if(E)return E.getIteratorFrom(l,M=>M);{const M=this.children_.getIteratorFrom(l.name,Bn.Wrap);let j=M.peek();for(;null!=j&&p.compare(j,l)<0;)M.getNext(),j=M.peek();return M}}getReverseIterator(l){return this.getReverseIteratorFrom(l.maxPost(),l)}getReverseIteratorFrom(l,p){const E=this.resolveIndex_(p);if(E)return E.getReverseIteratorFrom(l,M=>M);{const M=this.children_.getReverseIteratorFrom(l.name,Bn.Wrap);let j=M.peek();for(;null!=j&&p.compare(j,l)>0;)M.getNext(),j=M.peek();return M}}compareTo(l){return this.isEmpty()?l.isEmpty()?0:-1:l.isLeafNode()||l.isEmpty()?1:l===cn?-1:0}withIndex(l){if(l===Yn||this.indexMap_.hasIndex(l))return this;{const p=this.indexMap_.addIndex(l,this.children_);return new d(this.children_,this.priorityNode_,p)}}isIndexed(l){return l===Yn||this.indexMap_.hasIndex(l)}equals(l){if(l===this)return!0;if(l.isLeafNode())return!1;{const p=l;if(this.getPriority().equals(p.getPriority())){if(this.children_.count()===p.children_.count()){const E=this.getIterator($t),M=p.getIterator($t);let j=E.getNext(),se=M.getNext();for(;j&&se;){if(j.name!==se.name||!j.node.equals(se.node))return!1;j=E.getNext(),se=M.getNext()}return null===j&&null===se}return!1}return!1}}resolveIndex_(l){return l===Yn?null:this.indexMap_.get(l.toString())}}return d.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,d})();const cn=new class qe extends G{constructor(){super(new ie(lt),G.EMPTY_NODE,L.Default)}compareTo(u){return u===this?0:1}equals(u){return u===this}getPriority(){return this}getImmediateChild(u){return G.EMPTY_NODE}isEmpty(){return!1}};function hr(d,u=null){if(null===d)return G.EMPTY_NODE;if("object"==typeof d&&".priority"in d&&(u=d[".priority"]),(0,W.hu)(null===u||"string"==typeof u||"number"==typeof u||"object"==typeof u&&".sv"in u,"Invalid priority type found: "+typeof u),"object"==typeof d&&".value"in d&&null!==d[".value"]&&(d=d[".value"]),"object"!=typeof d||".sv"in d)return new zn(d,hr(u));if(d instanceof Array){let l=G.EMPTY_NODE;return be(d,(p,E)=>{if((0,W.r3)(d,p)&&"."!==p.substring(0,1)){const M=hr(E);(M.isLeafNode()||!M.isEmpty())&&(l=l.updateImmediateChild(p,M))}}),l.updatePriority(hr(u))}{const l=[];let p=!1;if(be(d,(j,se)=>{if("."!==j.substring(0,1)){const le=hr(se);le.isEmpty()||(p=p||!le.getPriority().isEmpty(),l.push(new Bn(j,le)))}}),0===l.length)return G.EMPTY_NODE;const M=Vs(l,ye,j=>j.name,lt);if(p){const j=Vs(l,$t.getCompare());return new G(M,hr(u),new L({".priority":j},{".priority":$t}))}return new G(M,hr(u),L.Default)}}Object.defineProperties(Bn,{MIN:{value:new Bn(bn,G.EMPTY_NODE)},MAX:{value:new Bn(Fn,cn)}}),cs.__EMPTY_NODE=G.EMPTY_NODE,zn.__childrenNodeConstructor=G,function Kt(d){It=d}(cn),function ds(d){Or=d}(cn),function Vr(d){jr=d}(hr);class Ei extends ci{constructor(u){super(),this.indexPath_=u,(0,W.hu)(!Wn(u)&&".priority"!==an(u),"Can't create PathIndex with empty path or .priority key")}extractChild(u){return u.getChild(this.indexPath_)}isDefinedOn(u){return!u.getChild(this.indexPath_).isEmpty()}compare(u,l){const p=this.extractChild(u.node),E=this.extractChild(l.node),M=p.compareTo(E);return 0===M?un(u.name,l.name):M}makePost(u,l){const p=hr(u),E=G.EMPTY_NODE.updateChild(this.indexPath_,p);return new Bn(l,E)}maxPost(){const u=G.EMPTY_NODE.updateChild(this.indexPath_,cn);return new Bn(Fn,u)}toString(){return $i(this.indexPath_,0).join("/")}}const Us=new class Mi extends ci{compare(u,l){const p=u.node.compareTo(l.node);return 0===p?un(u.name,l.name):p}isDefinedOn(u){return!0}indexedValueChanged(u,l){return!u.equals(l)}minPost(){return Bn.MIN}maxPost(){return Bn.MAX}makePost(u,l){const p=hr(u);return new Bn(l,p)}toString(){return".value"}},ns="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Bs=function(){let d=0;const u=[];return function(l){const p=l===d;let E;d=l;const M=new Array(8);for(E=7;E>=0;E--)M[E]=ns.charAt(l%64),l=Math.floor(l/64);(0,W.hu)(0===l,"Cannot push at time == 0");let j=M.join("");if(p){for(E=11;E>=0&&63===u[E];E--)u[E]=0;u[E]++}else for(E=0;E<12;E++)u[E]=Math.floor(64*Math.random());for(E=0;E<12;E++)j+=ns.charAt(u[E]);return(0,W.hu)(20===j.length,"nextPushId: Length should be 20."),j}}(),Bi=function(d){if(d===""+sn)return"-";const u=$r(d);if(null!=u)return""+(u+1);const l=new Array(d.length);for(let j=0;j<l.length;j++)l[j]=d.charAt(j);if(l.length<786)return l.push("-"),l.join("");let p=l.length-1;for(;p>=0&&"z"===l[p];)p--;if(-1===p)return Fn;const M=ns.charAt(ns.indexOf(l[p])+1);return l[p]=M,l.slice(0,p+1).join("")},hs=function(d){if(d===""+In)return bn;const u=$r(d);if(null!=u)return""+(u-1);const l=new Array(d.length);for(let p=0;p<l.length;p++)l[p]=d.charAt(p);return"-"===l[l.length-1]?1===l.length?""+sn:(delete l[l.length-1],l.join("")):(l[l.length-1]=ns.charAt(ns.indexOf(l[l.length-1])-1),l.join("")+"z".repeat(786-l.length))};function da(d){return{type:"value",snapshotNode:d}}function Yi(d,u){return{type:"child_added",snapshotNode:u,childName:d}}function ji(d,u){return{type:"child_removed",snapshotNode:u,childName:d}}function So(d,u,l){return{type:"child_changed",snapshotNode:u,childName:d,oldSnap:l}}class Vo{constructor(u){this.index_=u}updateChild(u,l,p,E,M,j){(0,W.hu)(u.isIndexed(this.index_),"A node must be indexed if only a child is updated");const se=u.getImmediateChild(l);return se.getChild(E).equals(p.getChild(E))&&se.isEmpty()===p.isEmpty()||(null!=j&&(p.isEmpty()?u.hasChild(l)?j.trackChildChange(ji(l,se)):(0,W.hu)(u.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):se.isEmpty()?j.trackChildChange(Yi(l,p)):j.trackChildChange(So(l,p,se))),u.isLeafNode()&&p.isEmpty())?u:u.updateImmediateChild(l,p).withIndex(this.index_)}updateFullNode(u,l,p){return null!=p&&(u.isLeafNode()||u.forEachChild($t,(E,M)=>{l.hasChild(E)||p.trackChildChange(ji(E,M))}),l.isLeafNode()||l.forEachChild($t,(E,M)=>{if(u.hasChild(E)){const j=u.getImmediateChild(E);j.equals(M)||p.trackChildChange(So(E,M,j))}else p.trackChildChange(Yi(E,M))})),l.withIndex(this.index_)}updatePriority(u,l){return u.isEmpty()?G.EMPTY_NODE:u.updatePriority(l)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Ko{constructor(u){this.indexedFilter_=new Vo(u.getIndex()),this.index_=u.getIndex(),this.startPost_=Ko.getStartPost_(u),this.endPost_=Ko.getEndPost_(u)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(u){return this.index_.compare(this.getStartPost(),u)<=0&&this.index_.compare(u,this.getEndPost())<=0}updateChild(u,l,p,E,M,j){return this.matches(new Bn(l,p))||(p=G.EMPTY_NODE),this.indexedFilter_.updateChild(u,l,p,E,M,j)}updateFullNode(u,l,p){l.isLeafNode()&&(l=G.EMPTY_NODE);let E=l.withIndex(this.index_);E=E.updatePriority(G.EMPTY_NODE);const M=this;return l.forEachChild($t,(j,se)=>{M.matches(new Bn(j,se))||(E=E.updateImmediateChild(j,G.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(u,E,p)}updatePriority(u,l){return u}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(u){if(u.hasStart()){const l=u.getIndexStartName();return u.getIndex().makePost(u.getIndexStartValue(),l)}return u.getIndex().minPost()}static getEndPost_(u){if(u.hasEnd()){const l=u.getIndexEndName();return u.getIndex().makePost(u.getIndexEndValue(),l)}return u.getIndex().maxPost()}}class Ca{constructor(u){this.rangedFilter_=new Ko(u),this.index_=u.getIndex(),this.limit_=u.getLimit(),this.reverse_=!u.isViewFromLeft()}updateChild(u,l,p,E,M,j){return this.rangedFilter_.matches(new Bn(l,p))||(p=G.EMPTY_NODE),u.getImmediateChild(l).equals(p)?u:u.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(u,l,p,E,M,j):this.fullLimitUpdateChild_(u,l,p,M,j)}updateFullNode(u,l,p){let E;if(l.isLeafNode()||l.isEmpty())E=G.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<l.numChildren()&&l.isIndexed(this.index_)){let M;E=G.EMPTY_NODE.withIndex(this.index_),M=this.reverse_?l.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):l.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let j=0;for(;M.hasNext()&&j<this.limit_;){const se=M.getNext();let le;if(le=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),se)<=0:this.index_.compare(se,this.rangedFilter_.getEndPost())<=0,!le)break;E=E.updateImmediateChild(se.name,se.node),j++}}else{let M,j,se,le;if(E=l.withIndex(this.index_),E=E.updatePriority(G.EMPTY_NODE),this.reverse_){le=E.getReverseIterator(this.index_),M=this.rangedFilter_.getEndPost(),j=this.rangedFilter_.getStartPost();const rt=this.index_.getCompare();se=(At,Tn)=>rt(Tn,At)}else le=E.getIterator(this.index_),M=this.rangedFilter_.getStartPost(),j=this.rangedFilter_.getEndPost(),se=this.index_.getCompare();let Ce=0,ut=!1;for(;le.hasNext();){const rt=le.getNext();!ut&&se(M,rt)<=0&&(ut=!0),ut&&Ce<this.limit_&&se(rt,j)<=0?Ce++:E=E.updateImmediateChild(rt.name,G.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(u,E,p)}updatePriority(u,l){return u}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(u,l,p,E,M){let j;if(this.reverse_){const rt=this.index_.getCompare();j=(At,Tn)=>rt(Tn,At)}else j=this.index_.getCompare();const se=u;(0,W.hu)(se.numChildren()===this.limit_,"");const le=new Bn(l,p),Ce=this.reverse_?se.getFirstChild(this.index_):se.getLastChild(this.index_),ut=this.rangedFilter_.matches(le);if(se.hasChild(l)){const rt=se.getImmediateChild(l);let At=E.getChildAfterChild(this.index_,Ce,this.reverse_);for(;null!=At&&(At.name===l||se.hasChild(At.name));)At=E.getChildAfterChild(this.index_,At,this.reverse_);const Tn=null==At?1:j(At,le);if(ut&&!p.isEmpty()&&Tn>=0)return null!=M&&M.trackChildChange(So(l,p,rt)),se.updateImmediateChild(l,p);{null!=M&&M.trackChildChange(ji(l,rt));const Pi=se.updateImmediateChild(l,G.EMPTY_NODE);return null!=At&&this.rangedFilter_.matches(At)?(null!=M&&M.trackChildChange(Yi(At.name,At.node)),Pi.updateImmediateChild(At.name,At.node)):Pi}}return p.isEmpty()?u:ut&&j(Ce,le)>=0?(null!=M&&(M.trackChildChange(ji(Ce.name,Ce.node)),M.trackChildChange(Yi(l,p))),se.updateImmediateChild(l,p).updateImmediateChild(Ce.name,G.EMPTY_NODE)):u}}class Uo{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=$t}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,W.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,W.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:bn}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,W.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,W.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Fn}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,W.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===$t}copy(){const u=new Uo;return u.limitSet_=this.limitSet_,u.limit_=this.limit_,u.startSet_=this.startSet_,u.indexStartValue_=this.indexStartValue_,u.startNameSet_=this.startNameSet_,u.indexStartName_=this.indexStartName_,u.endSet_=this.endSet_,u.indexEndValue_=this.indexEndValue_,u.endNameSet_=this.endNameSet_,u.indexEndName_=this.indexEndName_,u.index_=this.index_,u.viewFrom_=this.viewFrom_,u}}function xo(d,u,l){const p=d.copy();return p.startSet_=!0,void 0===u&&(u=null),p.indexStartValue_=u,null!=l?(p.startNameSet_=!0,p.indexStartName_=l):(p.startNameSet_=!1,p.indexStartName_=""),p}function Bo(d,u,l){const p=d.copy();return p.endSet_=!0,void 0===u&&(u=null),p.indexEndValue_=u,void 0!==l?(p.endNameSet_=!0,p.indexEndName_=l):(p.endNameSet_=!1,p.indexEndName_=""),p}function Yo(d,u){const l=d.copy();return l.index_=u,l}function $a(d){const u={};if(d.isDefault())return u;let l;return d.index_===$t?l="$priority":d.index_===Us?l="$value":d.index_===Yn?l="$key":((0,W.hu)(d.index_ instanceof Ei,"Unrecognized index type!"),l=d.index_.toString()),u.orderBy=(0,W.Pz)(l),d.startSet_&&(u.startAt=(0,W.Pz)(d.indexStartValue_),d.startNameSet_&&(u.startAt+=","+(0,W.Pz)(d.indexStartName_))),d.endSet_&&(u.endAt=(0,W.Pz)(d.indexEndValue_),d.endNameSet_&&(u.endAt+=","+(0,W.Pz)(d.indexEndName_))),d.limitSet_&&(d.isViewFromLeft()?u.limitToFirst=d.limit_:u.limitToLast=d.limit_),u}function Hs(d){const u={};if(d.startSet_&&(u.sp=d.indexStartValue_,d.startNameSet_&&(u.sn=d.indexStartName_)),d.endSet_&&(u.ep=d.indexEndValue_,d.endNameSet_&&(u.en=d.indexEndName_)),d.limitSet_){u.l=d.limit_;let l=d.viewFrom_;""===l&&(l=d.isViewFromLeft()?"l":"r"),u.vf=l}return d.index_!==$t&&(u.i=d.index_.toString()),u}class Mo extends _o{constructor(u,l,p,E){super(),this.repoInfo_=u,this.onDataUpdate_=l,this.authTokenProvider_=p,this.appCheckTokenProvider_=E,this.log_=Mr("p:rest:"),this.listens_={}}reportStats(u){throw new Error("Method not implemented.")}static getListenId_(u,l){return void 0!==l?"tag$"+l:((0,W.hu)(u._queryParams.isDefault(),"should have a tag if it's not a default query."),u._path.toString())}listen(u,l,p,E){const M=u._path.toString();this.log_("Listen called for "+M+" "+u._queryIdentifier);const j=Mo.getListenId_(u,p),se={};this.listens_[j]=se;const le=$a(u._queryParams);this.restRequest_(M+".json",le,(Ce,ut)=>{let rt=ut;if(404===Ce&&(rt=null,Ce=null),null===Ce&&this.onDataUpdate_(M,rt,!1,p),(0,W.DV)(this.listens_,j)===se){let At;At=Ce?401===Ce?"permission_denied":"rest_error:"+Ce:"ok",E(At,null)}})}unlisten(u,l){const p=Mo.getListenId_(u,l);delete this.listens_[p]}get(u){const l=$a(u._queryParams),p=u._path.toString(),E=new W.BH;return this.restRequest_(p+".json",l,(M,j)=>{let se=j;404===M&&(se=null,M=null),null===M?(this.onDataUpdate_(p,se,!1,null),E.resolve(se)):E.reject(new Error(se))}),E.promise}refreshAuthToken(u){}restRequest_(u,l={},p){return l.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([E,M])=>{E&&E.accessToken&&(l.auth=E.accessToken),M&&M.token&&(l.ac=M.token);const j=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+u+"?ns="+this.repoInfo_.namespace+(0,W.xO)(l);this.log_("Sending REST request for "+j);const se=new XMLHttpRequest;se.onreadystatechange=()=>{if(p&&4===se.readyState){this.log_("REST Response for "+j+" received. status:",se.status,"response:",se.responseText);let le=null;if(se.status>=200&&se.status<300){try{le=(0,W.cI)(se.responseText)}catch(Ce){vn("Failed to parse JSON response for "+j+": "+se.responseText)}p(null,le)}else 401!==se.status&&404!==se.status&&vn("Got unsuccessful REST response for "+j+" Status: "+se.status),p(se.status);p=null}},se.open("GET",j,!0),se.send()})}}class Ga{constructor(){this.rootNode_=G.EMPTY_NODE}getNode(u){return this.rootNode_.getChild(u)}updateSnapshot(u,l){this.rootNode_=this.rootNode_.updateChild(u,l)}}function bi(){return{value:null,children:new Map}}function Is(d,u,l){if(Wn(u))d.value=l,d.children.clear();else if(null!==d.value)d.value=d.value.updateChild(u,l);else{const p=an(u);d.children.has(p)||d.children.set(p,bi()),Is(d.children.get(p),u=wn(u),l)}}function di(d,u){if(Wn(u))return d.value=null,d.children.clear(),!0;if(null!==d.value){if(d.value.isLeafNode())return!1;{const l=d.value;return d.value=null,l.forEachChild($t,(p,E)=>{Is(d,new _t(p),E)}),di(d,u)}}if(d.children.size>0){const l=an(u);return u=wn(u),d.children.has(l)&&di(d.children.get(l),u)&&d.children.delete(l),0===d.children.size}return!0}function Qo(d,u,l){null!==d.value?l(u,d.value):function Wa(d,u){d.children.forEach((l,p)=>{u(p,l)})}(d,(p,E)=>{Qo(E,new _t(u.toString()+"/"+p),l)})}class Hl{constructor(u){this.collection_=u,this.last_=null}get(){const u=this.collection_.get(),l=Object.assign({},u);return this.last_&&be(this.last_,(p,E)=>{l[p]=l[p]-E}),this.last_=u,l}}class to{constructor(u,l){this.server_=l,this.statsToReport_={},this.statsListener_=new Hl(u);const p=1e4+2e4*Math.random();Lt(this.reportStats_.bind(this),Math.floor(p))}reportStats_(){const u=this.statsListener_.get(),l={};let p=!1;be(u,(E,M)=>{M>0&&(0,W.r3)(this.statsToReport_,E)&&(l[E]=M,p=!0)}),p&&this.server_.reportStats(l),Lt(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var ki=(()=>{return(d=ki||(ki={}))[d.OVERWRITE=0]="OVERWRITE",d[d.MERGE=1]="MERGE",d[d.ACK_USER_WRITE=2]="ACK_USER_WRITE",d[d.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",ki;var d})();function mi(d){return{fromUser:!1,fromServer:!0,queryId:d,tagged:!0}}class Aa{constructor(u,l,p){this.path=u,this.affectedTree=l,this.revert=p,this.type=ki.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(u){if(Wn(this.path)){if(null!=this.affectedTree.value)return(0,W.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const l=this.affectedTree.subtree(new _t(u));return new Aa(Ut(),l,this.revert)}}return(0,W.hu)(an(this.path)===u,"operationForChild called for unrelated child."),new Aa(wn(this.path),this.affectedTree,this.revert)}}class rs{constructor(u,l){this.source=u,this.path=l,this.type=ki.LISTEN_COMPLETE}operationForChild(u){return Wn(this.path)?new rs(this.source,Ut()):new rs(this.source,wn(this.path))}}class Ci{constructor(u,l,p){this.source=u,this.path=l,this.snap=p,this.type=ki.OVERWRITE}operationForChild(u){return Wn(this.path)?new Ci(this.source,Ut(),this.snap.getImmediateChild(u)):new Ci(this.source,wn(this.path),this.snap)}}class Ds{constructor(u,l,p){this.source=u,this.path=l,this.children=p,this.type=ki.MERGE}operationForChild(u){if(Wn(this.path)){const l=this.children.subtree(new _t(u));return l.isEmpty()?null:l.value?new Ci(this.source,Ut(),l.value):new Ds(this.source,Ut(),l)}return(0,W.hu)(an(this.path)===u,"Can't get a merge for a child not on the path of the operation"),new Ds(this.source,wn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Ii{constructor(u,l,p){this.node_=u,this.fullyInitialized_=l,this.filtered_=p}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(u){if(Wn(u))return this.isFullyInitialized()&&!this.filtered_;const l=an(u);return this.isCompleteForChild(l)}isCompleteForChild(u){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(u)}getNode(){return this.node_}}class Ro{constructor(u){this.query_=u,this.index_=this.query_._queryParams.getIndex()}}function Oo(d,u,l,p,E,M){const j=p.filter(se=>se.type===l);j.sort((se,le)=>function $l(d,u,l){if(null==u.childName||null==l.childName)throw(0,W.g5)("Should only compare child_ events.");const p=new Bn(u.childName,u.snapshotNode),E=new Bn(l.childName,l.snapshotNode);return d.index_.compare(p,E)}(d,se,le)),j.forEach(se=>{const le=function Ns(d,u,l){return"value"===u.type||"child_removed"===u.type||(u.prevName=l.getPredecessorChildName(u.childName,u.snapshotNode,d.index_)),u}(d,se,M);E.forEach(Ce=>{Ce.respondsTo(se.type)&&u.push(Ce.createEvent(le,d.query_))})})}function Fi(d,u){return{eventCache:d,serverCache:u}}function Ts(d,u,l,p){return Fi(new Ii(u,l,p),d.serverCache)}function $s(d,u,l,p){return Fi(d.eventCache,new Ii(u,l,p))}function S(d){return d.eventCache.isFullyInitialized()?d.eventCache.getNode():null}function x(d){return d.serverCache.isFullyInitialized()?d.serverCache.getNode():null}let Q;class Je{constructor(u,l=(()=>(Q||(Q=new ie(zr)),Q))()){this.value=u,this.children=l}static fromObject(u){let l=new Je(null);return be(u,(p,E)=>{l=l.set(new _t(p),E)}),l}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(u,l){if(null!=this.value&&l(this.value))return{path:Ut(),value:this.value};if(Wn(u))return null;{const p=an(u),E=this.children.get(p);if(null!==E){const M=E.findRootMostMatchingPathAndValue(wn(u),l);return null!=M?{path:mr(new _t(p),M.path),value:M.value}:null}return null}}findRootMostValueAndPath(u){return this.findRootMostMatchingPathAndValue(u,()=>!0)}subtree(u){if(Wn(u))return this;{const l=an(u),p=this.children.get(l);return null!==p?p.subtree(wn(u)):new Je(null)}}set(u,l){if(Wn(u))return new Je(l,this.children);{const p=an(u),M=(this.children.get(p)||new Je(null)).set(wn(u),l),j=this.children.insert(p,M);return new Je(this.value,j)}}remove(u){if(Wn(u))return this.children.isEmpty()?new Je(null):new Je(null,this.children);{const l=an(u),p=this.children.get(l);if(p){const E=p.remove(wn(u));let M;return M=E.isEmpty()?this.children.remove(l):this.children.insert(l,E),null===this.value&&M.isEmpty()?new Je(null):new Je(this.value,M)}return this}}get(u){if(Wn(u))return this.value;{const l=an(u),p=this.children.get(l);return p?p.get(wn(u)):null}}setTree(u,l){if(Wn(u))return l;{const p=an(u),M=(this.children.get(p)||new Je(null)).setTree(wn(u),l);let j;return j=M.isEmpty()?this.children.remove(p):this.children.insert(p,M),new Je(this.value,j)}}fold(u){return this.fold_(Ut(),u)}fold_(u,l){const p={};return this.children.inorderTraversal((E,M)=>{p[E]=M.fold_(mr(u,E),l)}),l(u,this.value,p)}findOnPath(u,l){return this.findOnPath_(u,Ut(),l)}findOnPath_(u,l,p){const E=!!this.value&&p(l,this.value);if(E)return E;if(Wn(u))return null;{const M=an(u),j=this.children.get(M);return j?j.findOnPath_(wn(u),mr(l,M),p):null}}foreachOnPath(u,l){return this.foreachOnPath_(u,Ut(),l)}foreachOnPath_(u,l,p){if(Wn(u))return this;{this.value&&p(l,this.value);const E=an(u),M=this.children.get(E);return M?M.foreachOnPath_(wn(u),mr(l,E),p):new Je(null)}}foreach(u){this.foreach_(Ut(),u)}foreach_(u,l){this.children.inorderTraversal((p,E)=>{E.foreach_(mr(u,p),l)}),this.value&&l(u,this.value)}foreachChild(u){this.children.inorderTraversal((l,p)=>{p.value&&u(l,p.value)})}}class pn{constructor(u){this.writeTree_=u}static empty(){return new pn(new Je(null))}}function Cr(d,u,l){if(Wn(u))return new pn(new Je(l));{const p=d.writeTree_.findRootMostValueAndPath(u);if(null!=p){const E=p.path;let M=p.value;const j=ai(E,u);return M=M.updateChild(j,l),new pn(d.writeTree_.set(E,M))}{const E=new Je(l),M=d.writeTree_.setTree(u,E);return new pn(M)}}}function zi(d,u,l){let p=d;return be(l,(E,M)=>{p=Cr(p,mr(u,E),M)}),p}function ri(d,u){if(Wn(u))return pn.empty();{const l=d.writeTree_.setTree(u,new Je(null));return new pn(l)}}function yi(d,u){return null!=ps(d,u)}function ps(d,u){const l=d.writeTree_.findRootMostValueAndPath(u);return null!=l?d.writeTree_.get(l.path).getChild(ai(l.path,u)):null}function No(d){const u=[],l=d.writeTree_.value;return null!=l?l.isLeafNode()||l.forEachChild($t,(p,E)=>{u.push(new Bn(p,E))}):d.writeTree_.children.inorderTraversal((p,E)=>{null!=E.value&&u.push(new Bn(p,E.value))}),u}function Eo(d,u){if(Wn(u))return d;{const l=ps(d,u);return new pn(null!=l?new Je(l):d.writeTree_.subtree(u))}}function fa(d){return d.writeTree_.isEmpty()}function Nt(d,u){return Gr(Ut(),d.writeTree_,u)}function Gr(d,u,l){if(null!=u.value)return l.updateChild(d,u.value);{let p=null;return u.children.inorderTraversal((E,M)=>{".priority"===E?((0,W.hu)(null!==M.value,"Priority writes must always be leaf nodes"),p=M.value):l=Gr(mr(d,E),M,l)}),!l.getChild(d).isEmpty()&&null!==p&&(l=l.updateChild(mr(d,".priority"),p)),l}}function no(d,u){return Gl(u,d)}function R(d,u){if(d.snap)return ti(d.path,u);for(const l in d.children)if(d.children.hasOwnProperty(l)&&ti(mr(d.path,l),u))return!0;return!1}function q(d){return d.visible}function ue(d,u,l){let p=pn.empty();for(let E=0;E<d.length;++E){const M=d[E];if(u(M)){const j=M.path;let se;if(M.snap)ti(l,j)?(se=ai(l,j),p=Cr(p,se,M.snap)):ti(j,l)&&(se=ai(j,l),p=Cr(p,Ut(),M.snap.getChild(se)));else{if(!M.children)throw(0,W.g5)("WriteRecord should have .snap or .children");if(ti(l,j))se=ai(l,j),p=zi(p,se,M.children);else if(ti(j,l))if(se=ai(j,l),Wn(se))p=zi(p,Ut(),M.children);else{const le=(0,W.DV)(M.children,an(se));if(le){const Ce=le.getChild(wn(se));p=Cr(p,Ut(),Ce)}}}}}return p}function Te(d,u,l,p,E){if(p||E){const M=Eo(d.visibleWrites,u);return!E&&fa(M)?l:E||null!=l||yi(M,Ut())?Nt(ue(d.allWrites,function(Ce){return(Ce.visible||E)&&(!p||!~p.indexOf(Ce.writeId))&&(ti(Ce.path,u)||ti(u,Ce.path))},u),l||G.EMPTY_NODE):null}{const M=ps(d.visibleWrites,u);if(null!=M)return M;{const j=Eo(d.visibleWrites,u);return fa(j)?l:null!=l||yi(j,Ut())?Nt(j,l||G.EMPTY_NODE):null}}}function Gs(d,u,l,p){return Te(d.writeTree,d.treePath,u,l,p)}function io(d,u){return function mt(d,u,l){let p=G.EMPTY_NODE;const E=ps(d.visibleWrites,u);if(E)return E.isLeafNode()||E.forEachChild($t,(M,j)=>{p=p.updateImmediateChild(M,j)}),p;if(l){const M=Eo(d.visibleWrites,u);return l.forEachChild($t,(j,se)=>{const le=Nt(Eo(M,new _t(j)),se);p=p.updateImmediateChild(j,le)}),No(M).forEach(j=>{p=p.updateImmediateChild(j.name,j.node)}),p}return No(Eo(d.visibleWrites,u)).forEach(j=>{p=p.updateImmediateChild(j.name,j.node)}),p}(d.writeTree,d.treePath,u)}function Qi(d,u,l,p){return function nn(d,u,l,p,E){(0,W.hu)(p||E,"Either existingEventSnap or existingServerSnap must exist");const M=mr(u,l);if(yi(d.visibleWrites,M))return null;{const j=Eo(d.visibleWrites,M);return fa(j)?E.getChild(l):Nt(j,E.getChild(l))}}(d.writeTree,d.treePath,u,l,p)}function bo(d,u){return function Dn(d,u){return ps(d.visibleWrites,u)}(d.writeTree,mr(d.treePath,u))}function jn(d,u,l){return function Ir(d,u,l,p){const E=mr(u,l),M=ps(d.visibleWrites,E);return null!=M?M:p.isCompleteForChild(l)?Nt(Eo(d.visibleWrites,E),p.getNode().getImmediateChild(l)):null}(d.writeTree,d.treePath,u,l)}function il(d,u){return Gl(mr(d.treePath,u),d.writeTree)}function Gl(d,u){return{treePath:d,writeTree:u}}class Di{constructor(){this.changeMap=new Map}trackChildChange(u){const l=u.type,p=u.childName;(0,W.hu)("child_added"===l||"child_changed"===l||"child_removed"===l,"Only child changes supported for tracking"),(0,W.hu)(".priority"!==p,"Only non-priority child changes can be tracked.");const E=this.changeMap.get(p);if(E){const M=E.type;if("child_added"===l&&"child_removed"===M)this.changeMap.set(p,So(p,u.snapshotNode,E.snapshotNode));else if("child_removed"===l&&"child_added"===M)this.changeMap.delete(p);else if("child_removed"===l&&"child_changed"===M)this.changeMap.set(p,ji(p,E.oldSnap));else if("child_changed"===l&&"child_added"===M)this.changeMap.set(p,Yi(p,u.snapshotNode));else{if("child_changed"!==l||"child_changed"!==M)throw(0,W.g5)("Illegal combination of changes: "+u+" occurred after "+E);this.changeMap.set(p,So(p,u.snapshotNode,E.oldSnap))}}else this.changeMap.set(p,u)}getChanges(){return Array.from(this.changeMap.values())}}const dc=new class qn{getCompleteChild(u){return null}getChildAfterChild(u,l,p){return null}};class hi{constructor(u,l,p=null){this.writes_=u,this.viewCache_=l,this.optCompleteServerCache_=p}getCompleteChild(u){const l=this.viewCache_.eventCache;if(l.isCompleteForChild(u))return l.getNode().getImmediateChild(u);{const p=null!=this.optCompleteServerCache_?new Ii(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return jn(this.writes_,u,p)}}getChildAfterChild(u,l,p){const E=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:x(this.viewCache_),M=function ko(d,u,l,p,E,M){return function Wr(d,u,l,p,E,M,j){let se;const le=Eo(d.visibleWrites,u),Ce=ps(le,Ut());if(null!=Ce)se=Ce;else{if(null==l)return[];se=Nt(le,l)}if(se=se.withIndex(j),se.isEmpty()||se.isLeafNode())return[];{const ut=[],rt=j.getCompare(),At=M?se.getReverseIteratorFrom(p,j):se.getIteratorFrom(p,j);let Tn=At.getNext();for(;Tn&&ut.length<E;)0!==rt(Tn,p)&&ut.push(Tn),Tn=At.getNext();return ut}}(d.writeTree,d.treePath,u,l,p,E,M)}(this.writes_,E,l,1,p,u);return 0===M.length?null:M[0]}}function gs(d,u,l,p,E,M){const j=u.eventCache;if(null!=bo(p,l))return u;{let se,le;if(Wn(l))if((0,W.hu)(u.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),u.serverCache.isFiltered()){const Ce=x(u),rt=io(p,Ce instanceof G?Ce:G.EMPTY_NODE);se=d.filter.updateFullNode(u.eventCache.getNode(),rt,M)}else{const Ce=Gs(p,x(u));se=d.filter.updateFullNode(u.eventCache.getNode(),Ce,M)}else{const Ce=an(l);if(".priority"===Ce){(0,W.hu)(1===_r(l),"Can't have a priority with additional path components");const ut=j.getNode();le=u.serverCache.getNode();const rt=Qi(p,l,ut,le);se=null!=rt?d.filter.updatePriority(ut,rt):j.getNode()}else{const ut=wn(l);let rt;if(j.isCompleteForChild(Ce)){le=u.serverCache.getNode();const At=Qi(p,l,j.getNode(),le);rt=null!=At?j.getNode().getImmediateChild(Ce).updateChild(ut,At):j.getNode().getImmediateChild(Ce)}else rt=jn(p,Ce,u.serverCache);se=null!=rt?d.filter.updateChild(j.getNode(),Ce,rt,ut,E,M):j.getNode()}}return Ts(u,se,j.isFullyInitialized()||Wn(l),d.filter.filtersNodes())}}function qa(d,u,l,p,E,M,j,se){const le=u.serverCache;let Ce;const ut=j?d.filter:d.filter.getIndexedFilter();if(Wn(l))Ce=ut.updateFullNode(le.getNode(),p,null);else if(ut.filtersNodes()&&!le.isFiltered()){const Tn=le.getNode().updateChild(l,p);Ce=ut.updateFullNode(le.getNode(),Tn,null)}else{const Tn=an(l);if(!le.isCompleteForPath(l)&&_r(l)>1)return u;const Qn=wn(l),Do=le.getNode().getImmediateChild(Tn).updateChild(Qn,p);Ce=".priority"===Tn?ut.updatePriority(le.getNode(),Do):ut.updateChild(le.getNode(),Tn,Do,Qn,dc,null)}const rt=$s(u,Ce,le.isFullyInitialized()||Wn(l),ut.filtersNodes());return gs(d,rt,l,E,new hi(E,rt,M),se)}function fc(d,u,l,p,E,M,j){const se=u.eventCache;let le,Ce;const ut=new hi(E,u,M);if(Wn(l))Ce=d.filter.updateFullNode(u.eventCache.getNode(),p,j),le=Ts(u,Ce,!0,d.filter.filtersNodes());else{const rt=an(l);if(".priority"===rt)Ce=d.filter.updatePriority(u.eventCache.getNode(),p),le=Ts(u,Ce,se.isFullyInitialized(),se.isFiltered());else{const At=wn(l),Tn=se.getNode().getImmediateChild(rt);let Qn;if(Wn(At))Qn=p;else{const Pi=ut.getCompleteChild(rt);Qn=null!=Pi?".priority"===Si(At)&&Pi.getChild(Cs(At)).isEmpty()?Pi:Pi.updateChild(At,p):G.EMPTY_NODE}le=Tn.equals(Qn)?u:Ts(u,d.filter.updateChild(se.getNode(),rt,Qn,At,ut,j),se.isFullyInitialized(),d.filter.filtersNodes())}}return le}function Ti(d,u){return d.eventCache.isCompleteForChild(u)}function ii(d,u,l){return l.foreach((p,E)=>{u=u.updateChild(p,E)}),u}function Ai(d,u,l,p,E,M,j,se){if(u.serverCache.getNode().isEmpty()&&!u.serverCache.isFullyInitialized())return u;let Ce,le=u;Ce=Wn(l)?p:new Je(null).setTree(l,p);const ut=u.serverCache.getNode();return Ce.children.inorderTraversal((rt,At)=>{if(ut.hasChild(rt)){const Qn=ii(0,u.serverCache.getNode().getImmediateChild(rt),At);le=qa(d,le,new _t(rt),Qn,E,M,j,se)}}),Ce.children.inorderTraversal((rt,At)=>{const Tn=!u.serverCache.isCompleteForChild(rt)&&void 0===At.value;if(!ut.hasChild(rt)&&!Tn){const Pi=ii(0,u.serverCache.getNode().getImmediateChild(rt),At);le=qa(d,le,new _t(rt),Pi,E,M,j,se)}}),le}class ms{constructor(u,l){this.query_=u,this.eventRegistrations_=[];const p=this.query_._queryParams,E=new Vo(p.getIndex()),M=function ha(d){return d.loadsAllData()?new Vo(d.getIndex()):d.hasLimit()?new Ca(d):new Ko(d)}(p);this.processor_=function Wc(d){return{filter:d}}(M);const j=l.serverCache,se=l.eventCache,le=E.updateFullNode(G.EMPTY_NODE,j.getNode(),null),Ce=M.updateFullNode(G.EMPTY_NODE,se.getNode(),null),ut=new Ii(le,j.isFullyInitialized(),E.filtersNodes()),rt=new Ii(Ce,se.isFullyInitialized(),M.filtersNodes());this.viewCache_=Fi(rt,ut),this.eventGenerator_=new Ro(this.query_)}get query(){return this.query_}}function Co(d,u){const l=x(d.viewCache_);return l&&(d.query._queryParams.loadsAllData()||!Wn(u)&&!l.getImmediateChild(an(u)).isEmpty())?l.getChild(u):null}function Ws(d){return 0===d.eventRegistrations_.length}function Yt(d,u,l){const p=[];if(l){(0,W.hu)(null==u,"A cancel should cancel all event registrations.");const E=d.query._path;d.eventRegistrations_.forEach(M=>{const j=M.createCancelEvent(l,E);j&&p.push(j)})}if(u){let E=[];for(let M=0;M<d.eventRegistrations_.length;++M){const j=d.eventRegistrations_[M];if(j.matches(u)){if(u.hasAnyCallback()){E=E.concat(d.eventRegistrations_.slice(M+1));break}}else E.push(j)}d.eventRegistrations_=E}else d.eventRegistrations_=[];return p}function Wl(d,u,l,p){u.type===ki.MERGE&&null!==u.source.queryId&&((0,W.hu)(x(d.viewCache_),"We should always have a full cache before handling merges"),(0,W.hu)(S(d.viewCache_),"Missing event cache, even though we have a server cache"));const E=d.viewCache_,M=function Hr(d,u,l,p,E){const M=new Di;let j,se;if(l.type===ki.OVERWRITE){const Ce=l;Ce.source.fromUser?j=fc(d,u,Ce.path,Ce.snap,p,E,M):((0,W.hu)(Ce.source.fromServer,"Unknown source."),se=Ce.source.tagged||u.serverCache.isFiltered()&&!Wn(Ce.path),j=qa(d,u,Ce.path,Ce.snap,p,E,se,M))}else if(l.type===ki.MERGE){const Ce=l;Ce.source.fromUser?j=function Td(d,u,l,p,E,M,j){let se=u;return p.foreach((le,Ce)=>{const ut=mr(l,le);Ti(u,an(ut))&&(se=fc(d,se,ut,Ce,E,M,j))}),p.foreach((le,Ce)=>{const ut=mr(l,le);Ti(u,an(ut))||(se=fc(d,se,ut,Ce,E,M,j))}),se}(d,u,Ce.path,Ce.children,p,E,M):((0,W.hu)(Ce.source.fromServer,"Unknown source."),se=Ce.source.tagged||u.serverCache.isFiltered(),j=Ai(d,u,Ce.path,Ce.children,p,E,se,M))}else if(l.type===ki.ACK_USER_WRITE){const Ce=l;j=Ce.revert?function uu(d,u,l,p,E,M){let j;if(null!=bo(p,l))return u;{const se=new hi(p,u,E),le=u.eventCache.getNode();let Ce;if(Wn(l)||".priority"===an(l)){let ut;if(u.serverCache.isFullyInitialized())ut=Gs(p,x(u));else{const rt=u.serverCache.getNode();(0,W.hu)(rt instanceof G,"serverChildren would be complete if leaf node"),ut=io(p,rt)}ut=ut,Ce=d.filter.updateFullNode(le,ut,M)}else{const ut=an(l);let rt=jn(p,ut,u.serverCache);null==rt&&u.serverCache.isCompleteForChild(ut)&&(rt=le.getImmediateChild(ut)),Ce=null!=rt?d.filter.updateChild(le,ut,rt,wn(l),se,M):u.eventCache.getNode().hasChild(ut)?d.filter.updateChild(le,ut,G.EMPTY_NODE,wn(l),se,M):le,Ce.isEmpty()&&u.serverCache.isFullyInitialized()&&(j=Gs(p,x(u)),j.isLeafNode()&&(Ce=d.filter.updateFullNode(Ce,j,M)))}return j=u.serverCache.isFullyInitialized()||null!=bo(p,Ut()),Ts(u,Ce,j,d.filter.filtersNodes())}}(d,u,Ce.path,p,E,M):function jo(d,u,l,p,E,M,j){if(null!=bo(E,l))return u;const se=u.serverCache.isFiltered(),le=u.serverCache;if(null!=p.value){if(Wn(l)&&le.isFullyInitialized()||le.isCompleteForPath(l))return qa(d,u,l,le.getNode().getChild(l),E,M,se,j);if(Wn(l)){let Ce=new Je(null);return le.getNode().forEachChild(Yn,(ut,rt)=>{Ce=Ce.set(new _t(ut),rt)}),Ai(d,u,l,Ce,E,M,se,j)}return u}{let Ce=new Je(null);return p.foreach((ut,rt)=>{const At=mr(l,ut);le.isCompleteForPath(At)&&(Ce=Ce.set(ut,le.getNode().getChild(At)))}),Ai(d,u,l,Ce,E,M,se,j)}}(d,u,Ce.path,Ce.affectedTree,p,E,M)}else{if(l.type!==ki.LISTEN_COMPLETE)throw(0,W.g5)("Unknown operation type: "+l.type);j=function pc(d,u,l,p,E){const M=u.serverCache;return gs(d,$s(u,M.getNode(),M.isFullyInitialized()||Wn(l),M.isFiltered()),l,p,dc,E)}(d,u,l.path,p,M)}const le=M.getChanges();return function hc(d,u,l){const p=u.eventCache;if(p.isFullyInitialized()){const E=p.getNode().isLeafNode()||p.getNode().isEmpty(),M=S(d);(l.length>0||!d.eventCache.isFullyInitialized()||E&&!p.getNode().equals(M)||!p.getNode().getPriority().equals(M.getPriority()))&&l.push(da(S(u)))}}(u,j,le),{viewCache:j,changes:le}}(d.processor_,E,u,l,p);return function Lu(d,u){(0,W.hu)(u.eventCache.getNode().isIndexed(d.filter.getIndex()),"Event snap not indexed"),(0,W.hu)(u.serverCache.getNode().isIndexed(d.filter.getIndex()),"Server snap not indexed")}(d.processor_,M.viewCache),(0,W.hu)(M.viewCache.serverCache.isFullyInitialized()||!E.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),d.viewCache_=M.viewCache,Sa(d,M.changes,M.viewCache.eventCache.getNode(),null)}function Sa(d,u,l,p){return function za(d,u,l,p){const E=[],M=[];return u.forEach(j=>{"child_changed"===j.type&&d.index_.indexedValueChanged(j.oldSnap,j.snapshotNode)&&M.push(function ni(d,u){return{type:"child_moved",snapshotNode:u,childName:d}}(j.childName,j.snapshotNode))}),Oo(d,E,"child_removed",u,p,l),Oo(d,E,"child_added",u,p,l),Oo(d,E,"child_moved",M,p,l),Oo(d,E,"child_changed",u,p,l),Oo(d,E,"value",u,p,l),E}(d.eventGenerator_,u,l,p?[p]:d.eventRegistrations_)}let so,ga;class As{constructor(){this.views=new Map}}function Xo(d,u,l,p){const E=u.source.queryId;if(null!==E){const M=d.views.get(E);return(0,W.hu)(null!=M,"SyncTree gave us an op for an invalid query."),Wl(M,u,l,p)}{let M=[];for(const j of d.views.values())M=M.concat(Wl(j,u,l,p));return M}}function ea(d,u,l,p,E){const j=d.views.get(u._queryIdentifier);if(!j){let se=Gs(l,E?p:null),le=!1;se?le=!0:p instanceof G?(se=io(l,p),le=!1):(se=G.EMPTY_NODE,le=!1);const Ce=Fi(new Ii(se,le,!1),new Ii(p,E,!1));return new ms(u,Ce)}return j}function ta(d){const u=[];for(const l of d.views.values())l.query._queryParams.loadsAllData()||u.push(l);return u}function Ma(d,u){let l=null;for(const p of d.views.values())l=l||Co(p,u);return l}function oo(d,u){return u._queryParams.loadsAllData()?bl(d):d.views.get(u._queryIdentifier)}function ll(d,u){return null!=oo(d,u)}function na(d){return null!=bl(d)}function bl(d){for(const u of d.views.values())if(u.query._queryParams.loadsAllData())return u;return null}let k=1;class H{constructor(u){this.listenProvider_=u,this.syncPointTree_=new Je(null),this.pendingWriteTree_=function wr(){return{visibleWrites:pn.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function X(d,u,l,p,E){return function ro(d,u,l,p,E){(0,W.hu)(p>d.lastWriteId,"Stacking an older write on top of newer ones"),void 0===E&&(E=!0),d.allWrites.push({path:u,snap:l,writeId:p,visible:E}),E&&(d.visibleWrites=Cr(d.visibleWrites,u,l)),d.lastWriteId=p}(d.pendingWriteTree_,u,l,p,E),E?Pa(d,new Ci({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},u,l)):[]}function Ge(d,u,l=!1){const p=function I(d,u){for(let l=0;l<d.allWrites.length;l++){const p=d.allWrites[l];if(p.writeId===u)return p}return null}(d.pendingWriteTree_,u);if(function C(d,u){const l=d.allWrites.findIndex(se=>se.writeId===u);(0,W.hu)(l>=0,"removeWrite called with nonexistent writeId.");const p=d.allWrites[l];d.allWrites.splice(l,1);let E=p.visible,M=!1,j=d.allWrites.length-1;for(;E&&j>=0;){const se=d.allWrites[j];se.visible&&(j>=l&&R(se,p.path)?E=!1:ti(p.path,se.path)&&(M=!0)),j--}return!!E&&(M?(function O(d){d.visibleWrites=ue(d.allWrites,q,Ut()),d.lastWriteId=d.allWrites.length>0?d.allWrites[d.allWrites.length-1].writeId:-1}(d),!0):(p.snap?d.visibleWrites=ri(d.visibleWrites,p.path):be(p.children,le=>{d.visibleWrites=ri(d.visibleWrites,mr(p.path,le))}),!0))}(d.pendingWriteTree_,u)){let M=new Je(null);return null!=p.snap?M=M.set(Ut(),!0):be(p.children,j=>{M=M.set(new _t(j),!0)}),Pa(d,new Aa(p.path,M,l))}return[]}function et(d,u,l){return Pa(d,new Ci({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},u,l))}function or(d,u,l,p){const E=u._path,M=d.syncPointTree_.get(E);let j=[];if(M&&("default"===u._queryIdentifier||ll(M,u))){const se=function al(d,u,l,p){const E=u._queryIdentifier,M=[];let j=[];const se=na(d);if("default"===E)for(const[le,Ce]of d.views.entries())j=j.concat(Yt(Ce,l,p)),Ws(Ce)&&(d.views.delete(le),Ce.query._queryParams.loadsAllData()||M.push(Ce.query));else{const le=d.views.get(E);le&&(j=j.concat(Yt(le,l,p)),Ws(le)&&(d.views.delete(E),le.query._queryParams.loadsAllData()||M.push(le.query)))}return se&&!na(d)&&M.push(new(function sl(){return(0,W.hu)(so,"Reference.ts has not been loaded"),so}())(u._repo,u._path)),{removed:M,events:j}}(M,u,l,p);(function ol(d){return 0===d.views.size})(M)&&(d.syncPointTree_=d.syncPointTree_.remove(E));const le=se.removed;j=se.events;const Ce=-1!==le.findIndex(rt=>rt._queryParams.loadsAllData()),ut=d.syncPointTree_.findOnPath(E,(rt,At)=>na(At));if(Ce&&!ut){const rt=d.syncPointTree_.subtree(E);if(!rt.isEmpty()){const At=function Ad(d){return d.fold((u,l,p)=>{if(l&&na(l))return[bl(l)];{let E=[];return l&&(E=ta(l)),be(p,(M,j)=>{E=E.concat(j)}),E}})}(rt);for(let Tn=0;Tn<At.length;++Tn){const Qn=At[Tn],Pi=Qn.query,Do=Go(d,Qn);d.listenProvider_.startListening(fu(Pi),ra(d,Pi),Do.hashFn,Do.onComplete)}}}!ut&&le.length>0&&!p&&(Ce?d.listenProvider_.stopListening(fu(u),null):le.forEach(rt=>{const At=d.queryToTagMap.get(du(rt));d.listenProvider_.stopListening(fu(rt),At)})),function ch(d,u){for(let l=0;l<u.length;++l){const p=u[l];if(!p._queryParams.loadsAllData()){const E=du(p),M=d.queryToTagMap.get(E);d.queryToTagMap.delete(E),d.tagToQueryMap.delete(M)}}}(d,le)}return j}function ys(d,u,l){const p=u._path;let E=null,M=!1;d.syncPointTree_.foreachOnPath(p,(rt,At)=>{const Tn=ai(rt,p);E=E||Ma(At,Tn),M=M||na(At)});let se,j=d.syncPointTree_.get(p);j?(M=M||na(j),E=E||Ma(j,Ut())):(j=new As,d.syncPointTree_=d.syncPointTree_.set(p,j)),null!=E?se=!0:(se=!1,E=G.EMPTY_NODE,d.syncPointTree_.subtree(p).foreachChild((At,Tn)=>{const Qn=Ma(Tn,Ut());Qn&&(E=E.updateImmediateChild(At,Qn))}));const le=ll(j,u);if(!le&&!u._queryParams.loadsAllData()){const rt=du(u);(0,W.hu)(!d.queryToTagMap.has(rt),"View does not exist, but we have a tag");const At=function Dl(){return k++}();d.queryToTagMap.set(rt,At),d.tagToQueryMap.set(At,rt)}let ut=function Uu(d,u,l,p,E,M){const j=ea(d,u,p,E,M);return d.views.has(u._queryIdentifier)||d.views.set(u._queryIdentifier,j),function Jo(d,u){d.eventRegistrations_.push(u)}(j,l),function Vu(d,u){const l=d.viewCache_.eventCache,p=[];return l.getNode().isLeafNode()||l.getNode().forEachChild($t,(M,j)=>{p.push(Yi(M,j))}),l.isFullyInitialized()&&p.push(da(l.getNode())),Sa(d,p,l.getNode(),u)}(j,l)}(j,u,l,no(d.pendingWriteTree_,p),E,se);if(!le&&!M){const rt=oo(j,u);ut=ut.concat(function Bu(d,u,l){const p=u._path,E=ra(d,u),M=Go(d,l),j=d.listenProvider_.startListening(fu(u),E,M.hashFn,M.onComplete),se=d.syncPointTree_.subtree(p);if(E)(0,W.hu)(!na(se.value),"If we're adding a query, it shouldn't be shadowed");else{const le=se.fold((Ce,ut,rt)=>{if(!Wn(Ce)&&ut&&na(ut))return[bl(ut).query];{let At=[];return ut&&(At=At.concat(ta(ut).map(Tn=>Tn.query))),be(rt,(Tn,Qn)=>{At=At.concat(Qn)}),At}});for(let Ce=0;Ce<le.length;++Ce){const ut=le[Ce];d.listenProvider_.stopListening(fu(ut),ra(d,ut))}}return j}(d,u,rt))}return ut}function Li(d,u,l){const E=d.pendingWriteTree_,M=d.syncPointTree_.findOnPath(u,(j,se)=>{const Ce=Ma(se,ai(j,u));if(Ce)return Ce});return Te(E,u,M,l,!0)}function Pa(d,u){return ao(u,d.syncPointTree_,null,no(d.pendingWriteTree_,Ut()))}function ao(d,u,l,p){if(Wn(d.path))return lo(d,u,l,p);{const E=u.get(Ut());null==l&&null!=E&&(l=Ma(E,Ut()));let M=[];const j=an(d.path),se=d.operationForChild(j),le=u.children.get(j);if(le&&se){const Ce=l?l.getImmediateChild(j):null,ut=il(p,j);M=M.concat(ao(se,le,Ce,ut))}return E&&(M=M.concat(Xo(E,d,p,l))),M}}function lo(d,u,l,p){const E=u.get(Ut());null==l&&null!=E&&(l=Ma(E,Ut()));let M=[];return u.children.inorderTraversal((j,se)=>{const le=l?l.getImmediateChild(j):null,Ce=il(p,j),ut=d.operationForChild(j);ut&&(M=M.concat(lo(ut,se,le,Ce)))}),E&&(M=M.concat(Xo(E,d,p,l))),M}function Go(d,u){const l=u.query,p=ra(d,l);return{hashFn:()=>(function Ho(d){return d.viewCache_.serverCache.getNode()}(u)||G.EMPTY_NODE).hash(),onComplete:E=>{if("ok"===E)return p?function Mn(d,u,l){const p=Ss(d,l);if(p){const E=hu(p),M=E.path,j=E.queryId,se=ai(M,u);return Il(d,M,new rs(mi(j),se))}return[]}(d,l._path,p):function mn(d,u){return Pa(d,new rs({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},u))}(d,l._path);{const M=function xt(d,u){let l="Unknown Error";"too_big"===d?l="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===d?l="Client doesn't have permission to access the desired data.":"unavailable"===d&&(l="The service is unavailable");const p=new Error(d+" at "+u._path.toString()+": "+l);return p.code=d.toUpperCase(),p}(E,l);return or(d,l,null,M)}}}}function ra(d,u){const l=du(u);return d.queryToTagMap.get(l)}function du(d){return d._path.toString()+"$"+d._queryIdentifier}function Ss(d,u){return d.tagToQueryMap.get(u)}function hu(d){const u=d.indexOf("$");return(0,W.hu)(-1!==u&&u<d.length-1,"Bad queryKey."),{queryId:d.substr(u+1),path:new _t(d.substr(0,u))}}function Il(d,u,l){const p=d.syncPointTree_.get(u);return(0,W.hu)(p,"Missing sync point for query tag that we're tracking"),Xo(p,l,no(d.pendingWriteTree_,u),null)}function fu(d){return d._queryParams.loadsAllData()&&!d._queryParams.isDefault()?new(function cu(){return(0,W.hu)(ga,"Reference.ts has not been loaded"),ga}())(d._repo,d._path):d}class zc{constructor(u){this.node_=u}getImmediateChild(u){const l=this.node_.getImmediateChild(u);return new zc(l)}node(){return this.node_}}class Ka{constructor(u,l){this.syncTree_=u,this.path_=l}getImmediateChild(u){const l=mr(this.path_,u);return new Ka(this.syncTree_,l)}node(){return Li(this.syncTree_,this.path_)}}const ju=function(d,u,l){return d&&"object"==typeof d?((0,W.hu)(".sv"in d,"Unexpected leaf node or priority contents"),"string"==typeof d[".sv"]?dh(d[".sv"],u,l):"object"==typeof d[".sv"]?Sd(d[".sv"],u):void(0,W.hu)(!1,"Unexpected server value: "+JSON.stringify(d,null,2))):d},dh=function(d,u,l){if("timestamp"===d)return l.timestamp;(0,W.hu)(!1,"Unexpected server value: "+d)},Sd=function(d,u,l){d.hasOwnProperty("increment")||(0,W.hu)(!1,"Unexpected server value: "+JSON.stringify(d,null,2));const p=d.increment;"number"!=typeof p&&(0,W.hu)(!1,"Unexpected increment value: "+p);const E=u.node();if((0,W.hu)(null!=E,"Expected ChildrenNode.EMPTY_NODE for nulls"),!E.isLeafNode())return p;const j=E.getValue();return"number"!=typeof j?p:j+p},Za=function(d,u,l,p){return Ra(u,new Ka(l,d),p)},gc=function(d,u,l){return Ra(d,new zc(u),l)};function Ra(d,u,l){const p=d.getPriority().val(),E=ju(p,u.getImmediateChild(".priority"),l);let M;if(d.isLeafNode()){const j=d,se=ju(j.getValue(),u,l);return se!==j.getValue()||E!==j.getPriority().val()?new zn(se,hr(E)):d}{const j=d;return M=j,E!==j.getPriority().val()&&(M=M.updatePriority(new zn(E))),j.forEachChild($t,(se,le)=>{const Ce=Ra(le,u.getImmediateChild(se),l);Ce!==le&&(M=M.updateImmediateChild(se,Ce))}),M}}class Tl{constructor(u="",l=null,p={children:{},childCount:0}){this.name=u,this.parent=l,this.node=p}}function ma(d,u){let l=u instanceof _t?u:new _t(u),p=d,E=an(l);for(;null!==E;){const M=(0,W.DV)(p.node.children,E)||{children:{},childCount:0};p=new Tl(E,p,M),l=wn(l),E=an(l)}return p}function ul(d){return d.node.value}function ql(d,u){d.node.value=u,gu(d)}function qc(d){return d.node.childCount>0}function uo(d,u){be(d.node.children,(l,p)=>{u(new Tl(l,d,p))})}function mc(d,u,l,p){l&&!p&&u(d),uo(d,E=>{mc(E,u,!0,p)}),l&&p&&u(d)}function Al(d){return new _t(null===d.parent?d.name:Al(d.parent)+"/"+d.name)}function gu(d){null!==d.parent&&function Kc(d,u,l){const p=function cl(d){return void 0===ul(d)&&!qc(d)}(l),E=(0,W.r3)(d.node.children,u);p&&E?(delete d.node.children[u],d.node.childCount--,gu(d)):!p&&!E&&(d.node.children[u]=l.node,d.node.childCount++,gu(d))}(d.parent,d.name,d)}const xd=/[\[\].#$\/\u0000-\u001F\u007F]/,Md=/[\[\].#$\u0000-\u001F\u007F]/,Hu=10485760,$u=function(d){return"string"==typeof d&&0!==d.length&&!xd.test(d)},ya=function(d){return"string"==typeof d&&0!==d.length&&!Md.test(d)},dl=function(d){return null===d||"string"==typeof d||"number"==typeof d&&!er(d)||d&&"object"==typeof d&&(0,W.r3)(d,".sv")},hl=function(d,u,l,p){p&&void 0===u||yu((0,W.gK)(d,"value"),u,l)},yu=function(d,u,l){const p=l instanceof _t?new Ps(l,d):l;if(void 0===u)throw new Error(d+"contains undefined "+ts(p));if("function"==typeof u)throw new Error(d+"contains a function "+ts(p)+" with contents = "+u.toString());if(er(u))throw new Error(d+"contains "+u.toString()+" "+ts(p));if("string"==typeof u&&u.length>Hu/3&&(0,W.ug)(u)>Hu)throw new Error(d+"contains a string greater than "+Hu+" utf8 bytes "+ts(p)+" ('"+u.substring(0,50)+"...')");if(u&&"object"==typeof u){let E=!1,M=!1;if(be(u,(j,se)=>{if(".value"===j)E=!0;else if(".priority"!==j&&".sv"!==j&&(M=!0,!$u(j)))throw new Error(d+" contains an invalid key ("+j+") "+ts(p)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function Qs(d,u){d.parts_.length>0&&(d.byteLength_+=1),d.parts_.push(u),d.byteLength_+=(0,W.ug)(u),us(d)})(p,j),yu(d,se,p),function Ao(d){const u=d.parts_.pop();d.byteLength_-=(0,W.ug)(u),d.parts_.length>0&&(d.byteLength_-=1)}(p)}),E&&M)throw new Error(d+' contains ".value" child '+ts(p)+" in addition to actual children.")}},Kl=function(d,u,l,p){if(p&&void 0===u)return;const E=(0,W.gK)(d,"values");if(!u||"object"!=typeof u||Array.isArray(u))throw new Error(E+" must be an object containing the children to replace.");const M=[];be(u,(j,se)=>{const le=new _t(j);if(yu(E,se,mr(l,le)),".priority"===Si(le)&&!dl(se))throw new Error(E+"contains an invalid value for '"+le.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");M.push(le)}),function(d,u){let l,p;for(l=0;l<u.length;l++){p=u[l];const M=$i(p);for(let j=0;j<M.length;j++)if((".priority"!==M[j]||j!==M.length-1)&&!$u(M[j]))throw new Error(d+"contains an invalid key ("+M[j]+") in path "+p.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}u.sort(Ms);let E=null;for(l=0;l<u.length;l++){if(p=u[l],null!==E&&ti(E,p))throw new Error(d+"contains a path "+E.toString()+" that is ancestor of another path "+p.toString());E=p}}(E,M)},fl=function(d,u,l){if(!l||void 0!==u){if(er(u))throw new Error((0,W.gK)(d,"priority")+"is "+u.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!dl(u))throw new Error((0,W.gK)(d,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Zl=function(d,u,l,p){if(!(p&&void 0===l||$u(l)))throw new Error((0,W.gK)(d,u)+'was an invalid key = "'+l+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Oa=function(d,u,l,p){if(!(p&&void 0===l||ya(l)))throw new Error((0,W.gK)(d,u)+'was an invalid path = "'+l+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Io=function(d,u){if(".info"===an(u))throw new Error(d+" failed = Can't modify data under /.info/")},pl=function(d,u){const l=u.path.toString();if("string"!=typeof u.repoInfo.host||0===u.repoInfo.host.length||!$u(u.repoInfo.namespace)&&"localhost"!==u.repoInfo.host.split(":")[0]||0!==l.length&&!function(d){return d&&(d=d.replace(/^\/*\.info(\/|$)/,"/")),ya(d)}(l))throw new Error((0,W.gK)(d,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class fh{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Sl(d,u){let l=null;for(let p=0;p<u.length;p++){const E=u[p],M=E.getPath();null!==l&&!li(M,l.path)&&(d.eventLists_.push(l),l=null),null===l&&(l={events:[],path:M}),l.events.push(E)}l&&d.eventLists_.push(l)}function xl(d,u,l){Sl(d,l),Qr(d,p=>li(p,u))}function ia(d,u,l){Sl(d,l),Qr(d,p=>ti(p,u)||ti(u,p))}function Qr(d,u){d.recursionDepth_++;let l=!0;for(let p=0;p<d.eventLists_.length;p++){const E=d.eventLists_[p];E&&(u(E.path)?(Ml(d.eventLists_[p]),d.eventLists_[p]=null):l=!1)}l&&(d.eventLists_=[]),d.recursionDepth_--}function Ml(d){for(let u=0;u<d.events.length;u++){const l=d.events[u];if(null!==l){d.events[u]=null;const p=l.getEventRunner();fn&&Sn("event: "+l.toString()),br(p)}}}const _u="repo_interrupt";class _c{constructor(u,l,p,E){this.repoInfo_=u,this.forceRestClient_=l,this.authTokenProvider_=p,this.appCheckProvider_=E,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new fh,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=bi(),this.transactionQueueTree_=new Tl,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function vc(d){const l=d.infoData_.getNode(new _t(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+l}function Gu(d){return function(d){return(d=d||{}).timestamp=d.timestamp||(new Date).getTime(),d}({timestamp:vc(d)})}function Pl(d,u,l,p,E){d.dataUpdateCount++;const M=new _t(u);l=d.interceptServerDataCallback_?d.interceptServerDataCallback_(u,l):l;let j=[];if(E)if(p){const le=(0,W.UI)(l,Ce=>hr(Ce));j=function gr(d,u,l,p){const E=Ss(d,p);if(E){const M=hu(E),j=M.path,se=M.queryId,le=ai(j,u),Ce=Je.fromObject(l);return Il(d,j,new Ds(mi(se),le,Ce))}return[]}(d.serverSyncTree_,M,le,E)}else{const le=hr(l);j=function Er(d,u,l,p){const E=Ss(d,p);if(null!=E){const M=hu(E),j=M.path,se=M.queryId,le=ai(j,u);return Il(d,j,new Ci(mi(se),le,l))}return[]}(d.serverSyncTree_,M,le,E)}else if(p){const le=(0,W.UI)(l,Ce=>hr(Ce));j=function Bt(d,u,l){const p=Je.fromObject(l);return Pa(d,new Ds({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},u,p))}(d.serverSyncTree_,M,le)}else{const le=hr(l);j=et(d.serverSyncTree_,M,le)}let se=M;j.length>0&&(se=ka(d,M)),ia(d.eventQueue_,se,j)}function Ya(d,u){Zc(d,"connected",u),!1===u&&function is(d){Yl(d,"onDisconnectEvents");const u=Gu(d),l=bi();Qo(d.onDisconnect_,Ut(),(E,M)=>{const j=Za(E,M,d.serverSyncTree_,u);Is(l,E,j)});let p=[];Qo(l,Ut(),(E,M)=>{p=p.concat(et(d.serverSyncTree_,E,M));const j=Fa(d,E);ka(d,j)}),d.onDisconnect_=bi(),ia(d.eventQueue_,Ut(),p)}(d)}function Zc(d,u,l){const p=new _t("/.info/"+u),E=hr(l);d.infoData_.updateSnapshot(p,E);const M=et(d.infoSyncTree_,p,E);ia(d.eventQueue_,p,M)}function Wu(d){return d.nextWriteId_++}function zu(d,u,l,p,E){Yl(d,"set",{path:u.toString(),value:l,priority:p});const M=Gu(d),j=hr(l,p),se=Li(d.serverSyncTree_,u),le=gc(j,se,M),Ce=Wu(d),ut=X(d.serverSyncTree_,u,le,Ce,!0);Sl(d.eventQueue_,ut),d.server_.put(u.toString(),j.val(!0),(At,Tn)=>{const Qn="ok"===At;Qn||vn("set at "+u+" failed: "+At);const Pi=Ge(d.serverSyncTree_,Ce,!Qn);ia(d.eventQueue_,u,Pi),Fo(0,E,At,Tn)});const rt=Fa(d,u);ka(d,rt),ia(d.eventQueue_,rt,[])}function Ur(d,u,l){d.server_.onDisconnectCancel(u.toString(),(p,E)=>{"ok"===p&&di(d.onDisconnect_,u),Fo(0,l,p,E)})}function Ec(d,u,l,p){const E=hr(l);d.server_.onDisconnectPut(u.toString(),E.val(!0),(M,j)=>{"ok"===M&&Is(d.onDisconnect_,u,E),Fo(0,p,M,j)})}function vu(d,u,l){let p;p=".info"===an(u._path)?or(d.infoSyncTree_,u,l):or(d.serverSyncTree_,u,l),xl(d.eventQueue_,u._path,p)}function Fr(d){d.persistentConnection_&&d.persistentConnection_.interrupt(_u)}function Yl(d,...u){let l="";d.persistentConnection_&&(l=d.persistentConnection_.id+":"),Sn(l,...u)}function Fo(d,u,l,p){u&&br(()=>{if("ok"===l)u(null);else{const E=(l||"error").toUpperCase();let M=E;p&&(M+=": "+p);const j=new Error(M);j.code=E,u(j)}})}function Wo(d,u,l){return Li(d.serverSyncTree_,u,l)||G.EMPTY_NODE}function Ql(d,u=d.transactionQueueTree_){if(u||ss(d,u),ul(u)){const l=fi(d,u);(0,W.hu)(l.length>0,"Sending zero length transaction queue"),l.every(E=>0===E.status)&&function Yc(d,u,l){const p=l.map(Ce=>Ce.currentWriteId),E=Wo(d,u,p);let M=E;const j=E.hash();for(let Ce=0;Ce<l.length;Ce++){const ut=l[Ce];(0,W.hu)(0===ut.status,"tryToSendTransactionQueue_: items in queue should all be run."),ut.status=1,ut.retryCount++;const rt=ai(u,ut.path);M=M.updateChild(rt,ut.currentOutputSnapshotRaw)}const se=M.val(!0),le=u;d.server_.put(le.toString(),se,Ce=>{Yl(d,"transaction put response",{path:le.toString(),status:Ce});let ut=[];if("ok"===Ce){const rt=[];for(let At=0;At<l.length;At++)l[At].status=2,ut=ut.concat(Ge(d.serverSyncTree_,l[At].currentWriteId)),l[At].onComplete&&rt.push(()=>l[At].onComplete(null,!0,l[At].currentOutputSnapshotResolved)),l[At].unwatcher();ss(d,ma(d.transactionQueueTree_,u)),Ql(d,d.transactionQueueTree_),ia(d.eventQueue_,u,ut);for(let At=0;At<rt.length;At++)br(rt[At])}else{if("datastale"===Ce)for(let rt=0;rt<l.length;rt++)l[rt].status=3===l[rt].status?4:0;else{vn("transaction at "+le.toString()+" failed: "+Ce);for(let rt=0;rt<l.length;rt++)l[rt].status=4,l[rt].abortReason=Ce}ka(d,u)}},j)}(d,Al(u),l)}else qc(u)&&uo(u,l=>{Ql(d,l)})}function ka(d,u){const l=mh(d,u),p=Al(l);return function gh(d,u,l){if(0===u.length)return;const p=[];let E=[];const j=u.filter(se=>0===se.status).map(se=>se.currentWriteId);for(let se=0;se<u.length;se++){const le=u[se],Ce=ai(l,le.path);let rt,ut=!1;if((0,W.hu)(null!==Ce,"rerunTransactionsUnderNode_: relativePath should not be null."),4===le.status)ut=!0,rt=le.abortReason,E=E.concat(Ge(d.serverSyncTree_,le.currentWriteId,!0));else if(0===le.status)if(le.retryCount>=25)ut=!0,rt="maxretry",E=E.concat(Ge(d.serverSyncTree_,le.currentWriteId,!0));else{const At=Wo(d,le.path,j);le.currentInputSnapshot=At;const Tn=u[se].update(At.val());if(void 0!==Tn){yu("transaction failed: Data returned ",Tn,le.path);let Qn=hr(Tn);"object"==typeof Tn&&null!=Tn&&(0,W.r3)(Tn,".priority")||(Qn=Qn.updatePriority(At.getPriority()));const Do=le.currentWriteId,Oc=Gu(d),Ba=gc(Qn,At,Oc);le.currentOutputSnapshotRaw=Qn,le.currentOutputSnapshotResolved=Ba,le.currentWriteId=Wu(d),j.splice(j.indexOf(Do),1),E=E.concat(X(d.serverSyncTree_,le.path,Ba,le.currentWriteId,le.applyLocally)),E=E.concat(Ge(d.serverSyncTree_,Do,!0))}else ut=!0,rt="nodata",E=E.concat(Ge(d.serverSyncTree_,le.currentWriteId,!0))}ia(d.eventQueue_,l,E),E=[],ut&&(u[se].status=2,setTimeout(u[se].unwatcher,Math.floor(0)),u[se].onComplete&&p.push("nodata"===rt?()=>u[se].onComplete(null,!1,u[se].currentInputSnapshot):()=>u[se].onComplete(new Error(rt),!1,null)))}ss(d,d.transactionQueueTree_);for(let se=0;se<p.length;se++)br(p[se]);Ql(d,d.transactionQueueTree_)}(d,fi(d,l),p),p}function mh(d,u){let l,p=d.transactionQueueTree_;for(l=an(u);null!==l&&void 0===ul(p);)p=ma(p,l),l=an(u=wn(u));return p}function fi(d,u){const l=[];return wu(d,u,l),l.sort((p,E)=>p.order-E.order),l}function wu(d,u,l){const p=ul(u);if(p)for(let E=0;E<p.length;E++)l.push(p[E]);uo(u,E=>{wu(d,E,l)})}function ss(d,u){const l=ul(u);if(l){let p=0;for(let E=0;E<l.length;E++)2!==l[E].status&&(l[p]=l[E],p++);l.length=p,ql(u,l.length>0?l:void 0)}uo(u,p=>{ss(d,p)})}function Fa(d,u){const l=Al(mh(d,u)),p=ma(d.transactionQueueTree_,u);return function pu(d,u,l){let p=l?d:d.parent;for(;null!==p;){if(u(p))return!0;p=p.parent}}(p,E=>{Qa(d,E)}),Qa(d,p),mc(p,E=>{Qa(d,E)}),l}function Qa(d,u){const l=ul(u);if(l){const p=[];let E=[],M=-1;for(let j=0;j<l.length;j++)3===l[j].status||(1===l[j].status?((0,W.hu)(M===j-1,"All SENT items should be at beginning of queue."),M=j,l[j].status=3,l[j].abortReason="set"):((0,W.hu)(0===l[j].status,"Unexpected transaction status in abort"),l[j].unwatcher(),E=E.concat(Ge(d.serverSyncTree_,l[j].currentWriteId,!0)),l[j].onComplete&&p.push(l[j].onComplete.bind(null,new Error("set"),!1,null))));-1===M?ql(u,void 0):l.length=M+1,ia(d.eventQueue_,Al(u),E);for(let j=0;j<p.length;j++)br(p[j])}}const Ja=function(d,u){const l=bc(d),p=l.namespace;return"firebase.com"===l.domain&&fr(l.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!p||"undefined"===p)&&"localhost"!==l.domain&&fr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),l.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&vn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new on(l.host,l.secure,p,"ws"===l.scheme||"wss"===l.scheme,u,"",p!==l.subdomain),path:new _t(l.pathString)}},bc=function(d){let u="",l="",p="",E="",M="",j=!0,se="https",le=443;if("string"==typeof d){let Ce=d.indexOf("//");Ce>=0&&(se=d.substring(0,Ce-1),d=d.substring(Ce+2));let ut=d.indexOf("/");-1===ut&&(ut=d.length);let rt=d.indexOf("?");-1===rt&&(rt=d.length),u=d.substring(0,Math.min(ut,rt)),ut<rt&&(E=function Eu(d){let u="";const l=d.split("/");for(let p=0;p<l.length;p++)if(l[p].length>0){let E=l[p];try{E=decodeURIComponent(E.replace(/\+/g," "))}catch(M){}u+="/"+E}return u}(d.substring(ut,rt)));const At=function co(d){const u={};"?"===d.charAt(0)&&(d=d.substring(1));for(const l of d.split("&")){if(0===l.length)continue;const p=l.split("=");2===p.length?u[decodeURIComponent(p[0])]=decodeURIComponent(p[1]):vn(`Invalid query segment '${l}' in query '${d}'`)}return u}(d.substring(Math.min(d.length,rt)));Ce=u.indexOf(":"),Ce>=0?(j="https"===se||"wss"===se,le=parseInt(u.substring(Ce+1),10)):Ce=u.length;const Tn=u.slice(0,Ce);if("localhost"===Tn.toLowerCase())l="localhost";else if(Tn.split(".").length<=2)l=Tn;else{const Qn=u.indexOf(".");p=u.substring(0,Qn).toLowerCase(),l=u.substring(Qn+1),M=p}"ns"in At&&(M=At.ns)}return{host:u,port:le,domain:l,subdomain:p,secure:j,scheme:se,pathString:E,namespace:M}};class zo{constructor(u,l,p,E){this.eventType=u,this.eventRegistration=l,this.snapshot=p,this.prevName=E}getPath(){const u=this.snapshot.ref;return"value"===this.eventType?u._path:u.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,W.Pz)(this.snapshot.exportVal())}}class Jl{constructor(u,l,p){this.eventRegistration=u,this.error=l,this.path=p}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Ku{constructor(u,l){this.snapshotCallback=u,this.cancelCallback=l}onValue(u,l){this.snapshotCallback.call(null,u,l)}onCancel(u){return(0,W.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,u)}get hasCancelCallback(){return!!this.cancelCallback}matches(u){return this.snapshotCallback===u.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===u.snapshotCallback.userCallback&&this.snapshotCallback.context===u.snapshotCallback.context}}class Od{constructor(u,l){this._repo=u,this._path=l}cancel(){const u=new W.BH;return Ur(this._repo,this._path,u.wrapCallback(()=>{})),u.promise}remove(){Io("OnDisconnect.remove",this._path);const u=new W.BH;return Ec(this._repo,this._path,null,u.wrapCallback(()=>{})),u.promise}set(u){Io("OnDisconnect.set",this._path),hl("OnDisconnect.set",u,this._path,!1);const l=new W.BH;return Ec(this._repo,this._path,u,l.wrapCallback(()=>{})),l.promise}setWithPriority(u,l){Io("OnDisconnect.setWithPriority",this._path),hl("OnDisconnect.setWithPriority",u,this._path,!1),fl("OnDisconnect.setWithPriority",l,!1);const p=new W.BH;return function qu(d,u,l,p,E){const M=hr(l,p);d.server_.onDisconnectPut(u.toString(),M.val(!0),(j,se)=>{"ok"===j&&Is(d.onDisconnect_,u,M),Fo(0,E,j,se)})}(this._repo,this._path,u,l,p.wrapCallback(()=>{})),p.promise}update(u){Io("OnDisconnect.update",this._path),Kl("OnDisconnect.update",u,this._path,!1);const l=new W.BH;return function Na(d,u,l,p){if((0,W.xb)(l))return Sn("onDisconnect().update() called with empty data.  Don't do anything."),void Fo(0,p,"ok",void 0);d.server_.onDisconnectMerge(u.toString(),l,(E,M)=>{"ok"===E&&be(l,(j,se)=>{const le=hr(se);Is(d.onDisconnect_,mr(u,j),le)}),Fo(0,p,E,M)})}(this._repo,this._path,u,l.wrapCallback(()=>{})),l.promise}}class ho{constructor(u,l,p,E){this._repo=u,this._path=l,this._queryParams=p,this._orderByCalled=E}get key(){return Wn(this._path)?null:Si(this._path)}get ref(){return new _a(this._repo,this._path)}get _queryIdentifier(){const u=Hs(this._queryParams),l=ct(u);return"{}"===l?"default":l}get _queryObject(){return Hs(this._queryParams)}isEqual(u){if(!((u=(0,W.m9)(u))instanceof ho))return!1;const l=this._repo===u._repo,p=li(this._path,u._path);return l&&p&&this._queryIdentifier===u._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function ls(d){let u="";for(let l=d.pieceNum_;l<d.pieces_.length;l++)""!==d.pieces_[l]&&(u+="/"+encodeURIComponent(String(d.pieces_[l])));return u||"/"}(this._path)}}function bu(d,u){if(!0===d._orderByCalled)throw new Error(u+": You can't combine multiple orderBy calls.")}function sa(d){let u=null,l=null;if(d.hasStart()&&(u=d.getIndexStartValue()),d.hasEnd()&&(l=d.getIndexEndValue()),d.getIndex()===Yn){const p="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",E="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(d.hasStart()){if(d.getIndexStartName()!==bn)throw new Error(p);if("string"!=typeof u)throw new Error(E)}if(d.hasEnd()){if(d.getIndexEndName()!==Fn)throw new Error(p);if("string"!=typeof l)throw new Error(E)}}else if(d.getIndex()===$t){if(null!=u&&!dl(u)||null!=l&&!dl(l))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,W.hu)(d.getIndex()instanceof Ei||d.getIndex()===Us,"unknown index type."),null!=u&&"object"==typeof u||null!=l&&"object"==typeof l)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Cu(d){if(d.hasStart()&&d.hasEnd()&&d.hasLimit()&&!d.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class _a extends ho{constructor(u,l){super(u,l,new Uo,!1)}get parent(){const u=Cs(this._path);return null===u?null:new _a(this._repo,u)}get root(){let u=this;for(;null!==u.parent;)u=u.parent;return u}}class Kr{constructor(u,l,p){this._node=u,this.ref=l,this._index=p}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(u){const l=new _t(u),p=oa(this.ref,u);return new Kr(this._node.getChild(l),p,$t)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(u){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(p,E)=>u(new Kr(E,oa(this.ref,p),$t)))}hasChild(u){const l=new _t(u);return!this._node.getChild(l).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Zu(d,u){return(d=(0,W.m9)(d))._checkNotDeleted("ref"),void 0!==u?oa(d._root,u):d._root}function Qc(d,u){(d=(0,W.m9)(d))._checkNotDeleted("refFromURL");const l=Ja(u,d._repo.repoInfo_.nodeAdmin);pl("refFromURL",l);const p=l.repoInfo;return!d._repo.repoInfo_.isCustomHost()&&p.host!==d._repo.repoInfo_.host&&fr("refFromURL: Host name does not match the current database: (found "+p.host+" but expected "+d._repo.repoInfo_.host+")"),Zu(d,l.path.toString())}function oa(d,u){return null===an((d=(0,W.m9)(d))._path)?(l=u,l&&(l=l.replace(/^\/*\.info(\/|$)/,"/")),Oa("child","path",l,!1)):Oa("child","path",u,!1),new _a(d._repo,mr(d._path,u));var l}function ml(d,u){d=(0,W.m9)(d),Io("set",d._path),hl("set",u,d._path,!1);const l=new W.BH;return zu(d._repo,d._path,u,null,l.wrapCallback(()=>{})),l.promise}function Xa(d,u){Kl("update",u,d._path,!1);const l=new W.BH;return function ph(d,u,l,p){Yl(d,"update",{path:u.toString(),value:l});let E=!0;const M=Gu(d),j={};if(be(l,(se,le)=>{E=!1,j[se]=Za(mr(u,se),hr(le),d.serverSyncTree_,M)}),E)Sn("update() called with empty data.  Don't do anything."),Fo(0,p,"ok",void 0);else{const se=Wu(d),le=function me(d,u,l,p){!function T(d,u,l,p){(0,W.hu)(p>d.lastWriteId,"Stacking an older merge on top of newer ones"),d.allWrites.push({path:u,children:l,writeId:p,visible:!0}),d.visibleWrites=zi(d.visibleWrites,u,l),d.lastWriteId=p}(d.pendingWriteTree_,u,l,p);const E=Je.fromObject(l);return Pa(d,new Ds({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},u,E))}(d.serverSyncTree_,u,j,se);Sl(d.eventQueue_,le),d.server_.merge(u.toString(),l,(Ce,ut)=>{const rt="ok"===Ce;rt||vn("update at "+u+" failed: "+Ce);const At=Ge(d.serverSyncTree_,se,!rt),Tn=At.length>0?ka(d,u):u;ia(d.eventQueue_,Tn,At),Fo(0,p,Ce,ut)}),be(l,Ce=>{const ut=Fa(d,mr(u,Ce));ka(d,ut)}),ia(d.eventQueue_,u,[])}}(d._repo,d._path,u,l.wrapCallback(()=>{})),l.promise}function Yu(d){return function Rl(d,u){const l=function $o(d,u){const l=u._path;let p=null;d.syncPointTree_.foreachOnPath(l,(Ce,ut)=>{const rt=ai(Ce,l);p=p||Ma(ut,rt)});let E=d.syncPointTree_.get(l);E?p=p||Ma(E,Ut()):(E=new As,d.syncPointTree_=d.syncPointTree_.set(l,E));const M=null!=p,j=M?new Ii(p,!0,!1):null;return function pa(d){return S(d.viewCache_)}(ea(E,u,no(d.pendingWriteTree_,u._path),M?j.getNode():G.EMPTY_NODE,M))}(d.serverSyncTree_,u);return null!=l?Promise.resolve(l):d.server_.get(u).then(p=>{const E=hr(p).withIndex(u._queryParams.getIndex()),M=et(d.serverSyncTree_,u._path,E);return xl(d.eventQueue_,u._path,M),Promise.resolve(E)},p=>(Yl(d,"get for query "+(0,W.Pz)(u)+" failed: "+p),Promise.reject(new Error(p))))}((d=(0,W.m9)(d))._repo,d).then(u=>new Kr(u,new _a(d._repo,d._path),d._queryParams.getIndex()))}class Iu{constructor(u){this.callbackContext=u}respondsTo(u){return"value"===u}createEvent(u,l){const p=l._queryParams.getIndex();return new zo("value",this,new Kr(u.snapshotNode,new _a(l._repo,l._path),p))}getEventRunner(u){return"cancel"===u.getEventType()?()=>this.callbackContext.onCancel(u.error):()=>this.callbackContext.onValue(u.snapshot,null)}createCancelEvent(u,l){return this.callbackContext.hasCancelCallback?new Jl(this,u,l):null}matches(u){return u instanceof Iu&&(!u.callbackContext||!this.callbackContext||u.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class yl{constructor(u,l){this.eventType=u,this.callbackContext=l}respondsTo(u){let l="children_added"===u?"child_added":u;return l="children_removed"===l?"child_removed":l,this.eventType===l}createCancelEvent(u,l){return this.callbackContext.hasCancelCallback?new Jl(this,u,l):null}createEvent(u,l){(0,W.hu)(null!=u.childName,"Child events should have a childName.");const p=oa(new _a(l._repo,l._path),u.childName),E=l._queryParams.getIndex();return new zo(u.type,this,new Kr(u.snapshotNode,p,E),u.prevName)}getEventRunner(u){return"cancel"===u.getEventType()?()=>this.callbackContext.onCancel(u.error):()=>this.callbackContext.onValue(u.snapshot,u.prevName)}matches(u){return u instanceof yl&&this.eventType===u.eventType&&(!this.callbackContext||!u.callbackContext||this.callbackContext.matches(u.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Xl(d,u,l,p,E){let M;if("object"==typeof p&&(M=void 0,E=p),"function"==typeof p&&(M=p),E&&E.onlyOnce){const le=l,Ce=(ut,rt)=>{vu(d._repo,d,se),le(ut,rt)};Ce.userCallback=l.userCallback,Ce.context=l.context,l=Ce}const j=new Ku(l,M||void 0),se="value"===u?new Iu(j):new yl(u,j);return function Ji(d,u,l){let p;p=".info"===an(u._path)?ys(d.infoSyncTree_,u,l):ys(d.serverSyncTree_,u,l),xl(d.eventQueue_,u._path,p)}(d._repo,d,se),()=>vu(d._repo,d,se)}function Qu(d,u,l,p){return Xl(d,"value",u,l,p)}function Jc(d,u,l,p){return Xl(d,"child_added",u,l,p)}function Xc(d,u,l,p){return Xl(d,"child_changed",u,l,p)}function ed(d,u,l,p){return Xl(d,"child_moved",u,l,p)}function kd(d,u,l,p){return Xl(d,"child_removed",u,l,p)}function v(d,u,l){let p=null;const E=l?new Ku(l):null;"value"===u?p=new Iu(E):u&&(p=new yl(u,E)),vu(d._repo,d,p)}class f{}class y extends f{constructor(u,l){super(),this._value=u,this._key=l}_apply(u){hl("endAt",this._value,u._path,!0);const l=Bo(u._queryParams,this._value,this._key);if(Cu(l),sa(l),u._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ho(u._repo,u._path,l,u._orderByCalled)}}class K extends f{constructor(u,l){super(),this._value=u,this._key=l}_apply(u){hl("endBefore",this._value,u._path,!1);const l=function fs(d,u,l){let p,E;return d.index_===Yn?("string"==typeof u&&(u=hs(u)),E=Bo(d,u,l)):(p=null==l?bn:hs(l),E=Bo(d,u,p)),E.endBeforeSet_=!0,E}(u._queryParams,this._value,this._key);if(Cu(l),sa(l),u._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ho(u._repo,u._path,l,u._orderByCalled)}}class Ve extends f{constructor(u,l){super(),this._value=u,this._key=l}_apply(u){hl("startAt",this._value,u._path,!0);const l=xo(u._queryParams,this._value,this._key);if(Cu(l),sa(l),u._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new ho(u._repo,u._path,l,u._orderByCalled)}}class tn extends f{constructor(u,l){super(),this._value=u,this._key=l}_apply(u){hl("startAfter",this._value,u._path,!1);const l=function js(d,u,l){let p;if(d.index_===Yn)"string"==typeof u&&(u=Bi(u)),p=xo(d,u,l);else{let E;E=null==l?Fn:Bi(l),p=xo(d,u,E)}return p.startAfterSet_=!0,p}(u._queryParams,this._value,this._key);if(Cu(l),sa(l),u._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new ho(u._repo,u._path,l,u._orderByCalled)}}class rr extends f{constructor(u){super(),this._limit=u}_apply(u){if(u._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new ho(u._repo,u._path,function rl(d,u){const l=d.copy();return l.limitSet_=!0,l.limit_=u,l.viewFrom_="l",l}(u._queryParams,this._limit),u._orderByCalled)}}class Jr extends f{constructor(u){super(),this._limit=u}_apply(u){if(u._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new ho(u._repo,u._path,function Zo(d,u){const l=d.copy();return l.limitSet_=!0,l.limit_=u,l.viewFrom_="r",l}(u._queryParams,this._limit),u._orderByCalled)}}class Ol extends f{constructor(u){super(),this._path=u}_apply(u){bu(u,"orderByChild");const l=new _t(this._path);if(Wn(l))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const p=new Ei(l),E=Yo(u._queryParams,p);return sa(E),new ho(u._repo,u._path,E,!0)}}class Xu extends f{_apply(u){bu(u,"orderByKey");const l=Yo(u._queryParams,Yn);return sa(l),new ho(u._repo,u._path,l,!0)}}class yh extends f{_apply(u){bu(u,"orderByPriority");const l=Yo(u._queryParams,$t);return sa(l),new ho(u._repo,u._path,l,!0)}}class Dc extends f{_apply(u){bu(u,"orderByValue");const l=Yo(u._queryParams,Us);return sa(l),new ho(u._repo,u._path,l,!0)}}class rd extends f{constructor(u,l){super(),this._value=u,this._key=l}_apply(u){if(hl("equalTo",this._value,u._path,!1),u._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(u._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new y(this._value,this._key)._apply(new Ve(this._value,this._key)._apply(u))}}function La(d,...u){let l=(0,W.m9)(d);for(const p of u)l=p._apply(l);return l}(function xa(d){(0,W.hu)(!so,"__referenceConstructor has already been defined"),so=d})(_a),function Cl(d){(0,W.hu)(!ga,"__referenceConstructor has already been defined"),ga=d}(_a);const sd={};function tf(d,u,l,p,E){let M=p||d.options.databaseURL;void 0===M&&(d.options.projectId||fr("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Sn("Using default host for project ",d.options.projectId),M=`${d.options.projectId}-default-rtdb.firebaseio.com`);let le,Ce,j=Ja(M,E),se=j.repoInfo;"undefined"!=typeof process&&process.env&&(Ce=process.env.FIREBASE_DATABASE_EMULATOR_HOST),Ce?(le=!0,M=`http://${Ce}?ns=${se.namespace}`,j=Ja(M,E),se=j.repoInfo):le=!j.repoInfo.secure;const ut=E&&le?new qt(qt.OWNER):new Pn(d.name,d.options,u);pl("Invalid Firebase Database URL",j),Wn(j.path)||fr("Database URL must point to the root of a Firebase Database (not including a child path).");const rt=function Fd(d,u,l,p){let E=sd[u.name];E||(E={},sd[u.name]=E);let M=E[d.toURLString()];return M&&fr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),M=new _c(d,false,l,p),E[d.toURLString()]=M,M}(se,d,ut,new tr(d.name,l));return new Ld(rt,d)}class Ld{constructor(u,l){this._repoInternal=u,this.app=l,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function Xh(d,u,l){if(d.stats_=cr(d.repoInfo_),d.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)d.server_=new Mo(d.repoInfo_,(p,E,M,j)=>{Pl(d,p,E,M,j)},d.authTokenProvider_,d.appCheckProvider_),setTimeout(()=>Ya(d,!0),0);else{if(null!=l){if("object"!=typeof l)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,W.Pz)(l)}catch(p){throw new Error("Invalid authOverride provided: "+p)}}d.persistentConnection_=new Gi(d.repoInfo_,u,(p,E,M,j)=>{Pl(d,p,E,M,j)},p=>{Ya(d,p)},p=>{!function wc(d,u){be(u,(l,p)=>{Zc(d,l,p)})}(d,p)},d.authTokenProvider_,d.appCheckProvider_,l),d.server_=d.persistentConnection_}d.authTokenProvider_.addTokenChangeListener(p=>{d.server_.refreshAuthToken(p)}),d.appCheckProvider_.addTokenChangeListener(p=>{d.server_.refreshAppCheckToken(p.token)}),d.statsReporter_=function Zr(d,u){const l=d.toString();return _n[l]||(_n[l]=u()),_n[l]}(d.repoInfo_,()=>new to(d.stats_,d.server_)),d.infoData_=new Ga,d.infoSyncTree_=new H({startListening:(p,E,M,j)=>{let se=[];const le=d.infoData_.getNode(p._path);return le.isEmpty()||(se=et(d.infoSyncTree_,p._path,le),setTimeout(()=>{j("ok")},0)),se},stopListening:()=>{}}),Zc(d,"connected",!1),d.serverSyncTree_=new H({startListening:(p,E,M,j)=>(d.server_.listen(p,M,E,(se,le)=>{const Ce=j(se,le);ia(d.eventQueue_,p._path,Ce)}),[]),stopListening:(p,E)=>{d.server_.unlisten(p,E)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new _a(this._repo,Ut())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function nf(d,u){const l=sd[u];(!l||l[d.key]!==d)&&fr(`Database ${u}(${d.repoInfo_}) has already been deleted.`),Fr(d),delete l[d.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(u){null===this._rootInternal&&fr("Cannot call "+u+" on a deleted database.")}}function kl(d,u){ir(d,u)}const of={".sv":"timestamp"};class pp{constructor(u,l){this.committed=u,this.snapshot=l}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Gi.prototype.simpleListen=function(d,u){this.sendRequest("q",{p:d},u)},Gi.prototype.echo=function(d,u){this.sendRequest("echo",{d},u)},function el(d){En(Oe.SDK_VERSION),(0,Oe._registerComponent)(new Dt.wA("database",(u,{instanceIdentifier:l})=>tf(u.getProvider("app").getImmediate(),u.getProvider("auth-internal"),u.getProvider("app-check-internal"),l),"PUBLIC").setMultipleInstances(!0)),(0,Oe.registerVersion)(He,"0.12.8",d),(0,Oe.registerVersion)(He,"0.12.8","esm2017")}();const Ac=new ze.Yd("@firebase/database-compat"),ec=function(d){Ac.warn("FIREBASE WARNING: "+d)};class wh{constructor(u){this._delegate=u}cancel(u){(0,W.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,W.Wj)("OnDisconnect.cancel","onComplete",u,!0);const l=this._delegate.cancel();return u&&l.then(()=>u(null),p=>u(p)),l}remove(u){(0,W.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,W.Wj)("OnDisconnect.remove","onComplete",u,!0);const l=this._delegate.remove();return u&&l.then(()=>u(null),p=>u(p)),l}set(u,l){(0,W.Dv)("OnDisconnect.set",1,2,arguments.length),(0,W.Wj)("OnDisconnect.set","onComplete",l,!0);const p=this._delegate.set(u);return l&&p.then(()=>l(null),E=>l(E)),p}setWithPriority(u,l,p){(0,W.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,W.Wj)("OnDisconnect.setWithPriority","onComplete",p,!0);const E=this._delegate.setWithPriority(u,l);return p&&E.then(()=>p(null),M=>p(M)),E}update(u,l){if((0,W.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(u)){const E={};for(let M=0;M<u.length;++M)E[""+M]=u[M];u=E,ec("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,W.Wj)("OnDisconnect.update","onComplete",l,!0);const p=this._delegate.update(u);return l&&p.then(()=>l(null),E=>l(E)),p}}class Eh{constructor(u,l){this.committed=u,this.snapshot=l}toJSON(){return(0,W.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Va{constructor(u,l){this._database=u,this._delegate=l}val(){return(0,W.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,W.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,W.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,W.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(u){return(0,W.Dv)("DataSnapshot.child",0,1,arguments.length),u=String(u),Oa("DataSnapshot.child","path",u,!1),new Va(this._database,this._delegate.child(u))}hasChild(u){return(0,W.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Oa("DataSnapshot.hasChild","path",u,!1),this._delegate.hasChild(u)}getPriority(){return(0,W.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(u){return(0,W.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,W.Wj)("DataSnapshot.forEach","action",u,!1),this._delegate.forEach(l=>u(new Va(this._database,l)))}hasChildren(){return(0,W.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,W.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,W.Dv)("DataSnapshot.ref",0,0,arguments.length),new Ks(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class qs{constructor(u,l){this.database=u,this._delegate=l}on(u,l,p,E){var M;(0,W.Dv)("Query.on",2,4,arguments.length),(0,W.Wj)("Query.on","callback",l,!1);const j=qs.getCancelAndContextArgs_("Query.on",p,E),se=(Ce,ut)=>{l.call(j.context,new Va(this.database,Ce),ut)};se.userCallback=l,se.context=j.context;const le=null===(M=j.cancel)||void 0===M?void 0:M.bind(j.context);switch(u){case"value":return Qu(this._delegate,se,le),l;case"child_added":return Jc(this._delegate,se,le),l;case"child_removed":return kd(this._delegate,se,le),l;case"child_changed":return Xc(this._delegate,se,le),l;case"child_moved":return ed(this._delegate,se,le),l;default:throw new Error((0,W.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(u,l,p){if((0,W.Dv)("Query.off",0,3,arguments.length),function(d,u,l){if(void 0!==u)switch(u){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,W.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,u),(0,W.Wj)("Query.off","callback",l,!0),(0,W.lb)("Query.off","context",p,!0),l){const E=()=>{};E.userCallback=l,E.context=p,v(this._delegate,u,E)}else v(this._delegate,u)}get(){return Yu(this._delegate).then(u=>new Va(this.database,u))}once(u,l,p,E){(0,W.Dv)("Query.once",1,4,arguments.length),(0,W.Wj)("Query.once","callback",l,!0);const M=qs.getCancelAndContextArgs_("Query.once",p,E),j=new W.BH,se=(Ce,ut)=>{const rt=new Va(this.database,Ce);l&&l.call(M.context,rt,ut),j.resolve(rt)};se.userCallback=l,se.context=M.context;const le=Ce=>{M.cancel&&M.cancel.call(M.context,Ce),j.reject(Ce)};switch(u){case"value":Qu(this._delegate,se,le,{onlyOnce:!0});break;case"child_added":Jc(this._delegate,se,le,{onlyOnce:!0});break;case"child_removed":kd(this._delegate,se,le,{onlyOnce:!0});break;case"child_changed":Xc(this._delegate,se,le,{onlyOnce:!0});break;case"child_moved":ed(this._delegate,se,le,{onlyOnce:!0});break;default:throw new Error((0,W.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return j.promise}limitToFirst(u){return(0,W.Dv)("Query.limitToFirst",1,1,arguments.length),new qs(this.database,La(this._delegate,function Hn(d){if("number"!=typeof d||Math.floor(d)!==d||d<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new rr(d)}(u)))}limitToLast(u){return(0,W.Dv)("Query.limitToLast",1,1,arguments.length),new qs(this.database,La(this._delegate,function aa(d){if("number"!=typeof d||Math.floor(d)!==d||d<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Jr(d)}(u)))}orderByChild(u){return(0,W.Dv)("Query.orderByChild",1,1,arguments.length),new qs(this.database,La(this._delegate,function Ju(d){if("$key"===d)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===d)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===d)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Oa("orderByChild","path",d,!1),new Ol(d)}(u)))}orderByKey(){return(0,W.Dv)("Query.orderByKey",0,0,arguments.length),new qs(this.database,La(this._delegate,function td(){return new Xu}()))}orderByPriority(){return(0,W.Dv)("Query.orderByPriority",0,0,arguments.length),new qs(this.database,La(this._delegate,function Nl(){return new yh}()))}orderByValue(){return(0,W.Dv)("Query.orderByValue",0,0,arguments.length),new qs(this.database,La(this._delegate,function nd(){return new Dc}()))}startAt(u=null,l){return(0,W.Dv)("Query.startAt",0,2,arguments.length),new qs(this.database,La(this._delegate,function ft(d=null,u){return Zl("startAt","key",u,!0),new Ve(d,u)}(u,l)))}startAfter(u=null,l){return(0,W.Dv)("Query.startAfter",0,2,arguments.length),new qs(this.database,La(this._delegate,function ln(d,u){return Zl("startAfter","key",u,!0),new tn(d,u)}(u,l)))}endAt(u=null,l){return(0,W.Dv)("Query.endAt",0,2,arguments.length),new qs(this.database,La(this._delegate,function D(d,u){return Zl("endAt","key",u,!0),new y(d,u)}(u,l)))}endBefore(u=null,l){return(0,W.Dv)("Query.endBefore",0,2,arguments.length),new qs(this.database,La(this._delegate,function ae(d,u){return Zl("endBefore","key",u,!0),new K(d,u)}(u,l)))}equalTo(u,l){return(0,W.Dv)("Query.equalTo",1,2,arguments.length),new qs(this.database,La(this._delegate,function Tc(d,u){return Zl("equalTo","key",u,!0),new rd(d,u)}(u,l)))}toString(){return(0,W.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,W.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(u){if((0,W.Dv)("Query.isEqual",1,1,arguments.length),!(u instanceof qs))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(u._delegate)}static getCancelAndContextArgs_(u,l,p){const E={cancel:void 0,context:void 0};if(l&&p)E.cancel=l,(0,W.Wj)(u,"cancel",E.cancel,!0),E.context=p,(0,W.lb)(u,"context",E.context,!0);else if(l)if("object"==typeof l&&null!==l)E.context=l;else{if("function"!=typeof l)throw new Error((0,W.gK)(u,"cancelOrContext")+" must either be a cancel callback or a context object.");E.cancel=l}return E}get ref(){return new Ks(this.database,new _a(this._delegate._repo,this._delegate._path))}}class Ks extends qs{constructor(u,l){super(u,new ho(l._repo,l._path,new Uo,!1)),this.database=u,this._delegate=l}getKey(){return(0,W.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(u){return(0,W.Dv)("Reference.child",1,1,arguments.length),"number"==typeof u&&(u=String(u)),new Ks(this.database,oa(this._delegate,u))}getParent(){(0,W.Dv)("Reference.parent",0,0,arguments.length);const u=this._delegate.parent;return u?new Ks(this.database,u):null}getRoot(){return(0,W.Dv)("Reference.root",0,0,arguments.length),new Ks(this.database,this._delegate.root)}set(u,l){(0,W.Dv)("Reference.set",1,2,arguments.length),(0,W.Wj)("Reference.set","onComplete",l,!0);const p=ml(this._delegate,u);return l&&p.then(()=>l(null),E=>l(E)),p}update(u,l){if((0,W.Dv)("Reference.update",1,2,arguments.length),Array.isArray(u)){const E={};for(let M=0;M<u.length;++M)E[""+M]=u[M];u=E,ec("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Io("Reference.update",this._delegate._path),(0,W.Wj)("Reference.update","onComplete",l,!0);const p=Xa(this._delegate,u);return l&&p.then(()=>l(null),E=>l(E)),p}setWithPriority(u,l,p){(0,W.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,W.Wj)("Reference.setWithPriority","onComplete",p,!0);const E=function Nd(d,u,l){if(Io("setWithPriority",d._path),hl("setWithPriority",u,d._path,!1),fl("setWithPriority",l,!1),".length"===d.key||".keys"===d.key)throw"setWithPriority failed: "+d.key+" is a read-only object.";const p=new W.BH;return zu(d._repo,d._path,u,l,p.wrapCallback(()=>{})),p.promise}(this._delegate,u,l);return p&&E.then(()=>p(null),M=>p(M)),E}remove(u){(0,W.Dv)("Reference.remove",0,1,arguments.length),(0,W.Wj)("Reference.remove","onComplete",u,!0);const l=function zs(d){return Io("remove",d._path),ml(d,null)}(this._delegate);return u&&l.then(()=>u(null),p=>u(p)),l}transaction(u,l,p){(0,W.Dv)("Reference.transaction",1,3,arguments.length),(0,W.Wj)("Reference.transaction","transactionUpdate",u,!1),(0,W.Wj)("Reference.transaction","onComplete",l,!0),function(d,u,l,p){if(void 0!==l&&"boolean"!=typeof l)throw new Error((0,W.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,p);const E=function Du(d,u,l){var p;if(d=(0,W.m9)(d),Io("Reference.transaction",d._path),".length"===d.key||".keys"===d.key)throw"Reference.transaction failed: "+d.key+" is a read-only object.";const E=null===(p=null==l?void 0:l.applyLocally)||void 0===p||p,M=new W.BH,se=Qu(d,()=>{});return function Rd(d,u,l,p,E,M){Yl(d,"transaction on "+u);const j={path:u,update:l,onComplete:p,status:null,order:Vn(),applyLocally:M,retryCount:0,unwatcher:E,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},se=Wo(d,u,void 0);j.currentInputSnapshot=se;const le=j.update(se.val());if(void 0===le)j.unwatcher(),j.currentOutputSnapshotRaw=null,j.currentOutputSnapshotResolved=null,j.onComplete&&j.onComplete(null,!1,j.currentInputSnapshot);else{yu("transaction failed: Data returned ",le,j.path),j.status=0;const Ce=ma(d.transactionQueueTree_,u),ut=ul(Ce)||[];let rt;ut.push(j),ql(Ce,ut),"object"==typeof le&&null!==le&&(0,W.r3)(le,".priority")?(rt=(0,W.DV)(le,".priority"),(0,W.hu)(dl(rt),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):rt=(Li(d.serverSyncTree_,u)||G.EMPTY_NODE).getPriority().val();const At=Gu(d),Tn=hr(le,rt),Qn=gc(Tn,se,At);j.currentOutputSnapshotRaw=Tn,j.currentOutputSnapshotResolved=Qn,j.currentWriteId=Wu(d);const Pi=X(d.serverSyncTree_,u,Qn,j.currentWriteId,j.applyLocally);ia(d.eventQueue_,u,Pi),Ql(d,d.transactionQueueTree_)}}(d._repo,d._path,u,(le,Ce,ut)=>{let rt=null;le?M.reject(le):(rt=new Kr(ut,new _a(d._repo,d._path),$t),M.resolve(new pp(Ce,rt)))},se,E),M.promise}(this._delegate,u,{applyLocally:p}).then(M=>new Eh(M.committed,new Va(this.database,M.snapshot)));return l&&E.then(M=>l(null,M.committed,M.snapshot),M=>l(M,!1,null)),E}setPriority(u,l){(0,W.Dv)("Reference.setPriority",1,2,arguments.length),(0,W.Wj)("Reference.setPriority","onComplete",l,!0);const p=function Ic(d,u){d=(0,W.m9)(d),Io("setPriority",d._path),fl("setPriority",u,!1);const l=new W.BH;return zu(d._repo,mr(d._path,".priority"),u,null,l.wrapCallback(()=>{})),l.promise}(this._delegate,u);return l&&p.then(()=>l(null),E=>l(E)),p}push(u,l){(0,W.Dv)("Reference.push",0,2,arguments.length),(0,W.Wj)("Reference.push","onComplete",l,!0);const p=function Cc(d,u){d=(0,W.m9)(d),Io("push",d._path),hl("push",u,d._path,!0);const l=vc(d._repo),p=Bs(l),E=oa(d,p),M=oa(d,p);let j;return j=null!=u?ml(M,u).then(()=>M):Promise.resolve(M),E.then=j.then.bind(j),E.catch=j.then.bind(j,void 0),E}(this._delegate,u),E=p.then(j=>new Ks(this.database,j));l&&E.then(()=>l(null),j=>l(j));const M=new Ks(this.database,p);return M.then=E.then.bind(E),M.catch=E.catch.bind(E,void 0),M}onDisconnect(){return Io("Reference.onDisconnect",this._delegate._path),new wh(new Od(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class _l{constructor(u,l){this._delegate=u,this.app=l,this.INTERNAL={delete:()=>this._delegate._delete()}}useEmulator(u,l,p={}){!function sf(d,u,l,p={}){(d=(0,W.m9)(d))._checkNotDeleted("useEmulator"),d._instanceStarted&&fr("Cannot call useEmulator() after instance has already been initialized.");const E=d._repoInternal;let M;if(E.repoInfo_.nodeAdmin)p.mockUserToken&&fr('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),M=new qt(qt.OWNER);else if(p.mockUserToken){const j="string"==typeof p.mockUserToken?p.mockUserToken:(0,W.Sg)(p.mockUserToken,d.app.options.projectId);M=new qt(j)}!function fp(d,u,l,p){d.repoInfo_=new on(`${u}:${l}`,!1,d.repoInfo_.namespace,d.repoInfo_.webSocketOnly,d.repoInfo_.nodeAdmin,d.repoInfo_.persistenceKey,d.repoInfo_.includeNamespaceInQueryParams),p&&(d.authTokenProvider_=p)}(E,u,l,M)}(this._delegate,u,l,p)}ref(u){if((0,W.Dv)("database.ref",0,1,arguments.length),u instanceof Ks){const l=Qc(this._delegate,u.toString());return new Ks(this,l)}{const l=Zu(this._delegate,u);return new Ks(this,l)}}refFromURL(u){(0,W.Dv)("database.refFromURL",1,1,arguments.length);const p=Qc(this._delegate,u);return new Ks(this,p)}goOffline(){return(0,W.Dv)("database.goOffline",0,0,arguments.length),function _h(d){(d=(0,W.m9)(d))._checkNotDeleted("goOffline"),Fr(d._repo)}(this._delegate)}goOnline(){return(0,W.Dv)("database.goOnline",0,0,arguments.length),function wt(d){(d=(0,W.m9)(d))._checkNotDeleted("goOnline"),function Vi(d){d.persistentConnection_&&d.persistentConnection_.resume(_u)}(d._repo)}(this._delegate)}}_l.ServerValue={TIMESTAMP:function od(){return of}(),increment:d=>function Fl(d){return{".sv":{increment:d}}}(d)};var xc=Object.freeze({__proto__:null,initStandalone:function Sc({app:d,url:u,version:l,customAuthImpl:p,namespace:E,nodeAdmin:M=!1}){En(l);const j=new Dt.zt("auth-internal",new Dt.H0("database-standalone"));return j.setComponent(new Dt.wA("auth-internal",()=>p,"PRIVATE")),{instance:new _l(tf(d,j,void 0,u,M),d),namespace:E}}});const Bd=_l.ServerValue;!function jd(d){d.INTERNAL.registerComponent(new Dt.wA("database-compat",(u,{instanceIdentifier:l})=>{const p=u.getProvider("app-compat").getImmediate(),E=u.getProvider("database").getImmediate({identifier:l});return new _l(E,p)},"PUBLIC").setServiceProps({Reference:Ks,Query:qs,Database:_l,DataSnapshot:Va,enableLogging:kl,INTERNAL:xc,ServerValue:Bd}).setMultipleInstances(!0)),d.registerVersion("@firebase/database-compat","0.1.8")}(at.Z);var lf=z(440);function Ch(d){return null==d}function Hd(d){return"function"==typeof d.set}function qo(d,u){return Hd(u)?u:d.ref(u)}function Tu(d,u){if(function gp(d){return"string"==typeof d}(d))return u.stringCase();if(Hd(d))return u.firebaseCase();if(function bh(d){return"function"==typeof d.exportVal}(d))return u.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof d)}function Mc(d,u,l="on",p=Pe.z){return new Ae.y(E=>{let M=null;return M=d[l](u,(j,se)=>{p.schedule(()=>{E.next({snapshot:j,prevKey:se})}),"once"===l&&p.schedule(()=>E.complete())},j=>{p.schedule(()=>E.error(j))}),"on"===l?{unsubscribe(){null!=M&&d.off(u,M)}}:{unsubscribe(){}}}).pipe((0,Ue.U)(E=>{const{snapshot:M,prevKey:j}=E;let se=null;return M.exists()&&(se=M.key),{type:u,payload:M,prevKey:j,key:se}}),(0,We.B)())}function df(d,u){const l=d.length;for(let p=0;p<l;p++)if(d[p].payload.key===u)return p;return-1}function yp(d,u){const{payload:l,prevKey:p,key:E}=u,M=df(d,E),j=function mp(d,u){if(Ch(u))return 0;{const l=df(d,u);return-1===l?d.length:l+1}}(d,p);switch(u.type){case"value":if(u.payload&&u.payload.exists()){let se=null;u.payload.forEach(le=>{const Ce={payload:le,type:"value",prevKey:se,key:le.key};return se=le.key,d=[...d,Ce],!1})}return d;case"child_added":if(M>-1){const se=d[M-1];(se&&se.key||null)!==p&&(d=d.filter(le=>le.payload.key!==l.key)).splice(j,0,u)}else{if(null==p)return[u,...d];(d=d.slice()).splice(j,0,u)}return d;case"child_removed":return d.filter(se=>se.payload.key!==l.key);case"child_changed":return d.map(se=>se.payload.key===E?u:se);case"child_moved":if(M>-1){const se=d.splice(M,1)[0];return(d=d.slice()).splice(j,0,se),d}return d;default:return d}}function tc(d){return(Ch(d)||0===d.length)&&(d=["child_added","child_removed","child_changed","child_moved"]),d}function eu(d,u,l){return function cf(d,u,l){return Mc(d,"value","once",l).pipe((0,_e.w)(p=>{const E=[(0,xe.of)(p)];return u.forEach(M=>E.push(Mc(d,M,"on",l))),(0,je.T)(...E).pipe((0,de.R)(yp,[]))}),(0,Fe.x)())}(d,u=tc(u),l)}function Au(d,u,l){const p=(u=tc(u)).map(E=>Mc(d,E,"on",l));return(0,je.T)(...p)}function ad(d,u){return function(p,E){return Tu(p,{stringCase:()=>d.child(p)[u](E),firebaseCase:()=>p[u](E),snapshotCase:()=>p.ref[u](E)})}}function nc(d){return function(l){return l?Tu(l,{stringCase:()=>d.child(l).remove(),firebaseCase:()=>l.remove(),snapshotCase:()=>l.ref.remove()}):d.remove()}}function Ua(d,u){return function(){return Mc(d,"value","on",u)}}z(127);const Gd=new _.OlP("angularfire2.realtimeDatabaseURL"),Rc=new _.OlP("angularfire2.database.use-emulator");let Vl=(()=>{class d{constructor(l,p,E,M,j,se,le,Ce,ut,rt,At,Tn,Qn,Pi,Do){this.schedulers=se;const Oc=le,Ba=(0,nt.on)(l,j,p);Ce&&(0,B.nw)(Ba,j,ut,At,Tn,Qn,rt,Pi),this.database=(0,nt.cc)(`${Ba.name}.database.${E}`,"AngularFireDatabase",Ba.name,()=>{const Su=j.runOutsideAngular(()=>Ba.database(E||void 0));return Oc&&Su.useEmulator(...Oc),Su},[Oc])}list(l,p){const E=this.schedulers.ngZone.runOutsideAngular(()=>qo(this.database,l));let M=E;return p&&(M=p(E)),function $d(d,u){const l=u.schedulers.outsideAngular,p=u.schedulers.ngZone.run(()=>d.ref);return{query:d,update:ad(p,"update"),set:ad(p,"set"),push:E=>p.push(E),remove:nc(p),snapshotChanges:E=>eu(d,E,l).pipe(dt.iC),stateChanges:E=>Au(d,E,l).pipe(dt.iC),auditTrail:E=>function hf(d,u,l){return function ff(d,u,l){return function Dr(d,u){return Mc(d,"value","on",u).pipe((0,Ue.U)(l=>{let p;return l.payload.forEach(E=>(p=E.key,!1)),{data:l,lastKeyToLoad:p}}))}(d,l).pipe(function ke(...d){const u=(0,yt.jO)(d);return(0,Mt.e)((l,p)=>{const E=d.length,M=new Array(E);let j=d.map(()=>!1),se=!1;for(let le=0;le<E;le++)(0,Et.Xf)(d[le]).subscribe((0,pt.x)(p,Ce=>{M[le]=Ce,!se&&!j[le]&&(j[le]=!0,(se=j.every(Rt.y))&&(j=null))},tt.Z));l.subscribe((0,pt.x)(p,le=>{if(se){const Ce=[le,...M];p.next(u?u(...Ce):Ce)}}))})}(u),(0,Ue.U)(([E,M])=>{const j=E.lastKeyToLoad,se=M.map(le=>le.key);return{actions:M,lastKeyToLoad:j,loadedKeys:se}}),function Ht(d){return(0,Mt.e)((u,l)=>{let p=!1,E=0;u.subscribe((0,pt.x)(l,M=>(p||(p=!d(M,E++)))&&l.next(M)))})}(E=>-1===E.loadedKeys.indexOf(E.lastKeyToLoad)),(0,Ue.U)(E=>E.actions))}(d,Au(d,u).pipe((0,de.R)((E,M)=>[...E,M],[])),l)}(d,E,l).pipe(dt.iC),valueChanges:(E,M)=>eu(d,E,l).pipe((0,Ue.U)(se=>se.map(le=>M&&M.idField?Object.assign(Object.assign({},le.payload.val()),{[M.idField]:le.key}):le.payload.val())),dt.iC)}}(M,this)}object(l){return function Pc(d,u){return{query:d,snapshotChanges:()=>Ua(d,u.schedulers.outsideAngular)().pipe(dt.iC),update:l=>d.ref.update(l),set:l=>d.ref.set(l),remove:()=>d.ref.remove(),valueChanges:()=>Ua(d,u.schedulers.outsideAngular)().pipe(dt.iC,(0,Ue.U)(p=>p.payload.exists()?p.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>qo(this.database,l)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return d.\u0275fac=function(l){return new(l||d)(_.LFG(nt.Dh),_.LFG(nt.xv,8),_.LFG(Gd,8),_.LFG(_.Lbi),_.LFG(_.R0b),_.LFG(dt.HU),_.LFG(Rc,8),_.LFG(B.zQ,8),_.LFG(B.Qv,8),_.LFG(B.L6,8),_.LFG(B._Q,8),_.LFG(B.rT,8),_.LFG(B.lh,8),_.LFG(B.f7,8),_.LFG(lf.nm,8))},d.\u0275prov=_.Yz7({token:d,factory:d.\u0275fac,providedIn:"any"}),d})(),Ih=(()=>{class d{constructor(l,p,E){this.auth=l,this.firestore=p,this.database=E,this.logueado=!1,this.userLogueado="",l.authState.subscribe(M=>this.userLogueado=M),this.mensajes=this.database.list("/chat").valueChanges()}login(l){return this.auth.signInWithEmailAndPassword(l.email,l.clave)}LogOut(){return this.auth.signOut()}SubirLog(l,p){return this.firestore.collection(p).add(l)}MandarMensaje(l){this.database.list("/chat").push(l)}Registro(l){return this.auth.createUserWithEmailAndPassword(l.email,l.clave)}TraerRegistros(){return this.firestore.collection("registros").valueChanges({idField:"id"})}EditarRegistro(l,p){return this.firestore.collection("registros").doc(l).update(p)}}return d.\u0275fac=function(l){return new(l||d)(_.LFG(B.zQ),_.LFG(oe.ST),_.LFG(Vl))},d.\u0275prov=_.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})()},9098:(en,Xe,z)=>{"use strict";var _=z(9808),B=z(5e3);class oe extends _.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Pe extends oe{static makeCurrent(){(0,_.HT)(new Pe)}onAndCancel(fe,re,Ie){return fe.addEventListener(re,Ie,!1),()=>{fe.removeEventListener(re,Ie,!1)}}dispatchEvent(fe,re){fe.dispatchEvent(re)}remove(fe){fe.parentNode&&fe.parentNode.removeChild(fe)}createElement(fe,re){return(re=re||this.getDefaultDocument()).createElement(fe)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(fe){return fe.nodeType===Node.ELEMENT_NODE}isShadowRoot(fe){return fe instanceof DocumentFragment}getGlobalEventTarget(fe,re){return"window"===re?window:"document"===re?fe:"body"===re?fe.body:null}getBaseHref(fe){const re=function xe(){return Ae=Ae||document.querySelector("base"),Ae?Ae.getAttribute("href"):null}();return null==re?null:function Ue(we){je=je||document.createElement("a"),je.setAttribute("href",we);const fe=je.pathname;return"/"===fe.charAt(0)?fe:`/${fe}`}(re)}resetBaseElement(){Ae=null}getUserAgent(){return window.navigator.userAgent}getCookie(fe){return(0,_.Mx)(document.cookie,fe)}}let je,Ae=null;const We=new B.OlP("TRANSITION_ID"),de=[{provide:B.ip1,useFactory:function _e(we,fe,re){return()=>{re.get(B.CZH).donePromise.then(()=>{const Ie=(0,_.q)(),it=fe.querySelectorAll(`style[ng-transition="${we}"]`);for(let Pt=0;Pt<it.length;Pt++)Ie.remove(it[Pt])})}},deps:[We,_.K0,B.zs3],multi:!0}];class Fe{static init(){(0,B.VLi)(new Fe)}addToWindow(fe){B.dqk.getAngularTestability=(Ie,it=!0)=>{const Pt=fe.findTestabilityInTree(Ie,it);if(null==Pt)throw new Error("Could not find testability for element.");return Pt},B.dqk.getAllAngularTestabilities=()=>fe.getAllTestabilities(),B.dqk.getAllAngularRootElements=()=>fe.getAllRootElements(),B.dqk.frameworkStabilizers||(B.dqk.frameworkStabilizers=[]),B.dqk.frameworkStabilizers.push(Ie=>{const it=B.dqk.getAllAngularTestabilities();let Pt=it.length,kn=!1;const pr=function(Ar){kn=kn||Ar,Pt--,0==Pt&&Ie(kn)};it.forEach(function(Ar){Ar.whenStable(pr)})})}findTestabilityInTree(fe,re,Ie){if(null==re)return null;const it=fe.getTestability(re);return null!=it?it:Ie?(0,_.q)().isShadowRoot(re)?this.findTestabilityInTree(fe,re.host,!0):this.findTestabilityInTree(fe,re.parentElement,!0):null}}let Mt=(()=>{class we{build(){return new XMLHttpRequest}}return we.\u0275fac=function(re){return new(re||we)},we.\u0275prov=B.Yz7({token:we,factory:we.\u0275fac}),we})();const pt=new B.OlP("EventManagerPlugins");let Et=(()=>{class we{constructor(re,Ie){this._zone=Ie,this._eventNameToPlugin=new Map,re.forEach(it=>it.manager=this),this._plugins=re.slice().reverse()}addEventListener(re,Ie,it){return this._findPluginFor(Ie).addEventListener(re,Ie,it)}addGlobalEventListener(re,Ie,it){return this._findPluginFor(Ie).addGlobalEventListener(re,Ie,it)}getZone(){return this._zone}_findPluginFor(re){const Ie=this._eventNameToPlugin.get(re);if(Ie)return Ie;const it=this._plugins;for(let Pt=0;Pt<it.length;Pt++){const kn=it[Pt];if(kn.supports(re))return this._eventNameToPlugin.set(re,kn),kn}throw new Error(`No event manager plugin found for event ${re}`)}}return we.\u0275fac=function(re){return new(re||we)(B.LFG(pt),B.LFG(B.R0b))},we.\u0275prov=B.Yz7({token:we,factory:we.\u0275fac}),we})();class Rt{constructor(fe){this._doc=fe}addGlobalEventListener(fe,re,Ie){const it=(0,_.q)().getGlobalEventTarget(this._doc,fe);if(!it)throw new Error(`Unsupported event target ${it} for event ${re}`);return this.addEventListener(it,re,Ie)}}let tt=(()=>{class we{constructor(){this._stylesSet=new Set}addStyles(re){const Ie=new Set;re.forEach(it=>{this._stylesSet.has(it)||(this._stylesSet.add(it),Ie.add(it))}),this.onStylesAdded(Ie)}onStylesAdded(re){}getAllStyles(){return Array.from(this._stylesSet)}}return we.\u0275fac=function(re){return new(re||we)},we.\u0275prov=B.Yz7({token:we,factory:we.\u0275fac}),we})(),yt=(()=>{class we extends tt{constructor(re){super(),this._doc=re,this._hostNodes=new Map,this._hostNodes.set(re.head,[])}_addStylesToHost(re,Ie,it){re.forEach(Pt=>{const kn=this._doc.createElement("style");kn.textContent=Pt,it.push(Ie.appendChild(kn))})}addHost(re){const Ie=[];this._addStylesToHost(this._stylesSet,re,Ie),this._hostNodes.set(re,Ie)}removeHost(re){const Ie=this._hostNodes.get(re);Ie&&Ie.forEach(ke),this._hostNodes.delete(re)}onStylesAdded(re){this._hostNodes.forEach((Ie,it)=>{this._addStylesToHost(re,it,Ie)})}ngOnDestroy(){this._hostNodes.forEach(re=>re.forEach(ke))}}return we.\u0275fac=function(re){return new(re||we)(B.LFG(_.K0))},we.\u0275prov=B.Yz7({token:we,factory:we.\u0275fac}),we})();function ke(we){(0,_.q)().remove(we)}const Ht={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},dt=/%COMP%/g;function W(we,fe,re){for(let Ie=0;Ie<fe.length;Ie++){let it=fe[Ie];Array.isArray(it)?W(we,it,re):(it=it.replace(dt,we),re.push(it))}return re}function ze(we){return fe=>{if("__ngUnwrap__"===fe)return we;!1===we(fe)&&(fe.preventDefault(),fe.returnValue=!1)}}let ot=(()=>{class we{constructor(re,Ie,it){this.eventManager=re,this.sharedStylesHost=Ie,this.appId=it,this.rendererByCompId=new Map,this.defaultRenderer=new Qe(re)}createRenderer(re,Ie){if(!re||!Ie)return this.defaultRenderer;switch(Ie.encapsulation){case B.ifc.Emulated:{let it=this.rendererByCompId.get(Ie.id);return it||(it=new Qt(this.eventManager,this.sharedStylesHost,Ie,this.appId),this.rendererByCompId.set(Ie.id,it)),it.applyToHost(re),it}case 1:case B.ifc.ShadowDom:return new Ft(this.eventManager,this.sharedStylesHost,re,Ie);default:if(!this.rendererByCompId.has(Ie.id)){const it=W(Ie.id,Ie.styles,[]);this.sharedStylesHost.addStyles(it),this.rendererByCompId.set(Ie.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return we.\u0275fac=function(re){return new(re||we)(B.LFG(Et),B.LFG(yt),B.LFG(B.AFp))},we.\u0275prov=B.Yz7({token:we,factory:we.\u0275fac}),we})();class Qe{constructor(fe){this.eventManager=fe,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(fe,re){return re?document.createElementNS(Ht[re]||re,fe):document.createElement(fe)}createComment(fe){return document.createComment(fe)}createText(fe){return document.createTextNode(fe)}appendChild(fe,re){fe.appendChild(re)}insertBefore(fe,re,Ie){fe&&fe.insertBefore(re,Ie)}removeChild(fe,re){fe&&fe.removeChild(re)}selectRootElement(fe,re){let Ie="string"==typeof fe?document.querySelector(fe):fe;if(!Ie)throw new Error(`The selector "${fe}" did not match any elements`);return re||(Ie.textContent=""),Ie}parentNode(fe){return fe.parentNode}nextSibling(fe){return fe.nextSibling}setAttribute(fe,re,Ie,it){if(it){re=it+":"+re;const Pt=Ht[it];Pt?fe.setAttributeNS(Pt,re,Ie):fe.setAttribute(re,Ie)}else fe.setAttribute(re,Ie)}removeAttribute(fe,re,Ie){if(Ie){const it=Ht[Ie];it?fe.removeAttributeNS(it,re):fe.removeAttribute(`${Ie}:${re}`)}else fe.removeAttribute(re)}addClass(fe,re){fe.classList.add(re)}removeClass(fe,re){fe.classList.remove(re)}setStyle(fe,re,Ie,it){it&(B.JOm.DashCase|B.JOm.Important)?fe.style.setProperty(re,Ie,it&B.JOm.Important?"important":""):fe.style[re]=Ie}removeStyle(fe,re,Ie){Ie&B.JOm.DashCase?fe.style.removeProperty(re):fe.style[re]=""}setProperty(fe,re,Ie){fe[re]=Ie}setValue(fe,re){fe.nodeValue=re}listen(fe,re,Ie){return"string"==typeof fe?this.eventManager.addGlobalEventListener(fe,re,ze(Ie)):this.eventManager.addEventListener(fe,re,ze(Ie))}}class Qt extends Qe{constructor(fe,re,Ie,it){super(fe),this.component=Ie;const Pt=W(it+"-"+Ie.id,Ie.styles,[]);re.addStyles(Pt),this.contentAttr=function ne(we){return"_ngcontent-%COMP%".replace(dt,we)}(it+"-"+Ie.id),this.hostAttr=function Oe(we){return"_nghost-%COMP%".replace(dt,we)}(it+"-"+Ie.id)}applyToHost(fe){super.setAttribute(fe,this.hostAttr,"")}createElement(fe,re){const Ie=super.createElement(fe,re);return super.setAttribute(Ie,this.contentAttr,""),Ie}}class Ft extends Qe{constructor(fe,re,Ie,it){super(fe),this.sharedStylesHost=re,this.hostEl=Ie,this.shadowRoot=Ie.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Pt=W(it.id,it.styles,[]);for(let kn=0;kn<Pt.length;kn++){const pr=document.createElement("style");pr.textContent=Pt[kn],this.shadowRoot.appendChild(pr)}}nodeOrShadowRoot(fe){return fe===this.hostEl?this.shadowRoot:fe}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(fe,re){return super.appendChild(this.nodeOrShadowRoot(fe),re)}insertBefore(fe,re,Ie){return super.insertBefore(this.nodeOrShadowRoot(fe),re,Ie)}removeChild(fe,re){return super.removeChild(this.nodeOrShadowRoot(fe),re)}parentNode(fe){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(fe)))}}let St=(()=>{class we extends Rt{constructor(re){super(re)}supports(re){return!0}addEventListener(re,Ie,it){return re.addEventListener(Ie,it,!1),()=>this.removeEventListener(re,Ie,it)}removeEventListener(re,Ie,it){return re.removeEventListener(Ie,it)}}return we.\u0275fac=function(re){return new(re||we)(B.LFG(_.K0))},we.\u0275prov=B.Yz7({token:we,factory:we.\u0275fac}),we})();const hn=["alt","control","meta","shift"],Vn={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},rn={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Cn={alt:we=>we.altKey,control:we=>we.ctrlKey,meta:we=>we.metaKey,shift:we=>we.shiftKey};let fn=(()=>{class we extends Rt{constructor(re){super(re)}supports(re){return null!=we.parseEventName(re)}addEventListener(re,Ie,it){const Pt=we.parseEventName(Ie),kn=we.eventCallback(Pt.fullKey,it,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,_.q)().onAndCancel(re,Pt.domEventName,kn))}static parseEventName(re){const Ie=re.toLowerCase().split("."),it=Ie.shift();if(0===Ie.length||"keydown"!==it&&"keyup"!==it)return null;const Pt=we._normalizeKey(Ie.pop());let kn="";if(hn.forEach(Ar=>{const ei=Ie.indexOf(Ar);ei>-1&&(Ie.splice(ei,1),kn+=Ar+".")}),kn+=Pt,0!=Ie.length||0===Pt.length)return null;const pr={};return pr.domEventName=it,pr.fullKey=kn,pr}static getEventFullKey(re){let Ie="",it=function On(we){let fe=we.key;if(null==fe){if(fe=we.keyIdentifier,null==fe)return"Unidentified";fe.startsWith("U+")&&(fe=String.fromCharCode(parseInt(fe.substring(2),16)),3===we.location&&rn.hasOwnProperty(fe)&&(fe=rn[fe]))}return Vn[fe]||fe}(re);return it=it.toLowerCase()," "===it?it="space":"."===it&&(it="dot"),hn.forEach(Pt=>{Pt!=it&&Cn[Pt](re)&&(Ie+=Pt+".")}),Ie+=it,Ie}static eventCallback(re,Ie,it){return Pt=>{we.getEventFullKey(Pt)===re&&it.runGuarded(()=>Ie(Pt))}}static _normalizeKey(re){return"esc"===re?"escape":re}}return we.\u0275fac=function(re){return new(re||we)(B.LFG(_.K0))},we.\u0275prov=B.Yz7({token:we,factory:we.\u0275fac}),we})();const fr=(0,B.eFA)(B._c5,"browser",[{provide:B.Lbi,useValue:_.bD},{provide:B.g9A,useValue:function ir(){Pe.makeCurrent(),Fe.init()},multi:!0},{provide:_.K0,useFactory:function Mr(){return(0,B.RDi)(document),document},deps:[]}]),vn=[{provide:B.zSh,useValue:"root"},{provide:B.qLn,useFactory:function Sn(){return new B.qLn},deps:[]},{provide:pt,useClass:St,multi:!0,deps:[_.K0,B.R0b,B.Lbi]},{provide:pt,useClass:fn,multi:!0,deps:[_.K0]},{provide:ot,useClass:ot,deps:[Et,yt,B.AFp]},{provide:B.FYo,useExisting:ot},{provide:tt,useExisting:yt},{provide:yt,useClass:yt,deps:[_.K0]},{provide:B.dDg,useClass:B.dDg,deps:[B.R0b]},{provide:Et,useClass:Et,deps:[pt,B.R0b]},{provide:_.JF,useClass:Mt,deps:[]}];let Nr=(()=>{class we{constructor(re){if(re)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(re){return{ngModule:we,providers:[{provide:B.AFp,useValue:re.appId},{provide:We,useExisting:B.AFp},de]}}}return we.\u0275fac=function(re){return new(re||we)(B.LFG(we,12))},we.\u0275mod=B.oAB({type:we}),we.\u0275inj=B.cJS({providers:vn,imports:[_.ez,B.hGG]}),we})();"undefined"!=typeof window&&window;var on=z(2382),xn=z(3809),yn=z(5861);class Zn{constructor(fe,re){this.email=fe,this.clave=re}}var Tr=z(5226),_n=z.n(Tr),cr=z(5590);let Zr=(()=>{class we{constructor(re,Ie){this.userService=re,this.router=Ie,this.email="",this.clave="",this.userService.logueado=!1,console.log(this.userService.logueado)}ngOnInit(){}Login(){var re=this;return(0,yn.Z)(function*(){let Ie=new Date,it=new Zn(re.email,re.clave);Ie.toLocaleString("es-ES",{dateStyle:"full"}),Ie.getHours(),Ie.getMinutes(),re.userService.login(it).then(kn=>{re.userService.logueado=!0,re.router.navigateByUrl("home")}).catch(kn=>{"auth/wrong-password"==kn.code||"auth/user-not-found"==kn.code?_n().fire({title:"Error",text:"Correo o contrase\xf1a son incorrectos.",icon:"error",timer:2e3,toast:!0,backdrop:!1,position:"bottom",grow:"row",timerProgressBar:!0,showConfirmButton:!1}):"auth/missing-email"==kn.code||"auth/internal-error"==kn.code||""==it.email||""==it.clave?_n().fire({title:"Error",text:"No pueden quedar campos vac\xedos.",icon:"error",timer:2e3,toast:!0,backdrop:!1,position:"bottom",grow:"row",timerProgressBar:!0,showConfirmButton:!1}):"auth/invalid-email"==kn.code?_n().fire({title:"Error",text:"Correo no v\xe1lido.",icon:"error",timer:2e3,toast:!0,backdrop:!1,position:"bottom",grow:"row",timerProgressBar:!0,showConfirmButton:!1}):"auth/too-many-requests"==kn.code?_n().fire({title:"Error",text:"Demasiados intentos fallidos. Reintente m\xe1s tarde.",icon:"warning",timer:2e3,toast:!0,backdrop:!1,position:"bottom",grow:"row",timerProgressBar:!0,showConfirmButton:!1}):_n().fire({title:"Error",text:"Credenciales incorrectas.",icon:"error",timer:2e3,toast:!0,backdrop:!1,position:"bottom",grow:"row",timerProgressBar:!0,showConfirmButton:!1}),console.log(kn.code)})})()}InicioAutomatico(re,Ie){this.email=re,this.clave=Ie,this.Login()}}return we.\u0275fac=function(re){return new(re||we)(B.Y36(cr.R),B.Y36(xn.F0))},we.\u0275cmp=B.Xpm({type:we,selectors:[["app-login"]],decls:26,vars:2,consts:[[1,"login"],[1,"login-triangle"],[1,"login-header"],[1,"login-container"],["type","email",1,"form-control",3,"ngModel","ngModelChange"],["type","password",1,"form-control",3,"ngModel","ngModelChange"],["type","submit","value","Continuar",1,"rounded",3,"click"],["routerLink","../registro",1,"nav-link"],[1,"inicioR"],["type","button",1,"btn","btn-outline-light",2,"margin-right","30px",3,"click"],["type","button",1,"btn","btn-outline-light",3,"click"]],template:function(re,Ie){1&re&&(B.TgZ(0,"div",0),B._UZ(1,"div",1),B.TgZ(2,"h2",2),B._uU(3,"Log in"),B.qZA(),B.TgZ(4,"div",3)(5,"p")(6,"label"),B._uU(7,"Correo electr\xf3nico"),B.qZA(),B.TgZ(8,"input",4),B.NdJ("ngModelChange",function(Pt){return Ie.email=Pt}),B.qZA()(),B.TgZ(9,"p")(10,"label"),B._uU(11,"Contrase\xf1a"),B.qZA(),B.TgZ(12,"input",5),B.NdJ("ngModelChange",function(Pt){return Ie.clave=Pt}),B.qZA()(),B.TgZ(13,"p")(14,"input",6),B.NdJ("click",function(){return Ie.Login()}),B.qZA()(),B.TgZ(15,"p"),B._uU(16,"\xbfNecesitas una cuenta? "),B.TgZ(17,"a",7),B._uU(18,"Registrarse"),B.qZA()()(),B.TgZ(19,"div",8)(20,"h4"),B._uU(21,"Inicio r\xe1pido"),B.qZA(),B.TgZ(22,"button",9),B.NdJ("click",function(){return Ie.InicioAutomatico("tester@gmail.com","123asd")}),B._uU(23,"Tester"),B.qZA(),B.TgZ(24,"button",10),B.NdJ("click",function(){return Ie.InicioAutomatico("user@gmail.com","123asd")}),B._uU(25,"Usuario"),B.qZA()()()),2&re&&(B.xp6(8),B.Q6J("ngModel",Ie.email),B.xp6(4),B.Q6J("ngModel",Ie.clave))},directives:[on.Fj,on.JJ,on.On,xn.yS],styles:['@import"https://fonts.googleapis.com/css?family=Open+Sans:400,700";body[_ngcontent-%COMP%]{background:#456;font-family:Asap,sans-serif}.inicioR[_ngcontent-%COMP%]{text-align:center;padding-top:30px}.inicioR[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#fff;padding-bottom:15px}.nav-link[_ngcontent-%COMP%]{display:contents}.login[_ngcontent-%COMP%]{width:400px;margin:16px auto;font-size:16px}p[_ngcontent-%COMP%]{font-family:Asap,sans-serif}.login-header[_ngcontent-%COMP%], .login[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:0;margin-bottom:0}.login-triangle[_ngcontent-%COMP%]{width:0;margin-right:auto;margin-left:auto;border:12px solid transparent;border-bottom-color:#212529}.login-header[_ngcontent-%COMP%]{background:#212529;padding:20px;font-size:1.4em;font-weight:400;text-align:center;color:#fff;font-family:Asap,sans-serif}.login-container[_ngcontent-%COMP%]{background:#ebebeb;padding:12px}.login[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding:12px}.login[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{box-sizing:border-box;display:block;width:100%;border-width:1px;border-style:solid;padding:16px;outline:0;font-family:Asap,sans-serif;font-size:.95em}.login[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%], .login[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{background:#fff;border-color:#bbb;color:#555;height:45px}.login[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]:focus, .login[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]:focus{border-color:#888}.login[_ngcontent-%COMP%]   input[type=submit][_ngcontent-%COMP%], .login[_ngcontent-%COMP%]   input[type=reset][_ngcontent-%COMP%]{font-family:Asap,sans-serif;background:#212529;border-color:transparent;color:#fff;cursor:pointer}.login[_ngcontent-%COMP%]   input[type=submit][_ngcontent-%COMP%]:hover, .login[_ngcontent-%COMP%]   input[type=reset][_ngcontent-%COMP%]:hover{background:#43484d}.login[_ngcontent-%COMP%]   input[type=submit][_ngcontent-%COMP%]:active, .login[_ngcontent-%COMP%]   input[type=reset][_ngcontent-%COMP%]:active{border-color:#fff}']}),we})();var Ri=z(7407),Xi=z(1205);let Oi=(()=>{class we{constructor(re,Ie,it,Pt){this.firestore=re,this.fireauth=Ie,this.userService=it,this.router=Pt,this.email="",this.clave=""}ngOnInit(){}GenerarColor(){return"#"+Math.floor(16777215*Math.random()).toString(16)}Registro(){var re=this;return(0,yn.Z)(function*(){let Ie=new Date,it=new Zn(re.email,re.clave),Pt={email:re.email,fecha:Ie.toLocaleString("es-ES",{dateStyle:"full"})+", "+Ie.getHours()+":"+Ie.getMinutes()},kn={email:re.email,colorChat:re.GenerarColor(),puntajeMayorMenor:0,puntajeAhorcado:0,puntajePreguntados:0,puntajeLogle:0};re.userService.Registro(it).then(pr=>{re.userService.logueado=!0,re.userService.SubirLog(Pt,"logs"),re.userService.SubirLog(kn,"registros"),re.router.navigateByUrl("home")}).catch(pr=>{"auth/email-already-in-use"==pr.code?_n().fire({title:"Error",text:"El correo ya est\xe1 en uso.",icon:"error",timer:2e3,toast:!0,backdrop:!1,position:"bottom",grow:"row",timerProgressBar:!0,showConfirmButton:!1}):"auth/missing-email"==pr.code||"auth/internal-error"==pr.code||""==it.email||""==it.clave?_n().fire({title:"Error",text:"No pueden quedar campos vac\xedos.",icon:"error",timer:2e3,toast:!0,backdrop:!1,position:"bottom",grow:"row",timerProgressBar:!0,showConfirmButton:!1}):"auth/weak-password"==pr.code?_n().fire({title:"Error",text:"La contrase\xf1a debe contener al menos 6 caracteres.",icon:"error",timer:2e3,toast:!0,backdrop:!1,position:"bottom",grow:"row",timerProgressBar:!0,showConfirmButton:!1}):_n().fire({title:"Error",text:"El mail o la contrase\xf1a no son v\xe1lidos.",icon:"error",timer:2e3,toast:!0,backdrop:!1,position:"bottom",grow:"row",timerProgressBar:!0,showConfirmButton:!1}),console.log(pr.code)})})()}InicioAutomatico(re,Ie){this.email=re,this.clave=Ie}}return we.\u0275fac=function(re){return new(re||we)(B.Y36(Ri.ST),B.Y36(Xi.zQ),B.Y36(cr.R),B.Y36(xn.F0))},we.\u0275cmp=B.Xpm({type:we,selectors:[["app-registro"]],decls:19,vars:2,consts:[[1,"login"],[1,"login-triangle"],[1,"login-header"],[1,"login-container"],["type","email",1,"form-control",3,"ngModel","ngModelChange"],["type","password",1,"form-control",3,"ngModel","ngModelChange"],["type","submit","value","Continuar",1,"rounded",3,"click"],["routerLink","../login",1,"nav-link"]],template:function(re,Ie){1&re&&(B.TgZ(0,"div",0),B._UZ(1,"div",1),B.TgZ(2,"h2",2),B._uU(3,"Registro"),B.qZA(),B.TgZ(4,"div",3)(5,"p")(6,"label"),B._uU(7,"Correo electr\xf3nico"),B.qZA(),B.TgZ(8,"input",4),B.NdJ("ngModelChange",function(Pt){return Ie.email=Pt}),B.qZA()(),B.TgZ(9,"p")(10,"label"),B._uU(11,"Contrase\xf1a"),B.qZA(),B.TgZ(12,"input",5),B.NdJ("ngModelChange",function(Pt){return Ie.clave=Pt}),B.qZA()(),B.TgZ(13,"p")(14,"input",6),B.NdJ("click",function(){return Ie.Registro()}),B.qZA()(),B.TgZ(15,"p"),B._uU(16,"\xbfYa posee una cuenta? "),B.TgZ(17,"a",7),B._uU(18,"Login"),B.qZA()()()()),2&re&&(B.xp6(8),B.Q6J("ngModel",Ie.email),B.xp6(4),B.Q6J("ngModel",Ie.clave))},directives:[on.Fj,on.JJ,on.On,xn.yS],styles:['@import"https://fonts.googleapis.com/css?family=Open+Sans:400,700";body[_ngcontent-%COMP%]{background:#456;font-family:Asap,sans-serif}.inicioR[_ngcontent-%COMP%]{text-align:center;padding-top:30px}.inicioR[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#fff;padding-bottom:15px}.nav-link[_ngcontent-%COMP%]{display:contents}.login[_ngcontent-%COMP%]{width:400px;margin:16px auto;font-size:16px}p[_ngcontent-%COMP%]{font-family:Asap,sans-serif}.login-header[_ngcontent-%COMP%], .login[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:0;margin-bottom:0}.login-triangle[_ngcontent-%COMP%]{width:0;margin-right:auto;margin-left:auto;border:12px solid transparent;border-bottom-color:#212529}.login-header[_ngcontent-%COMP%]{background:#212529;padding:20px;font-size:1.4em;font-weight:400;text-align:center;color:#fff;font-family:Asap,sans-serif}.login-container[_ngcontent-%COMP%]{background:#ebebeb;padding:12px}.login[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding:12px}.login[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{box-sizing:border-box;display:block;width:100%;border-width:1px;border-style:solid;padding:16px;outline:0;font-family:Asap,sans-serif;font-size:.95em}.login[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%], .login[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%], .login[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{background:#fff;border-color:#bbb;color:#555;height:45px}.login[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]:focus, .login[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]:focus, .login[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]:focus{border-color:#888}.login[_ngcontent-%COMP%]   input[type=submit][_ngcontent-%COMP%], .login[_ngcontent-%COMP%]   input[type=reset][_ngcontent-%COMP%]{font-family:Asap,sans-serif;background:#212529;border-color:transparent;color:#fff;cursor:pointer}.login[_ngcontent-%COMP%]   input[type=submit][_ngcontent-%COMP%]:hover, .login[_ngcontent-%COMP%]   input[type=reset][_ngcontent-%COMP%]:hover{background:#43484d}.login[_ngcontent-%COMP%]   input[type=submit][_ngcontent-%COMP%]:active, .login[_ngcontent-%COMP%]   input[type=reset][_ngcontent-%COMP%]:active{border-color:#fff}']}),we})(),Yr=(()=>{class we{constructor(){}ngOnInit(){}}return we.\u0275fac=function(re){return new(re||we)},we.\u0275cmp=B.Xpm({type:we,selectors:[["app-error"]],decls:2,vars:0,template:function(re,Ie){1&re&&(B.TgZ(0,"p"),B._uU(1,"error works!"),B.qZA())},styles:[""]}),we})();var Pr=z(5830);let Ni=(()=>{class we{constructor(re){this.api=re,this.api.GetPerfil().subscribe(Ie=>{this.perfil=Ie})}ngOnInit(){}}return we.\u0275fac=function(re){return new(re||we)(B.Y36(Pr.s))},we.\u0275cmp=B.Xpm({type:we,selectors:[["app-quiensoy"]],decls:16,vars:2,consts:[[1,"py-5","d-flex","gap-5","justify-content-center","text-center"],[1,"py-5","px-5","bg-dark","rounded-3","shadow-lg","position-static",2,"max-width","1000px"],["alt","","width","200","height","200",1,"rounded","d-block","mx-auto","mb-4",3,"src"],[1,"text-light","display-5","fw-bold"],[1,"col-lg-6","mx-auto"],[1,"text-light","lead","mb-4"],[1,"d-grid","gap-2","d-sm-flex","justify-content-sm-center"],["type","button","onclick","window.open('https://github.com/KarenVillarreal91/saladejuegos/tree/master','_blank')",1,"btn","btn-success","btn-lg","px-4","gap-3"]],template:function(re,Ie){1&re&&(B.TgZ(0,"div",0)(1,"div",1),B._UZ(2,"img",2),B.TgZ(3,"h1",3)(4,"em"),B._uU(5),B.qZA()(),B.TgZ(6,"div",4)(7,"p",5),B._UZ(8,"br"),B.TgZ(9,"b"),B._uU(10,"Logle"),B.qZA(),B._UZ(11,"br"),B._uU(12,"Con un total de 3 intentos, intenta adivinar de que empresa se trata mediante un fragmento de su logo. Cada vez que se falle 1 intento se va a revelar otra parte del logo. "),B.qZA(),B.TgZ(13,"div",6)(14,"button",7),B._uU(15,"GitHub"),B.qZA()()()()()),2&re&&(B.xp6(2),B.Q6J("src",null==Ie.perfil?null:Ie.perfil.avatar_url,B.LSH),B.xp6(3),B.Oqu(null==Ie.perfil?null:Ie.perfil.name))},styles:[""]}),we})(),Zt=(()=>{class we{constructor(re,Ie){this.userService=re,this.router=Ie}canActivate(re,Ie){return!!this.userService.logueado||(this.router.navigateByUrl("login"),!1)}}return we.\u0275fac=function(re){return new(re||we)(B.LFG(cr.R),B.LFG(xn.F0))},we.\u0275prov=B.Yz7({token:we,factory:we.\u0275fac,providedIn:"root"}),we})();const Ct=function(we){return{color:we}};function Nn(we,fe){if(1&we&&(B.TgZ(0,"div",12)(1,"p",13),B._uU(2),B.qZA(),B.TgZ(3,"p",14),B._uU(4),B.qZA(),B.TgZ(5,"p",15),B._uU(6),B.qZA()()),2&we){const re=B.oxw().$implicit;B.xp6(1),B.Q6J("ngStyle",B.VKq(4,Ct,re.color)),B.xp6(1),B.Oqu(re.email),B.xp6(2),B.Oqu(re.mensaje),B.xp6(2),B.Oqu(re.hora)}}function lr(we,fe){if(1&we&&(B.TgZ(0,"div",16)(1,"p",17),B._uU(2,"T\xfa"),B.qZA(),B.TgZ(3,"p",14),B._uU(4),B.qZA(),B.TgZ(5,"p",15),B._uU(6),B.qZA()()),2&we){const re=B.oxw().$implicit;B.xp6(4),B.Oqu(re.mensaje),B.xp6(2),B.Oqu(re.hora)}}function Lr(we,fe){if(1&we&&(B.TgZ(0,"div",9),B.YNc(1,Nn,7,6,"div",10),B._UZ(2,"br"),B.YNc(3,lr,7,2,"div",11),B._UZ(4,"br"),B.qZA()),2&we){const re=fe.$implicit,Ie=B.oxw();B.xp6(1),B.Q6J("ngIf",re.email!=Ie.userService.userLogueado.email),B.xp6(2),B.Q6J("ngIf",re.email==Ie.userService.userLogueado.email)}}const kr=[{path:"login",component:Zr},{path:"registro",component:Oi},{path:"home",loadChildren:()=>Promise.all([z.e(125),z.e(373)]).then(z.bind(z,9373)).then(we=>we.BienvenidoModule),canActivate:[Zt]},{path:"juegos",loadChildren:()=>Promise.all([z.e(125),z.e(987)]).then(z.bind(z,4987)).then(we=>we.JuegosModule),canActivate:[Zt]},{path:"quiensoy",component:Ni,canActivate:[Zt]},{path:"chat",component:(()=>{class we{constructor(re){this.userService=re,this.mensaje="",this.mensajes=[],this.userService.mensajes.subscribe(Ie=>{this.mensajes=Ie.sort((it,Pt)=>it.sort-Pt.sort)}),this.userService.TraerRegistros().subscribe(Ie=>{this.usuarios=Ie}),setTimeout(()=>{this.div=document.getElementById("chat"),this.div.scrollTop=this.div.scrollHeight},200)}ngOnInit(){}Enviar(){let re=new Date,Ie=this.usuarios.filter(Pt=>Pt.email==this.userService.userLogueado.email),it={email:this.userService.userLogueado.email,mensaje:this.mensaje,hora:re.getHours()+":"+re.getMinutes(),color:Ie[0].colorChat,sort:Date.now()};this.userService.MandarMensaje(it),setTimeout(()=>{this.div.scrollTop=this.div.scrollHeight},200),this.mensaje=""}}return we.\u0275fac=function(re){return new(re||we)(B.Y36(cr.R))},we.\u0275cmp=B.Xpm({type:we,selectors:[["app-chat"]],decls:12,vars:2,consts:[[1,"container","py-5","px-5","bg-dark","rounded-3","shadow-lg","text-white",2,"max-width","960px"],[1,"pb-2","border-bottom"],["id","chat",1,"chat"],["class","listado",4,"ngFor","ngForOf"],[2,"margin-top","7px"],["type","text","placeholder","Mensaje",1,"form-control",2,"max-width","800px","display","inline-block",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-light",2,"margin-bottom","4px","margin-left","8px",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-send-fill",2,"transform","rotate(45deg)"],["d","M15.964.686a.5.5 0 0 0-.65-.65L.767 5.855H.766l-.452.18a.5.5 0 0 0-.082.887l.41.26.001.002 4.995 3.178 3.178 4.995.002.002.26.41a.5.5 0 0 0 .886-.083l6-15Zm-1.833 1.89L6.637 10.07l-.215-.338a.5.5 0 0 0-.154-.154l-.338-.215 7.494-7.494 1.178-.471-.47 1.178Z"],[1,"listado"],["class","container-mensaje",4,"ngIf"],["class","container-mensajePropio",4,"ngIf"],[1,"container-mensaje"],[1,"nombre",3,"ngStyle"],[1,"mensaje"],[1,"hora"],[1,"container-mensajePropio"],[1,"nombre",2,"color","#52b1bb"]],template:function(re,Ie){1&re&&(B._UZ(0,"br"),B.TgZ(1,"div",0)(2,"h2",1),B._uU(3,"Chat"),B.qZA(),B._UZ(4,"br"),B.TgZ(5,"div",2),B.YNc(6,Lr,5,2,"div",3),B.qZA(),B.TgZ(7,"div",4)(8,"input",5),B.NdJ("ngModelChange",function(Pt){return Ie.mensaje=Pt}),B.qZA(),B.TgZ(9,"button",6),B.NdJ("click",function(){return Ie.Enviar()}),B.O4$(),B.TgZ(10,"svg",7),B._UZ(11,"path",8),B.qZA()()()()),2&re&&(B.xp6(6),B.Q6J("ngForOf",Ie.mensajes),B.xp6(2),B.Q6J("ngModel",Ie.mensaje))},directives:[_.sg,_.O5,_.PC,on.Fj,on.JJ,on.On],styles:[".b-example-divider[_ngcontent-%COMP%]{height:3rem;background-color:#0000001a;border:solid rgba(0,0,0,.15);border-width:1px 0;box-shadow:inset 0 .5em 1.5em #0000001a,inset 0 .125em .5em #00000026}.bi[_ngcontent-%COMP%]{vertical-align:-.125em;fill:currentColor}.listado[_ngcontent-%COMP%]{display:flex;margin-bottom:6px}.chat[_ngcontent-%COMP%]{height:500px;overflow-y:overlay}.chat[_ngcontent-%COMP%]::-webkit-scrollbar{width:12px}.chat[_ngcontent-%COMP%]::-webkit-scrollbar-track{border-radius:10px}.chat[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:10px;-webkit-box-shadow:inset 0 0 6px white}.feature-icon[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;width:4rem;height:4rem;margin-bottom:1rem;font-size:2rem;color:#fff;border-radius:.75rem}.container-mensajePropio[_ngcontent-%COMP%]{margin-left:459px;padding:10px;background:#dadada2e;border-radius:25px;max-width:390px}.container-mensaje[_ngcontent-%COMP%]{padding:10px;background:#dadada52;border-radius:25px;max-width:390px}.nombre[_ngcontent-%COMP%]{display:table-cell;font-size:15px}.mensaje[_ngcontent-%COMP%]{display:contents}.hora[_ngcontent-%COMP%]{display:table-cell;padding-left:331px;color:#c7c7c7;font-size:13px}.icon-link[_ngcontent-%COMP%]{display:inline-flex;align-items:center}.icon-link[_ngcontent-%COMP%] > .bi[_ngcontent-%COMP%]{margin-top:.125rem;margin-left:.125rem;transition:transform .25s ease-in-out;fill:currentColor}.icon-link[_ngcontent-%COMP%]:hover > .bi[_ngcontent-%COMP%]{transform:translate(.25rem)}.icon-square[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;width:3rem;height:3rem;font-size:1.5rem;border-radius:.75rem}.rounded-4[_ngcontent-%COMP%]{border-radius:.5rem}.rounded-5[_ngcontent-%COMP%]{border-radius:1rem}.text-shadow-1[_ngcontent-%COMP%]{text-shadow:0 .125rem .25rem rgba(0,0,0,.25)}.text-shadow-2[_ngcontent-%COMP%]{text-shadow:0 .25rem .5rem rgba(0,0,0,.25)}.text-shadow-3[_ngcontent-%COMP%]{text-shadow:0 .5rem 1.5rem rgba(0,0,0,.25)}.card-cover[_ngcontent-%COMP%]{background-repeat:no-repeat;background-position:center center;background-size:cover}"]}),we})(),canActivate:[Zt]},{path:"",redirectTo:"/login",pathMatch:"full"},{path:"**",component:Yr}];let pi=(()=>{class we{}return we.\u0275fac=function(re){return new(re||we)},we.\u0275mod=B.oAB({type:we}),we.\u0275inj=B.cJS({imports:[[_.ez,xn.Bz.forRoot(kr)],xn.Bz]}),we})();function nr(we,fe){if(1&we){const re=B.EpF();B.TgZ(0,"div",2)(1,"a",3),B._uU(2,"Home"),B.qZA(),B.TgZ(3,"button",4),B._UZ(4,"span",5),B.qZA(),B.TgZ(5,"div",6)(6,"ul",7)(7,"li",8)(8,"a",9),B._uU(9,"Qui\xe9n soy"),B.qZA()(),B.TgZ(10,"li",8)(11,"a",10),B._uU(12,"Chat"),B.qZA()()(),B.TgZ(13,"div",11)(14,"h5",12),B._uU(15),B.qZA()(),B.TgZ(16,"div",13)(17,"button",14),B.NdJ("click",function(){return B.CHM(re),B.oxw().LogOut()}),B._uU(18,"Log Out"),B.qZA()()()()}if(2&we){const re=B.oxw();B.xp6(15),B.Oqu(null==re.userService.userLogueado?null:re.userService.userLogueado.email)}}let Rr=(()=>{class we{constructor(re,Ie){this.userService=re,this.router=Ie,this.nombre=""}LogOut(){var re=this;return(0,yn.Z)(function*(){re.userService.LogOut().then(()=>{re.router.navigateByUrl("login")})})()}}return we.\u0275fac=function(re){return new(re||we)(B.Y36(cr.R),B.Y36(xn.F0))},we.\u0275cmp=B.Xpm({type:we,selectors:[["app-root"]],decls:3,vars:1,consts:[[1,"navbar","navbar-expand-md","navbar-dark","bg-dark"],["class","container-fluid",4,"ngIf"],[1,"container-fluid"],["routerLink","home",1,"navbar-brand"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarCollapse","aria-controls","navbarCollapse","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarCollapse",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-md-0"],[1,"nav-item"],["aria-current","page","routerLink","quiensoy",1,"nav-link","active"],["aria-current","page","routerLink","chat",1,"nav-link","active"],[1,"text-end",2,"padding-right","20px"],[2,"color","white"],[1,"text-end"],["type","button",1,"btn","btn-outline-danger","me-2",3,"click"]],template:function(re,Ie){1&re&&(B.TgZ(0,"nav",0),B.YNc(1,nr,19,1,"div",1),B.qZA(),B._UZ(2,"router-outlet")),2&re&&(B.xp6(1),B.Q6J("ngIf",Ie.userService.logueado))},directives:[_.O5,xn.yS,xn.lC],styles:[""]}),we})();var Sr=z(2011);const Gn_firebaseConfig={apiKey:"AIzaSyAvGKydEULHGWpGp28WHFEw--RlZcrpE5Q",authDomain:"saladejuegos-kv.firebaseapp.com",projectId:"saladejuegos-kv",storageBucket:"saladejuegos-kv.appspot.com",messagingSenderId:"300983870058",appId:"1:300983870058:web:02ea3de8a162886debe013"};var Xr=z(520);let Ki=(()=>{class we{}return we.\u0275fac=function(re){return new(re||we)},we.\u0275mod=B.oAB({type:we,bootstrap:[Rr]}),we.\u0275inj=B.cJS({providers:[],imports:[[Nr,pi,on.u5,Sr.hO.initializeApp(Gn_firebaseConfig),Xr.JF]]}),we})();(0,B.G48)(),fr().bootstrapModule(Ki).catch(we=>console.error(we))},5867:(en,Xe,z)=>{"use strict";z.d(Xe,{C6:()=>_.getApps,Mq:()=>_.getApp});var _=z(9681);(0,_.registerVersion)("firebase","9.6.11","app")},127:(en,Xe,z)=>{"use strict";z.d(Xe,{Z:()=>_.Z});var _=z(3942);_.Z.registerVersion("firebase","9.6.11","app-compat")},820:(en,Xe,z)=>{"use strict";z.r(Xe);var _=z(5861),B=z(3942),oe=z(2090),Pe=z(9681),Ae=z(655),xe=z(1877),je=z(4859);const Et=function Mt(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Rt=function pt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},tt=new oe.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ke=new xe.Yd("@firebase/auth");function Ht(v,...f){ke.logLevel<=xe.in.ERROR&&ke.error(`Auth (${Pe.SDK_VERSION}): ${v}`,...f)}function dt(v,...f){throw Dt(v,...f)}function nt(v,...f){return Dt(v,...f)}function Ye(v,f,y){const D=Object.assign(Object.assign({},Rt()),{[f]:y});return new oe.LL("auth","Firebase",D).create(f,{appName:v.name})}function at(v,f,y){if(!(f instanceof y))throw y.name!==f.constructor.name&&dt(v,"argument-error"),Ye(v,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Dt(v,...f){if("string"!=typeof v){const y=f[0],D=[...f.slice(1)];return D[0]&&(D[0].appName=v.name),v._errorFactory.create(y,...D)}return tt.create(v,...f)}function ne(v,f,...y){if(!v)throw Dt(f,...y)}function Oe(v){const f="INTERNAL ASSERTION FAILED: "+v;throw Ht(f),new Error(f)}function W(v,f){v||Oe(f)}const ze=new Map;function He(v){W(v instanceof Function,"Expected a class definition");let f=ze.get(v);return f?(W(f instanceof v,"Instance stored in cache mismatched with class"),f):(f=new v,ze.set(v,f),f)}function En(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function dn(){return"http:"===Qt()||"https:"===Qt()}function Qt(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class hn{constructor(f,y){this.shortDelay=f,this.longDelay=y,W(y>f,"Short delay should be less than long delay!"),this.isMobile=(0,oe.uI)()||(0,oe.b$)()}get(){return function Ft(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(dn()||(0,oe.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Wt(v,f){W(v.emulator,"Emulator should always be set here");const{url:y}=v.emulator;return f?`${y}${f.startsWith("/")?f.slice(1):f}`:y}class Vn{static initialize(f,y,D){this.fetchImpl=f,y&&(this.headersImpl=y),D&&(this.responseImpl=D)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Oe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Oe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Oe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const rn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Cn=new hn(3e4,6e4);function fn(v,f){return v.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:v.tenantId}):f}function On(v,f,y,D){return ir.apply(this,arguments)}function ir(){return(ir=(0,_.Z)(function*(v,f,y,D,K={}){return Sn(v,K,(0,_.Z)(function*(){let ae={},Ve={};D&&("GET"===f?Ve=D:ae={body:JSON.stringify(D)});const ft=(0,oe.xO)(Object.assign({key:v.config.apiKey},Ve)).slice(1),tn=yield v._getAdditionalHeaders();return tn["Content-Type"]="application/json",v.languageCode&&(tn["X-Firebase-Locale"]=v.languageCode),Vn.fetch()(vn(v,v.config.apiHost,y,ft),Object.assign({method:f,headers:tn,referrerPolicy:"no-referrer"},ae))}))})).apply(this,arguments)}function Sn(v,f,y){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,_.Z)(function*(v,f,y){v._canInitEmulator=!1;const D=Object.assign(Object.assign({},rn),f);try{const K=new Nr(v),ae=yield Promise.race([y(),K.promise]);K.clearNetworkTimeout();const Ve=yield ae.json();if("needConfirmation"in Ve)throw er(v,"account-exists-with-different-credential",Ve);if(ae.ok&&!("errorMessage"in Ve))return Ve;{const ft=ae.ok?Ve.errorMessage:Ve.error.message,[tn,ln]=ft.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===tn)throw er(v,"credential-already-in-use",Ve);if("EMAIL_EXISTS"===tn)throw er(v,"email-already-in-use",Ve);const rr=D[tn]||tn.toLowerCase().replace(/[_\s]+/g,"-");if(ln)throw Ye(v,rr,ln);dt(v,rr)}}catch(K){if(K instanceof oe.ZR)throw K;dt(v,"network-request-failed")}})).apply(this,arguments)}function ar(v,f,y,D){return fr.apply(this,arguments)}function fr(){return(fr=(0,_.Z)(function*(v,f,y,D,K={}){const ae=yield On(v,f,y,D,K);return"mfaPendingCredential"in ae&&dt(v,"multi-factor-auth-required",{_serverResponse:ae}),ae})).apply(this,arguments)}function vn(v,f,y,D){const K=`${f}${y}?${D}`;return v.config.emulator?Wt(v.config,K):`${v.config.apiScheme}://${K}`}class Nr{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((y,D)=>{this.timer=setTimeout(()=>D(nt(this.auth,"network-request-failed")),Cn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function er(v,f,y){const D={appName:v.name};y.email&&(D.email=y.email),y.phoneNumber&&(D.phoneNumber=y.phoneNumber);const K=nt(v,f,D);return K.customData._tokenResponse=y,K}function bn(){return(bn=(0,_.Z)(function*(v,f){return On(v,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function Fn(v,f){return un.apply(this,arguments)}function un(){return(un=(0,_.Z)(function*(v,f){return On(v,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function zr(v,f){return _i.apply(this,arguments)}function _i(){return(_i=(0,_.Z)(function*(v,f){return On(v,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function ct(v){if(v)try{const f=new Date(Number(v));if(!isNaN(f.getTime()))return f.toUTCString()}catch(f){}}function vt(){return(vt=(0,_.Z)(function*(v,f=!1){const y=(0,oe.m9)(v),D=yield y.getIdToken(f),K=gt(D);ne(K&&K.exp&&K.auth_time&&K.iat,y.auth,"internal-error");const ae="object"==typeof K.firebase?K.firebase:void 0,Ve=null==ae?void 0:ae.sign_in_provider;return{claims:K,token:D,authTime:ct(Be(K.auth_time)),issuedAtTime:ct(Be(K.iat)),expirationTime:ct(Be(K.exp)),signInProvider:Ve||null,signInSecondFactor:(null==ae?void 0:ae.sign_in_second_factor)||null}})).apply(this,arguments)}function Be(v){return 1e3*Number(v)}function gt(v){const[f,y,D]=v.split(".");if(void 0===f||void 0===y||void 0===D)return Ht("JWT malformed, contained fewer than 3 sections"),null;try{const K=(0,oe.tV)(y);return K?JSON.parse(K):(Ht("Failed to decode base64 JWT payload"),null)}catch(K){return Ht("Caught error parsing JWT payload as JSON",K),null}}function Kn(v,f){return In.apply(this,arguments)}function In(){return(In=(0,_.Z)(function*(v,f,y=!1){if(y)return f;try{return yield f}catch(D){throw D instanceof oe.ZR&&sn(D)&&v.auth.currentUser===v&&(yield v.auth.signOut()),D}})).apply(this,arguments)}function sn({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}class $r{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var y;if(f){const D=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),D}{this.errorBackoff=3e4;const K=(null!==(y=this.user.stsTokenManager.expirationTime)&&void 0!==y?y:0)-Date.now()-3e5;return Math.max(0,K)}}schedule(f=!1){var y=this;if(!this.isRunning)return;const D=this.getInterval(f);this.timerId=setTimeout((0,_.Z)(function*(){yield y.iteration()}),D)}iteration(){var f=this;return(0,_.Z)(function*(){try{yield f.user.getIdToken(!0)}catch(y){return void("auth/network-request-failed"===y.code&&f.schedule(!0))}f.schedule()})()}}class br{constructor(f,y){this.createdAt=f,this.lastLoginAt=y,this._initializeTime()}_initializeTime(){this.lastSignInTime=ct(this.lastLoginAt),this.creationTime=ct(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function sr(v){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,_.Z)(function*(v){var f;const y=v.auth,D=yield v.getIdToken(),K=yield Kn(v,zr(y,{idToken:D}));ne(null==K?void 0:K.users.length,y,"internal-error");const ae=K.users[0];v._notifyReloadListener(ae);const Ve=(null===(f=ae.providerUserInfo)||void 0===f?void 0:f.length)?Le(ae.providerUserInfo):[],ft=qt(v.providerData,Ve),rr=!!v.isAnonymous&&!(v.email&&ae.passwordHash||(null==ft?void 0:ft.length)),Hn={uid:ae.localId,displayName:ae.displayName||null,photoURL:ae.photoUrl||null,email:ae.email||null,emailVerified:ae.emailVerified||!1,phoneNumber:ae.phoneNumber||null,tenantId:ae.tenantId||null,providerData:ft,metadata:new br(ae.createdAt,ae.lastLoginAt),isAnonymous:rr};Object.assign(v,Hn)})).apply(this,arguments)}function Pn(){return(Pn=(0,_.Z)(function*(v){const f=(0,oe.m9)(v);yield sr(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function qt(v,f){return[...v.filter(D=>!f.some(K=>K.providerId===D.providerId)),...f]}function Le(v){return v.map(f=>{var{providerId:y}=f,D=(0,Ae._T)(f,["providerId"]);return{providerId:y,uid:D.rawId||"",displayName:D.displayName||null,email:D.email||null,phoneNumber:D.phoneNumber||null,photoURL:D.photoUrl||null}})}function Jt(){return(Jt=(0,_.Z)(function*(v,f){const y=yield Sn(v,{},(0,_.Z)(function*(){const D=(0,oe.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:K,apiKey:ae}=v.config,Ve=vn(v,K,"/v1/token",`key=${ae}`),ft=yield v._getAdditionalHeaders();return ft["Content-Type"]="application/x-www-form-urlencoded",Vn.fetch()(Ve,{method:"POST",headers:ft,body:D})}));return{accessToken:y.access_token,expiresIn:y.expires_in,refreshToken:y.refresh_token}})).apply(this,arguments)}class Rn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){ne(f.idToken,"internal-error"),ne(void 0!==f.idToken,"internal-error"),ne(void 0!==f.refreshToken,"internal-error");const y="expiresIn"in f&&void 0!==f.expiresIn?Number(f.expiresIn):function xt(v){const f=gt(v);return ne(f,"internal-error"),ne(void 0!==f.exp,"internal-error"),ne(void 0!==f.iat,"internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,y)}getToken(f,y=!1){var D=this;return(0,_.Z)(function*(){return ne(!D.accessToken||D.refreshToken,f,"user-token-expired"),y||!D.accessToken||D.isExpired?D.refreshToken?(yield D.refresh(f,D.refreshToken),D.accessToken):null:D.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,y){var D=this;return(0,_.Z)(function*(){const{accessToken:K,refreshToken:ae,expiresIn:Ve}=yield function Gt(v,f){return Jt.apply(this,arguments)}(f,y);D.updateTokensAndExpiration(K,ae,Number(Ve))})()}updateTokensAndExpiration(f,y,D){this.refreshToken=y||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*D}static fromJSON(f,y){const{refreshToken:D,accessToken:K,expirationTime:ae}=y,Ve=new Rn;return D&&(ne("string"==typeof D,"internal-error",{appName:f}),Ve.refreshToken=D),K&&(ne("string"==typeof K,"internal-error",{appName:f}),Ve.accessToken=K),ae&&(ne("number"==typeof ae,"internal-error",{appName:f}),Ve.expirationTime=ae),Ve}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new Rn,this.toJSON())}_performRefresh(){return Oe("not implemented")}}function Un(v,f){ne("string"==typeof v||void 0===v,"internal-error",{appName:f})}class Ee{constructor(f){var{uid:y,auth:D,stsTokenManager:K}=f,ae=(0,Ae._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new $r(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=y,this.auth=D,this.stsTokenManager=K,this.accessToken=K.accessToken,this.displayName=ae.displayName||null,this.email=ae.email||null,this.emailVerified=ae.emailVerified||!1,this.phoneNumber=ae.phoneNumber||null,this.photoURL=ae.photoURL||null,this.isAnonymous=ae.isAnonymous||!1,this.tenantId=ae.tenantId||null,this.providerData=ae.providerData?[...ae.providerData]:[],this.metadata=new br(ae.createdAt||void 0,ae.lastLoginAt||void 0)}getIdToken(f){var y=this;return(0,_.Z)(function*(){const D=yield Kn(y,y.stsTokenManager.getToken(y.auth,f));return ne(D,y.auth,"internal-error"),y.accessToken!==D&&(y.accessToken=D,yield y.auth._persistUserIfCurrent(y),y.auth._notifyListenersIfCurrent(y)),D})()}getIdTokenResult(f){return function be(v){return vt.apply(this,arguments)}(this,f)}reload(){return function tr(v){return Pn.apply(this,arguments)}(this)}_assign(f){this!==f&&(ne(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(y=>Object.assign({},y)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new Ee(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,y=!1){var D=this;return(0,_.Z)(function*(){let K=!1;f.idToken&&f.idToken!==D.stsTokenManager.accessToken&&(D.stsTokenManager.updateFromServerResponse(f),K=!0),y&&(yield sr(D)),yield D.auth._persistUserIfCurrent(D),K&&D.auth._notifyListenersIfCurrent(D)})()}delete(){var f=this;return(0,_.Z)(function*(){const y=yield f.getIdToken();return yield Kn(f,function zt(v,f){return bn.apply(this,arguments)}(f.auth,{idToken:y})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,y){var D,K,ae,Ve,ft,tn,ln,rr;const Hn=null!==(D=y.displayName)&&void 0!==D?D:void 0,Jr=null!==(K=y.email)&&void 0!==K?K:void 0,aa=null!==(ae=y.phoneNumber)&&void 0!==ae?ae:void 0,Ol=null!==(Ve=y.photoURL)&&void 0!==Ve?Ve:void 0,Ju=null!==(ft=y.tenantId)&&void 0!==ft?ft:void 0,Xu=null!==(tn=y._redirectEventId)&&void 0!==tn?tn:void 0,td=null!==(ln=y.createdAt)&&void 0!==ln?ln:void 0,yh=null!==(rr=y.lastLoginAt)&&void 0!==rr?rr:void 0,{uid:Nl,emailVerified:Dc,isAnonymous:nd,providerData:rd,stsTokenManager:Tc}=y;ne(Nl&&Tc,f,"internal-error");const La=Rn.fromJSON(this.name,Tc);ne("string"==typeof Nl,f,"internal-error"),Un(Hn,f.name),Un(Jr,f.name),ne("boolean"==typeof Dc,f,"internal-error"),ne("boolean"==typeof nd,f,"internal-error"),Un(aa,f.name),Un(Ol,f.name),Un(Ju,f.name),Un(Xu,f.name),Un(td,f.name),Un(yh,f.name);const id=new Ee({uid:Nl,auth:f,email:Jr,emailVerified:Dc,displayName:Hn,isAnonymous:nd,photoURL:Ol,phoneNumber:aa,tenantId:Ju,stsTokenManager:La,createdAt:td,lastLoginAt:yh});return rd&&Array.isArray(rd)&&(id.providerData=rd.map(sd=>Object.assign({},sd))),Xu&&(id._redirectEventId=Xu),id}static _fromIdTokenResponse(f,y,D=!1){return(0,_.Z)(function*(){const K=new Rn;K.updateFromServerResponse(y);const ae=new Ee({uid:y.localId,auth:f,stsTokenManager:K,isAnonymous:D});return yield sr(ae),ae})()}}const Me=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,_.Z)(function*(){return!0})()}_set(y,D){var K=this;return(0,_.Z)(function*(){K.storage[y]=D})()}_get(y){var D=this;return(0,_.Z)(function*(){const K=D.storage[y];return void 0===K?null:K})()}_remove(y){var D=this;return(0,_.Z)(function*(){delete D.storage[y]})()}_addListener(y,D){}_removeListener(y,D){}}return v.type="NONE",v})();function st(v,f,y){return`firebase:${v}:${f}:${y}`}class $e{constructor(f,y,D){this.persistence=f,this.auth=y,this.userKey=D;const{config:K,name:ae}=this.auth;this.fullUserKey=st(this.userKey,K.apiKey,ae),this.fullPersistenceKey=st("persistence",K.apiKey,ae),this.boundEventHandler=y._onStorageEvent.bind(y),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,_.Z)(function*(){const y=yield f.persistence._get(f.fullUserKey);return y?Ee._fromJSON(f.auth,y):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var y=this;return(0,_.Z)(function*(){if(y.persistence===f)return;const D=yield y.getCurrentUser();return yield y.removeCurrentUser(),y.persistence=f,D?y.setCurrentUser(D):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,y,D="authUser"){return(0,_.Z)(function*(){if(!y.length)return new $e(He(Me),f,D);const K=(yield Promise.all(y.map(function(){var ln=(0,_.Z)(function*(rr){if(yield rr._isAvailable())return rr});return function(rr){return ln.apply(this,arguments)}}()))).filter(ln=>ln);let ae=K[0]||He(Me);const Ve=st(D,f.config.apiKey,f.name);let ft=null;for(const ln of y)try{const rr=yield ln._get(Ve);if(rr){const Hn=Ee._fromJSON(f,rr);ln!==ae&&(ft=Hn),ae=ln;break}}catch(rr){}const tn=K.filter(ln=>ln._shouldAllowMigration);return ae._shouldAllowMigration&&tn.length?(ae=tn[0],ft&&(yield ae._set(Ve,ft.toJSON())),yield Promise.all(y.map(function(){var ln=(0,_.Z)(function*(rr){if(rr!==ae)try{yield rr._remove(Ve)}catch(Hn){}});return function(rr){return ln.apply(this,arguments)}}())),new $e(ae,f,D)):new $e(ae,f,D)})()}}function jt(v){const f=v.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(Zn(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(on(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(_n(f))return"Blackberry";if(cr(f))return"Webos";if(xn(f))return"Safari";if((f.includes("chrome/")||yn(f))&&!f.includes("edge/"))return"Chrome";if(Tr(f))return"Android";{const D=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==D?void 0:D.length))return D[1]}return"Other"}function on(v=(0,oe.z$)()){return/firefox\//i.test(v)}function xn(v=(0,oe.z$)()){const f=v.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function yn(v=(0,oe.z$)()){return/crios\//i.test(v)}function Zn(v=(0,oe.z$)()){return/iemobile/i.test(v)}function Tr(v=(0,oe.z$)()){return/android/i.test(v)}function _n(v=(0,oe.z$)()){return/blackberry/i.test(v)}function cr(v=(0,oe.z$)()){return/webos/i.test(v)}function Zr(v=(0,oe.z$)()){return/iphone|ipad|ipod/i.test(v)}function Yr(v=(0,oe.z$)()){return Zr(v)||Tr(v)||cr(v)||_n(v)||/windows phone/i.test(v)||Zn(v)}function Ni(v,f=[]){let y;switch(v){case"Browser":y=jt((0,oe.z$)());break;case"Worker":y=`${jt((0,oe.z$)())}-${v}`;break;default:y=v}const D=f.length?f.join(","):"FirebaseCore-web";return`${y}/JsCore/${Pe.SDK_VERSION}/${D}`}class Zt{constructor(f,y,D){this.app=f,this.heartbeatServiceProvider=y,this.config=D,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Nn(this),this.idTokenSubscription=new Nn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=tt,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=D.sdkClientVersion}_initializeWithPersistence(f,y){var D=this;return y&&(this._popupRedirectResolver=He(y)),this._initializationPromise=this.queue((0,_.Z)(function*(){var K,ae;if(!D._deleted&&(D.persistenceManager=yield $e.create(D,f),!D._deleted)){if(null===(K=D._popupRedirectResolver)||void 0===K?void 0:K._shouldInitProactively)try{yield D._popupRedirectResolver._initialize(D)}catch(Ve){}yield D.initializeCurrentUser(y),D.lastNotifiedUid=(null===(ae=D.currentUser)||void 0===ae?void 0:ae.uid)||null,!D._deleted&&(D._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,_.Z)(function*(){if(f._deleted)return;const y=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||y){if(f.currentUser&&y&&f.currentUser.uid===y.uid)return f._currentUser._assign(y),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(y)}})()}initializeCurrentUser(f){var y=this;return(0,_.Z)(function*(){var D;let K=yield y.assertedPersistence.getCurrentUser();if(f&&y.config.authDomain){yield y.getOrInitRedirectPersistenceManager();const ae=null===(D=y.redirectUser)||void 0===D?void 0:D._redirectEventId,Ve=null==K?void 0:K._redirectEventId,ft=yield y.tryRedirectSignIn(f);(!ae||ae===Ve)&&(null==ft?void 0:ft.user)&&(K=ft.user)}return K?K._redirectEventId?(ne(y._popupRedirectResolver,y,"argument-error"),yield y.getOrInitRedirectPersistenceManager(),y.redirectUser&&y.redirectUser._redirectEventId===K._redirectEventId?y.directlySetCurrentUser(K):y.reloadAndSetCurrentUserOrClear(K)):y.reloadAndSetCurrentUserOrClear(K):y.directlySetCurrentUser(null)})()}tryRedirectSignIn(f){var y=this;return(0,_.Z)(function*(){let D=null;try{D=yield y._popupRedirectResolver._completeRedirectFn(y,f,!0)}catch(K){yield y._setRedirectUser(null)}return D})()}reloadAndSetCurrentUserOrClear(f){var y=this;return(0,_.Z)(function*(){try{yield sr(f)}catch(D){if("auth/network-request-failed"!==D.code)return y.directlySetCurrentUser(null)}return y.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function St(){if("undefined"==typeof navigator)return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var f=this;return(0,_.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var y=this;return(0,_.Z)(function*(){const D=f?(0,oe.m9)(f):null;return D&&ne(D.auth.config.apiKey===y.config.apiKey,y,"invalid-user-token"),y._updateCurrentUser(D&&D._clone(y))})()}_updateCurrentUser(f){var y=this;return(0,_.Z)(function*(){if(!y._deleted)return f&&ne(y.tenantId===f.tenantId,y,"tenant-id-mismatch"),y.queue((0,_.Z)(function*(){yield y.directlySetCurrentUser(f),y.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,_.Z)(function*(){return(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null)})()}setPersistence(f){var y=this;return this.queue((0,_.Z)(function*(){yield y.assertedPersistence.setPersistence(He(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new oe.LL("auth","Firebase",f())}onAuthStateChanged(f,y,D){return this.registerStateListener(this.authStateSubscription,f,y,D)}onIdTokenChanged(f,y,D){return this.registerStateListener(this.idTokenSubscription,f,y,D)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,y){var D=this;return(0,_.Z)(function*(){const K=yield D.getOrInitRedirectPersistenceManager(y);return null===f?K.removeCurrentUser():K.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var y=this;return(0,_.Z)(function*(){if(!y.redirectPersistenceManager){const D=f&&He(f)||y._popupRedirectResolver;ne(D,y,"argument-error"),y.redirectPersistenceManager=yield $e.create(y,[He(D._redirectPersistence)],"redirectUser"),y.redirectUser=yield y.redirectPersistenceManager.getCurrentUser()}return y.redirectPersistenceManager})()}_redirectUserForId(f){var y=this;return(0,_.Z)(function*(){var D,K;return y._isInitialized&&(yield y.queue((0,_.Z)(function*(){}))),(null===(D=y._currentUser)||void 0===D?void 0:D._redirectEventId)===f?y._currentUser:(null===(K=y.redirectUser)||void 0===K?void 0:K._redirectEventId)===f?y.redirectUser:null})()}_persistUserIfCurrent(f){var y=this;return(0,_.Z)(function*(){if(f===y.currentUser)return y.queue((0,_.Z)(function*(){return y.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,y;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const D=null!==(y=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==y?y:null;this.lastNotifiedUid!==D&&(this.lastNotifiedUid=D,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,y,D,K){if(this._deleted)return()=>{};const ae="function"==typeof y?y:y.next.bind(y),Ve=this._isInitialized?Promise.resolve():this._initializationPromise;return ne(Ve,this,"internal-error"),Ve.then(()=>ae(this.currentUser)),"function"==typeof y?f.addObserver(y,D,K):f.addObserver(y)}directlySetCurrentUser(f){var y=this;return(0,_.Z)(function*(){y.currentUser&&y.currentUser!==f&&(y._currentUser._stopProactiveRefresh(),f&&y.isProactiveRefreshEnabled&&f._startProactiveRefresh()),y.currentUser=f,f?yield y.assertedPersistence.setCurrentUser(f):yield y.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=Ni(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,_.Z)(function*(){var y;const D={"X-Client-Version":f.clientVersion};f.app.options.appId&&(D["X-Firebase-gmpid"]=f.app.options.appId);const K=yield null===(y=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===y?void 0:y.getHeartbeatsHeader();return K&&(D["X-Firebase-Client"]=K),D})()}}function Ct(v){return(0,oe.m9)(v)}class Nn{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,oe.ne)(y=>this.observer=y)}get next(){return ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Lr(v){const f=v.indexOf(":");return f<0?"":v.substr(0,f+1)}function kr(v){if(!v)return null;const f=Number(v);return isNaN(f)?null:f}class nr{constructor(f,y){this.providerId=f,this.signInMethod=y}toJSON(){return Oe("not implemented")}_getIdTokenResponse(f){return Oe("not implemented")}_linkToIdToken(f,y){return Oe("not implemented")}_getReauthenticationResolver(f){return Oe("not implemented")}}function Rr(v,f){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,_.Z)(function*(v,f){return On(v,"POST","/v1/accounts:resetPassword",fn(v,f))})).apply(this,arguments)}function Gn(v,f){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,_.Z)(function*(v,f){return On(v,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Ki(v,f){return bs.apply(this,arguments)}function bs(){return(bs=(0,_.Z)(function*(v,f){return On(v,"POST","/v1/accounts:update",fn(v,f))})).apply(this,arguments)}function fe(){return(fe=(0,_.Z)(function*(v,f){return ar(v,"POST","/v1/accounts:signInWithPassword",fn(v,f))})).apply(this,arguments)}function re(v,f){return Ie.apply(this,arguments)}function Ie(){return(Ie=(0,_.Z)(function*(v,f){return On(v,"POST","/v1/accounts:sendOobCode",fn(v,f))})).apply(this,arguments)}function it(v,f){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,_.Z)(function*(v,f){return re(v,f)})).apply(this,arguments)}function kn(v,f){return pr.apply(this,arguments)}function pr(){return(pr=(0,_.Z)(function*(v,f){return re(v,f)})).apply(this,arguments)}function Ar(v,f){return ei.apply(this,arguments)}function ei(){return(ei=(0,_.Z)(function*(v,f){return re(v,f)})).apply(this,arguments)}function yo(v,f){return os.apply(this,arguments)}function os(){return(os=(0,_.Z)(function*(v,f){return re(v,f)})).apply(this,arguments)}function Ui(){return(Ui=(0,_.Z)(function*(v,f){return ar(v,"POST","/v1/accounts:signInWithEmailLink",fn(v,f))})).apply(this,arguments)}function vi(){return(vi=(0,_.Z)(function*(v,f){return ar(v,"POST","/v1/accounts:signInWithEmailLink",fn(v,f))})).apply(this,arguments)}class Ys extends nr{constructor(f,y,D,K=null){super("password",D),this._email=f,this._password=y,this._tenantId=K}static _fromEmailAndPassword(f,y){return new Ys(f,y,"password")}static _fromEmailAndCode(f,y,D=null){return new Ys(f,y,"emailLink",D)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const y="string"==typeof f?JSON.parse(f):f;if((null==y?void 0:y.email)&&(null==y?void 0:y.password)){if("password"===y.signInMethod)return this._fromEmailAndPassword(y.email,y.password);if("emailLink"===y.signInMethod)return this._fromEmailAndCode(y.email,y.password,y.tenantId)}return null}_getIdTokenResponse(f){var y=this;return(0,_.Z)(function*(){switch(y.signInMethod){case"password":return function we(v,f){return fe.apply(this,arguments)}(f,{returnSecureToken:!0,email:y._email,password:y._password});case"emailLink":return function as(v,f){return Ui.apply(this,arguments)}(f,{email:y._email,oobCode:y._password});default:dt(f,"internal-error")}})()}_linkToIdToken(f,y){var D=this;return(0,_.Z)(function*(){switch(D.signInMethod){case"password":return Gn(f,{idToken:y,returnSecureToken:!0,email:D._email,password:D._password});case"emailLink":return function Fs(v,f){return vi.apply(this,arguments)}(f,{idToken:y,email:D._email,oobCode:D._password});default:dt(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function xr(v,f){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,_.Z)(function*(v,f){return ar(v,"POST","/v1/accounts:signInWithIdp",fn(v,f))})).apply(this,arguments)}class Ne extends nr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const y=new Ne(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(y.idToken=f.idToken),f.accessToken&&(y.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(y.nonce=f.nonce),f.pendingToken&&(y.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(y.accessToken=f.oauthToken,y.secret=f.oauthTokenSecret):dt("argument-error"),y}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const y="string"==typeof f?JSON.parse(f):f,{providerId:D,signInMethod:K}=y,ae=(0,Ae._T)(y,["providerId","signInMethod"]);if(!D||!K)return null;const Ve=new Ne(D,K);return Ve.idToken=ae.idToken||void 0,Ve.accessToken=ae.accessToken||void 0,Ve.secret=ae.secret,Ve.nonce=ae.nonce,Ve.pendingToken=ae.pendingToken||null,Ve}_getIdTokenResponse(f){return xr(f,this.buildRequest())}_linkToIdToken(f,y){const D=this.buildRequest();return D.idToken=y,xr(f,D)}_getReauthenticationResolver(f){const y=this.buildRequest();return y.autoCreate=!1,xr(f,y)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const y={};this.idToken&&(y.id_token=this.idToken),this.accessToken&&(y.access_token=this.accessToken),this.secret&&(y.oauth_token_secret=this.secret),y.providerId=this.providerId,this.nonce&&!this.pendingToken&&(y.nonce=this.nonce),f.postBody=(0,oe.xO)(y)}return f}}function De(v,f){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,_.Z)(function*(v,f){return On(v,"POST","/v1/accounts:sendVerificationCode",fn(v,f))})).apply(this,arguments)}function _t(){return(_t=(0,_.Z)(function*(v,f){return ar(v,"POST","/v1/accounts:signInWithPhoneNumber",fn(v,f))})).apply(this,arguments)}function an(){return(an=(0,_.Z)(function*(v,f){const y=yield ar(v,"POST","/v1/accounts:signInWithPhoneNumber",fn(v,f));if(y.temporaryProof)throw er(v,"account-exists-with-different-credential",y);return y})).apply(this,arguments)}const _r={USER_NOT_FOUND:"user-not-found"};function Si(){return(Si=(0,_.Z)(function*(v,f){return ar(v,"POST","/v1/accounts:signInWithPhoneNumber",fn(v,Object.assign(Object.assign({},f),{operation:"REAUTH"})),_r)})).apply(this,arguments)}class ls extends nr{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,y){return new ls({verificationId:f,verificationCode:y})}static _fromTokenResponse(f,y){return new ls({phoneNumber:f,temporaryProof:y})}_getIdTokenResponse(f){return function bt(v,f){return _t.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,y){return function Ut(v,f){return an.apply(this,arguments)}(f,Object.assign({idToken:y},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function wn(v,f){return Si.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:y,verificationId:D,verificationCode:K}=this.params;return f&&y?{temporaryProof:f,phoneNumber:y}:{sessionInfo:D,code:K}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:y,verificationCode:D,phoneNumber:K,temporaryProof:ae}=f;return D||y||K||ae?new ls({verificationId:y,verificationCode:D,phoneNumber:K,temporaryProof:ae}):null}}class mr{constructor(f){var y,D,K,ae,Ve,ft;const tn=(0,oe.zd)((0,oe.pd)(f)),ln=null!==(y=tn.apiKey)&&void 0!==y?y:null,rr=null!==(D=tn.oobCode)&&void 0!==D?D:null,Hn=function $i(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(K=tn.mode)&&void 0!==K?K:null);ne(ln&&rr&&Hn,"argument-error"),this.apiKey=ln,this.operation=Hn,this.code=rr,this.continueUrl=null!==(ae=tn.continueUrl)&&void 0!==ae?ae:null,this.languageCode=null!==(Ve=tn.languageCode)&&void 0!==Ve?Ve:null,this.tenantId=null!==(ft=tn.tenantId)&&void 0!==ft?ft:null}static parseLink(f){const y=function Cs(v){const f=(0,oe.zd)((0,oe.pd)(v)).link,y=f?(0,oe.zd)((0,oe.pd)(f)).deep_link_id:null,D=(0,oe.zd)((0,oe.pd)(v)).deep_link_id;return(D?(0,oe.zd)((0,oe.pd)(D)).link:null)||D||y||f||v}(f);try{return new mr(y)}catch(D){return null}}}let ai=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(y,D){return Ys._fromEmailAndPassword(y,D)}static credentialWithLink(y,D){const K=mr.parseLink(D);return ne(K,"argument-error"),Ys._fromEmailAndCode(y,K.code,K.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class Ms{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class li extends Ms{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class ti extends li{static credentialFromJSON(f){const y="string"==typeof f?JSON.parse(f):f;return ne("providerId"in y&&"signInMethod"in y,"argument-error"),Ne._fromParams(y)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return ne(f.idToken||f.accessToken,"argument-error"),Ne._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return ti.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return ti.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:y,oauthAccessToken:D,oauthTokenSecret:K,pendingToken:ae,nonce:Ve,providerId:ft}=f;if(!D&&!K&&!y&&!ae||!ft)return null;try{return new ti(ft)._credential({idToken:y,accessToken:D,nonce:Ve,pendingToken:ae})}catch(tn){return null}}}let Ps=(()=>{class v extends li{constructor(){super("facebook.com")}static credential(y){return Ne._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return v.credentialFromTaggedObject(y)}static credentialFromError(y){return v.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return v.credential(y.oauthAccessToken)}catch(D){return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),Qs=(()=>{class v extends li{constructor(){super("google.com"),this.addScope("profile")}static credential(y,D){return Ne._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:y,accessToken:D})}static credentialFromResult(y){return v.credentialFromTaggedObject(y)}static credentialFromError(y){return v.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthIdToken:D,oauthAccessToken:K}=y;if(!D&&!K)return null;try{return v.credential(D,K)}catch(ae){return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),Ao=(()=>{class v extends li{constructor(){super("github.com")}static credential(y){return Ne._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return v.credentialFromTaggedObject(y)}static credentialFromError(y){return v.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return v.credential(y.oauthAccessToken)}catch(D){return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class ts extends nr{constructor(f,y){super(f,f),this.pendingToken=y}_getIdTokenResponse(f){return xr(f,this.buildRequest())}_linkToIdToken(f,y){const D=this.buildRequest();return D.idToken=y,xr(f,D)}_getReauthenticationResolver(f){const y=this.buildRequest();return y.autoCreate=!1,xr(f,y)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const y="string"==typeof f?JSON.parse(f):f,{providerId:D,signInMethod:K,pendingToken:ae}=y;return D&&K&&ae&&D===K?new ts(D,ae):null}static _create(f,y){return new ts(f,y)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class xi extends Ms{constructor(f){ne(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return xi.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return xi.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const y=ts.fromJSON(f);return ne(y,"argument-error"),y}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:y,providerId:D}=f;if(!y||!D)return null;try{return ts._create(D,y)}catch(K){return null}}}let Js=(()=>{class v extends li{constructor(){super("twitter.com")}static credential(y,D){return Ne._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:y,oauthTokenSecret:D})}static credentialFromResult(y){return v.credentialFromTaggedObject(y)}static credentialFromError(y){return v.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthAccessToken:D,oauthTokenSecret:K}=y;if(!D||!K)return null;try{return v.credential(D,K)}catch(ae){return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function Rs(v,f){return Br.apply(this,arguments)}function Br(){return(Br=(0,_.Z)(function*(v,f){return ar(v,"POST","/v1/accounts:signUp",fn(v,f))})).apply(this,arguments)}class ui{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,y,D,K=!1){return(0,_.Z)(function*(){const ae=yield Ee._fromIdTokenResponse(f,D,K),Ve=Xs(D);return new ui({user:ae,providerId:Ve,_tokenResponse:D,operationType:y})})()}static _forOperation(f,y,D){return(0,_.Z)(function*(){yield f._updateTokensIfNecessary(D,!0);const K=Xs(D);return new ui({user:f,providerId:K,_tokenResponse:D,operationType:y})})()}}function Xs(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function Zi(){return(Zi=(0,_.Z)(function*(v){var f;const y=Ct(v);if(yield y._initializationPromise,null===(f=y.currentUser)||void 0===f?void 0:f.isAnonymous)return new ui({user:y.currentUser,providerId:null,operationType:"signIn"});const D=yield Rs(y,{returnSecureToken:!0}),K=yield ui._fromIdTokenResponse(y,"signIn",D,!0);return yield y._updateCurrentUser(K.user),K})).apply(this,arguments)}class Gi extends oe.ZR{constructor(f,y,D,K){var ae;super(y.code,y.message),this.operationType=D,this.user=K,Object.setPrototypeOf(this,Gi.prototype),this.customData={appName:f.name,tenantId:null!==(ae=f.tenantId)&&void 0!==ae?ae:void 0,_serverResponse:y.customData._serverResponse,operationType:D}}static _fromErrorAndOperation(f,y,D,K){return new Gi(f,y,D,K)}}function Bn(v,f,y,D){return("reauthenticate"===f?y._getReauthenticationResolver(v):y._getIdTokenResponse(v)).catch(ae=>{throw"auth/multi-factor-auth-required"===ae.code?Gi._fromErrorAndOperation(v,ae,f,D):ae})}function ci(v){return new Set(v.map(({providerId:f})=>f).filter(f=>!!f))}function cs(){return(cs=(0,_.Z)(function*(v,f){const y=(0,oe.m9)(v);yield J(!0,y,f);const{providerUserInfo:D}=yield Fn(y.auth,{idToken:yield y.getIdToken(),deleteProvider:[f]}),K=ci(D||[]);return y.providerData=y.providerData.filter(ae=>K.has(ae.providerId)),K.has("phone")||(y.phoneNumber=null),yield y.auth._persistUserIfCurrent(y),y})).apply(this,arguments)}function Yn(v,f){return U.apply(this,arguments)}function U(){return(U=(0,_.Z)(function*(v,f,y=!1){const D=yield Kn(v,f._linkToIdToken(v.auth,yield v.getIdToken()),y);return ui._forOperation(v,"link",D)})).apply(this,arguments)}function J(v,f,y){return V.apply(this,arguments)}function V(){return(V=(0,_.Z)(function*(v,f,y){yield sr(f);const K=!1===v?"provider-already-linked":"no-such-provider";ne(ci(f.providerData).has(y)===v,f.auth,K)})).apply(this,arguments)}function ie(v,f){return ye.apply(this,arguments)}function ye(){return(ye=(0,_.Z)(function*(v,f,y=!1){const{auth:D}=v,K="reauthenticate";try{const ae=yield Kn(v,Bn(D,K,f,v),y);ne(ae.idToken,D,"internal-error");const Ve=gt(ae.idToken);ne(Ve,D,"internal-error");const{sub:ft}=Ve;return ne(v.uid===ft,D,"user-mismatch"),ui._forOperation(v,K,ae)}catch(ae){throw"auth/user-not-found"===(null==ae?void 0:ae.code)&&dt(D,"user-mismatch"),ae}})).apply(this,arguments)}function lt(v,f){return It.apply(this,arguments)}function It(){return(It=(0,_.Z)(function*(v,f,y=!1){const D="signIn",K=yield Bn(v,D,f),ae=yield ui._fromIdTokenResponse(v,D,K);return y||(yield v._updateCurrentUser(ae.user)),ae})).apply(this,arguments)}function Kt(v,f){return vr.apply(this,arguments)}function vr(){return(vr=(0,_.Z)(function*(v,f){return lt(Ct(v),f)})).apply(this,arguments)}function dr(v,f){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,_.Z)(function*(v,f){const y=(0,oe.m9)(v);return yield J(!1,y,f.providerId),Yn(y,f)})).apply(this,arguments)}function zn(v,f){return jr.apply(this,arguments)}function jr(){return(jr=(0,_.Z)(function*(v,f){return ie((0,oe.m9)(v),f)})).apply(this,arguments)}function Or(v,f){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,_.Z)(function*(v,f){return ar(v,"POST","/v1/accounts:signInWithCustomToken",fn(v,f))})).apply(this,arguments)}function wi(){return(wi=(0,_.Z)(function*(v,f){const y=Ct(v),D=yield Or(y,{token:f,returnSecureToken:!0}),K=yield ui._fromIdTokenResponse(y,"signIn",D);return yield y._updateCurrentUser(K.user),K})).apply(this,arguments)}class $t{constructor(f,y){this.factorId=f,this.uid=y.mfaEnrollmentId,this.enrollmentTime=new Date(y.enrolledAt).toUTCString(),this.displayName=y.displayName}static _fromServerResponse(f,y){return"phoneInfo"in y?eo._fromServerResponse(f,y):dt(f,"internal-error")}}class eo extends $t{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,y){return new eo(y)}}function wo(v,f,y){var D;ne((null===(D=y.url)||void 0===D?void 0:D.length)>0,v,"invalid-continue-uri"),ne(void 0===y.dynamicLinkDomain||y.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),f.continueUrl=y.url,f.dynamicLinkDomain=y.dynamicLinkDomain,f.canHandleCodeInApp=y.handleCodeInApp,y.iOS&&(ne(y.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),f.iOSBundleId=y.iOS.bundleId),y.android&&(ne(y.android.packageName.length>0,v,"missing-android-pkg-name"),f.androidInstallApp=y.android.installApp,f.androidMinimumVersionCode=y.android.minimumVersion,f.androidPackageName=y.android.packageName)}function Wi(){return(Wi=(0,_.Z)(function*(v,f,y){const D=(0,oe.m9)(v),K={requestType:"PASSWORD_RESET",email:f};y&&wo(D,K,y),yield kn(D,K)})).apply(this,arguments)}function L(){return(L=(0,_.Z)(function*(v,f,y){yield Rr((0,oe.m9)(v),{oobCode:f,newPassword:y})})).apply(this,arguments)}function G(){return(G=(0,_.Z)(function*(v,f){yield Ki((0,oe.m9)(v),{oobCode:f})})).apply(this,arguments)}function qe(v,f){return cn.apply(this,arguments)}function cn(){return(cn=(0,_.Z)(function*(v,f){const y=(0,oe.m9)(v),D=yield Rr(y,{oobCode:f}),K=D.requestType;switch(ne(K,y,"internal-error"),K){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ne(D.newEmail,y,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ne(D.mfaInfo,y,"internal-error");default:ne(D.email,y,"internal-error")}let ae=null;return D.mfaInfo&&(ae=$t._fromServerResponse(Ct(y),D.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===D.requestType?D.newEmail:D.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===D.requestType?D.email:D.newEmail)||null,multiFactorInfo:ae},operation:K}})).apply(this,arguments)}function hr(){return(hr=(0,_.Z)(function*(v,f){const{data:y}=yield qe((0,oe.m9)(v),f);return y.email})).apply(this,arguments)}function Mi(){return(Mi=(0,_.Z)(function*(v,f,y){const D=Ct(v),K=yield Rs(D,{returnSecureToken:!0,email:f,password:y}),ae=yield ui._fromIdTokenResponse(D,"signIn",K);return yield D._updateCurrentUser(ae.user),ae})).apply(this,arguments)}function ca(){return(ca=(0,_.Z)(function*(v,f,y){const D=(0,oe.m9)(v),K={requestType:"EMAIL_SIGNIN",email:f};ne(y.handleCodeInApp,D,"argument-error"),y&&wo(D,K,y),yield Ar(D,K)})).apply(this,arguments)}function Bs(){return(Bs=(0,_.Z)(function*(v,f,y){const D=(0,oe.m9)(v),K=ai.credentialWithLink(f,y||En());return ne(K._tenantId===(D.tenantId||null),D,"tenant-id-mismatch"),Kt(D,K)})).apply(this,arguments)}function Bi(v,f){return hs.apply(this,arguments)}function hs(){return(hs=(0,_.Z)(function*(v,f){return On(v,"POST","/v1/accounts:createAuthUri",fn(v,f))})).apply(this,arguments)}function Yi(){return(Yi=(0,_.Z)(function*(v,f){const D={identifier:f,continueUri:dn()?En():"http://localhost"},{signinMethods:K}=yield Bi((0,oe.m9)(v),D);return K||[]})).apply(this,arguments)}function So(){return(So=(0,_.Z)(function*(v,f){const y=(0,oe.m9)(v),K={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};f&&wo(y.auth,K,f);const{email:ae}=yield it(y.auth,K);ae!==v.email&&(yield v.reload())})).apply(this,arguments)}function Vo(){return(Vo=(0,_.Z)(function*(v,f,y){const D=(0,oe.m9)(v),ae={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:f};y&&wo(D.auth,ae,y);const{email:Ve}=yield yo(D.auth,ae);Ve!==v.email&&(yield v.reload())})).apply(this,arguments)}function Ko(v,f){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,_.Z)(function*(v,f){return On(v,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function ha(){return(ha=(0,_.Z)(function*(v,{displayName:f,photoURL:y}){if(void 0===f&&void 0===y)return;const D=(0,oe.m9)(v),ae={idToken:yield D.getIdToken(),displayName:f,photoUrl:y,returnSecureToken:!0},Ve=yield Kn(D,Ko(D.auth,ae));D.displayName=Ve.displayName||null,D.photoURL=Ve.photoUrl||null;const ft=D.providerData.find(({providerId:tn})=>"password"===tn);ft&&(ft.displayName=D.displayName,ft.photoURL=D.photoURL),yield D._updateTokensIfNecessary(Ve)})).apply(this,arguments)}function xo(v,f,y){return js.apply(this,arguments)}function js(){return(js=(0,_.Z)(function*(v,f,y){const{auth:D}=v,ae={idToken:yield v.getIdToken(),returnSecureToken:!0};f&&(ae.email=f),y&&(ae.password=y);const Ve=yield Kn(v,Gn(D,ae));yield v._updateTokensIfNecessary(Ve,!0)})).apply(this,arguments)}class fs{constructor(f,y,D={}){this.isNewUser=f,this.providerId=y,this.profile=D}}class Yo extends fs{constructor(f,y,D,K){super(f,y,D),this.username=K}}class $a extends fs{constructor(f,y){super(f,"facebook.com",y)}}class Hs extends Yo{constructor(f,y){super(f,"github.com",y,"string"==typeof(null==y?void 0:y.login)?null==y?void 0:y.login:null)}}class Mo extends fs{constructor(f,y){super(f,"google.com",y)}}class Ga extends Yo{constructor(f,y,D){super(f,"twitter.com",y,D)}}function bi(v){const{user:f,_tokenResponse:y}=v;return f.isAnonymous&&!y?{providerId:null,isNewUser:!1,profile:null}:function Bo(v){var f,y;if(!v)return null;const{providerId:D}=v,K=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},ae=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!D&&(null==v?void 0:v.idToken)){const Ve=null===(y=null===(f=gt(v.idToken))||void 0===f?void 0:f.firebase)||void 0===y?void 0:y.sign_in_provider;if(Ve)return new fs(ae,"anonymous"!==Ve&&"custom"!==Ve?Ve:null)}if(!D)return null;switch(D){case"facebook.com":return new $a(ae,K);case"github.com":return new Hs(ae,K);case"google.com":return new Mo(ae,K);case"twitter.com":return new Ga(ae,K,v.screenName||null);case"custom":case"anonymous":return new fs(ae,null);default:return new fs(ae,D,K)}}(y)}class to{constructor(f,y){this.type=f,this.credential=y}static _fromIdtoken(f){return new to("enroll",f)}static _fromMfaPendingCredential(f){return new to("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var y,D;if(null==f?void 0:f.multiFactorSession){if(null===(y=f.multiFactorSession)||void 0===y?void 0:y.pendingCredential)return to._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null===(D=f.multiFactorSession)||void 0===D?void 0:D.idToken)return to._fromIdtoken(f.multiFactorSession.idToken)}return null}}class ki{constructor(f,y,D){this.session=f,this.hints=y,this.signInResolver=D}static _fromError(f,y){const D=Ct(f),K=y.customData._serverResponse,ae=(K.mfaInfo||[]).map(ft=>$t._fromServerResponse(D,ft));ne(K.mfaPendingCredential,D,"internal-error");const Ve=to._fromMfaPendingCredential(K.mfaPendingCredential);return new ki(Ve,ae,function(){var ft=(0,_.Z)(function*(tn){const ln=yield tn._process(D,Ve);delete K.mfaInfo,delete K.mfaPendingCredential;const rr=Object.assign(Object.assign({},K),{idToken:ln.idToken,refreshToken:ln.refreshToken});switch(y.operationType){case"signIn":const Hn=yield ui._fromIdTokenResponse(D,y.operationType,rr);return yield D._updateCurrentUser(Hn.user),Hn;case"reauthenticate":return ne(y.user,D,"internal-error"),ui._forOperation(y.user,y.operationType,rr);default:dt(D,"internal-error")}});return function(tn){return ft.apply(this,arguments)}}())}resolveSignIn(f){var y=this;return(0,_.Z)(function*(){return y.signInResolver(f)})()}}function gi(v,f){return On(v,"POST","/v2/accounts/mfaEnrollment:start",fn(v,f))}class rs{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(y=>{y.mfaInfo&&(this.enrolledFactors=y.mfaInfo.map(D=>$t._fromServerResponse(f.auth,D)))})}static _fromUser(f){return new rs(f)}getSession(){var f=this;return(0,_.Z)(function*(){return to._fromIdtoken(yield f.user.getIdToken())})()}enroll(f,y){var D=this;return(0,_.Z)(function*(){const K=f,ae=yield D.getSession(),Ve=yield Kn(D.user,K._process(D.user.auth,ae,y));return yield D.user._updateTokensIfNecessary(Ve),D.user.reload()})()}unenroll(f){var y=this;return(0,_.Z)(function*(){const D="string"==typeof f?f:f.uid,K=yield y.user.getIdToken(),ae=yield Kn(y.user,function Aa(v,f){return On(v,"POST","/v2/accounts/mfaEnrollment:withdraw",fn(v,f))}(y.user.auth,{idToken:K,mfaEnrollmentId:D}));y.enrolledFactors=y.enrolledFactors.filter(({uid:Ve})=>Ve!==D),yield y.user._updateTokensIfNecessary(ae);try{yield y.user.reload()}catch(Ve){if("auth/user-token-expired"!==Ve.code)throw Ve}})()}}const Ci=new WeakMap,Ii="__sak";class Ro{constructor(f,y){this.storageRetriever=f,this.type=y}_isAvailable(){try{return this.storage?(this.storage.setItem(Ii,"1"),this.storage.removeItem(Ii),Promise.resolve(!0)):Promise.resolve(!1)}catch(f){return Promise.resolve(!1)}}_set(f,y){return this.storage.setItem(f,JSON.stringify(y)),Promise.resolve()}_get(f){const y=this.storage.getItem(f);return Promise.resolve(y?JSON.parse(y):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const Fi=(()=>{class v extends Ro{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(y,D)=>this.onStorageEvent(y,D),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function za(){const v=(0,oe.z$)();return xn(v)||Zr(v)}()&&function Pr(){try{return!(!window||window===window.top)}catch(v){return!1}}(),this.fallbackToPolling=Yr(),this._shouldAllowMigration=!0}forAllChangedKeys(y){for(const D of Object.keys(this.listeners)){const K=this.storage.getItem(D),ae=this.localCache[D];K!==ae&&y(D,ae,K)}}onStorageEvent(y,D=!1){if(!y.key)return void this.forAllChangedKeys((ft,tn,ln)=>{this.notifyListeners(ft,ln)});const K=y.key;if(D?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ft=this.storage.getItem(K);if(y.newValue!==ft)null!==y.newValue?this.storage.setItem(K,y.newValue):this.storage.removeItem(K);else if(this.localCache[K]===y.newValue&&!D)return}const ae=()=>{const ft=this.storage.getItem(K);!D&&this.localCache[K]===ft||this.notifyListeners(K,ft)},Ve=this.storage.getItem(K);!function Oi(){return(0,oe.w1)()&&10===document.documentMode}()||Ve===y.newValue||y.newValue===y.oldValue?ae():setTimeout(ae,10)}notifyListeners(y,D){this.localCache[y]=D;const K=this.listeners[y];if(K)for(const ae of Array.from(K))ae(D&&JSON.parse(D))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((y,D,K)=>{this.onStorageEvent(new StorageEvent("storage",{key:y,oldValue:D,newValue:K}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(y,D){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[y]||(this.listeners[y]=new Set,this.localCache[y]=this.storage.getItem(y)),this.listeners[y].add(D)}_removeListener(y,D){this.listeners[y]&&(this.listeners[y].delete(D),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(y,D){var K=()=>super._set,ae=this;return(0,_.Z)(function*(){yield K().call(ae,y,D),ae.localCache[y]=JSON.stringify(D)})()}_get(y){var D=()=>super._get,K=this;return(0,_.Z)(function*(){const ae=yield D().call(K,y);return K.localCache[y]=JSON.stringify(ae),ae})()}_remove(y){var D=()=>super._remove,K=this;return(0,_.Z)(function*(){yield D().call(K,y),delete K.localCache[y]})()}}return v.type="LOCAL",v})(),$s=(()=>{class v extends Ro{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(y,D){}_removeListener(y,D){}}return v.type="SESSION",v})();let x=(()=>{class v{constructor(y){this.eventTarget=y,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(y){const D=this.receivers.find(ae=>ae.isListeningto(y));if(D)return D;const K=new v(y);return this.receivers.push(K),K}isListeningto(y){return this.eventTarget===y}handleEvent(y){var D=this;return(0,_.Z)(function*(){const K=y,{eventId:ae,eventType:Ve,data:ft}=K.data,tn=D.handlersMap[Ve];if(!(null==tn?void 0:tn.size))return;K.ports[0].postMessage({status:"ack",eventId:ae,eventType:Ve});const ln=Array.from(tn).map(function(){var Hn=(0,_.Z)(function*(Jr){return Jr(K.origin,ft)});return function(Jr){return Hn.apply(this,arguments)}}()),rr=yield function S(v){return Promise.all(v.map(function(){var f=(0,_.Z)(function*(y){try{return{fulfilled:!0,value:yield y}}catch(D){return{fulfilled:!1,reason:D}}});return function(y){return f.apply(this,arguments)}}()))}(ln);K.ports[0].postMessage({status:"done",eventId:ae,eventType:Ve,response:rr})})()}_subscribe(y,D){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[y]||(this.handlersMap[y]=new Set),this.handlersMap[y].add(D)}_unsubscribe(y,D){this.handlersMap[y]&&D&&this.handlersMap[y].delete(D),(!D||0===this.handlersMap[y].size)&&delete this.handlersMap[y],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function Q(v="",f=10){let y="";for(let D=0;D<f;D++)y+=Math.floor(10*Math.random());return v+y}class ve{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,y,D=50){var K=this;return(0,_.Z)(function*(){const ae="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!ae)throw new Error("connection_unavailable");let Ve,ft;return new Promise((tn,ln)=>{const rr=Q("",20);ae.port1.start();const Hn=setTimeout(()=>{ln(new Error("unsupported_event"))},D);ft={messageChannel:ae,onMessage(Jr){const aa=Jr;if(aa.data.eventId===rr)switch(aa.data.status){case"ack":clearTimeout(Hn),Ve=setTimeout(()=>{ln(new Error("timeout"))},3e3);break;case"done":clearTimeout(Ve),tn(aa.data.response);break;default:clearTimeout(Hn),clearTimeout(Ve),ln(new Error("invalid_response"))}}},K.handlers.add(ft),ae.port1.addEventListener("message",ft.onMessage),K.target.postMessage({eventType:f,eventId:rr,data:y},[ae.port2])}).finally(()=>{ft&&K.removeMessageHandler(ft)})})()}}function Je(){return window}function Cr(){return void 0!==Je().WorkerGlobalScope&&"function"==typeof Je().importScripts}function ri(){return(ri=(0,_.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(v){return null}})).apply(this,arguments)}const No="firebaseLocalStorageDb",fa="firebaseLocalStorage",Nt="fbase_key";class Gr{constructor(f){this.request=f}toPromise(){return new Promise((f,y)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{y(this.request.error)})})}}function no(v,f){return v.transaction([fa],f?"readwrite":"readonly").objectStore(fa)}function T(){const v=indexedDB.open(No,1);return new Promise((f,y)=>{v.addEventListener("error",()=>{y(v.error)}),v.addEventListener("upgradeneeded",()=>{const D=v.result;try{D.createObjectStore(fa,{keyPath:Nt})}catch(K){y(K)}}),v.addEventListener("success",(0,_.Z)(function*(){const D=v.result;D.objectStoreNames.contains(fa)?f(D):(D.close(),yield function ro(){const v=indexedDB.deleteDatabase(No);return new Gr(v).toPromise()}(),f(yield T()))}))})}function I(v,f,y){return C.apply(this,arguments)}function C(){return(C=(0,_.Z)(function*(v,f,y){const D=no(v,!0).put({[Nt]:f,value:y});return new Gr(D).toPromise()})).apply(this,arguments)}function O(){return(O=(0,_.Z)(function*(v,f){const y=no(v,!1).get(f),D=yield new Gr(y).toPromise();return void 0===D?null:D.value})).apply(this,arguments)}function q(v,f){const y=no(v,!0).delete(f);return new Gr(y).toPromise()}const nn=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var y=this;return(0,_.Z)(function*(){return y.db||(y.db=yield T()),y.db})()}_withRetries(y){var D=this;return(0,_.Z)(function*(){let K=0;for(;;)try{const ae=yield D._openDb();return yield y(ae)}catch(ae){if(K++>3)throw ae;D.db&&(D.db.close(),D.db=void 0)}})()}initializeServiceWorkerMessaging(){var y=this;return(0,_.Z)(function*(){return Cr()?y.initializeReceiver():y.initializeSender()})()}initializeReceiver(){var y=this;return(0,_.Z)(function*(){y.receiver=x._getInstance(function ps(){return Cr()?self:null}()),y.receiver._subscribe("keyChanged",function(){var D=(0,_.Z)(function*(K,ae){return{keyProcessed:(yield y._poll()).includes(ae.key)}});return function(K,ae){return D.apply(this,arguments)}}()),y.receiver._subscribe("ping",function(){var D=(0,_.Z)(function*(K,ae){return["keyChanged"]});return function(K,ae){return D.apply(this,arguments)}}())})()}initializeSender(){var y=this;return(0,_.Z)(function*(){var D,K;if(y.activeServiceWorker=yield function zi(){return ri.apply(this,arguments)}(),!y.activeServiceWorker)return;y.sender=new ve(y.activeServiceWorker);const ae=yield y.sender._send("ping",{},800);!ae||(null===(D=ae[0])||void 0===D?void 0:D.fulfilled)&&(null===(K=ae[0])||void 0===K?void 0:K.value.includes("keyChanged"))&&(y.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(y){var D=this;return(0,_.Z)(function*(){if(D.sender&&D.activeServiceWorker&&function yi(){var v;return(null===(v=null==navigator?void 0:navigator.serviceWorker)||void 0===v?void 0:v.controller)||null}()===D.activeServiceWorker)try{yield D.sender._send("keyChanged",{key:y},D.serviceWorkerReceiverAvailable?800:50)}catch(K){}})()}_isAvailable(){return(0,_.Z)(function*(){try{if(!indexedDB)return!1;const y=yield T();return yield I(y,Ii,"1"),yield q(y,Ii),!0}catch(y){}return!1})()}_withPendingWrite(y){var D=this;return(0,_.Z)(function*(){D.pendingWrites++;try{yield y()}finally{D.pendingWrites--}})()}_set(y,D){var K=this;return(0,_.Z)(function*(){return K._withPendingWrite((0,_.Z)(function*(){return yield K._withRetries(ae=>I(ae,y,D)),K.localCache[y]=D,K.notifyServiceWorker(y)}))})()}_get(y){var D=this;return(0,_.Z)(function*(){const K=yield D._withRetries(ae=>function R(v,f){return O.apply(this,arguments)}(ae,y));return D.localCache[y]=K,K})()}_remove(y){var D=this;return(0,_.Z)(function*(){return D._withPendingWrite((0,_.Z)(function*(){return yield D._withRetries(K=>q(K,y)),delete D.localCache[y],D.notifyServiceWorker(y)}))})()}_poll(){var y=this;return(0,_.Z)(function*(){const D=yield y._withRetries(Ve=>{const ft=no(Ve,!1).getAll();return new Gr(ft).toPromise()});if(!D)return[];if(0!==y.pendingWrites)return[];const K=[],ae=new Set;for(const{fbase_key:Ve,value:ft}of D)ae.add(Ve),JSON.stringify(y.localCache[Ve])!==JSON.stringify(ft)&&(y.notifyListeners(Ve,ft),K.push(Ve));for(const Ve of Object.keys(y.localCache))y.localCache[Ve]&&!ae.has(Ve)&&(y.notifyListeners(Ve,null),K.push(Ve));return K})()}notifyListeners(y,D){this.localCache[y]=D;const K=this.listeners[y];if(K)for(const ae of Array.from(K))ae(D)}startPolling(){var y=this;this.stopPolling(),this.pollTimer=setInterval((0,_.Z)(function*(){return y._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(y,D){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[y]||(this.listeners[y]=new Set,this._get(y)),this.listeners[y].add(D)}_removeListener(y,D){this.listeners[y]&&(this.listeners[y].delete(D),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})();function Ir(v,f){return On(v,"POST","/v2/accounts/mfaSignIn:start",fn(v,f))}function wr(){return(wr=(0,_.Z)(function*(v){return(yield On(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function io(v){return new Promise((f,y)=>{const D=document.createElement("script");D.setAttribute("src",v),D.onload=f,D.onerror=K=>{const ae=nt("internal-error");ae.customData=K,y(ae)},D.type="text/javascript",D.charset="UTF-8",function Gs(){var v,f;return null!==(f=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==f?f:document}().appendChild(D)})}function Qi(v){return`__${v}${Math.floor(1e6*Math.random())}`}const jn=1e12;class il{constructor(f){this.auth=f,this.counter=jn,this._widgets=new Map}render(f,y){const D=this.counter;return this._widgets.set(D,new Gl(f,this.auth.name,y||{})),this.counter++,D}reset(f){var y;const D=f||jn;null===(y=this._widgets.get(D))||void 0===y||y.delete(),this._widgets.delete(D)}getResponse(f){var y;return(null===(y=this._widgets.get(f||jn))||void 0===y?void 0:y.getResponse())||""}execute(f){var y=this;return(0,_.Z)(function*(){var D;return null===(D=y._widgets.get(f||jn))||void 0===D||D.execute(),""})()}}class Gl{constructor(f,y,D){this.params=D,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const K="string"==typeof f?document.getElementById(f):f;ne(K,"argument-error",{appName:y}),this.container=K,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Di(v){const f=[],y="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let D=0;D<v;D++)f.push(y.charAt(Math.floor(Math.random()*y.length)));return f.join("")}(50);const{callback:f,"expired-callback":y}=this.params;if(f)try{f(this.responseToken)}catch(D){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,y)try{y()}catch(D){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const qn=Qi("rcb"),dc=new hn(3e4,6e4);class Wc{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Je().grecaptcha}load(f,y=""){return ne(function Lu(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(y),f,"argument-error"),this.shouldResolveImmediately(y)?Promise.resolve(Je().grecaptcha):new Promise((D,K)=>{const ae=Je().setTimeout(()=>{K(nt(f,"network-request-failed"))},dc.get());Je()[qn]=()=>{Je().clearTimeout(ae),delete Je()[qn];const ft=Je().grecaptcha;if(!ft)return void K(nt(f,"internal-error"));const tn=ft.render;ft.render=(ln,rr)=>{const Hn=tn(ln,rr);return this.counter++,Hn},this.hostLanguage=y,D(ft)},io(`https://www.google.com/recaptcha/api.js??${(0,oe.xO)({onload:qn,render:"explicit",hl:y})}`).catch(()=>{clearTimeout(ae),K(nt(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){return!!Je().grecaptcha&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Hr{load(f){return(0,_.Z)(function*(){return new il(f)})()}clearedOneInstance(){}}const hc="recaptcha",gs={theme:"light",type:"image"};class qa{constructor(f,y=Object.assign({},gs),D){this.parameters=y,this.type=hc,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ct(D),this.isInvisible="invisible"===this.parameters.size,ne("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const K="string"==typeof f?document.getElementById(f):f;ne(K,this.auth,"argument-error"),this.container=K,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Hr:new Wc,this.validateStartingState()}verify(){var f=this;return(0,_.Z)(function*(){f.assertNotDestroyed();const y=yield f.render(),D=f.getAssertedRecaptcha();return D.getResponse(y)||new Promise(ae=>{const Ve=ft=>{!ft||(f.tokenChangeListeners.delete(Ve),ae(ft))};f.tokenChangeListeners.add(Ve),f.isInvisible&&D.execute(y)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){ne(!this.parameters.sitekey,this.auth,"argument-error"),ne(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ne("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return y=>{if(this.tokenChangeListeners.forEach(D=>D(y)),"function"==typeof f)f(y);else if("string"==typeof f){const D=Je()[f];"function"==typeof D&&D(y)}}}assertNotDestroyed(){ne(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,_.Z)(function*(){if(yield f.init(),!f.widgetId){let y=f.container;if(!f.isInvisible){const D=document.createElement("div");y.appendChild(D),y=D}f.widgetId=f.getAssertedRecaptcha().render(y,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,_.Z)(function*(){ne(dn()&&!Cr(),f.auth,"internal-error"),yield function fc(){let v=null;return new Promise(f=>{"complete"!==document.readyState?(v=()=>f(),window.addEventListener("load",v)):f()}).catch(f=>{throw v&&window.removeEventListener("load",v),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const y=yield function Wr(v){return wr.apply(this,arguments)}(f.auth);ne(y,f.auth,"internal-error"),f.parameters.sitekey=y})()}getAssertedRecaptcha(){return ne(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Ti{constructor(f,y){this.verificationId=f,this.onConfirmation=y}confirm(f){const y=ls._fromVerification(this.verificationId,f);return this.onConfirmation(y)}}function ii(){return(ii=(0,_.Z)(function*(v,f,y){const D=Ct(v),K=yield ms(D,f,(0,oe.m9)(y));return new Ti(K,ae=>Kt(D,ae))})).apply(this,arguments)}function jo(){return(jo=(0,_.Z)(function*(v,f,y){const D=(0,oe.m9)(v);yield J(!1,D,"phone");const K=yield ms(D.auth,f,(0,oe.m9)(y));return new Ti(K,ae=>dr(D,ae))})).apply(this,arguments)}function uu(){return(uu=(0,_.Z)(function*(v,f,y){const D=(0,oe.m9)(v),K=yield ms(D.auth,f,(0,oe.m9)(y));return new Ti(K,ae=>zn(D,ae))})).apply(this,arguments)}function ms(v,f,y){return Ho.apply(this,arguments)}function Ho(){return(Ho=(0,_.Z)(function*(v,f,y){var D;const K=yield y.verify();try{let ae;if(ne("string"==typeof K,v,"argument-error"),ne(y.type===hc,v,"argument-error"),ae="string"==typeof f?{phoneNumber:f}:f,"session"in ae){const Ve=ae.session;if("phoneNumber"in ae)return ne("enroll"===Ve.type,v,"internal-error"),(yield gi(v,{idToken:Ve.credential,phoneEnrollmentInfo:{phoneNumber:ae.phoneNumber,recaptchaToken:K}})).phoneSessionInfo.sessionInfo;{ne("signin"===Ve.type,v,"internal-error");const ft=(null===(D=ae.multiFactorHint)||void 0===D?void 0:D.uid)||ae.multiFactorUid;return ne(ft,v,"missing-multi-factor-info"),(yield Ir(v,{mfaPendingCredential:Ve.credential,mfaEnrollmentId:ft,phoneSignInInfo:{recaptchaToken:K}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Ve}=yield De(v,{phoneNumber:ae.phoneNumber,recaptchaToken:K});return Ve}}finally{y._reset()}})).apply(this,arguments)}function Co(){return(Co=(0,_.Z)(function*(v,f){yield Yn((0,oe.m9)(v),f)})).apply(this,arguments)}let Ws=(()=>{class v{constructor(y){this.providerId=v.PROVIDER_ID,this.auth=Ct(y)}verifyPhoneNumber(y,D){return ms(this.auth,y,(0,oe.m9)(D))}static credential(y,D){return ls._fromVerification(y,D)}static credentialFromResult(y){return v.credentialFromTaggedObject(y)}static credentialFromError(y){return v.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{phoneNumber:D,temporaryProof:K}=y;return D&&K?ls._fromTokenResponse(D,K):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function Jo(v,f){return f?He(f):(ne(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class Yt extends nr{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return xr(f,this._buildIdpRequest())}_linkToIdToken(f,y){return xr(f,this._buildIdpRequest(y))}_getReauthenticationResolver(f){return xr(f,this._buildIdpRequest())}_buildIdpRequest(f){const y={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(y.idToken=f),y}}function Wl(v){return lt(v.auth,new Yt(v),v.bypassAuthState)}function Vu(v){const{auth:f,user:y}=v;return ne(y,f,"internal-error"),ie(y,new Yt(v),v.bypassAuthState)}function Sa(v){return so.apply(this,arguments)}function so(){return(so=(0,_.Z)(function*(v){const{auth:f,user:y}=v;return ne(y,f,"internal-error"),Yn(y,new Yt(v),v.bypassAuthState)})).apply(this,arguments)}class As{constructor(f,y,D,K,ae=!1){this.auth=f,this.resolver=D,this.user=K,this.bypassAuthState=ae,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(y)?y:[y]}execute(){var f=this;return new Promise(function(){var y=(0,_.Z)(function*(D,K){f.pendingPromise={resolve:D,reject:K};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(ae){f.reject(ae)}});return function(D,K){return y.apply(this,arguments)}}())}onAuthEvent(f){var y=this;return(0,_.Z)(function*(){const{urlResponse:D,sessionId:K,postBody:ae,tenantId:Ve,error:ft,type:tn}=f;if(ft)return void y.reject(ft);const ln={auth:y.auth,requestUri:D,sessionId:K,tenantId:Ve||void 0,postBody:ae||void 0,user:y.user,bypassAuthState:y.bypassAuthState};try{y.resolve(yield y.getIdpTask(tn)(ln))}catch(rr){y.reject(rr)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return Wl;case"linkViaPopup":case"linkViaRedirect":return Sa;case"reauthViaPopup":case"reauthViaRedirect":return Vu;default:dt(this.auth,"internal-error")}}resolve(f){W(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){W(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const xa=new hn(2e3,1e4);function ol(){return(ol=(0,_.Z)(function*(v,f,y){const D=Ct(v);at(v,f,Ms);const K=Jo(D,y);return new ta(D,"signInViaPopup",f,K).executeNotNull()})).apply(this,arguments)}function ea(){return(ea=(0,_.Z)(function*(v,f,y){const D=(0,oe.m9)(v);at(D.auth,f,Ms);const K=Jo(D.auth,y);return new ta(D.auth,"reauthViaPopup",f,K,D).executeNotNull()})).apply(this,arguments)}function al(){return(al=(0,_.Z)(function*(v,f,y){const D=(0,oe.m9)(v);at(D.auth,f,Ms);const K=Jo(D.auth,y);return new ta(D.auth,"linkViaPopup",f,K,D).executeNotNull()})).apply(this,arguments)}let ta=(()=>{class v extends As{constructor(y,D,K,ae,Ve){super(y,D,ae,Ve),this.provider=K,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var y=this;return(0,_.Z)(function*(){const D=yield y.execute();return ne(D,y.auth,"internal-error"),D})()}onExecution(){var y=this;return(0,_.Z)(function*(){W(1===y.filter.length,"Popup operations only handle one event");const D=Q();y.authWindow=yield y.resolver._openPopup(y.auth,y.provider,y.filter[0],D),y.authWindow.associatedEvent=D,y.resolver._originValidation(y.auth).catch(K=>{y.reject(K)}),y.resolver._isIframeWebStorageSupported(y.auth,K=>{K||y.reject(nt(y.auth,"web-storage-unsupported"))}),y.pollUserCancellation()})()}get eventId(){var y;return(null===(y=this.authWindow)||void 0===y?void 0:y.associatedEvent)||null}cancel(){this.reject(nt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const y=()=>{var D,K;this.pollId=(null===(K=null===(D=this.authWindow)||void 0===D?void 0:D.window)||void 0===K?void 0:K.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(nt(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(y,xa.get())};y()}}return v.currentPopupAction=null,v})();const oo=new Map;class ll extends As{constructor(f,y,D=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],y,void 0,D),this.eventId=null}execute(){var f=()=>super.execute,y=this;return(0,_.Z)(function*(){let D=oo.get(y.auth._key());if(!D){try{const ae=(yield function na(v,f){return bl.apply(this,arguments)}(y.resolver,y.auth))?yield f().call(y):null;D=()=>Promise.resolve(ae)}catch(K){D=()=>Promise.reject(K)}oo.set(y.auth._key(),D)}return y.bypassAuthState||oo.set(y.auth._key(),()=>Promise.resolve(null)),D()})()}onAuthEvent(f){var y=()=>super.onAuthEvent,D=this;return(0,_.Z)(function*(){if("signInViaRedirect"===f.type)return y().call(D,f);if("unknown"!==f.type){if(f.eventId){const K=yield D.auth._redirectUserForId(f.eventId);if(K)return D.user=K,y().call(D,f);D.resolve(null)}}else D.resolve(null)})()}onExecution(){return(0,_.Z)(function*(){})()}cleanUp(){}}function bl(){return(bl=(0,_.Z)(function*(v,f){const y=H(f),D=k(v);if(!(yield D._isAvailable()))return!1;const K="true"===(yield D._get(y));return yield D._remove(y),K})).apply(this,arguments)}function ga(v,f){return Cl.apply(this,arguments)}function Cl(){return(Cl=(0,_.Z)(function*(v,f){return k(v)._set(H(f),"true")})).apply(this,arguments)}function k(v){return He(v._redirectPersistence)}function H(v){return st("pendingRedirect",v.config.apiKey,v.name)}function Ge(){return(Ge=(0,_.Z)(function*(v,f,y){const D=Ct(v);at(v,f,Ms);const K=Jo(D,y);return yield ga(K,D),K._openRedirect(D,f,"signInViaRedirect")})).apply(this,arguments)}function mn(){return(mn=(0,_.Z)(function*(v,f,y){const D=(0,oe.m9)(v);at(D.auth,f,Ms);const K=Jo(D.auth,y);yield ga(K,D.auth);const ae=yield Pa(D);return K._openRedirect(D.auth,f,"reauthViaRedirect",ae)})).apply(this,arguments)}function Er(){return(Er=(0,_.Z)(function*(v,f,y){const D=(0,oe.m9)(v);at(D.auth,f,Ms);const K=Jo(D.auth,y);yield J(!1,D,f.providerId),yield ga(K,D.auth);const ae=yield Pa(D);return K._openRedirect(D.auth,f,"linkViaRedirect",ae)})).apply(this,arguments)}function ys(){return(ys=(0,_.Z)(function*(v,f){return yield Ct(v)._initializationPromise,Li(v,f,!1)})).apply(this,arguments)}function Li(v,f){return $o.apply(this,arguments)}function $o(){return($o=(0,_.Z)(function*(v,f,y=!1){const D=Ct(v),K=Jo(D,f),Ve=yield new ll(D,K,y).execute();return Ve&&!y&&(delete Ve.user._redirectEventId,yield D._persistUserIfCurrent(Ve.user),yield D._setRedirectUser(null,f)),Ve})).apply(this,arguments)}function Pa(v){return ao.apply(this,arguments)}function ao(){return(ao=(0,_.Z)(function*(v){const f=Q(`${v.uid}:::`);return v._redirectEventId=f,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),f})).apply(this,arguments)}class Go{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let y=!1;return this.consumers.forEach(D=>{this.isEventForConsumer(f,D)&&(y=!0,this.sendToConsumer(f,D),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function Ss(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return du(v);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,y||(this.queuedRedirectEvent=f,y=!0)),y}sendToConsumer(f,y){var D;if(f.error&&!du(f)){const K=(null===(D=f.error.code)||void 0===D?void 0:D.split("auth/")[1])||"internal-error";y.onError(nt(this.auth,K))}else y.onAuthEvent(f)}isEventForConsumer(f,y){const D=null===y.eventId||!!f.eventId&&f.eventId===y.eventId;return y.filter.includes(f.type)&&D}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ra(f))}saveEventToCache(f){this.cachedEventUids.add(ra(f)),this.lastProcessedEventTime=Date.now()}}function ra(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(f=>f).join("-")}function du({type:v,error:f}){return"unknown"===v&&"auth/no-auth-event"===(null==f?void 0:f.code)}function hu(v){return Il.apply(this,arguments)}function Il(){return(Il=(0,_.Z)(function*(v,f={}){return On(v,"GET","/v1/projects",f)})).apply(this,arguments)}const Ad=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,fu=/^https?/;function Dl(){return(Dl=(0,_.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:f}=yield hu(v);for(const y of f)try{if(Bu(y))return}catch(D){}dt(v,"unauthorized-domain")})).apply(this,arguments)}function Bu(v){const f=En(),{protocol:y,hostname:D}=new URL(f);if(v.startsWith("chrome-extension://")){const Ve=new URL(v);return""===Ve.hostname&&""===D?"chrome-extension:"===y&&v.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===y&&Ve.hostname===D}if(!fu.test(y))return!1;if(Ad.test(v))return D===v;const K=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+K+"|"+K+")$","i").test(D)}const zc=new hn(3e4,6e4);function Ka(){const v=Je().___jsl;if(null==v?void 0:v.H)for(const f of Object.keys(v.H))if(v.H[f].r=v.H[f].r||[],v.H[f].L=v.H[f].L||[],v.H[f].r=[...v.H[f].L],v.CP)for(let y=0;y<v.CP.length;y++)v.CP[y]=null}let ju=null;function dh(v){return ju=ju||function zl(v){return new Promise((f,y)=>{var D,K,ae;function Ve(){Ka(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{Ka(),y(nt(v,"network-request-failed"))},timeout:zc.get()})}if(null===(K=null===(D=Je().gapi)||void 0===D?void 0:D.iframes)||void 0===K?void 0:K.Iframe)f(gapi.iframes.getContext());else{if(!(null===(ae=Je().gapi)||void 0===ae?void 0:ae.load)){const ft=Qi("iframefcb");return Je()[ft]=()=>{gapi.load?Ve():y(nt(v,"network-request-failed"))},io(`https://apis.google.com/js/api.js?onload=${ft}`).catch(tn=>y(tn))}Ve()}}).catch(f=>{throw ju=null,f})}(v),ju}const Sd=new hn(5e3,15e3),Ra={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Tl=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ma(v){const f=v.config;ne(f.authDomain,v,"auth-domain-config-required");const y=f.emulator?Wt(f,"emulator/auth/iframe"):`https://${v.config.authDomain}/__/auth/iframe`,D={apiKey:f.apiKey,appName:v.name,v:Pe.SDK_VERSION},K=Tl.get(v.config.apiHost);K&&(D.eid=K);const ae=v._getFrameworks();return ae.length&&(D.fw=ae.join(",")),`${y}?${(0,oe.xO)(D).slice(1)}`}function ql(){return ql=(0,_.Z)(function*(v){const f=yield dh(v),y=Je().gapi;return ne(y,v,"internal-error"),f.open({where:document.body,url:ma(v),messageHandlersFilter:y.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ra,dontclear:!0},D=>new Promise(function(){var K=(0,_.Z)(function*(ae,Ve){yield D.restyle({setHideOnLeave:!1});const ft=nt(v,"network-request-failed"),tn=Je().setTimeout(()=>{Ve(ft)},Sd.get());function ln(){Je().clearTimeout(tn),ae(D)}D.ping(ln).then(ln,()=>{Ve(ft)})});return function(ae,Ve){return K.apply(this,arguments)}}()))}),ql.apply(this,arguments)}const qc={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Al{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(f){}}}function Hu(v,f,y,D,K,ae){ne(v.config.authDomain,v,"auth-domain-config-required"),ne(v.config.apiKey,v,"invalid-api-key");const Ve={apiKey:v.config.apiKey,appName:v.name,authType:y,redirectUrl:D,v:Pe.SDK_VERSION,eventId:K};if(f instanceof Ms){f.setDefaultLanguage(v.languageCode),Ve.providerId=f.providerId||"",(0,oe.xb)(f.getCustomParameters())||(Ve.customParameters=JSON.stringify(f.getCustomParameters()));for(const[tn,ln]of Object.entries(ae||{}))Ve[tn]=ln}if(f instanceof li){const tn=f.getScopes().filter(ln=>""!==ln);tn.length>0&&(Ve.scopes=tn.join(","))}v.tenantId&&(Ve.tid=v.tenantId);const ft=Ve;for(const tn of Object.keys(ft))void 0===ft[tn]&&delete ft[tn];return`${function $u({config:v}){return v.emulator?Wt(v,"emulator/auth/handler"):`https://${v.authDomain}/__/auth/handler`}(v)}?${(0,oe.xO)(ft).slice(1)}`}const ya="webStorageSupport";class yu extends class hl{constructor(f){this.factorId=f}_process(f,y,D){switch(y.type){case"enroll":return this._finalizeEnroll(f,y.credential,D);case"signin":return this._finalizeSignIn(f,y.credential);default:return Oe("unexpected MultiFactorSessionType")}}}{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new yu(f)}_finalizeEnroll(f,y,D){return function mi(v,f){return On(v,"POST","/v2/accounts/mfaEnrollment:finalize",fn(v,f))}(f,{idToken:y,displayName:D,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,y){return function Dn(v,f){return On(v,"POST","/v2/accounts/mfaSignIn:finalize",fn(v,f))}(f,{mfaPendingCredential:y,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let hh=(()=>{class v{constructor(){}static assertion(y){return yu._fromCredential(y)}}return v.FACTOR_ID="phone",v})();var Kl="@firebase/auth",fl="0.19.12";class Zl{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var y=this;return(0,_.Z)(function*(){return y.assertAuthConfigured(),yield y.auth._initializationPromise,y.auth.currentUser?{accessToken:yield y.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const y=this.auth.onIdTokenChanged(D=>{var K;f((null===(K=D)||void 0===K?void 0:K.stsTokenManager.accessToken)||null)});this.internalListeners.set(f,y),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const y=this.internalListeners.get(f);!y||(this.internalListeners.delete(f),y(),this.updateProactiveRefresh())}assertAuthConfigured(){ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function pl(){return window}function xl(){return(xl=(0,_.Z)(function*(v,f,y){var D;const{BuildInfo:K}=pl();W(f.sessionId,"AuthEvent did not contain a session ID");const ae=yield Xh(f.sessionId),Ve={};return Zr()?Ve.ibi=K.packageName:Tr()?Ve.apn=K.packageName:dt(v,"operation-not-supported-in-this-environment"),K.displayName&&(Ve.appDisplayName=K.displayName),Ve.sessionId=ae,Hu(v,y,f.type,void 0,null!==(D=f.eventId)&&void 0!==D?D:void 0,Ve)})).apply(this,arguments)}function Qr(){return(Qr=(0,_.Z)(function*(v){const{BuildInfo:f}=pl(),y={};Zr()?y.iosBundleId=f.packageName:Tr()?y.androidPackageName=f.packageName:dt(v,"operation-not-supported-in-this-environment"),yield hu(v,y)})).apply(this,arguments)}function yc(){return(yc=(0,_.Z)(function*(v,f,y){const{cordova:D}=pl();let K=()=>{};try{yield new Promise((ae,Ve)=>{let ft=null;function tn(){var Hn;ae();const Jr=null===(Hn=D.plugins.browsertab)||void 0===Hn?void 0:Hn.close;"function"==typeof Jr&&Jr(),"function"==typeof(null==y?void 0:y.close)&&y.close()}function ln(){ft||(ft=window.setTimeout(()=>{Ve(nt(v,"redirect-cancelled-by-user"))},2e3))}function rr(){"visible"===(null==document?void 0:document.visibilityState)&&ln()}f.addPassiveListener(tn),document.addEventListener("resume",ln,!1),Tr()&&document.addEventListener("visibilitychange",rr,!1),K=()=>{f.removePassiveListener(tn),document.removeEventListener("resume",ln,!1),document.removeEventListener("visibilitychange",rr,!1),ft&&window.clearTimeout(ft)}})}finally{K()}})).apply(this,arguments)}function Xh(v){return vc.apply(this,arguments)}function vc(){return(vc=(0,_.Z)(function*(v){const f=Gu(v),y=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(y)).map(K=>K.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Gu(v){if(W(/[0-9a-zA-Z]+/.test(v),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(v);const f=new ArrayBuffer(v.length),y=new Uint8Array(f);for(let D=0;D<v.length;D++)y[D]=v.charCodeAt(D);return y}!function Pd(v){(0,Pe._registerComponent)(new je.wA("auth",(f,{options:y})=>{const D=f.getProvider("app").getImmediate(),K=f.getProvider("heartbeat"),{apiKey:ae,authDomain:Ve}=D.options;return((ft,tn)=>{ne(ae&&!ae.includes(":"),"invalid-api-key",{appName:ft.name}),ne(!(null==Ve?void 0:Ve.includes(":")),"argument-error",{appName:ft.name});const ln={apiKey:ae,authDomain:Ve,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ni(v)},rr=new Zt(ft,tn,ln);return function Qe(v,f){const y=(null==f?void 0:f.persistence)||[],D=(Array.isArray(y)?y:[y]).map(He);(null==f?void 0:f.errorMap)&&v._updateErrorMap(f.errorMap),v._initializeWithPersistence(D,null==f?void 0:f.popupRedirectResolver)}(rr,y),rr})(D,K)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,y,D)=>{f.getProvider("auth-internal").initialize()})),(0,Pe._registerComponent)(new je.wA("auth-internal",f=>{const y=Ct(f.getProvider("auth").getImmediate());return new Zl(y)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Pe.registerVersion)(Kl,fl,function Oa(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,Pe.registerVersion)(Kl,fl,"esm2017")}("Browser");class Ya extends Go{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(y=>y(f)),super.onEvent(f)}initialized(){var f=this;return(0,_.Z)(function*(){yield f.initPromise})()}}function Wu(v){return Rl.apply(this,arguments)}function Rl(){return(Rl=(0,_.Z)(function*(v){const f=yield is()._get(Ur(v));return f&&(yield is()._remove(Ur(v))),f})).apply(this,arguments)}function ph(){const v=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let y=0;y<20;y++){const D=Math.floor(Math.random()*f.length);v.push(f.charAt(D))}return v.join("")}function is(){return He(Fi)}function Ur(v){return st("authEvent",v.config.apiKey,v.name)}function Na(v){if(!(null==v?void 0:v.includes("?")))return{};const[f,...y]=v.split("?");return(0,oe.zd)(y.join("?"))}function Vi(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:nt("no-auth-event")}}function Ql(){var v;return(null===(v=null==self?void 0:self.location)||void 0===v?void 0:v.protocol)||null}function ka(v=(0,oe.z$)()){return!("file:"!==Ql()&&"ionic:"!==Ql()||!v.toLowerCase().match(/iphone|ipad|ipod|android/))}function ss(){try{const v=self.localStorage,f=Q();if(v)return v.setItem(f,"1"),v.removeItem(f),!function wu(v=(0,oe.z$)()){return function mh(){return(0,oe.w1)()&&11===(null==document?void 0:document.documentMode)}()||function fi(v=(0,oe.z$)()){return/Edge\/\d+/.test(v)}(v)}()||(0,oe.hl)()}catch(v){return Fa()&&(0,oe.hl)()}return!1}function Fa(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Qa(){return(function Yc(){return"http:"===Ql()||"https:"===Ql()}()||(0,oe.ru)()||ka())&&!function gh(){return(0,oe.b$)()||(0,oe.UG)()}()&&ss()&&!Fa()}function Eu(){return ka()&&"undefined"!=typeof document}function Ja(){return(Ja=(0,_.Z)(function*(){return!!Eu()&&new Promise(v=>{const f=setTimeout(()=>{v(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),v(!0)})})})).apply(this,arguments)}const zo={LOCAL:"local",NONE:"none",SESSION:"session"},Jl=ne,Ku="persistence";function ho(v){return bu.apply(this,arguments)}function bu(){return(bu=(0,_.Z)(function*(v){yield v._initializationPromise;const f=Cu(),y=st(Ku,v.config.apiKey,v.name);f&&f.setItem(y,v._getPersistence())})).apply(this,arguments)}function Cu(){var v;try{return(null===(v=function bc(){return"undefined"!=typeof window?window:null}())||void 0===v?void 0:v.sessionStorage)||null}catch(f){return null}}const _a=ne;class Kr{constructor(){this.browserResolver=He(class mu{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=$s,this._completeRedirectFn=Li}_openPopup(f,y,D,K){var ae=this;return(0,_.Z)(function*(){var Ve;W(null===(Ve=ae.eventManagers[f._key()])||void 0===Ve?void 0:Ve.manager,"_initialize() not called before _openPopup()");const ft=Hu(f,y,D,En(),K);return function gu(v,f,y,D=500,K=600){const ae=Math.max((window.screen.availHeight-K)/2,0).toString(),Ve=Math.max((window.screen.availWidth-D)/2,0).toString();let ft="";const tn=Object.assign(Object.assign({},qc),{width:D.toString(),height:K.toString(),top:ae,left:Ve}),ln=(0,oe.z$)().toLowerCase();y&&(ft=yn(ln)?"_blank":y),on(ln)&&(f=f||"http://localhost",tn.scrollbars="yes");const rr=Object.entries(tn).reduce((Jr,[aa,Ol])=>`${Jr}${aa}=${Ol},`,"");if(function Xi(v=(0,oe.z$)()){var f;return Zr(v)&&!!(null===(f=window.navigator)||void 0===f?void 0:f.standalone)}(ln)&&"_self"!==ft)return function Kc(v,f){const y=document.createElement("a");y.href=v,y.target=f;const D=document.createEvent("MouseEvent");D.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),y.dispatchEvent(D)}(f||"",ft),new Al(null);const Hn=window.open(f||"",ft,rr);ne(Hn,v,"popup-blocked");try{Hn.focus()}catch(Jr){}return new Al(Hn)}(f,ft,Q())})()}_openRedirect(f,y,D,K){var ae=this;return(0,_.Z)(function*(){return yield ae._originValidation(f),function pn(v){Je().location.href=v}(Hu(f,y,D,En(),K)),new Promise(()=>{})})()}_initialize(f){const y=f._key();if(this.eventManagers[y]){const{manager:K,promise:ae}=this.eventManagers[y];return K?Promise.resolve(K):(W(ae,"If manager is not set, promise should be"),ae)}const D=this.initAndGetManager(f);return this.eventManagers[y]={promise:D},D.catch(()=>{delete this.eventManagers[y]}),D}initAndGetManager(f){var y=this;return(0,_.Z)(function*(){const D=yield function ul(v){return ql.apply(this,arguments)}(f),K=new Go(f);return D.register("authEvent",ae=>(ne(null==ae?void 0:ae.authEvent,f,"invalid-auth-event"),{status:K.onEvent(ae.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),y.eventManagers[f._key()]={manager:K},y.iframes[f._key()]=D,K})()}_isIframeWebStorageSupported(f,y){this.iframes[f._key()].send(ya,{type:ya},K=>{var ae;const Ve=null===(ae=null==K?void 0:K[0])||void 0===ae?void 0:ae[ya];void 0!==Ve&&y(!!Ve),dt(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const y=f._key();return this.originValidationPromises[y]||(this.originValidationPromises[y]=function ch(v){return Dl.apply(this,arguments)}(f)),this.originValidationPromises[y]}get _shouldInitProactively(){return Yr()||xn()||Zr()}}),this.cordovaResolver=He(class vu{constructor(){this._redirectPersistence=$s,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Li}_initialize(f){var y=this;return(0,_.Z)(function*(){const D=f._key();let K=y.eventManagers.get(D);return K||(K=new Ya(f),y.eventManagers.set(D,K),y.attachCallbackListeners(f,K)),K})()}_openPopup(f){dt(f,"operation-not-supported-in-this-environment")}_openRedirect(f,y,D,K){var ae=this;return(0,_.Z)(function*(){!function _c(v){var f,y,D,K,ae,Ve,ft,tn,ln,rr;const Hn=pl();ne("function"==typeof(null===(f=null==Hn?void 0:Hn.universalLinks)||void 0===f?void 0:f.subscribe),v,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ne(void 0!==(null===(y=null==Hn?void 0:Hn.BuildInfo)||void 0===y?void 0:y.packageName),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ne("function"==typeof(null===(ae=null===(K=null===(D=null==Hn?void 0:Hn.cordova)||void 0===D?void 0:D.plugins)||void 0===K?void 0:K.browsertab)||void 0===ae?void 0:ae.openUrl),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ne("function"==typeof(null===(tn=null===(ft=null===(Ve=null==Hn?void 0:Hn.cordova)||void 0===Ve?void 0:Ve.plugins)||void 0===ft?void 0:ft.browsertab)||void 0===tn?void 0:tn.isAvailable),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ne("function"==typeof(null===(rr=null===(ln=null==Hn?void 0:Hn.cordova)||void 0===ln?void 0:ln.InAppBrowser)||void 0===rr?void 0:rr.open),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const Ve=yield ae._initialize(f);yield Ve.initialized(),Ve.resetRedirect(),function cu(){oo.clear()}(),yield ae._originValidation(f);const ft=function wc(v,f,y=null){return{type:f,eventId:y,urlResponse:null,sessionId:ph(),postBody:null,tenantId:v.tenantId,error:nt(v,"no-auth-event")}}(f,D,K);yield function Zc(v,f){return is()._set(Ur(v),f)}(f,ft);const tn=yield function Sl(v,f,y){return xl.apply(this,arguments)}(f,ft,y),ln=yield function Ml(v){const{cordova:f}=pl();return new Promise(y=>{f.plugins.browsertab.isAvailable(D=>{let K=null;D?f.plugins.browsertab.openUrl(v):K=f.InAppBrowser.open(v,function Ri(v=(0,oe.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}()?"_blank":"_system","location=yes"),y(K)})})}(tn);return function _u(v,f,y){return yc.apply(this,arguments)}(f,Ve,ln)})()}_isIframeWebStorageSupported(f,y){throw new Error("Method not implemented.")}_originValidation(f){const y=f._key();return this.originValidationPromises[y]||(this.originValidationPromises[y]=function ia(v){return Qr.apply(this,arguments)}(f)),this.originValidationPromises[y]}attachCallbackListeners(f,y){const{universalLinks:D,handleOpenURL:K,BuildInfo:ae}=pl(),Ve=setTimeout((0,_.Z)(function*(){yield Wu(f),y.onEvent(Vi())}),500),ft=function(){var rr=(0,_.Z)(function*(Hn){clearTimeout(Ve);const Jr=yield Wu(f);let aa=null;Jr&&(null==Hn?void 0:Hn.url)&&(aa=function zu(v,f){var y,D;const K=function qu(v){const f=Na(v),y=f.link?decodeURIComponent(f.link):void 0,D=Na(y).link,K=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return Na(K).link||K||D||y||v}(f);if(K.includes("/__/auth/callback")){const ae=Na(K),Ve=ae.firebaseError?function Ec(v){try{return JSON.parse(v)}catch(f){return null}}(decodeURIComponent(ae.firebaseError)):null,ft=null===(D=null===(y=null==Ve?void 0:Ve.code)||void 0===y?void 0:y.split("auth/"))||void 0===D?void 0:D[1],tn=ft?nt(ft):null;return tn?{type:v.type,eventId:v.eventId,tenantId:v.tenantId,error:tn,urlResponse:null,sessionId:null,postBody:null}:{type:v.type,eventId:v.eventId,tenantId:v.tenantId,sessionId:v.sessionId,urlResponse:K,postBody:null}}return null}(Jr,Hn.url)),y.onEvent(aa||Vi())});return function(Jr){return rr.apply(this,arguments)}}();void 0!==D&&"function"==typeof D.subscribe&&D.subscribe(null,ft);const tn=K,ln=`${ae.packageName.toLowerCase()}://`;pl().handleOpenURL=function(){var rr=(0,_.Z)(function*(Hn){if(Hn.toLowerCase().startsWith(ln)&&ft({url:Hn}),"function"==typeof tn)try{tn(Hn)}catch(Jr){console.error(Jr)}});return function(Hn){return rr.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=$s,this._completeRedirectFn=Li}_initialize(f){var y=this;return(0,_.Z)(function*(){return yield y.selectUnderlyingResolver(),y.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,y,D,K){var ae=this;return(0,_.Z)(function*(){return yield ae.selectUnderlyingResolver(),ae.assertedUnderlyingResolver._openPopup(f,y,D,K)})()}_openRedirect(f,y,D,K){var ae=this;return(0,_.Z)(function*(){return yield ae.selectUnderlyingResolver(),ae.assertedUnderlyingResolver._openRedirect(f,y,D,K)})()}_isIframeWebStorageSupported(f,y){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,y)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return Eu()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return _a(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,_.Z)(function*(){if(f.underlyingResolver)return;const y=yield function co(){return Ja.apply(this,arguments)}();f.underlyingResolver=y?f.cordovaResolver:f.browserResolver})()}}function Zu(v){return v.unwrap()}function oa(v){return Cc(v)}function Cc(v){const{_tokenResponse:f}=v instanceof oe.ZR?v.customData:v;if(!f)return null;if(!(v instanceof oe.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return Ws.credentialFromResult(v);const y=f.providerId;if(!y||"password"===y)return null;let D;switch(y){case"google.com":D=Qs;break;case"facebook.com":D=Ps;break;case"github.com":D=Ao;break;case"twitter.com":D=Js;break;default:const{oauthIdToken:K,oauthAccessToken:ae,oauthTokenSecret:Ve,pendingToken:ft,nonce:tn}=f;return ae||Ve||K||ft?ft?y.startsWith("saml.")?ts._create(y,ft):Ne._fromParams({providerId:y,signInMethod:y,pendingToken:ft,idToken:K,accessToken:ae}):new ti(y).credential({idToken:K,accessToken:ae,rawNonce:tn}):null}return v instanceof oe.ZR?D.credentialFromError(v):D.credentialFromResult(v)}function zs(v,f){return f.catch(y=>{throw y instanceof oe.ZR&&function gl(v,f){var y;const D=null===(y=f.customData)||void 0===y?void 0:y._tokenResponse;if("auth/multi-factor-auth-required"===f.code)f.resolver=new Nd(v,function Po(v,f){var y;const D=(0,oe.m9)(v),K=f;return ne(f.customData.operationType,D,"argument-error"),ne(null===(y=K.customData._serverResponse)||void 0===y?void 0:y.mfaPendingCredential,D,"argument-error"),ki._fromError(D,K)}(v,f));else if(D){const K=Cc(f),ae=f;K&&(ae.credential=K,ae.tenantId=D.tenantId||void 0,ae.email=D.email||void 0,ae.phoneNumber=D.phoneNumber||void 0)}}(v,y),y}).then(y=>{const K=y.user;return{operationType:y.operationType,credential:oa(y),additionalUserInfo:bi(y),user:Xa.getOrCreate(K)}})}function ml(v,f){return Ic.apply(this,arguments)}function Ic(){return(Ic=(0,_.Z)(function*(v,f){const y=yield f;return{verificationId:y.verificationId,confirm:D=>zs(v,y.confirm(D))}})).apply(this,arguments)}class Nd{constructor(f,y){this.resolver=y,this.auth=function Qc(v){return v.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return zs(Zu(this.auth),this.resolver.resolveSignIn(f))}}class Xa{constructor(f){this._delegate=f,this.multiFactor=function Ds(v){const f=(0,oe.m9)(v);return Ci.has(f)||Ci.set(f,rs._fromUser(f)),Ci.get(f)}(f)}static getOrCreate(f){return Xa.USER_MAP.has(f)||Xa.USER_MAP.set(f,new Xa(f)),Xa.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var y=this;return(0,_.Z)(function*(){return zs(y.auth,dr(y._delegate,f))})()}linkWithPhoneNumber(f,y){var D=this;return(0,_.Z)(function*(){return ml(D.auth,function Ai(v,f,y){return jo.apply(this,arguments)}(D._delegate,f,y))})()}linkWithPopup(f){var y=this;return(0,_.Z)(function*(){return zs(y.auth,function Uu(v,f,y){return al.apply(this,arguments)}(y._delegate,f,Kr))})()}linkWithRedirect(f){var y=this;return(0,_.Z)(function*(){return yield ho(Ct(y.auth)),function Mn(v,f,y){return function or(v,f,y){return Er.apply(this,arguments)}(v,f,y)}(y._delegate,f,Kr)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var y=this;return(0,_.Z)(function*(){return zs(y.auth,zn(y._delegate,f))})()}reauthenticateWithPhoneNumber(f,y){return ml(this.auth,function pc(v,f,y){return uu.apply(this,arguments)}(this._delegate,f,y))}reauthenticateWithPopup(f){return zs(this.auth,function Xo(v,f,y){return ea.apply(this,arguments)}(this._delegate,f,Kr))}reauthenticateWithRedirect(f){var y=this;return(0,_.Z)(function*(){return yield ho(Ct(y.auth)),function et(v,f,y){return function Bt(v,f,y){return mn.apply(this,arguments)}(v,f,y)}(y._delegate,f,Kr)})()}sendEmailVerification(f){return function ji(v,f){return So.apply(this,arguments)}(this._delegate,f)}unlink(f){var y=this;return(0,_.Z)(function*(){return yield function Os(v,f){return cs.apply(this,arguments)}(y._delegate,f),y})()}updateEmail(f){return function rl(v,f){return xo((0,oe.m9)(v),f,null)}(this._delegate,f)}updatePassword(f){return function Zo(v,f){return xo((0,oe.m9)(v),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function pa(v,f){return Co.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function Uo(v,f){return ha.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,y){return function ni(v,f,y){return Vo.apply(this,arguments)}(this._delegate,f,y)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Xa.USER_MAP=new WeakMap;const Yu=ne;let Iu=(()=>{class v{constructor(y,D){if(this.app=y,D.isInitialized())return this._delegate=D.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:K}=y.options;Yu(K,"invalid-api-key",{appName:y.name}),Yu(K,"invalid-api-key",{appName:y.name});const ae="undefined"!=typeof window?Kr:void 0;this._delegate=D.initialize({options:{persistence:Xl(K,y.name),popupRedirectResolver:ae}}),this._delegate._updateErrorMap(Et),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Xa.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(y){this._delegate.languageCode=y}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(y){this._delegate.tenantId=y}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(y,D){!function lr(v,f,y){const D=Ct(v);ne(D._canInitEmulator,D,"emulator-config-failed"),ne(/^https?:\/\//.test(f),D,"invalid-emulator-scheme");const K=!!(null==y?void 0:y.disableWarnings),ae=Lr(f),{host:Ve,port:ft}=function es(v){const f=Lr(v),y=/(\/\/)?([^?#/]+)/.exec(v.substr(f.length));if(!y)return{host:"",port:null};const D=y[2].split("@").pop()||"",K=/^(\[[^\]]+\])(:|$)/.exec(D);if(K){const ae=K[1];return{host:ae,port:kr(D.substr(ae.length+1))}}{const[ae,Ve]=D.split(":");return{host:ae,port:kr(Ve)}}}(f);D.config.emulator={url:`${ae}//${Ve}${null===ft?"":`:${ft}`}/`},D.settings.appVerificationDisabledForTesting=!0,D.emulatorConfig=Object.freeze({host:Ve,port:ft,protocol:ae.replace(":",""),options:Object.freeze({disableWarnings:K})}),K||function pi(){function v(){const f=document.createElement("p"),y=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",y.position="fixed",y.width="100%",y.backgroundColor="#ffffff",y.border=".1em solid #000000",y.color="#b50000",y.bottom="0px",y.left="0px",y.margin="0px",y.zIndex="10000",y.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}(this._delegate,y,D)}applyActionCode(y){return function F(v,f){return G.apply(this,arguments)}(this._delegate,y)}checkActionCode(y){return qe(this._delegate,y)}confirmPasswordReset(y,D){return function $(v,f,y){return L.apply(this,arguments)}(this._delegate,y,D)}createUserWithEmailAndPassword(y,D){var K=this;return(0,_.Z)(function*(){return zs(K._delegate,function Ei(v,f,y){return Mi.apply(this,arguments)}(K._delegate,y,D))})()}fetchProvidersForEmail(y){return this.fetchSignInMethodsForEmail(y)}fetchSignInMethodsForEmail(y){return function da(v,f){return Yi.apply(this,arguments)}(this._delegate,y)}isSignInWithEmailLink(y){return function nl(v,f){const y=mr.parseLink(f);return"EMAIL_SIGNIN"===(null==y?void 0:y.operation)}(0,y)}getRedirectResult(){var y=this;return(0,_.Z)(function*(){Yu(Qa(),y._delegate,"operation-not-supported-in-this-environment");const D=yield function gr(v,f){return ys.apply(this,arguments)}(y._delegate,Kr);return D?zs(y._delegate,Promise.resolve(D)):{credential:null,user:null}})()}addFrameworkForLogging(y){!function Yl(v,f){Ct(v)._logFramework(f)}(this._delegate,y)}onAuthStateChanged(y,D,K){const{next:ae,error:Ve,complete:ft}=yl(y,D,K);return this._delegate.onAuthStateChanged(ae,Ve,ft)}onIdTokenChanged(y,D,K){const{next:ae,error:Ve,complete:ft}=yl(y,D,K);return this._delegate.onIdTokenChanged(ae,Ve,ft)}sendSignInLinkToEmail(y,D){return function ns(v,f,y){return ca.apply(this,arguments)}(this._delegate,y,D)}sendPasswordResetEmail(y,D){return function Vs(v,f,y){return Wi.apply(this,arguments)}(this._delegate,y,D||void 0)}setPersistence(y){var D=this;return(0,_.Z)(function*(){let K;switch(function Od(v,f){Jl(Object.values(zo).includes(f),v,"invalid-persistence-type"),(0,oe.b$)()?Jl(f!==zo.SESSION,v,"unsupported-persistence-type"):(0,oe.UG)()?Jl(f===zo.NONE,v,"unsupported-persistence-type"):Fa()?Jl(f===zo.NONE||f===zo.LOCAL&&(0,oe.hl)(),v,"unsupported-persistence-type"):Jl(f===zo.NONE||ss(),v,"unsupported-persistence-type")}(D._delegate,y),y){case zo.SESSION:K=$s;break;case zo.LOCAL:K=(yield He(nn)._isAvailable())?nn:Fi;break;case zo.NONE:K=Me;break;default:return dt("argument-error",{appName:D._delegate.name})}return D._delegate.setPersistence(K)})()}signInAndRetrieveDataWithCredential(y){return this.signInWithCredential(y)}signInAnonymously(){return zs(this._delegate,function vo(v){return Zi.apply(this,arguments)}(this._delegate))}signInWithCredential(y){return zs(this._delegate,Kt(this._delegate,y))}signInWithCustomToken(y){return zs(this._delegate,function ds(v,f){return wi.apply(this,arguments)}(this._delegate,y))}signInWithEmailAndPassword(y,D){return zs(this._delegate,function Us(v,f,y){return Kt((0,oe.m9)(v),ai.credential(f,y))}(this._delegate,y,D))}signInWithEmailLink(y,D){return zs(this._delegate,function Lo(v,f,y){return Bs.apply(this,arguments)}(this._delegate,y,D))}signInWithPhoneNumber(y,D){return ml(this._delegate,function Td(v,f,y){return ii.apply(this,arguments)}(this._delegate,y,D))}signInWithPopup(y){var D=this;return(0,_.Z)(function*(){return Yu(Qa(),D._delegate,"operation-not-supported-in-this-environment"),zs(D._delegate,function sl(v,f,y){return ol.apply(this,arguments)}(D._delegate,y,Kr))})()}signInWithRedirect(y){var D=this;return(0,_.Z)(function*(){return Yu(Qa(),D._delegate,"operation-not-supported-in-this-environment"),yield ho(D._delegate),function X(v,f,y){return function me(v,f,y){return Ge.apply(this,arguments)}(v,f,y)}(D._delegate,y,Kr)})()}updateCurrentUser(y){return this._delegate.updateCurrentUser(y)}verifyPasswordResetCode(y){return function $n(v,f){return hr.apply(this,arguments)}(this._delegate,y)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return v.Persistence=zo,v})();function yl(v,f,y){let D=v;"function"!=typeof v&&({next:D,error:f,complete:y}=v);const K=D;return{next:Ve=>K(Ve&&Xa.getOrCreate(Ve)),error:f,complete:y}}function Xl(v,f){const y=function sa(v,f){const y=Cu();if(!y)return[];const D=st(Ku,v,f);switch(y.getItem(D)){case zo.NONE:return[Me];case zo.LOCAL:return[nn,$s];case zo.SESSION:return[$s];default:return[]}}(v,f);if("undefined"!=typeof self&&!y.includes(nn)&&y.push(nn),"undefined"!=typeof window)for(const D of[Fi,$s])y.includes(D)||y.push(D);return y.includes(Me)||y.push(Me),y}class Qu{constructor(){this.providerId="phone",this._delegate=new Ws(Zu(B.Z.auth()))}static credential(f,y){return Ws.credential(f,y)}verifyPhoneNumber(f,y){return this._delegate.verifyPhoneNumber(f,y)}unwrap(){return this._delegate}}Qu.PHONE_SIGN_IN_METHOD=Ws.PHONE_SIGN_IN_METHOD,Qu.PROVIDER_ID=Ws.PROVIDER_ID;const Jc=ne;class Xc{constructor(f,y,D=B.Z.app()){var K;Jc(null===(K=D.options)||void 0===K?void 0:K.apiKey,"invalid-api-key",{appName:D.name}),this._delegate=new qa(f,y,D.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function kd(v){v.INTERNAL.registerComponent(new je.wA("auth-compat",f=>{const y=f.getProvider("app-compat").getImmediate(),D=f.getProvider("auth");return new Iu(y,D)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:ai,FacebookAuthProvider:Ps,GithubAuthProvider:Ao,GoogleAuthProvider:Qs,OAuthProvider:ti,SAMLAuthProvider:xi,PhoneAuthProvider:Qu,PhoneMultiFactorGenerator:hh,RecaptchaVerifier:Xc,TwitterAuthProvider:Js,Auth:Iu,AuthCredential:nr,Error:oe.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),v.registerVersion("@firebase/auth-compat","0.2.12")}(B.Z)},8306:(en,Xe,z)=>{"use strict";z.d(Xe,{y:()=>_e});var _=z(930),B=z(727),oe=z(8822),Pe=z(4671);var je=z(2416),Ue=z(576),We=z(2806);let _e=(()=>{class pt{constructor(Rt){Rt&&(this._subscribe=Rt)}lift(Rt){const tt=new pt;return tt.source=this,tt.operator=Rt,tt}subscribe(Rt,tt,yt){const ke=function Mt(pt){return pt&&pt instanceof _.Lv||function Fe(pt){return pt&&(0,Ue.m)(pt.next)&&(0,Ue.m)(pt.error)&&(0,Ue.m)(pt.complete)}(pt)&&(0,B.Nn)(pt)}(Rt)?Rt:new _.Hp(Rt,tt,yt);return(0,We.x)(()=>{const{operator:Ht,source:dt}=this;ke.add(Ht?Ht.call(ke,dt):dt?this._subscribe(ke):this._trySubscribe(ke))}),ke}_trySubscribe(Rt){try{return this._subscribe(Rt)}catch(tt){Rt.error(tt)}}forEach(Rt,tt){return new(tt=de(tt))((yt,ke)=>{const Ht=new _.Hp({next:dt=>{try{Rt(dt)}catch(nt){ke(nt),Ht.unsubscribe()}},error:ke,complete:yt});this.subscribe(Ht)})}_subscribe(Rt){var tt;return null===(tt=this.source)||void 0===tt?void 0:tt.subscribe(Rt)}[oe.L](){return this}pipe(...Rt){return function xe(pt){return 0===pt.length?Pe.y:1===pt.length?pt[0]:function(Rt){return pt.reduce((tt,yt)=>yt(tt),Rt)}}(Rt)(this)}toPromise(Rt){return new(Rt=de(Rt))((tt,yt)=>{let ke;this.subscribe(Ht=>ke=Ht,Ht=>yt(Ht),()=>tt(ke))})}}return pt.create=Et=>new pt(Et),pt})();function de(pt){var Et;return null!==(Et=null!=pt?pt:je.v.Promise)&&void 0!==Et?Et:Promise}},7579:(en,Xe,z)=>{"use strict";z.d(Xe,{x:()=>je});var _=z(8306),B=z(727);const Pe=(0,z(3888).d)(We=>function(){We(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ae=z(8737),xe=z(2806);let je=(()=>{class We extends _.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(de){const Fe=new Ue(this,this);return Fe.operator=de,Fe}_throwIfClosed(){if(this.closed)throw new Pe}next(de){(0,xe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Fe of this.currentObservers)Fe.next(de)}})}error(de){(0,xe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=de;const{observers:Fe}=this;for(;Fe.length;)Fe.shift().error(de)}})}complete(){(0,xe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:de}=this;for(;de.length;)de.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var de;return(null===(de=this.observers)||void 0===de?void 0:de.length)>0}_trySubscribe(de){return this._throwIfClosed(),super._trySubscribe(de)}_subscribe(de){return this._throwIfClosed(),this._checkFinalizedStatuses(de),this._innerSubscribe(de)}_innerSubscribe(de){const{hasError:Fe,isStopped:Mt,observers:pt}=this;return Fe||Mt?B.Lc:(this.currentObservers=null,pt.push(de),new B.w0(()=>{this.currentObservers=null,(0,Ae.P)(pt,de)}))}_checkFinalizedStatuses(de){const{hasError:Fe,thrownError:Mt,isStopped:pt}=this;Fe?de.error(Mt):pt&&de.complete()}asObservable(){const de=new _.y;return de.source=this,de}}return We.create=(_e,de)=>new Ue(_e,de),We})();class Ue extends je{constructor(_e,de){super(),this.destination=_e,this.source=de}next(_e){var de,Fe;null===(Fe=null===(de=this.destination)||void 0===de?void 0:de.next)||void 0===Fe||Fe.call(de,_e)}error(_e){var de,Fe;null===(Fe=null===(de=this.destination)||void 0===de?void 0:de.error)||void 0===Fe||Fe.call(de,_e)}complete(){var _e,de;null===(de=null===(_e=this.destination)||void 0===_e?void 0:_e.complete)||void 0===de||de.call(_e)}_subscribe(_e){var de,Fe;return null!==(Fe=null===(de=this.source)||void 0===de?void 0:de.subscribe(_e))&&void 0!==Fe?Fe:B.Lc}}},930:(en,Xe,z)=>{"use strict";z.d(Xe,{Hp:()=>Rt,Lv:()=>Fe});var _=z(576),B=z(727),oe=z(2416),Pe=z(7849),Ae=z(5032);const xe=We("C",void 0,void 0);function We(dt,nt,Ye){return{kind:dt,value:nt,error:Ye}}var _e=z(3410),de=z(2806);class Fe extends B.w0{constructor(nt){super(),this.isStopped=!1,nt?(this.destination=nt,(0,B.Nn)(nt)&&nt.add(this)):this.destination=Ht}static create(nt,Ye,at){return new Rt(nt,Ye,at)}next(nt){this.isStopped?ke(function Ue(dt){return We("N",dt,void 0)}(nt),this):this._next(nt)}error(nt){this.isStopped?ke(function je(dt){return We("E",void 0,dt)}(nt),this):(this.isStopped=!0,this._error(nt))}complete(){this.isStopped?ke(xe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(nt){this.destination.next(nt)}_error(nt){try{this.destination.error(nt)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Mt=Function.prototype.bind;function pt(dt,nt){return Mt.call(dt,nt)}class Et{constructor(nt){this.partialObserver=nt}next(nt){const{partialObserver:Ye}=this;if(Ye.next)try{Ye.next(nt)}catch(at){tt(at)}}error(nt){const{partialObserver:Ye}=this;if(Ye.error)try{Ye.error(nt)}catch(at){tt(at)}else tt(nt)}complete(){const{partialObserver:nt}=this;if(nt.complete)try{nt.complete()}catch(Ye){tt(Ye)}}}class Rt extends Fe{constructor(nt,Ye,at){let Dt;if(super(),(0,_.m)(nt)||!nt)Dt={next:null!=nt?nt:void 0,error:null!=Ye?Ye:void 0,complete:null!=at?at:void 0};else{let ne;this&&oe.v.useDeprecatedNextContext?(ne=Object.create(nt),ne.unsubscribe=()=>this.unsubscribe(),Dt={next:nt.next&&pt(nt.next,ne),error:nt.error&&pt(nt.error,ne),complete:nt.complete&&pt(nt.complete,ne)}):Dt=nt}this.destination=new Et(Dt)}}function tt(dt){oe.v.useDeprecatedSynchronousErrorHandling?(0,de.O)(dt):(0,Pe.h)(dt)}function ke(dt,nt){const{onStoppedNotification:Ye}=oe.v;Ye&&_e.z.setTimeout(()=>Ye(dt,nt))}const Ht={closed:!0,next:Ae.Z,error:function yt(dt){throw dt},complete:Ae.Z}},727:(en,Xe,z)=>{"use strict";z.d(Xe,{Lc:()=>xe,w0:()=>Ae,Nn:()=>je});var _=z(576);const oe=(0,z(3888).d)(We=>function(de){We(this),this.message=de?`${de.length} errors occurred during unsubscription:\n${de.map((Fe,Mt)=>`${Mt+1}) ${Fe.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=de});var Pe=z(8737);class Ae{constructor(_e){this.initialTeardown=_e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let _e;if(!this.closed){this.closed=!0;const{_parentage:de}=this;if(de)if(this._parentage=null,Array.isArray(de))for(const pt of de)pt.remove(this);else de.remove(this);const{initialTeardown:Fe}=this;if((0,_.m)(Fe))try{Fe()}catch(pt){_e=pt instanceof oe?pt.errors:[pt]}const{_finalizers:Mt}=this;if(Mt){this._finalizers=null;for(const pt of Mt)try{Ue(pt)}catch(Et){_e=null!=_e?_e:[],Et instanceof oe?_e=[..._e,...Et.errors]:_e.push(Et)}}if(_e)throw new oe(_e)}}add(_e){var de;if(_e&&_e!==this)if(this.closed)Ue(_e);else{if(_e instanceof Ae){if(_e.closed||_e._hasParent(this))return;_e._addParent(this)}(this._finalizers=null!==(de=this._finalizers)&&void 0!==de?de:[]).push(_e)}}_hasParent(_e){const{_parentage:de}=this;return de===_e||Array.isArray(de)&&de.includes(_e)}_addParent(_e){const{_parentage:de}=this;this._parentage=Array.isArray(de)?(de.push(_e),de):de?[de,_e]:_e}_removeParent(_e){const{_parentage:de}=this;de===_e?this._parentage=null:Array.isArray(de)&&(0,Pe.P)(de,_e)}remove(_e){const{_finalizers:de}=this;de&&(0,Pe.P)(de,_e),_e instanceof Ae&&_e._removeParent(this)}}Ae.EMPTY=(()=>{const We=new Ae;return We.closed=!0,We})();const xe=Ae.EMPTY;function je(We){return We instanceof Ae||We&&"closed"in We&&(0,_.m)(We.remove)&&(0,_.m)(We.add)&&(0,_.m)(We.unsubscribe)}function Ue(We){(0,_.m)(We)?We():We.unsubscribe()}},2416:(en,Xe,z)=>{"use strict";z.d(Xe,{v:()=>_});const _={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},7272:(en,Xe,z)=>{"use strict";z.d(Xe,{z:()=>Ae});var _=z(8189),oe=z(7669),Pe=z(8996);function Ae(...xe){return function B(){return(0,_.J)(1)}()((0,Pe.D)(xe,(0,oe.yG)(xe)))}},515:(en,Xe,z)=>{"use strict";z.d(Xe,{E:()=>B});const B=new(z(8306).y)(Ae=>Ae.complete())},8996:(en,Xe,z)=>{"use strict";z.d(Xe,{D:()=>nt});var _=z(8421),B=z(5363),oe=z(9468),xe=z(8306),Ue=z(2202),We=z(576),_e=z(9672);function Fe(Ye,at){if(!Ye)throw new Error("Iterable cannot be null");return new xe.y(Dt=>{(0,_e.f)(Dt,at,()=>{const ne=Ye[Symbol.asyncIterator]();(0,_e.f)(Dt,at,()=>{ne.next().then(Oe=>{Oe.done?Dt.complete():Dt.next(Oe.value)})},0,!0)})})}var Mt=z(3670),pt=z(8239),Et=z(1144),Rt=z(6495),tt=z(2206),yt=z(4532),ke=z(3260);function nt(Ye,at){return at?function dt(Ye,at){if(null!=Ye){if((0,Mt.c)(Ye))return function Pe(Ye,at){return(0,_.Xf)(Ye).pipe((0,oe.R)(at),(0,B.Q)(at))}(Ye,at);if((0,Et.z)(Ye))return function je(Ye,at){return new xe.y(Dt=>{let ne=0;return at.schedule(function(){ne===Ye.length?Dt.complete():(Dt.next(Ye[ne++]),Dt.closed||this.schedule())})})}(Ye,at);if((0,pt.t)(Ye))return function Ae(Ye,at){return(0,_.Xf)(Ye).pipe((0,oe.R)(at),(0,B.Q)(at))}(Ye,at);if((0,tt.D)(Ye))return Fe(Ye,at);if((0,Rt.T)(Ye))return function de(Ye,at){return new xe.y(Dt=>{let ne;return(0,_e.f)(Dt,at,()=>{ne=Ye[Ue.h](),(0,_e.f)(Dt,at,()=>{let Oe,W;try{({value:Oe,done:W}=ne.next())}catch(ze){return void Dt.error(ze)}W?Dt.complete():Dt.next(Oe)},0,!0)}),()=>(0,We.m)(null==ne?void 0:ne.return)&&ne.return()})}(Ye,at);if((0,ke.L)(Ye))return function Ht(Ye,at){return Fe((0,ke.Q)(Ye),at)}(Ye,at)}throw(0,yt.z)(Ye)}(Ye,at):(0,_.Xf)(Ye)}},8421:(en,Xe,z)=>{"use strict";z.d(Xe,{Xf:()=>Mt});var _=z(655),B=z(1144),oe=z(8239),Pe=z(8306),Ae=z(3670),xe=z(2206),je=z(4532),Ue=z(6495),We=z(3260),_e=z(576),de=z(7849),Fe=z(8822);function Mt(dt){if(dt instanceof Pe.y)return dt;if(null!=dt){if((0,Ae.c)(dt))return function pt(dt){return new Pe.y(nt=>{const Ye=dt[Fe.L]();if((0,_e.m)(Ye.subscribe))return Ye.subscribe(nt);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(dt);if((0,B.z)(dt))return function Et(dt){return new Pe.y(nt=>{for(let Ye=0;Ye<dt.length&&!nt.closed;Ye++)nt.next(dt[Ye]);nt.complete()})}(dt);if((0,oe.t)(dt))return function Rt(dt){return new Pe.y(nt=>{dt.then(Ye=>{nt.closed||(nt.next(Ye),nt.complete())},Ye=>nt.error(Ye)).then(null,de.h)})}(dt);if((0,xe.D)(dt))return yt(dt);if((0,Ue.T)(dt))return function tt(dt){return new Pe.y(nt=>{for(const Ye of dt)if(nt.next(Ye),nt.closed)return;nt.complete()})}(dt);if((0,We.L)(dt))return function ke(dt){return yt((0,We.Q)(dt))}(dt)}throw(0,je.z)(dt)}function yt(dt){return new Pe.y(nt=>{(function Ht(dt,nt){var Ye,at,Dt,ne;return(0,_.mG)(this,void 0,void 0,function*(){try{for(Ye=(0,_.KL)(dt);!(at=yield Ye.next()).done;)if(nt.next(at.value),nt.closed)return}catch(Oe){Dt={error:Oe}}finally{try{at&&!at.done&&(ne=Ye.return)&&(yield ne.call(Ye))}finally{if(Dt)throw Dt.error}}nt.complete()})})(dt,nt).catch(Ye=>nt.error(Ye))})}},6451:(en,Xe,z)=>{"use strict";z.d(Xe,{T:()=>xe});var _=z(8189),B=z(8421),oe=z(515),Pe=z(7669),Ae=z(8996);function xe(...je){const Ue=(0,Pe.yG)(je),We=(0,Pe._6)(je,1/0),_e=je;return _e.length?1===_e.length?(0,B.Xf)(_e[0]):(0,_.J)(We)((0,Ae.D)(_e,Ue)):oe.E}},9646:(en,Xe,z)=>{"use strict";z.d(Xe,{of:()=>oe});var _=z(7669),B=z(8996);function oe(...Pe){const Ae=(0,_.yG)(Pe);return(0,B.D)(Pe,Ae)}},5403:(en,Xe,z)=>{"use strict";z.d(Xe,{x:()=>B});var _=z(930);function B(Pe,Ae,xe,je,Ue){return new oe(Pe,Ae,xe,je,Ue)}class oe extends _.Lv{constructor(Ae,xe,je,Ue,We,_e){super(Ae),this.onFinalize=We,this.shouldUnsubscribe=_e,this._next=xe?function(de){try{xe(de)}catch(Fe){Ae.error(Fe)}}:super._next,this._error=Ue?function(de){try{Ue(de)}catch(Fe){Ae.error(Fe)}finally{this.unsubscribe()}}:super._error,this._complete=je?function(){try{je()}catch(de){Ae.error(de)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var Ae;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:xe}=this;super.unsubscribe(),!xe&&(null===(Ae=this.onFinalize)||void 0===Ae||Ae.call(this))}}}},4351:(en,Xe,z)=>{"use strict";z.d(Xe,{b:()=>oe});var _=z(5577),B=z(576);function oe(Pe,Ae){return(0,B.m)(Ae)?(0,_.z)(Pe,Ae,1):(0,_.z)(Pe,1)}},6590:(en,Xe,z)=>{"use strict";z.d(Xe,{d:()=>oe});var _=z(4482),B=z(5403);function oe(Pe){return(0,_.e)((Ae,xe)=>{let je=!1;Ae.subscribe((0,B.x)(xe,Ue=>{je=!0,xe.next(Ue)},()=>{je||xe.next(Pe),xe.complete()}))})}},1884:(en,Xe,z)=>{"use strict";z.d(Xe,{x:()=>Pe});var _=z(4671),B=z(4482),oe=z(5403);function Pe(xe,je=_.y){return xe=null!=xe?xe:Ae,(0,B.e)((Ue,We)=>{let _e,de=!0;Ue.subscribe((0,oe.x)(We,Fe=>{const Mt=je(Fe);(de||!xe(_e,Mt))&&(de=!1,_e=Mt,We.next(Fe))}))})}function Ae(xe,je){return xe===je}},9300:(en,Xe,z)=>{"use strict";z.d(Xe,{h:()=>oe});var _=z(4482),B=z(5403);function oe(Pe,Ae){return(0,_.e)((xe,je)=>{let Ue=0;xe.subscribe((0,B.x)(je,We=>Pe.call(Ae,We,Ue++)&&je.next(We)))})}},590:(en,Xe,z)=>{"use strict";z.d(Xe,{P:()=>je});var _=z(6805),B=z(9300),oe=z(5698),Pe=z(6590),Ae=z(8068),xe=z(4671);function je(Ue,We){const _e=arguments.length>=2;return de=>de.pipe(Ue?(0,B.h)((Fe,Mt)=>Ue(Fe,Mt,de)):xe.y,(0,oe.q)(1),_e?(0,Pe.d)(We):(0,Ae.T)(()=>new _.K))}},4004:(en,Xe,z)=>{"use strict";z.d(Xe,{U:()=>oe});var _=z(4482),B=z(5403);function oe(Pe,Ae){return(0,_.e)((xe,je)=>{let Ue=0;xe.subscribe((0,B.x)(je,We=>{je.next(Pe.call(Ae,We,Ue++))}))})}},8189:(en,Xe,z)=>{"use strict";z.d(Xe,{J:()=>oe});var _=z(5577),B=z(4671);function oe(Pe=1/0){return(0,_.z)(B.y,Pe)}},5577:(en,Xe,z)=>{"use strict";z.d(Xe,{z:()=>Ue});var _=z(4004),B=z(8421),oe=z(4482),Pe=z(9672),Ae=z(5403),je=z(576);function Ue(We,_e,de=1/0){return(0,je.m)(_e)?Ue((Fe,Mt)=>(0,_.U)((pt,Et)=>_e(Fe,pt,Mt,Et))((0,B.Xf)(We(Fe,Mt))),de):("number"==typeof _e&&(de=_e),(0,oe.e)((Fe,Mt)=>function xe(We,_e,de,Fe,Mt,pt,Et,Rt){const tt=[];let yt=0,ke=0,Ht=!1;const dt=()=>{Ht&&!tt.length&&!yt&&_e.complete()},nt=at=>yt<Fe?Ye(at):tt.push(at),Ye=at=>{pt&&_e.next(at),yt++;let Dt=!1;(0,B.Xf)(de(at,ke++)).subscribe((0,Ae.x)(_e,ne=>{null==Mt||Mt(ne),pt?nt(ne):_e.next(ne)},()=>{Dt=!0},void 0,()=>{if(Dt)try{for(yt--;tt.length&&yt<Fe;){const ne=tt.shift();Et?(0,Pe.f)(_e,Et,()=>Ye(ne)):Ye(ne)}dt()}catch(ne){_e.error(ne)}}))};return We.subscribe((0,Ae.x)(_e,nt,()=>{Ht=!0,dt()})),()=>{null==Rt||Rt()}}(Fe,Mt,We,de)))}},5363:(en,Xe,z)=>{"use strict";z.d(Xe,{Q:()=>Pe});var _=z(9672),B=z(4482),oe=z(5403);function Pe(Ae,xe=0){return(0,B.e)((je,Ue)=>{je.subscribe((0,oe.x)(Ue,We=>(0,_.f)(Ue,Ae,()=>Ue.next(We),xe),()=>(0,_.f)(Ue,Ae,()=>Ue.complete(),xe),We=>(0,_.f)(Ue,Ae,()=>Ue.error(We),xe)))})}},5026:(en,Xe,z)=>{"use strict";z.d(Xe,{R:()=>Pe});var _=z(4482),B=z(5403);function oe(Ae,xe,je,Ue,We){return(_e,de)=>{let Fe=je,Mt=xe,pt=0;_e.subscribe((0,B.x)(de,Et=>{const Rt=pt++;Mt=Fe?Ae(Mt,Et,Rt):(Fe=!0,Et),Ue&&de.next(Mt)},We&&(()=>{Fe&&de.next(Mt),de.complete()})))}}function Pe(Ae,xe){return(0,_.e)(oe(Ae,xe,arguments.length>=2,!0))}},3099:(en,Xe,z)=>{"use strict";z.d(Xe,{B:()=>xe});var _=z(8996),B=z(5698),oe=z(7579),Pe=z(930),Ae=z(4482);function xe(Ue={}){const{connector:We=(()=>new oe.x),resetOnError:_e=!0,resetOnComplete:de=!0,resetOnRefCountZero:Fe=!0}=Ue;return Mt=>{let pt=null,Et=null,Rt=null,tt=0,yt=!1,ke=!1;const Ht=()=>{null==Et||Et.unsubscribe(),Et=null},dt=()=>{Ht(),pt=Rt=null,yt=ke=!1},nt=()=>{const Ye=pt;dt(),null==Ye||Ye.unsubscribe()};return(0,Ae.e)((Ye,at)=>{tt++,!ke&&!yt&&Ht();const Dt=Rt=null!=Rt?Rt:We();at.add(()=>{tt--,0===tt&&!ke&&!yt&&(Et=je(nt,Fe))}),Dt.subscribe(at),pt||(pt=new Pe.Hp({next:ne=>Dt.next(ne),error:ne=>{ke=!0,Ht(),Et=je(dt,_e,ne),Dt.error(ne)},complete:()=>{yt=!0,Ht(),Et=je(dt,de),Dt.complete()}}),(0,_.D)(Ye).subscribe(pt))})(Mt)}}function je(Ue,We,..._e){return!0===We?(Ue(),null):!1===We?null:We(..._e).pipe((0,B.q)(1)).subscribe(()=>Ue())}},8675:(en,Xe,z)=>{"use strict";z.d(Xe,{O:()=>Pe});var _=z(7272),B=z(7669),oe=z(4482);function Pe(...Ae){const xe=(0,B.yG)(Ae);return(0,oe.e)((je,Ue)=>{(xe?(0,_.z)(Ae,je,xe):(0,_.z)(Ae,je)).subscribe(Ue)})}},9468:(en,Xe,z)=>{"use strict";z.d(Xe,{R:()=>B});var _=z(4482);function B(oe,Pe=0){return(0,_.e)((Ae,xe)=>{xe.add(oe.schedule(()=>Ae.subscribe(xe),Pe))})}},3900:(en,Xe,z)=>{"use strict";z.d(Xe,{w:()=>Pe});var _=z(8421),B=z(4482),oe=z(5403);function Pe(Ae,xe){return(0,B.e)((je,Ue)=>{let We=null,_e=0,de=!1;const Fe=()=>de&&!We&&Ue.complete();je.subscribe((0,oe.x)(Ue,Mt=>{null==We||We.unsubscribe();let pt=0;const Et=_e++;(0,_.Xf)(Ae(Mt,Et)).subscribe(We=(0,oe.x)(Ue,Rt=>Ue.next(xe?xe(Mt,Rt,Et,pt++):Rt),()=>{We=null,Fe()}))},()=>{de=!0,Fe()}))})}},5698:(en,Xe,z)=>{"use strict";z.d(Xe,{q:()=>Pe});var _=z(515),B=z(4482),oe=z(5403);function Pe(Ae){return Ae<=0?()=>_.E:(0,B.e)((xe,je)=>{let Ue=0;xe.subscribe((0,oe.x)(je,We=>{++Ue<=Ae&&(je.next(We),Ae<=Ue&&je.complete())}))})}},8505:(en,Xe,z)=>{"use strict";z.d(Xe,{b:()=>Ae});var _=z(576),B=z(4482),oe=z(5403),Pe=z(4671);function Ae(xe,je,Ue){const We=(0,_.m)(xe)||je||Ue?{next:xe,error:je,complete:Ue}:xe;return We?(0,B.e)((_e,de)=>{var Fe;null===(Fe=We.subscribe)||void 0===Fe||Fe.call(We);let Mt=!0;_e.subscribe((0,oe.x)(de,pt=>{var Et;null===(Et=We.next)||void 0===Et||Et.call(We,pt),de.next(pt)},()=>{var pt;Mt=!1,null===(pt=We.complete)||void 0===pt||pt.call(We),de.complete()},pt=>{var Et;Mt=!1,null===(Et=We.error)||void 0===Et||Et.call(We,pt),de.error(pt)},()=>{var pt,Et;Mt&&(null===(pt=We.unsubscribe)||void 0===pt||pt.call(We)),null===(Et=We.finalize)||void 0===Et||Et.call(We)}))}):Pe.y}},8068:(en,Xe,z)=>{"use strict";z.d(Xe,{T:()=>Pe});var _=z(6805),B=z(4482),oe=z(5403);function Pe(xe=Ae){return(0,B.e)((je,Ue)=>{let We=!1;je.subscribe((0,oe.x)(Ue,_e=>{We=!0,Ue.next(_e)},()=>We?Ue.complete():Ue.error(xe())))})}function Ae(){return new _.K}},4408:(en,Xe,z)=>{"use strict";z.d(Xe,{o:()=>Ae});var _=z(727);class B extends _.w0{constructor(je,Ue){super()}schedule(je,Ue=0){return this}}const oe={setInterval(xe,je,...Ue){const{delegate:We}=oe;return(null==We?void 0:We.setInterval)?We.setInterval(xe,je,...Ue):setInterval(xe,je,...Ue)},clearInterval(xe){const{delegate:je}=oe;return((null==je?void 0:je.clearInterval)||clearInterval)(xe)},delegate:void 0};var Pe=z(8737);class Ae extends B{constructor(je,Ue){super(je,Ue),this.scheduler=je,this.work=Ue,this.pending=!1}schedule(je,Ue=0){if(this.closed)return this;this.state=je;const We=this.id,_e=this.scheduler;return null!=We&&(this.id=this.recycleAsyncId(_e,We,Ue)),this.pending=!0,this.delay=Ue,this.id=this.id||this.requestAsyncId(_e,this.id,Ue),this}requestAsyncId(je,Ue,We=0){return oe.setInterval(je.flush.bind(je,this),We)}recycleAsyncId(je,Ue,We=0){if(null!=We&&this.delay===We&&!1===this.pending)return Ue;oe.clearInterval(Ue)}execute(je,Ue){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const We=this._execute(je,Ue);if(We)return We;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(je,Ue){let _e,We=!1;try{this.work(je)}catch(de){We=!0,_e=de||new Error("Scheduled action threw falsy error")}if(We)return this.unsubscribe(),_e}unsubscribe(){if(!this.closed){const{id:je,scheduler:Ue}=this,{actions:We}=Ue;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Pe.P)(We,this),null!=je&&(this.id=this.recycleAsyncId(Ue,je,null)),this.delay=null,super.unsubscribe()}}}},7565:(en,Xe,z)=>{"use strict";z.d(Xe,{v:()=>oe});var _=z(6063);class B{constructor(Ae,xe=B.now){this.schedulerActionCtor=Ae,this.now=xe}schedule(Ae,xe=0,je){return new this.schedulerActionCtor(this,Ae).schedule(je,xe)}}B.now=_.l.now;class oe extends B{constructor(Ae,xe=B.now){super(Ae,xe),this.actions=[],this._active=!1,this._scheduled=void 0}flush(Ae){const{actions:xe}=this;if(this._active)return void xe.push(Ae);let je;this._active=!0;do{if(je=Ae.execute(Ae.state,Ae.delay))break}while(Ae=xe.shift());if(this._active=!1,je){for(;Ae=xe.shift();)Ae.unsubscribe();throw je}}}},4986:(en,Xe,z)=>{"use strict";z.d(Xe,{z:()=>oe});var _=z(4408);const oe=new(z(7565).v)(_.o)},6063:(en,Xe,z)=>{"use strict";z.d(Xe,{l:()=>_});const _={now:()=>(_.delegate||Date).now(),delegate:void 0}},3410:(en,Xe,z)=>{"use strict";z.d(Xe,{z:()=>_});const _={setTimeout(B,oe,...Pe){const{delegate:Ae}=_;return(null==Ae?void 0:Ae.setTimeout)?Ae.setTimeout(B,oe,...Pe):setTimeout(B,oe,...Pe)},clearTimeout(B){const{delegate:oe}=_;return((null==oe?void 0:oe.clearTimeout)||clearTimeout)(B)},delegate:void 0}},2202:(en,Xe,z)=>{"use strict";z.d(Xe,{h:()=>B});const B=function _(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(en,Xe,z)=>{"use strict";z.d(Xe,{L:()=>_});const _="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(en,Xe,z)=>{"use strict";z.d(Xe,{K:()=>B});const B=(0,z(3888).d)(oe=>function(){oe(this),this.name="EmptyError",this.message="no elements in sequence"})},7669:(en,Xe,z)=>{"use strict";z.d(Xe,{_6:()=>xe,jO:()=>Pe,yG:()=>Ae});var _=z(576);function oe(je){return je[je.length-1]}function Pe(je){return(0,_.m)(oe(je))?je.pop():void 0}function Ae(je){return function B(je){return je&&(0,_.m)(je.schedule)}(oe(je))?je.pop():void 0}function xe(je,Ue){return"number"==typeof oe(je)?je.pop():Ue}},4742:(en,Xe,z)=>{"use strict";z.d(Xe,{D:()=>Ae});const{isArray:_}=Array,{getPrototypeOf:B,prototype:oe,keys:Pe}=Object;function Ae(je){if(1===je.length){const Ue=je[0];if(_(Ue))return{args:Ue,keys:null};if(function xe(je){return je&&"object"==typeof je&&B(je)===oe}(Ue)){const We=Pe(Ue);return{args:We.map(_e=>Ue[_e]),keys:We}}}return{args:je,keys:null}}},8737:(en,Xe,z)=>{"use strict";function _(B,oe){if(B){const Pe=B.indexOf(oe);0<=Pe&&B.splice(Pe,1)}}z.d(Xe,{P:()=>_})},3888:(en,Xe,z)=>{"use strict";function _(B){const Pe=B(Ae=>{Error.call(Ae),Ae.stack=(new Error).stack});return Pe.prototype=Object.create(Error.prototype),Pe.prototype.constructor=Pe,Pe}z.d(Xe,{d:()=>_})},1810:(en,Xe,z)=>{"use strict";function _(B,oe){return B.reduce((Pe,Ae,xe)=>(Pe[Ae]=oe[xe],Pe),{})}z.d(Xe,{n:()=>_})},2806:(en,Xe,z)=>{"use strict";z.d(Xe,{O:()=>Pe,x:()=>oe});var _=z(2416);let B=null;function oe(Ae){if(_.v.useDeprecatedSynchronousErrorHandling){const xe=!B;if(xe&&(B={errorThrown:!1,error:null}),Ae(),xe){const{errorThrown:je,error:Ue}=B;if(B=null,je)throw Ue}}else Ae()}function Pe(Ae){_.v.useDeprecatedSynchronousErrorHandling&&B&&(B.errorThrown=!0,B.error=Ae)}},9672:(en,Xe,z)=>{"use strict";function _(B,oe,Pe,Ae=0,xe=!1){const je=oe.schedule(function(){Pe(),xe?B.add(this.schedule(null,Ae)):this.unsubscribe()},Ae);if(B.add(je),!xe)return je}z.d(Xe,{f:()=>_})},4671:(en,Xe,z)=>{"use strict";function _(B){return B}z.d(Xe,{y:()=>_})},1144:(en,Xe,z)=>{"use strict";z.d(Xe,{z:()=>_});const _=B=>B&&"number"==typeof B.length&&"function"!=typeof B},2206:(en,Xe,z)=>{"use strict";z.d(Xe,{D:()=>B});var _=z(576);function B(oe){return Symbol.asyncIterator&&(0,_.m)(null==oe?void 0:oe[Symbol.asyncIterator])}},576:(en,Xe,z)=>{"use strict";function _(B){return"function"==typeof B}z.d(Xe,{m:()=>_})},3670:(en,Xe,z)=>{"use strict";z.d(Xe,{c:()=>oe});var _=z(8822),B=z(576);function oe(Pe){return(0,B.m)(Pe[_.L])}},6495:(en,Xe,z)=>{"use strict";z.d(Xe,{T:()=>oe});var _=z(2202),B=z(576);function oe(Pe){return(0,B.m)(null==Pe?void 0:Pe[_.h])}},8239:(en,Xe,z)=>{"use strict";z.d(Xe,{t:()=>B});var _=z(576);function B(oe){return(0,_.m)(null==oe?void 0:oe.then)}},3260:(en,Xe,z)=>{"use strict";z.d(Xe,{L:()=>Pe,Q:()=>oe});var _=z(655),B=z(576);function oe(Ae){return(0,_.FC)(this,arguments,function*(){const je=Ae.getReader();try{for(;;){const{value:Ue,done:We}=yield(0,_.qq)(je.read());if(We)return yield(0,_.qq)(void 0);yield yield(0,_.qq)(Ue)}}finally{je.releaseLock()}})}function Pe(Ae){return(0,B.m)(null==Ae?void 0:Ae.getReader)}},4482:(en,Xe,z)=>{"use strict";z.d(Xe,{A:()=>B,e:()=>oe});var _=z(576);function B(Pe){return(0,_.m)(null==Pe?void 0:Pe.lift)}function oe(Pe){return Ae=>{if(B(Ae))return Ae.lift(function(xe){try{return Pe(xe,this)}catch(je){this.error(je)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(en,Xe,z)=>{"use strict";z.d(Xe,{Z:()=>Pe});var _=z(4004);const{isArray:B}=Array;function Pe(Ae){return(0,_.U)(xe=>function oe(Ae,xe){return B(xe)?Ae(...xe):Ae(xe)}(Ae,xe))}},5032:(en,Xe,z)=>{"use strict";function _(){}z.d(Xe,{Z:()=>_})},7849:(en,Xe,z)=>{"use strict";z.d(Xe,{h:()=>oe});var _=z(2416),B=z(3410);function oe(Pe){B.z.setTimeout(()=>{const{onUnhandledError:Ae}=_.v;if(!Ae)throw Pe;Ae(Pe)})}},4532:(en,Xe,z)=>{"use strict";function _(B){return new TypeError(`You provided ${null!==B&&"object"==typeof B?"an invalid object":`'${B}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}z.d(Xe,{z:()=>_})},5226:function(en){en.exports=function(){"use strict";const Xe="SweetAlert2:",_=S=>S.charAt(0).toUpperCase()+S.slice(1),B=S=>Array.prototype.slice.call(S),oe=S=>{console.warn("".concat(Xe," ").concat("object"==typeof S?S.join(" "):S))},Pe=S=>{console.error("".concat(Xe," ").concat(S))},Ae=[],je=(S,x)=>{(S=>{Ae.includes(S)||(Ae.push(S),oe(S))})('"'.concat(S,'" is deprecated and will be removed in the next major release. Please use "').concat(x,'" instead.'))},Ue=S=>"function"==typeof S?S():S,We=S=>S&&"function"==typeof S.toPromise,_e=S=>We(S)?S.toPromise():Promise.resolve(S),de=S=>S&&Promise.resolve(S)===S,Mt={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},pt=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],Et={},Rt=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],tt=S=>Object.prototype.hasOwnProperty.call(Mt,S),yt=S=>-1!==pt.indexOf(S),ke=S=>Et[S],Ht=S=>{tt(S)||oe('Unknown parameter "'.concat(S,'"'))},dt=S=>{Rt.includes(S)&&oe('The parameter "'.concat(S,'" is incompatible with toasts'))},nt=S=>{ke(S)&&je(S,ke(S))},Dt=S=>{const x={};for(const Q in S)x[S[Q]]="swal2-"+S[Q];return x},ne=Dt(["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error","no-war"]),Oe=Dt(["success","warning","info","question","error"]),W=()=>document.body.querySelector(".".concat(ne.container)),ze=S=>{const x=W();return x?x.querySelector(S):null},He=S=>ze(".".concat(S)),ot=()=>He(ne.popup),Qe=()=>He(ne.icon),En=()=>He(ne.title),dn=()=>He(ne["html-container"]),Qt=()=>He(ne.image),Ft=()=>He(ne["progress-steps"]),St=()=>He(ne["validation-message"]),hn=()=>ze(".".concat(ne.actions," .").concat(ne.confirm)),Wt=()=>ze(".".concat(ne.actions," .").concat(ne.deny)),rn=()=>ze(".".concat(ne.loader)),Cn=()=>ze(".".concat(ne.actions," .").concat(ne.cancel)),fn=()=>He(ne.actions),On=()=>He(ne.footer),ir=()=>He(ne["timer-progress-bar"]),Sn=()=>He(ne.close),ar=()=>{const S=B(ot().querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])')).sort((Q,ve)=>{const Je=parseInt(Q.getAttribute("tabindex")),pn=parseInt(ve.getAttribute("tabindex"));return Je>pn?1:Je<pn?-1:0}),x=B(ot().querySelectorAll('\n  a[href],\n  area[href],\n  input:not([disabled]),\n  select:not([disabled]),\n  textarea:not([disabled]),\n  button:not([disabled]),\n  iframe,\n  object,\n  embed,\n  [tabindex="0"],\n  [contenteditable],\n  audio[controls],\n  video[controls],\n  summary\n')).filter(Q=>"-1"!==Q.getAttribute("tabindex"));return(S=>{const x=[];for(let Q=0;Q<S.length;Q++)-1===x.indexOf(S[Q])&&x.push(S[Q]);return x})(S.concat(x)).filter(Q=>sn(Q))},fr=()=>bn(document.body,ne.shown)&&!bn(document.body,ne["toast-shown"])&&!bn(document.body,ne["no-backdrop"]),vn=()=>ot()&&bn(ot(),ne.toast),er={previousBodyPadding:null},zt=(S,x)=>{if(S.textContent="",x){const ve=(new DOMParser).parseFromString(x,"text/html");B(ve.querySelector("head").childNodes).forEach(Je=>{S.appendChild(Je)}),B(ve.querySelector("body").childNodes).forEach(Je=>{S.appendChild(Je)})}},bn=(S,x)=>{if(!x)return!1;const Q=x.split(/\s+/);for(let ve=0;ve<Q.length;ve++)if(!S.classList.contains(Q[ve]))return!1;return!0},un=(S,x,Q)=>{if(((S,x)=>{B(S.classList).forEach(Q=>{!Object.values(ne).includes(Q)&&!Object.values(Oe).includes(Q)&&!Object.values(x.showClass).includes(Q)&&S.classList.remove(Q)})})(S,x),x.customClass&&x.customClass[Q]){if("string"!=typeof x.customClass[Q]&&!x.customClass[Q].forEach)return oe("Invalid type of customClass.".concat(Q,'! Expected string or iterable object, got "').concat(typeof x.customClass[Q],'"'));ge(S,x.customClass[Q])}},zr=(S,x)=>{if(!x)return null;switch(x){case"select":case"textarea":case"file":return S.querySelector(".".concat(ne.popup," > .").concat(ne[x]));case"checkbox":return S.querySelector(".".concat(ne.popup," > .").concat(ne.checkbox," input"));case"radio":return S.querySelector(".".concat(ne.popup," > .").concat(ne.radio," input:checked"))||S.querySelector(".".concat(ne.popup," > .").concat(ne.radio," input:first-child"));case"range":return S.querySelector(".".concat(ne.popup," > .").concat(ne.range," input"));default:return S.querySelector(".".concat(ne.popup," > .").concat(ne.input))}},_i=S=>{if(S.focus(),"file"!==S.type){const x=S.value;S.value="",S.value=x}},ct=(S,x,Q)=>{!S||!x||("string"==typeof x&&(x=x.split(/\s+/).filter(Boolean)),x.forEach(ve=>{Array.isArray(S)?S.forEach(Je=>{Q?Je.classList.add(ve):Je.classList.remove(ve)}):Q?S.classList.add(ve):S.classList.remove(ve)}))},ge=(S,x)=>{ct(S,x,!0)},be=(S,x)=>{ct(S,x,!1)},vt=(S,x)=>{const Q=B(S.childNodes);for(let ve=0;ve<Q.length;ve++)if(bn(Q[ve],x))return Q[ve]},Be=(S,x,Q)=>{Q==="".concat(parseInt(Q))&&(Q=parseInt(Q)),Q||0===parseInt(Q)?S.style[x]="number"==typeof Q?"".concat(Q,"px"):Q:S.style.removeProperty(x)},gt=function(S){S.style.display=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"flex"},xt=S=>{S.style.display="none"},Kn=(S,x,Q,ve)=>{const Je=S.querySelector(x);Je&&(Je.style[Q]=ve)},In=(S,x,Q)=>{x?gt(S,Q):xt(S)},sn=S=>!(!S||!(S.offsetWidth||S.offsetHeight||S.getClientRects().length)),br=S=>S.scrollHeight>S.clientHeight,sr=S=>{const x=window.getComputedStyle(S),Q=parseFloat(x.getPropertyValue("animation-duration")||"0"),ve=parseFloat(x.getPropertyValue("transition-duration")||"0");return Q>0||ve>0},Lt=function(S){let x=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const Q=ir();sn(Q)&&(x&&(Q.style.transition="none",Q.style.width="100%"),setTimeout(()=>{Q.style.transition="width ".concat(S/1e3,"s linear"),Q.style.width="0%"},10))},Pn=()=>"undefined"==typeof window||"undefined"==typeof document,Le={},Jt=S=>new Promise(x=>{if(!S)return x();const Q=window.scrollX,ve=window.scrollY;Le.restoreFocusTimeout=setTimeout(()=>{Le.previousActiveElement&&Le.previousActiveElement.focus?(Le.previousActiveElement.focus(),Le.previousActiveElement=null):document.body&&document.body.focus(),x()},100),window.scrollTo(Q,ve)}),Rn='\n <div aria-labelledby="'.concat(ne.title,'" aria-describedby="').concat(ne["html-container"],'" class="').concat(ne.popup,'" tabindex="-1">\n   <button type="button" class="').concat(ne.close,'"></button>\n   <ul class="').concat(ne["progress-steps"],'"></ul>\n   <div class="').concat(ne.icon,'"></div>\n   <img class="').concat(ne.image,'" />\n   <h2 class="').concat(ne.title,'" id="').concat(ne.title,'"></h2>\n   <div class="').concat(ne["html-container"],'" id="').concat(ne["html-container"],'"></div>\n   <input class="').concat(ne.input,'" />\n   <input type="file" class="').concat(ne.file,'" />\n   <div class="').concat(ne.range,'">\n     <input type="range" />\n     <output></output>\n   </div>\n   <select class="').concat(ne.select,'"></select>\n   <div class="').concat(ne.radio,'"></div>\n   <label for="').concat(ne.checkbox,'" class="').concat(ne.checkbox,'">\n     <input type="checkbox" />\n     <span class="').concat(ne.label,'"></span>\n   </label>\n   <textarea class="').concat(ne.textarea,'"></textarea>\n   <div class="').concat(ne["validation-message"],'" id="').concat(ne["validation-message"],'"></div>\n   <div class="').concat(ne.actions,'">\n     <div class="').concat(ne.loader,'"></div>\n     <button type="button" class="').concat(ne.confirm,'"></button>\n     <button type="button" class="').concat(ne.deny,'"></button>\n     <button type="button" class="').concat(ne.cancel,'"></button>\n   </div>\n   <div class="').concat(ne.footer,'"></div>\n   <div class="').concat(ne["timer-progress-bar-container"],'">\n     <div class="').concat(ne["timer-progress-bar"],'"></div>\n   </div>\n </div>\n').replace(/(^|\n)\s*/g,""),Ee=()=>{Le.currentInstance.resetValidationMessage()},jt=S=>{const x=(()=>{const S=W();return!!S&&(S.remove(),be([document.documentElement,document.body],[ne["no-backdrop"],ne["toast-shown"],ne["has-column"]]),!0)})();if(Pn())return void Pe("SweetAlert2 requires document to initialize");const Q=document.createElement("div");Q.className=ne.container,x&&ge(Q,ne["no-transition"]),zt(Q,Rn);const ve=(S=>"string"==typeof S?document.querySelector(S):S)(S.target);ve.appendChild(Q),(S=>{const x=ot();x.setAttribute("role",S.toast?"alert":"dialog"),x.setAttribute("aria-live",S.toast?"polite":"assertive"),S.toast||x.setAttribute("aria-modal","true")})(S),(S=>{"rtl"===window.getComputedStyle(S).direction&&ge(W(),ne.rtl)})(ve),(()=>{const S=ot(),x=vt(S,ne.input),Q=vt(S,ne.file),ve=S.querySelector(".".concat(ne.range," input")),Je=S.querySelector(".".concat(ne.range," output")),pn=vt(S,ne.select),Cr=S.querySelector(".".concat(ne.checkbox," input")),zi=vt(S,ne.textarea);x.oninput=Ee,Q.onchange=Ee,pn.onchange=Ee,Cr.onchange=Ee,zi.oninput=Ee,ve.oninput=()=>{Ee(),Je.value=ve.value},ve.onchange=()=>{Ee(),ve.nextSibling.value=ve.value}})(),on(Q,S)},on=(S,x)=>{if(x.toast)return;const Q=(S=>S[Math.floor(Math.random()*S.length)])([{text:"\u0428\u0412\u0410\u0420\u0426\u0415\u041d\u0415\u0413\u0413\u0415\u0420 \u043e\u0431\u0440\u0430\u0442\u0438\u043b\u0441\u044f <br> \u043a \u0420\u0423\u0421\u0421\u041a\u041e\u041c\u0423 \u041d\u0410\u0420\u041e\u0414\u0423 \u043e \u0432\u043e\u0439\u043d\u0435",youtubeId:"fWClXZd9c78"},{text:"\u0420\u0423\u0421\u0421\u041a\u0418\u0419 \u041f\u0410\u0422\u0420\u0418\u041e\u0422 <br> \u043e\u0442\u043a\u0440\u044b\u043b \u0433\u043b\u0430\u0432\u043d\u0443\u044e \u0442\u0430\u0439\u043d\u0443 \u0441\u043f\u0435\u0446\u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438",youtubeId:"_RjBNkn88yA"},{text:"\u0413\u0415\u0420\u041e\u0419 \u041d\u041e\u0412\u041e\u0420\u041e\u0421\u0421\u0418\u0418 \u0421\u0422\u0420\u0415\u041b\u041a\u041e\u0412 <br> \u0434\u0430\u043b \u043e\u0446\u0435\u043d\u043a\u0443 \u0445\u043e\u0434\u0443 \u0441\u043f\u0435\u0446\u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438",youtubeId:"yUmzQT4C8JY"},{text:"\u0424\u0418\u041d\u0421\u041a\u0418\u0419 \u0414\u0420\u0423\u0413 \u0420\u041e\u0421\u0421\u0418\u0418 <br> \u0433\u043e\u0432\u043e\u0440\u0438\u0442 \u041f\u041e-\u0420\u0423\u0421\u0421\u041a\u0418 \u043e \u0441\u043f\u0435\u0446\u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438",youtubeId:"hkCYb6edUrQ"}]);if("ru"===navigator.language&&location.host.match(/\.(ru|su|xn--p1ai)$/)){const ve=document.createElement("div");ve.className=ne["no-war"],zt(ve,'<a href="https://www.youtube.com/watch?v='.concat(Q.youtubeId,'" target="_blank">').concat(Q.text,"</a>")),S.appendChild(ve),S.style.paddingTop="4em"}},xn=(S,x)=>{S instanceof HTMLElement?x.appendChild(S):"object"==typeof S?yn(S,x):S&&zt(x,S)},yn=(S,x)=>{S.jquery?Zn(x,S):zt(x,S.toString())},Zn=(S,x)=>{if(S.textContent="",0 in x)for(let Q=0;Q in x;Q++)S.appendChild(x[Q].cloneNode(!0));else S.appendChild(x.cloneNode(!0))},Tr=(()=>{if(Pn())return!1;const S=document.createElement("div"),x={WebkitAnimation:"webkitAnimationEnd",animation:"animationend"};for(const Q in x)if(Object.prototype.hasOwnProperty.call(x,Q)&&void 0!==S.style[Q])return x[Q];return!1})(),cr=(S,x)=>{const Q=fn(),ve=rn();x.showConfirmButton||x.showDenyButton||x.showCancelButton?gt(Q):xt(Q),un(Q,x,"actions"),function Zr(S,x,Q){const ve=hn(),Je=Wt(),pn=Cn();Xi(ve,"confirm",Q),Xi(Je,"deny",Q),Xi(pn,"cancel",Q),function Ri(S,x,Q,ve){if(!ve.buttonsStyling)return be([S,x,Q],ne.styled);ge([S,x,Q],ne.styled),ve.confirmButtonColor&&(S.style.backgroundColor=ve.confirmButtonColor,ge(S,ne["default-outline"])),ve.denyButtonColor&&(x.style.backgroundColor=ve.denyButtonColor,ge(x,ne["default-outline"])),ve.cancelButtonColor&&(Q.style.backgroundColor=ve.cancelButtonColor,ge(Q,ne["default-outline"]))}(ve,Je,pn,Q),Q.reverseButtons&&(Q.toast?(S.insertBefore(pn,ve),S.insertBefore(Je,ve)):(S.insertBefore(pn,x),S.insertBefore(Je,x),S.insertBefore(ve,x)))}(Q,ve,x),zt(ve,x.loaderHtml),un(ve,x,"loader")};function Xi(S,x,Q){In(S,Q["show".concat(_(x),"Button")],"inline-block"),zt(S,Q["".concat(x,"ButtonText")]),S.setAttribute("aria-label",Q["".concat(x,"ButtonAriaLabel")]),S.className=ne[x],un(S,Q,"".concat(x,"Button")),ge(S,Q["".concat(x,"ButtonClass")])}const Ni=(S,x)=>{const Q=W();!Q||(function Oi(S,x){"string"==typeof x?S.style.background=x:x||ge([document.documentElement,document.body],ne["no-backdrop"])}(Q,x.backdrop),function Yr(S,x){x in ne?ge(S,ne[x]):(oe('The "position" parameter is not valid, defaulting to "center"'),ge(S,ne.center))}(Q,x.position),function Pr(S,x){if(x&&"string"==typeof x){const Q="grow-".concat(x);Q in ne&&ge(S,ne[Q])}}(Q,x.grow),un(Q,x,"container"))};var Zt={awaitingPromise:new WeakMap,promise:new WeakMap,innerParams:new WeakMap,domCache:new WeakMap};const Ct=["input","file","range","select","radio","checkbox","textarea"],lr=S=>{if(!Sr[S.input])return Pe('Unexpected type of input! Expected "text", "email", "password", "number", "tel", "select", "radio", "checkbox", "textarea", "file" or "url", got "'.concat(S.input,'"'));const x=Rr(S.input),Q=Sr[S.input](x,S);gt(Q),setTimeout(()=>{_i(Q)})},es=(S,x)=>{const Q=zr(ot(),S);if(Q){(S=>{for(let x=0;x<S.attributes.length;x++){const Q=S.attributes[x].name;["type","value","style"].includes(Q)||S.removeAttribute(Q)}})(Q);for(const ve in x)Q.setAttribute(ve,x[ve])}},kr=S=>{const x=Rr(S.input);S.customClass&&ge(x,S.customClass.input)},pi=(S,x)=>{(!S.placeholder||x.inputPlaceholder)&&(S.placeholder=x.inputPlaceholder)},nr=(S,x,Q)=>{if(Q.inputLabel){S.id=ne.input;const ve=document.createElement("label"),Je=ne["input-label"];ve.setAttribute("for",S.id),ve.className=Je,ge(ve,Q.customClass.inputLabel),ve.innerText=Q.inputLabel,x.insertAdjacentElement("beforebegin",ve)}},Rr=S=>{const x=ne[S]?ne[S]:ne.input;return vt(ot(),x)},Sr={};Sr.text=Sr.email=Sr.password=Sr.number=Sr.tel=Sr.url=(S,x)=>("string"==typeof x.inputValue||"number"==typeof x.inputValue?S.value=x.inputValue:de(x.inputValue)||oe('Unexpected type of inputValue! Expected "string", "number" or "Promise", got "'.concat(typeof x.inputValue,'"')),nr(S,S,x),pi(S,x),S.type=x.input,S),Sr.file=(S,x)=>(nr(S,S,x),pi(S,x),S),Sr.range=(S,x)=>{const Q=S.querySelector("input"),ve=S.querySelector("output");return Q.value=x.inputValue,Q.type=x.input,ve.value=x.inputValue,nr(Q,S,x),S},Sr.select=(S,x)=>{if(S.textContent="",x.inputPlaceholder){const Q=document.createElement("option");zt(Q,x.inputPlaceholder),Q.value="",Q.disabled=!0,Q.selected=!0,S.appendChild(Q)}return nr(S,S,x),S},Sr.radio=S=>(S.textContent="",S),Sr.checkbox=(S,x)=>{const Q=zr(ot(),"checkbox");Q.value="1",Q.id=ne.checkbox,Q.checked=Boolean(x.inputValue);const ve=S.querySelector("span");return zt(ve,x.inputPlaceholder),S},Sr.textarea=(S,x)=>{S.value=x.inputValue,pi(S,x),nr(S,S,x);return setTimeout(()=>{if("MutationObserver"in window){const ve=parseInt(window.getComputedStyle(ot()).width);new MutationObserver(()=>{const pn=S.offsetWidth+(ve=>parseInt(window.getComputedStyle(ve).marginLeft)+parseInt(window.getComputedStyle(ve).marginRight))(S);ot().style.width=pn>ve?"".concat(pn,"px"):null}).observe(S,{attributes:!0,attributeFilter:["style"]})}}),S};const Gn=(S,x)=>{const Q=dn();un(Q,x,"htmlContainer"),x.html?(xn(x.html,Q),gt(Q,"block")):x.text?(Q.textContent=x.text,gt(Q,"block")):xt(Q),((S,x)=>{const Q=ot(),ve=Zt.innerParams.get(S),Je=!ve||x.input!==ve.input;Ct.forEach(pn=>{const Cr=ne[pn],zi=vt(Q,Cr);es(pn,x.inputAttributes),zi.className=Cr,Je&&xt(zi)}),x.input&&(Je&&lr(x),kr(x))})(S,x)},we=(S,x)=>{for(const Q in Oe)x.icon!==Q&&be(S,Oe[Q]);ge(S,Oe[x.icon]),Pt(S,x),fe(),un(S,x,"icon")},fe=()=>{const S=ot(),x=window.getComputedStyle(S).getPropertyValue("background-color"),Q=S.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let ve=0;ve<Q.length;ve++)Q[ve].style.backgroundColor=x},it=(S,x)=>{S.textContent="",zt(S,x.iconHtml?kn(x.iconHtml):"success"===x.icon?'\n  <div class="swal2-success-circular-line-left"></div>\n  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>\n  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>\n  <div class="swal2-success-circular-line-right"></div>\n':"error"===x.icon?'\n  <span class="swal2-x-mark">\n    <span class="swal2-x-mark-line-left"></span>\n    <span class="swal2-x-mark-line-right"></span>\n  </span>\n':kn({question:"?",warning:"!",info:"i"}[x.icon]))},Pt=(S,x)=>{if(x.iconColor){S.style.color=x.iconColor,S.style.borderColor=x.iconColor;for(const Q of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])Kn(S,Q,"backgroundColor",x.iconColor);Kn(S,".swal2-success-ring","borderColor",x.iconColor)}},kn=S=>'<div class="'.concat(ne["icon-content"],'">').concat(S,"</div>"),yo=(S,x)=>{const Q=Ft();if(!x.progressSteps||0===x.progressSteps.length)return xt(Q);gt(Q),Q.textContent="",x.currentProgressStep>=x.progressSteps.length&&oe("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),x.progressSteps.forEach((ve,Je)=>{const pn=(S=>{const x=document.createElement("li");return ge(x,ne["progress-step"]),zt(x,S),x})(ve);if(Q.appendChild(pn),Je===x.currentProgressStep&&ge(pn,ne["active-progress-step"]),Je!==x.progressSteps.length-1){const Cr=(S=>{const x=document.createElement("li");return ge(x,ne["progress-step-line"]),S.progressStepsDistance&&(x.style.width=S.progressStepsDistance),x})(x);Q.appendChild(Cr)}})},Ui=(S,x)=>{S.className="".concat(ne.popup," ").concat(sn(S)?x.showClass.popup:""),x.toast?(ge([document.documentElement,document.body],ne["toast-shown"]),ge(S,ne.toast)):ge(S,ne.modal),un(S,x,"popup"),"string"==typeof x.customClass&&ge(S,x.customClass),x.icon&&ge(S,ne["icon-".concat(x.icon)])},Fs=(S,x)=>{((S,x)=>{const Q=W(),ve=ot();x.toast?(Be(Q,"width",x.width),ve.style.width="100%",ve.insertBefore(rn(),Qe())):Be(ve,"width",x.width),Be(ve,"padding",x.padding),x.color&&(ve.style.color=x.color),x.background&&(ve.style.background=x.background),xt(St()),Ui(ve,x)})(0,x),Ni(0,x),yo(0,x),((S,x)=>{const Q=Zt.innerParams.get(S),ve=Qe();Q&&x.icon===Q.icon?(it(ve,x),we(ve,x)):x.icon||x.iconHtml?x.icon&&-1===Object.keys(Oe).indexOf(x.icon)?(Pe('Unknown icon! Expected "success", "error", "warning", "info" or "question", got "'.concat(x.icon,'"')),xt(ve)):(gt(ve),it(ve,x),we(ve,x),ge(ve,x.showClass.icon)):xt(ve)})(S,x),((S,x)=>{const Q=Qt();if(!x.imageUrl)return xt(Q);gt(Q,""),Q.setAttribute("src",x.imageUrl),Q.setAttribute("alt",x.imageAlt),Be(Q,"width",x.imageWidth),Be(Q,"height",x.imageHeight),Q.className=ne.image,un(Q,x,"image")})(0,x),((S,x)=>{const Q=En();In(Q,x.title||x.titleText,"block"),x.title&&xn(x.title,Q),x.titleText&&(Q.innerText=x.titleText),un(Q,x,"title")})(0,x),((S,x)=>{const Q=Sn();zt(Q,x.closeButtonHtml),un(Q,x,"closeButton"),In(Q,x.showCloseButton),Q.setAttribute("aria-label",x.closeButtonAriaLabel)})(0,x),Gn(S,x),cr(0,x),((S,x)=>{const Q=On();In(Q,x.footer),x.footer&&xn(x.footer,Q),un(Q,x,"footer")})(0,x),"function"==typeof x.didRender&&x.didRender(ot())},vi=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),xr=()=>{B(document.body.children).forEach(x=>{x.hasAttribute("data-previous-aria-hidden")?(x.setAttribute("aria-hidden",x.getAttribute("data-previous-aria-hidden")),x.removeAttribute("data-previous-aria-hidden")):x.removeAttribute("aria-hidden")})},Ls=["swal-title","swal-html","swal-footer"],Ne=S=>{const x={};return B(S.querySelectorAll("swal-param")).forEach(Q=>{_r(Q,["name","value"]);const ve=Q.getAttribute("name"),Je=Q.getAttribute("value");"boolean"==typeof Mt[ve]&&"false"===Je&&(x[ve]=!1),"object"==typeof Mt[ve]&&(x[ve]=JSON.parse(Je))}),x},De=S=>{const x={};return B(S.querySelectorAll("swal-button")).forEach(Q=>{_r(Q,["type","color","aria-label"]);const ve=Q.getAttribute("type");x["".concat(ve,"ButtonText")]=Q.innerHTML,x["show".concat(_(ve),"Button")]=!0,Q.hasAttribute("color")&&(x["".concat(ve,"ButtonColor")]=Q.getAttribute("color")),Q.hasAttribute("aria-label")&&(x["".concat(ve,"ButtonAriaLabel")]=Q.getAttribute("aria-label"))}),x},Ke=S=>{const x={},Q=S.querySelector("swal-image");return Q&&(_r(Q,["src","width","height","alt"]),Q.hasAttribute("src")&&(x.imageUrl=Q.getAttribute("src")),Q.hasAttribute("width")&&(x.imageWidth=Q.getAttribute("width")),Q.hasAttribute("height")&&(x.imageHeight=Q.getAttribute("height")),Q.hasAttribute("alt")&&(x.imageAlt=Q.getAttribute("alt"))),x},bt=S=>{const x={},Q=S.querySelector("swal-icon");return Q&&(_r(Q,["type","color"]),Q.hasAttribute("type")&&(x.icon=Q.getAttribute("type")),Q.hasAttribute("color")&&(x.iconColor=Q.getAttribute("color")),x.iconHtml=Q.innerHTML),x},_t=S=>{const x={},Q=S.querySelector("swal-input");Q&&(_r(Q,["type","label","placeholder","value"]),x.input=Q.getAttribute("type")||"text",Q.hasAttribute("label")&&(x.inputLabel=Q.getAttribute("label")),Q.hasAttribute("placeholder")&&(x.inputPlaceholder=Q.getAttribute("placeholder")),Q.hasAttribute("value")&&(x.inputValue=Q.getAttribute("value")));const ve=S.querySelectorAll("swal-input-option");return ve.length&&(x.inputOptions={},B(ve).forEach(Je=>{_r(Je,["value"]);const pn=Je.getAttribute("value");x.inputOptions[pn]=Je.innerHTML})),x},Ut=(S,x)=>{const Q={};for(const ve in x){const Je=x[ve],pn=S.querySelector(Je);pn&&(_r(pn,[]),Q[Je.replace(/^swal-/,"")]=pn.innerHTML.trim())}return Q},an=S=>{const x=Ls.concat(["swal-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);B(S.children).forEach(Q=>{const ve=Q.tagName.toLowerCase();-1===x.indexOf(ve)&&oe("Unrecognized element <".concat(ve,">"))})},_r=(S,x)=>{B(S.attributes).forEach(Q=>{-1===x.indexOf(Q.name)&&oe(['Unrecognized attribute "'.concat(Q.name,'" on <').concat(S.tagName.toLowerCase(),">."),"".concat(x.length?"Allowed attributes are: ".concat(x.join(", ")):"To set the value, use HTML within the element.")])})};var wn={email:(S,x)=>/^[a-zA-Z0-9.+_-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]{2,24}$/.test(S)?Promise.resolve():Promise.resolve(x||"Invalid email address"),url:(S,x)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(S)?Promise.resolve():Promise.resolve(x||"Invalid URL")};function $i(S){(function Si(S){S.inputValidator||Object.keys(wn).forEach(x=>{S.input===x&&(S.inputValidator=wn[x])})})(S),S.showLoaderOnConfirm&&!S.preConfirm&&oe("showLoaderOnConfirm is set to true, but preConfirm is not defined.\nshowLoaderOnConfirm should be used together with preConfirm, see usage example:\nhttps://sweetalert2.github.io/#ajax-request"),function ls(S){(!S.target||"string"==typeof S.target&&!document.querySelector(S.target)||"string"!=typeof S.target&&!S.target.appendChild)&&(oe('Target parameter is not valid, defaulting to "body"'),S.target="body")}(S),"string"==typeof S.title&&(S.title=S.title.split("\n").join("<br />")),jt(S)}class Cs{constructor(x,Q){this.callback=x,this.remaining=Q,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=(new Date).getTime()-this.started.getTime()),this.remaining}increase(x){const Q=this.running;return Q&&this.stop(),this.remaining+=x,Q&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const mr=()=>{null===er.previousBodyPadding&&document.body.scrollHeight>window.innerHeight&&(er.previousBodyPadding=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight="".concat(er.previousBodyPadding+(()=>{const S=document.createElement("div");S.className=ne["scrollbar-measure"],document.body.appendChild(S);const x=S.getBoundingClientRect().width-S.clientWidth;return document.body.removeChild(S),x})(),"px"))},Ms=()=>{const S=navigator.userAgent,x=!!S.match(/iPad/i)||!!S.match(/iPhone/i),Q=!!S.match(/WebKit/i);x&&Q&&!S.match(/CriOS/i)&&ot().scrollHeight>window.innerHeight-44&&(W().style.paddingBottom="".concat(44,"px"))},li=()=>{const S=W();let x;S.ontouchstart=Q=>{x=ti(Q)},S.ontouchmove=Q=>{x&&(Q.preventDefault(),Q.stopPropagation())}},ti=S=>{const x=S.target,Q=W();return!(Ps(S)||Qs(S)||x!==Q&&(br(Q)||"INPUT"===x.tagName||"TEXTAREA"===x.tagName||br(dn())&&dn().contains(x)))},Ps=S=>S.touches&&S.touches.length&&"stylus"===S.touches[0].touchType,Qs=S=>S.touches&&S.touches.length>1,ts=S=>{const x=W(),Q=ot();"function"==typeof S.willOpen&&S.willOpen(Q);const Je=window.getComputedStyle(document.body).overflowY;Rs(x,Q,S),setTimeout(()=>{xi(x,Q)},10),fr()&&(Js(x,S.scrollbarPadding,Je),B(document.body.children).forEach(x=>{x===W()||x.contains(W())||(x.hasAttribute("aria-hidden")&&x.setAttribute("data-previous-aria-hidden",x.getAttribute("aria-hidden")),x.setAttribute("aria-hidden","true"))})),!vn()&&!Le.previousActiveElement&&(Le.previousActiveElement=document.activeElement),"function"==typeof S.didOpen&&setTimeout(()=>S.didOpen(Q)),be(x,ne["no-transition"])},qr=S=>{const x=ot();if(S.target!==x)return;const Q=W();x.removeEventListener(Tr,qr),Q.style.overflowY="auto"},xi=(S,x)=>{Tr&&sr(x)?(S.style.overflowY="hidden",x.addEventListener(Tr,qr)):S.style.overflowY="auto"},Js=(S,x,Q)=>{(()=>{if((/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1)&&!bn(document.body,ne.iosfix)){const x=document.body.scrollTop;document.body.style.top="".concat(-1*x,"px"),ge(document.body,ne.iosfix),li(),Ms()}})(),x&&"hidden"!==Q&&mr(),setTimeout(()=>{S.scrollTop=0})},Rs=(S,x,Q)=>{ge(S,Q.showClass.backdrop),x.style.setProperty("opacity","0","important"),gt(x,"grid"),setTimeout(()=>{ge(x,Q.showClass.popup),x.style.removeProperty("opacity")},10),ge([document.documentElement,document.body],ne.shown),Q.heightAuto&&Q.backdrop&&!Q.toast&&ge([document.documentElement,document.body],ne["height-auto"])},Br=S=>{let x=ot();x||new $s,x=ot();const Q=rn();vn()?xt(Qe()):ui(x,S),gt(Q),x.setAttribute("data-loading",!0),x.setAttribute("aria-busy",!0),x.focus()},ui=(S,x)=>{const Q=fn(),ve=rn();!x&&sn(hn())&&(x=hn()),gt(Q),x&&(xt(x),ve.setAttribute("data-button-to-replace",x.className)),ve.parentNode.insertBefore(ve,x),ge([S,Q],ne.loading)},Zi=S=>S.checked?1:0,Gi=S=>S.checked?S.value:null,Bn=S=>S.files.length?null!==S.getAttribute("multiple")?S.files:S.files[0]:null,ci=(S,x)=>{const Q=ot(),ve=Je=>cs[x.input](Q,Yn(Je),x);We(x.inputOptions)||de(x.inputOptions)?(Br(hn()),_e(x.inputOptions).then(Je=>{S.hideLoading(),ve(Je)})):"object"==typeof x.inputOptions?ve(x.inputOptions):Pe("Unexpected type of inputOptions! Expected object, Map or Promise, got ".concat(typeof x.inputOptions))},Os=(S,x)=>{const Q=S.getInput();xt(Q),_e(x.inputValue).then(ve=>{Q.value="number"===x.input?parseFloat(ve)||0:"".concat(ve),gt(Q),Q.focus(),S.hideLoading()}).catch(ve=>{Pe("Error in inputValue promise: ".concat(ve)),Q.value="",gt(Q),Q.focus(),S.hideLoading()})},cs={select:(S,x,Q)=>{const ve=vt(S,ne.select),Je=(pn,Cr,zi)=>{const ri=document.createElement("option");ri.value=zi,zt(ri,Cr),ri.selected=U(zi,Q.inputValue),pn.appendChild(ri)};x.forEach(pn=>{const Cr=pn[0],zi=pn[1];if(Array.isArray(zi)){const ri=document.createElement("optgroup");ri.label=Cr,ri.disabled=!1,ve.appendChild(ri),zi.forEach(yi=>Je(ri,yi[1],yi[0]))}else Je(ve,zi,Cr)}),ve.focus()},radio:(S,x,Q)=>{const ve=vt(S,ne.radio);x.forEach(pn=>{const Cr=pn[0],zi=pn[1],ri=document.createElement("input"),yi=document.createElement("label");ri.type="radio",ri.name=ne.radio,ri.value=Cr,U(Cr,Q.inputValue)&&(ri.checked=!0);const ps=document.createElement("span");zt(ps,zi),ps.className=ne.label,yi.appendChild(ri),yi.appendChild(ps),ve.appendChild(yi)});const Je=ve.querySelectorAll("input");Je.length&&Je[0].focus()}},Yn=S=>{const x=[];return"undefined"!=typeof Map&&S instanceof Map?S.forEach((Q,ve)=>{let Je=Q;"object"==typeof Je&&(Je=Yn(Je)),x.push([ve,Je])}):Object.keys(S).forEach(Q=>{let ve=S[Q];"object"==typeof ve&&(ve=Yn(ve)),x.push([Q,ve])}),x},U=(S,x)=>x&&x.toString()===S.toString();function J(){const S=Zt.innerParams.get(this);if(!S)return;const x=Zt.domCache.get(this);xt(x.loader),vn()?S.icon&&gt(Qe()):V(x),be([x.popup,x.actions],ne.loading),x.popup.removeAttribute("aria-busy"),x.popup.removeAttribute("data-loading"),x.confirmButton.disabled=!1,x.denyButton.disabled=!1,x.cancelButton.disabled=!1}const V=S=>{const x=S.popup.getElementsByClassName(S.loader.getAttribute("data-button-to-replace"));x.length?gt(x[0],"inline-block"):!sn(hn())&&!sn(Wt())&&!sn(Cn())&&xt(S.actions)};var ye={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const It=()=>hn()&&hn().click(),dr=S=>{S.keydownTarget&&S.keydownHandlerAdded&&(S.keydownTarget.removeEventListener("keydown",S.keydownHandler,{capture:S.keydownListenerCapture}),S.keydownHandlerAdded=!1)},zn=(S,x,Q)=>{const ve=ar();if(ve.length)return(x+=Q)===ve.length?x=0:-1===x&&(x=ve.length-1),ve[x].focus();ot().focus()},jr=["ArrowRight","ArrowDown"],Or=["ArrowLeft","ArrowUp"],Vr=(S,x,Q)=>{const ve=Zt.innerParams.get(S);!ve||x.isComposing||229===x.keyCode||(ve.stopKeydownPropagation&&x.stopPropagation(),"Enter"===x.key?ds(S,x,ve):"Tab"===x.key?wi(x,ve):[...jr,...Or].includes(x.key)?$t(x.key):"Escape"===x.key&&eo(x,ve,Q))},ds=(S,x,Q)=>{if(Ue(Q.allowEnterKey)&&x.target&&S.getInput()&&x.target.outerHTML===S.getInput().outerHTML){if(["textarea","file"].includes(Q.input))return;It(),x.preventDefault()}},wi=(S,x)=>{const Q=S.target,ve=ar();let Je=-1;for(let pn=0;pn<ve.length;pn++)if(Q===ve[pn]){Je=pn;break}zn(0,Je,S.shiftKey?-1:1),S.stopPropagation(),S.preventDefault()},$t=S=>{if(![hn(),Wt(),Cn()].includes(document.activeElement))return;const Je=jr.includes(S)?"nextElementSibling":"previousElementSibling";let pn=document.activeElement;for(let Cr=0;Cr<fn().children.length;Cr++){if(pn=pn[Je],!pn)return;if(sn(pn)&&pn instanceof HTMLButtonElement)break}pn instanceof HTMLButtonElement&&pn.focus()},eo=(S,x,Q)=>{Ue(x.allowEscapeKey)&&(S.preventDefault(),Q(vi.esc))};function wo(S,x,Q,ve){vn()?hr(S,ve):(Jt(Q).then(()=>hr(S,ve)),dr(Le)),/^((?!chrome|android).)*safari/i.test(navigator.userAgent)?(x.setAttribute("style","display:none !important"),x.removeAttribute("class"),x.innerHTML=""):x.remove(),fr()&&(null!==er.previousBodyPadding&&(document.body.style.paddingRight="".concat(er.previousBodyPadding,"px"),er.previousBodyPadding=null),(()=>{if(bn(document.body,ne.iosfix)){const S=parseInt(document.body.style.top,10);be(document.body,ne.iosfix),document.body.style.top="",document.body.scrollTop=-1*S}})(),xr()),function Vs(){be([document.documentElement,document.body],[ne.shown,ne["height-auto"],ne["no-backdrop"],ne["toast-shown"]])}()}function Wi(S){S=qe(S);const x=ye.swalPromiseResolve.get(this),Q=L(this);this.isAwaitingPromise()?S.isDismissed||(G(this),x(S)):Q&&x(S)}const L=S=>{const x=ot();if(!x)return!1;const Q=Zt.innerParams.get(S);if(!Q||bn(x,Q.hideClass.popup))return!1;be(x,Q.showClass.popup),ge(x,Q.hideClass.popup);const ve=W();return be(ve,Q.showClass.backdrop),ge(ve,Q.hideClass.backdrop),cn(S,x,Q),!0};const G=S=>{S.isAwaitingPromise()&&(Zt.awaitingPromise.delete(S),Zt.innerParams.get(S)||S._destroy())},qe=S=>void 0===S?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},S),cn=(S,x,Q)=>{const ve=W(),Je=Tr&&sr(x);"function"==typeof Q.willClose&&Q.willClose(x),Je?$n(S,x,ve,Q.returnFocus,Q.didClose):wo(S,ve,Q.returnFocus,Q.didClose)},$n=(S,x,Q,ve,Je)=>{Le.swalCloseEventFinishedCallback=wo.bind(null,S,Q,ve,Je),x.addEventListener(Tr,function(pn){pn.target===x&&(Le.swalCloseEventFinishedCallback(),delete Le.swalCloseEventFinishedCallback)})},hr=(S,x)=>{setTimeout(()=>{"function"==typeof x&&x.bind(S.params)(),S._destroy()})};function Ei(S,x,Q){const ve=Zt.domCache.get(S);x.forEach(Je=>{ve[Je].disabled=Q})}function Mi(S,x){if(!S)return!1;if("radio"===S.type){const ve=S.parentNode.parentNode.querySelectorAll("input");for(let Je=0;Je<ve.length;Je++)ve[Je].disabled=x}else S.disabled=x}const da=S=>{const x={};return Object.keys(S).forEach(Q=>{yt(Q)?x[Q]=S[Q]:oe('Invalid parameter to update: "'.concat(Q,'". Updatable params are listed here: https://github.com/sweetalert2/sweetalert2/blob/master/src/utils/params.js\n\nIf you think this parameter should be updatable, request it here: https://github.com/sweetalert2/sweetalert2/issues/new?template=02_feature_request.md'))}),x};const ji=S=>{So(S),delete S.params,delete Le.keydownHandler,delete Le.keydownTarget,delete Le.currentInstance},So=S=>{S.isAwaitingPromise()?(ni(Zt,S),Zt.awaitingPromise.set(S,!0)):(ni(ye,S),ni(Zt,S))},ni=(S,x)=>{for(const Q in S)S[Q].delete(x)};var Vo=Object.freeze({hideLoading:J,disableLoading:J,getInput:function ie(S){const x=Zt.innerParams.get(S||this),Q=Zt.domCache.get(S||this);return Q?zr(Q.popup,x.input):null},close:Wi,isAwaitingPromise:function $(){return!!Zt.awaitingPromise.get(this)},rejectPromise:function F(S){const x=ye.swalPromiseReject.get(this);G(this),x&&x(S)},handleAwaitingPromise:G,closePopup:Wi,closeModal:Wi,closeToast:Wi,enableButtons:function Us(){Ei(this,["confirmButton","denyButton","cancelButton"],!1)},disableButtons:function ns(){Ei(this,["confirmButton","denyButton","cancelButton"],!0)},enableInput:function ca(){return Mi(this.getInput(),!1)},disableInput:function nl(){return Mi(this.getInput(),!0)},showValidationMessage:function Lo(S){const x=Zt.domCache.get(this),Q=Zt.innerParams.get(this);zt(x.validationMessage,S),x.validationMessage.className=ne["validation-message"],Q.customClass&&Q.customClass.validationMessage&&ge(x.validationMessage,Q.customClass.validationMessage),gt(x.validationMessage);const ve=this.getInput();ve&&(ve.setAttribute("aria-invalid",!0),ve.setAttribute("aria-describedby",ne["validation-message"]),_i(ve),ge(ve,ne.inputerror))},resetValidationMessage:function Bs(){const S=Zt.domCache.get(this);S.validationMessage&&xt(S.validationMessage);const x=this.getInput();x&&(x.removeAttribute("aria-invalid"),x.removeAttribute("aria-describedby"),be(x,ne.inputerror))},getProgressSteps:function Bi(){return Zt.domCache.get(this).progressSteps},update:function hs(S){const x=ot(),Q=Zt.innerParams.get(this);if(!x||bn(x,Q.hideClass.popup))return oe("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");const ve=da(S),Je=Object.assign({},Q,ve);Fs(this,Je),Zt.innerParams.set(this,Je),Object.defineProperties(this,{params:{value:Object.assign({},this.params,S),writable:!1,enumerable:!0}})},_destroy:function Yi(){const S=Zt.domCache.get(this),x=Zt.innerParams.get(this);x?(S.popup&&Le.swalCloseEventFinishedCallback&&(Le.swalCloseEventFinishedCallback(),delete Le.swalCloseEventFinishedCallback),Le.deferDisposalTimer&&(clearTimeout(Le.deferDisposalTimer),delete Le.deferDisposalTimer),"function"==typeof x.didDestroy&&x.didDestroy(),ji(this)):So(this)}});const ha=(S,x)=>{const Q=Zt.innerParams.get(S);if(!Q.input)return Pe('The "input" parameter is needed to be set when using returnInputValueOn'.concat(_(x)));const ve=((S,x)=>{const Q=S.getInput();if(!Q)return null;switch(x.input){case"checkbox":return Zi(Q);case"radio":return Gi(Q);case"file":return Bn(Q);default:return x.inputAutoTrim?Q.value.trim():Q.value}})(S,Q);Q.inputValidator?rl(S,ve,x):S.getInput().checkValidity()?"deny"===x?Zo(S,ve):Bo(S,ve):(S.enableButtons(),S.showValidationMessage(Q.validationMessage))},rl=(S,x,Q)=>{const ve=Zt.innerParams.get(S);S.disableInput(),Promise.resolve().then(()=>_e(ve.inputValidator(x,ve.validationMessage))).then(pn=>{S.enableButtons(),S.enableInput(),pn?S.showValidationMessage(pn):"deny"===Q?Zo(S,x):Bo(S,x)})},Zo=(S,x)=>{const Q=Zt.innerParams.get(S||void 0);Q.showLoaderOnDeny&&Br(Wt()),Q.preDeny?(Zt.awaitingPromise.set(S||void 0,!0),Promise.resolve().then(()=>_e(Q.preDeny(x,Q.validationMessage))).then(Je=>{!1===Je?(S.hideLoading(),G(S)):S.closePopup({isDenied:!0,value:void 0===Je?x:Je})}).catch(Je=>js(S||void 0,Je))):S.closePopup({isDenied:!0,value:x})},xo=(S,x)=>{S.closePopup({isConfirmed:!0,value:x})},js=(S,x)=>{S.rejectPromise(x)},Bo=(S,x)=>{const Q=Zt.innerParams.get(S||void 0);Q.showLoaderOnConfirm&&Br(),Q.preConfirm?(S.resetValidationMessage(),Zt.awaitingPromise.set(S||void 0,!0),Promise.resolve().then(()=>_e(Q.preConfirm(x,Q.validationMessage))).then(Je=>{sn(St())||!1===Je?(S.hideLoading(),G(S)):xo(S,void 0===Je?x:Je)}).catch(Je=>js(S||void 0,Je))):xo(S,x)},Yo=(S,x,Q)=>{x.popup.onclick=()=>{const ve=Zt.innerParams.get(S);ve&&($a(ve)||ve.timer||ve.input)||Q(vi.close)}},$a=S=>S.showConfirmButton||S.showDenyButton||S.showCancelButton||S.showCloseButton;let Hs=!1;const Mo=S=>{S.popup.onmousedown=()=>{S.container.onmouseup=function(x){S.container.onmouseup=void 0,x.target===S.container&&(Hs=!0)}}},Ga=S=>{S.container.onmousedown=()=>{S.popup.onmouseup=function(x){S.popup.onmouseup=void 0,(x.target===S.popup||S.popup.contains(x.target))&&(Hs=!0)}}},bi=(S,x,Q)=>{x.container.onclick=ve=>{const Je=Zt.innerParams.get(S);Hs?Hs=!1:ve.target===x.container&&Ue(Je.allowOutsideClick)&&Q(vi.backdrop)}},di=S=>S instanceof Element||(S=>"object"==typeof S&&S.jquery)(S);const Da=()=>{if(Le.timeout)return(()=>{const S=ir(),x=parseInt(window.getComputedStyle(S).width);S.style.removeProperty("transition"),S.style.width="100%";const ve=x/parseInt(window.getComputedStyle(S).width)*100;S.style.removeProperty("transition"),S.style.width="".concat(ve,"%")})(),Le.timeout.stop()},Ta=()=>{if(Le.timeout){const S=Le.timeout.start();return Lt(S),S}};let gi=!1;const mi={};const rs=S=>{for(let x=S.target;x&&x!==document;x=x.parentNode)for(const Q in mi){const ve=x.getAttribute(Q);if(ve)return void mi[Q].fire({template:ve})}};var Ci=Object.freeze({isValidParameter:tt,isUpdatableParameter:yt,isDeprecatedParameter:ke,argsToParams:S=>{const x={};return"object"!=typeof S[0]||di(S[0])?["title","html","icon"].forEach((Q,ve)=>{const Je=S[ve];"string"==typeof Je||di(Je)?x[Q]=Je:void 0!==Je&&Pe("Unexpected type of ".concat(Q,'! Expected "string" or "Element", got ').concat(typeof Je))}):Object.assign(x,S[0]),x},isVisible:()=>sn(ot()),clickConfirm:It,clickDeny:()=>Wt()&&Wt().click(),clickCancel:()=>Cn()&&Cn().click(),getContainer:W,getPopup:ot,getTitle:En,getHtmlContainer:dn,getImage:Qt,getIcon:Qe,getInputLabel:()=>He(ne["input-label"]),getCloseButton:Sn,getActions:fn,getConfirmButton:hn,getDenyButton:Wt,getCancelButton:Cn,getLoader:rn,getFooter:On,getTimerProgressBar:ir,getFocusableElements:ar,getValidationMessage:St,isLoading:()=>ot().hasAttribute("data-loading"),fire:function Wa(){const S=this;for(var x=arguments.length,Q=new Array(x),ve=0;ve<x;ve++)Q[ve]=arguments[ve];return new S(...Q)},mixin:function Hl(S){return class x extends(this){_main(ve,Je){return super._main(ve,Object.assign({},S,Je))}}},showLoading:Br,enableLoading:Br,getTimerLeft:()=>Le.timeout&&Le.timeout.getTimerLeft(),stopTimer:Da,resumeTimer:Ta,toggleTimer:()=>{const S=Le.timeout;return S&&(S.running?Da():Ta())},increaseTimer:S=>{if(Le.timeout){const x=Le.timeout.increase(S);return Lt(x,!0),x}},isTimerRunning:()=>Le.timeout&&Le.timeout.isRunning(),bindClickHandler:function Aa(){mi[arguments.length>0&&void 0!==arguments[0]?arguments[0]:"data-swal-template"]=this,gi||(document.body.addEventListener("click",rs),gi=!0)}});let Ds;class Ii{constructor(){if("undefined"==typeof window)return;Ds=this;for(var x=arguments.length,Q=new Array(x),ve=0;ve<x;ve++)Q[ve]=arguments[ve];const Je=Object.freeze(this.constructor.argsToParams(Q));Object.defineProperties(this,{params:{value:Je,writable:!1,enumerable:!0,configurable:!0}});const pn=this._main(this.params);Zt.promise.set(this,pn)}_main(x){let Q=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(S=>{!S.backdrop&&S.allowOutsideClick&&oe('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');for(const x in S)Ht(x),S.toast&&dt(x),nt(x)})(Object.assign({},Q,x)),Le.currentInstance&&(Le.currentInstance._destroy(),fr()&&xr()),Le.currentInstance=this;const ve=za(x,Q);$i(ve),Object.freeze(ve),Le.timeout&&(Le.timeout.stop(),delete Le.timeout),clearTimeout(Le.restoreFocusTimeout);const Je=Oo(this);return Fs(this,ve),Zt.innerParams.set(this,ve),Ro(this,Je,ve)}then(x){return Zt.promise.get(this).then(x)}finally(x){return Zt.promise.get(this).finally(x)}}const Ro=(S,x,Q)=>new Promise((ve,Je)=>{const pn=Cr=>{S.closePopup({isDismissed:!0,dismiss:Cr})};ye.swalPromiseResolve.set(S,ve),ye.swalPromiseReject.set(S,Je),x.confirmButton.onclick=()=>(S=>{const x=Zt.innerParams.get(S);S.disableButtons(),x.input?ha(S,"confirm"):Bo(S,!0)})(S),x.denyButton.onclick=()=>(S=>{const x=Zt.innerParams.get(S);S.disableButtons(),x.returnInputValueOnDeny?ha(S,"deny"):Zo(S,!1)})(S),x.cancelButton.onclick=()=>((S,x)=>{S.disableButtons(),x(vi.cancel)})(S,pn),x.closeButton.onclick=()=>pn(vi.close),((S,x,Q)=>{Zt.innerParams.get(S).toast?Yo(S,x,Q):(Mo(x),Ga(x),bi(S,x,Q))})(S,x,pn),((S,x,Q,ve)=>{dr(x),Q.toast||(x.keydownHandler=Je=>Vr(S,Je,ve),x.keydownTarget=Q.keydownListenerCapture?window:ot(),x.keydownListenerCapture=Q.keydownListenerCapture,x.keydownTarget.addEventListener("keydown",x.keydownHandler,{capture:x.keydownListenerCapture}),x.keydownHandlerAdded=!0)})(S,Le,Q,pn),((S,x)=>{"select"===x.input||"radio"===x.input?ci(S,x):["text","email","number","tel","textarea"].includes(x.input)&&(We(x.inputValue)||de(x.inputValue))&&(Br(hn()),Os(S,x))})(S,Q),ts(Q),Ns(Le,Q,pn),$l(x,Q),setTimeout(()=>{x.container.scrollTop=0})}),za=(S,x)=>{const Q=(S=>{const x="string"==typeof S.template?document.querySelector(S.template):S.template;if(!x)return{};const Q=x.content;return an(Q),Object.assign(Ne(Q),De(Q),Ke(Q),bt(Q),_t(Q),Ut(Q,Ls))})(S),ve=Object.assign({},Mt,x,Q,S);return ve.showClass=Object.assign({},Mt.showClass,ve.showClass),ve.hideClass=Object.assign({},Mt.hideClass,ve.hideClass),ve},Oo=S=>{const x={popup:ot(),container:W(),actions:fn(),confirmButton:hn(),denyButton:Wt(),cancelButton:Cn(),loader:rn(),closeButton:Sn(),validationMessage:St(),progressSteps:Ft()};return Zt.domCache.set(S,x),x},Ns=(S,x,Q)=>{const ve=ir();xt(ve),x.timer&&(S.timeout=new Cs(()=>{Q("timer"),delete S.timeout},x.timer),x.timerProgressBar&&(gt(ve),un(ve,x,"timerProgressBar"),setTimeout(()=>{S.timeout&&S.timeout.running&&Lt(x.timer)})))},$l=(S,x)=>{if(!x.toast){if(!Ue(x.allowEnterKey))return Ts();Fi(S,x)||zn(0,-1,1)}},Fi=(S,x)=>x.focusDeny&&sn(S.denyButton)?(S.denyButton.focus(),!0):x.focusCancel&&sn(S.cancelButton)?(S.cancelButton.focus(),!0):!(!x.focusConfirm||!sn(S.confirmButton)||(S.confirmButton.focus(),0)),Ts=()=>{document.activeElement instanceof HTMLElement&&"function"==typeof document.activeElement.blur&&document.activeElement.blur()};Object.assign(Ii.prototype,Vo),Object.assign(Ii,Ci),Object.keys(Vo).forEach(S=>{Ii[S]=function(){if(Ds)return Ds[S](...arguments)}}),Ii.DismissReason=vi,Ii.version="11.4.9";const $s=Ii;return $s.default=$s,$s}(),void 0!==this&&this.Sweetalert2&&(this.swal=this.sweetAlert=this.Swal=this.SweetAlert=this.Sweetalert2),"undefined"!=typeof document&&function(Xe,z){var _=Xe.createElement("style");if(Xe.getElementsByTagName("head")[0].appendChild(_),_.styleSheet)_.styleSheet.disabled||(_.styleSheet.cssText=z);else try{_.innerHTML=z}catch(B){_.innerText=z}}(document,'.swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4!important;grid-row:1/4!important;grid-template-columns:1fr 99fr 1fr;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px hsla(0deg,0%,0%,.075),0 1px 2px hsla(0deg,0%,0%,.075),1px 2px 4px hsla(0deg,0%,0%,.075),1px 3px 8px hsla(0deg,0%,0%,.075),2px 4px 16px hsla(0deg,0%,0%,.075);pointer-events:all}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:700}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;transform:rotate(45deg);border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-.8em;left:-.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{-webkit-animation:swal2-toast-animate-success-line-tip .75s;animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{-webkit-animation:swal2-toast-animate-success-line-long .75s;animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{-webkit-animation:swal2-toast-show .5s;animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{-webkit-animation:swal2-toast-hide .1s forwards;animation:swal2-toast-hide .1s forwards}.swal2-container{display:grid;position:fixed;z-index:1060;top:0;right:0;bottom:0;left:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(-webkit-min-content,auto) minmax(-webkit-min-content,auto) minmax(-webkit-min-content,auto);grid-template-rows:minmax(min-content,auto) minmax(min-content,auto) minmax(min-content,auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}.swal2-container.swal2-backdrop-show,.swal2-container.swal2-noanimation{background:rgba(0,0,0,.4)}.swal2-container.swal2-backdrop-hide{background:0 0!important}.swal2-container.swal2-bottom-start,.swal2-container.swal2-center-start,.swal2-container.swal2-top-start{grid-template-columns:minmax(0,1fr) auto auto}.swal2-container.swal2-bottom,.swal2-container.swal2-center,.swal2-container.swal2-top{grid-template-columns:auto minmax(0,1fr) auto}.swal2-container.swal2-bottom-end,.swal2-container.swal2-center-end,.swal2-container.swal2-top-end{grid-template-columns:auto auto minmax(0,1fr)}.swal2-container.swal2-top-start>.swal2-popup{align-self:start}.swal2-container.swal2-top>.swal2-popup{grid-column:2;align-self:start;justify-self:center}.swal2-container.swal2-top-end>.swal2-popup,.swal2-container.swal2-top-right>.swal2-popup{grid-column:3;align-self:start;justify-self:end}.swal2-container.swal2-center-left>.swal2-popup,.swal2-container.swal2-center-start>.swal2-popup{grid-row:2;align-self:center}.swal2-container.swal2-center>.swal2-popup{grid-column:2;grid-row:2;align-self:center;justify-self:center}.swal2-container.swal2-center-end>.swal2-popup,.swal2-container.swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;align-self:center;justify-self:end}.swal2-container.swal2-bottom-left>.swal2-popup,.swal2-container.swal2-bottom-start>.swal2-popup{grid-column:1;grid-row:3;align-self:end}.swal2-container.swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;justify-self:center;align-self:end}.swal2-container.swal2-bottom-end>.swal2-popup,.swal2-container.swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;align-self:end;justify-self:end}.swal2-container.swal2-grow-fullscreen>.swal2-popup,.swal2-container.swal2-grow-row>.swal2-popup{grid-column:1/4;width:100%}.swal2-container.swal2-grow-column>.swal2-popup,.swal2-container.swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}.swal2-container.swal2-no-transition{transition:none!important}.swal2-popup{display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0,100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:#545454;font-family:inherit;font-size:1rem}.swal2-popup:focus{outline:0}.swal2-popup.swal2-loading{overflow-y:hidden}.swal2-title{position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}.swal2-actions{display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}.swal2-actions:not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}.swal2-actions:not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0,0,0,.1),rgba(0,0,0,.1))}.swal2-actions:not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0,0,0,.2),rgba(0,0,0,.2))}.swal2-loader{display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;-webkit-animation:swal2-rotate-loading 1.5s linear 0s infinite normal;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 transparent #2778c4 transparent}.swal2-styled{margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px transparent;font-weight:500}.swal2-styled:not([disabled]){cursor:pointer}.swal2-styled.swal2-confirm{border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}.swal2-styled.swal2-confirm:focus{box-shadow:0 0 0 3px rgba(112,102,224,.5)}.swal2-styled.swal2-deny{border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}.swal2-styled.swal2-deny:focus{box-shadow:0 0 0 3px rgba(220,55,65,.5)}.swal2-styled.swal2-cancel{border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}.swal2-styled.swal2-cancel:focus{box-shadow:0 0 0 3px rgba(110,120,129,.5)}.swal2-styled.swal2-default-outline:focus{box-shadow:0 0 0 3px rgba(100,150,200,.5)}.swal2-styled:focus{outline:0}.swal2-styled::-moz-focus-inner{border:0}.swal2-footer{justify-content:center;margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:inherit;font-size:1em}.swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto!important;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}.swal2-timer-progress-bar{width:100%;height:.25em;background:rgba(0,0,0,.2)}.swal2-image{max-width:100%;margin:2em auto 1em}.swal2-close{z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:0 0;color:#ccc;font-family:serif;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}.swal2-close:hover{transform:none;background:0 0;color:#f27474}.swal2-close:focus{outline:0;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}.swal2-close::-moz-focus-inner{border:0}.swal2-html-container{z-index:1;justify-content:center;margin:1em 1.6em .3em;padding:0;overflow:auto;color:inherit;font-size:1.125em;font-weight:400;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word}.swal2-checkbox,.swal2-file,.swal2-input,.swal2-radio,.swal2-select,.swal2-textarea{margin:1em 2em 3px}.swal2-file,.swal2-input,.swal2-textarea{box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid #d9d9d9;border-radius:.1875em;background:inherit;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px transparent;color:inherit;font-size:1.125em}.swal2-file.swal2-inputerror,.swal2-input.swal2-inputerror,.swal2-textarea.swal2-inputerror{border-color:#f27474!important;box-shadow:0 0 2px #f27474!important}.swal2-file:focus,.swal2-input:focus,.swal2-textarea:focus{border:1px solid #b4dbed;outline:0;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}.swal2-file::-moz-placeholder,.swal2-input::-moz-placeholder,.swal2-textarea::-moz-placeholder{color:#ccc}.swal2-file:-ms-input-placeholder,.swal2-input:-ms-input-placeholder,.swal2-textarea:-ms-input-placeholder{color:#ccc}.swal2-file::placeholder,.swal2-input::placeholder,.swal2-textarea::placeholder{color:#ccc}.swal2-range{margin:1em 2em 3px;background:#fff}.swal2-range input{width:80%}.swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}.swal2-range input,.swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}.swal2-input{height:2.625em;padding:0 .75em}.swal2-file{width:75%;margin-right:auto;margin-left:auto;background:inherit;font-size:1.125em}.swal2-textarea{height:6.75em;padding:.75em}.swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:inherit;color:inherit;font-size:1.125em}.swal2-checkbox,.swal2-radio{align-items:center;justify-content:center;background:#fff;color:inherit}.swal2-checkbox label,.swal2-radio label{margin:0 .6em;font-size:1.125em}.swal2-checkbox input,.swal2-radio input{flex-shrink:0;margin:0 .4em}.swal2-input-label{display:flex;justify-content:center;margin:1em auto 0}.swal2-validation-message{align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:#f0f0f0;color:#666;font-size:1em;font-weight:300}.swal2-validation-message::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}.swal2-icon{position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:.25em solid transparent;border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}.swal2-icon.swal2-error{border-color:#f27474;color:#f27474}.swal2-icon.swal2-error .swal2-x-mark{position:relative;flex-grow:1}.swal2-icon.swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}.swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}.swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}.swal2-icon.swal2-error.swal2-icon-show{-webkit-animation:swal2-animate-error-icon .5s;animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-error.swal2-icon-show .swal2-x-mark{-webkit-animation:swal2-animate-error-x-mark .5s;animation:swal2-animate-error-x-mark .5s}.swal2-icon.swal2-warning{border-color:#facea8;color:#f8bb86}.swal2-icon.swal2-warning.swal2-icon-show{-webkit-animation:swal2-animate-error-icon .5s;animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-warning.swal2-icon-show .swal2-icon-content{-webkit-animation:swal2-animate-i-mark .5s;animation:swal2-animate-i-mark .5s}.swal2-icon.swal2-info{border-color:#9de0f6;color:#3fc3ee}.swal2-icon.swal2-info.swal2-icon-show{-webkit-animation:swal2-animate-error-icon .5s;animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-info.swal2-icon-show .swal2-icon-content{-webkit-animation:swal2-animate-i-mark .8s;animation:swal2-animate-i-mark .8s}.swal2-icon.swal2-question{border-color:#c9dae1;color:#87adbd}.swal2-icon.swal2-question.swal2-icon-show{-webkit-animation:swal2-animate-error-icon .5s;animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-question.swal2-icon-show .swal2-icon-content{-webkit-animation:swal2-animate-question-mark .8s;animation:swal2-animate-question-mark .8s}.swal2-icon.swal2-success{border-color:#a5dc86;color:#a5dc86}.swal2-icon.swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;transform:rotate(45deg);border-radius:50%}.swal2-icon.swal2-success [class^=swal2-success-circular-line][class$=left]{top:-.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}.swal2-icon.swal2-success [class^=swal2-success-circular-line][class$=right]{top:-.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}.swal2-icon.swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-.25em;left:-.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}.swal2-icon.swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}.swal2-icon.swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}.swal2-icon.swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}.swal2-icon.swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-line-tip{-webkit-animation:swal2-animate-success-line-tip .75s;animation:swal2-animate-success-line-tip .75s}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-line-long{-webkit-animation:swal2-animate-success-line-long .75s;animation:swal2-animate-success-line-long .75s}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-circular-line-right{-webkit-animation:swal2-rotate-success-circular-line 4.25s ease-in;animation:swal2-rotate-success-circular-line 4.25s ease-in}.swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:inherit;font-weight:600}.swal2-progress-steps li{display:inline-block;position:relative}.swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}.swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}[class^=swal2]{-webkit-tap-highlight-color:transparent}.swal2-show{-webkit-animation:swal2-show .3s;animation:swal2-show .3s}.swal2-hide{-webkit-animation:swal2-hide .15s forwards;animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}.swal2-no-war{display:flex;position:fixed;z-index:1061;top:0;left:0;align-items:center;justify-content:center;width:100%;height:3.375em;background:#20232a;color:#fff;text-align:center}.swal2-no-war a{color:#61dafb;text-decoration:none}.swal2-no-war a:hover{text-decoration:underline}@-webkit-keyframes swal2-toast-show{0%{transform:translateY(-.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0)}}@keyframes swal2-toast-show{0%{transform:translateY(-.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0)}}@-webkit-keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@-webkit-keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@-webkit-keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@-webkit-keyframes swal2-show{0%{transform:scale(.7)}45%{transform:scale(1.05)}80%{transform:scale(.95)}100%{transform:scale(1)}}@keyframes swal2-show{0%{transform:scale(.7)}45%{transform:scale(1.05)}80%{transform:scale(.95)}100%{transform:scale(1)}}@-webkit-keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(.5);opacity:0}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(.5);opacity:0}}@-webkit-keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@-webkit-keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@-webkit-keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@-webkit-keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(.4);opacity:0}50%{margin-top:1.625em;transform:scale(.4);opacity:0}80%{margin-top:-.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(.4);opacity:0}50%{margin-top:1.625em;transform:scale(.4);opacity:0}80%{margin-top:-.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@-webkit-keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0);opacity:1}}@-webkit-keyframes swal2-rotate-loading{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}@keyframes swal2-rotate-loading{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}@-webkit-keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@-webkit-keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto!important}body.swal2-no-backdrop .swal2-container{background-color:transparent!important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}@media print{body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow-y:scroll!important}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown) .swal2-container{position:static!important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:transparent;pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{top:0;right:auto;bottom:auto;left:50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{top:0;right:0;bottom:auto;left:auto}body.swal2-toast-shown .swal2-container.swal2-top-left,body.swal2-toast-shown .swal2-container.swal2-top-start{top:0;right:auto;bottom:auto;left:0}body.swal2-toast-shown .swal2-container.swal2-center-left,body.swal2-toast-shown .swal2-container.swal2-center-start{top:50%;right:auto;bottom:auto;left:0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{top:50%;right:auto;bottom:auto;left:50%;transform:translate(-50%,-50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{top:50%;right:0;bottom:auto;left:auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-left,body.swal2-toast-shown .swal2-container.swal2-bottom-start{top:auto;right:auto;bottom:0;left:0}body.swal2-toast-shown .swal2-container.swal2-bottom{top:auto;right:auto;bottom:0;left:50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{top:auto;right:0;bottom:0;left:auto}')},655:(en,Xe,z)=>{"use strict";function Pe(Oe,W){var ze={};for(var He in Oe)Object.prototype.hasOwnProperty.call(Oe,He)&&W.indexOf(He)<0&&(ze[He]=Oe[He]);if(null!=Oe&&"function"==typeof Object.getOwnPropertySymbols){var ot=0;for(He=Object.getOwnPropertySymbols(Oe);ot<He.length;ot++)W.indexOf(He[ot])<0&&Object.prototype.propertyIsEnumerable.call(Oe,He[ot])&&(ze[He[ot]]=Oe[He[ot]])}return ze}function Ue(Oe,W,ze,He){return new(ze||(ze=Promise))(function(Qe,En){function dn(St){try{Ft(He.next(St))}catch(hn){En(hn)}}function Qt(St){try{Ft(He.throw(St))}catch(hn){En(hn)}}function Ft(St){St.done?Qe(St.value):function ot(Qe){return Qe instanceof ze?Qe:new ze(function(En){En(Qe)})}(St.value).then(dn,Qt)}Ft((He=He.apply(Oe,W||[])).next())})}function tt(Oe){return this instanceof tt?(this.v=Oe,this):new tt(Oe)}function yt(Oe,W,ze){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ot,He=ze.apply(Oe,W||[]),Qe=[];return ot={},En("next"),En("throw"),En("return"),ot[Symbol.asyncIterator]=function(){return this},ot;function En(Wt){He[Wt]&&(ot[Wt]=function(Vn){return new Promise(function(rn,Cn){Qe.push([Wt,Vn,rn,Cn])>1||dn(Wt,Vn)})})}function dn(Wt,Vn){try{!function Qt(Wt){Wt.value instanceof tt?Promise.resolve(Wt.value.v).then(Ft,St):hn(Qe[0][2],Wt)}(He[Wt](Vn))}catch(rn){hn(Qe[0][3],rn)}}function Ft(Wt){dn("next",Wt)}function St(Wt){dn("throw",Wt)}function hn(Wt,Vn){Wt(Vn),Qe.shift(),Qe.length&&dn(Qe[0][0],Qe[0][1])}}function Ht(Oe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ze,W=Oe[Symbol.asyncIterator];return W?W.call(Oe):(Oe=function Fe(Oe){var W="function"==typeof Symbol&&Symbol.iterator,ze=W&&Oe[W],He=0;if(ze)return ze.call(Oe);if(Oe&&"number"==typeof Oe.length)return{next:function(){return Oe&&He>=Oe.length&&(Oe=void 0),{value:Oe&&Oe[He++],done:!Oe}}};throw new TypeError(W?"Object is not iterable.":"Symbol.iterator is not defined.")}(Oe),ze={},He("next"),He("throw"),He("return"),ze[Symbol.asyncIterator]=function(){return this},ze);function He(Qe){ze[Qe]=Oe[Qe]&&function(En){return new Promise(function(dn,Qt){!function ot(Qe,En,dn,Qt){Promise.resolve(Qt).then(function(Ft){Qe({value:Ft,done:dn})},En)}(dn,Qt,(En=Oe[Qe](En)).done,En.value)})}}}z.d(Xe,{FC:()=>yt,KL:()=>Ht,_T:()=>Pe,mG:()=>Ue,qq:()=>tt})},9808:(en,Xe,z)=>{"use strict";z.d(Xe,{Do:()=>dt,EM:()=>Gi,HT:()=>Ae,JF:()=>Yn,K0:()=>je,Mx:()=>Xr,O5:()=>it,PC:()=>Fs,PM:()=>ui,S$:()=>tt,V_:()=>_e,Ye:()=>nt,b0:()=>Ht,bD:()=>qr,ez:()=>ts,lw:()=>Ue,mr:()=>ke,q:()=>oe,sg:()=>fe,w_:()=>xe});var _=z(5e3);let B=null;function oe(){return B}function Ae(U){B||(B=U)}class xe{}const je=new _.OlP("DocumentToken");let Ue=(()=>{class U{historyGo(V){throw new Error("Not implemented")}}return U.\u0275fac=function(V){return new(V||U)},U.\u0275prov=_.Yz7({token:U,factory:function(){return function We(){return(0,_.LFG)(de)}()},providedIn:"platform"}),U})();const _e=new _.OlP("Location Initialized");let de=(()=>{class U extends Ue{constructor(V){super(),this._doc=V,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return oe().getBaseHref(this._doc)}onPopState(V){const ie=oe().getGlobalEventTarget(this._doc,"window");return ie.addEventListener("popstate",V,!1),()=>ie.removeEventListener("popstate",V)}onHashChange(V){const ie=oe().getGlobalEventTarget(this._doc,"window");return ie.addEventListener("hashchange",V,!1),()=>ie.removeEventListener("hashchange",V)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(V){this.location.pathname=V}pushState(V,ie,ye){Fe()?this._history.pushState(V,ie,ye):this.location.hash=ye}replaceState(V,ie,ye){Fe()?this._history.replaceState(V,ie,ye):this.location.hash=ye}forward(){this._history.forward()}back(){this._history.back()}historyGo(V=0){this._history.go(V)}getState(){return this._history.state}}return U.\u0275fac=function(V){return new(V||U)(_.LFG(je))},U.\u0275prov=_.Yz7({token:U,factory:function(){return function Mt(){return new de((0,_.LFG)(je))}()},providedIn:"platform"}),U})();function Fe(){return!!window.history.pushState}function pt(U,J){if(0==U.length)return J;if(0==J.length)return U;let V=0;return U.endsWith("/")&&V++,J.startsWith("/")&&V++,2==V?U+J.substring(1):1==V?U+J:U+"/"+J}function Et(U){const J=U.match(/#|\?|$/),V=J&&J.index||U.length;return U.slice(0,V-("/"===U[V-1]?1:0))+U.slice(V)}function Rt(U){return U&&"?"!==U[0]?"?"+U:U}let tt=(()=>{class U{historyGo(V){throw new Error("Not implemented")}}return U.\u0275fac=function(V){return new(V||U)},U.\u0275prov=_.Yz7({token:U,factory:function(){return function yt(U){const J=(0,_.LFG)(je).location;return new Ht((0,_.LFG)(Ue),J&&J.origin||"")}()},providedIn:"root"}),U})();const ke=new _.OlP("appBaseHref");let Ht=(()=>{class U extends tt{constructor(V,ie){if(super(),this._platformLocation=V,this._removeListenerFns=[],null==ie&&(ie=this._platformLocation.getBaseHrefFromDOM()),null==ie)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=ie}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(V){this._removeListenerFns.push(this._platformLocation.onPopState(V),this._platformLocation.onHashChange(V))}getBaseHref(){return this._baseHref}prepareExternalUrl(V){return pt(this._baseHref,V)}path(V=!1){const ie=this._platformLocation.pathname+Rt(this._platformLocation.search),ye=this._platformLocation.hash;return ye&&V?`${ie}${ye}`:ie}pushState(V,ie,ye,lt){const It=this.prepareExternalUrl(ye+Rt(lt));this._platformLocation.pushState(V,ie,It)}replaceState(V,ie,ye,lt){const It=this.prepareExternalUrl(ye+Rt(lt));this._platformLocation.replaceState(V,ie,It)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(V=0){var ie,ye;null===(ye=(ie=this._platformLocation).historyGo)||void 0===ye||ye.call(ie,V)}}return U.\u0275fac=function(V){return new(V||U)(_.LFG(Ue),_.LFG(ke,8))},U.\u0275prov=_.Yz7({token:U,factory:U.\u0275fac}),U})(),dt=(()=>{class U extends tt{constructor(V,ie){super(),this._platformLocation=V,this._baseHref="",this._removeListenerFns=[],null!=ie&&(this._baseHref=ie)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(V){this._removeListenerFns.push(this._platformLocation.onPopState(V),this._platformLocation.onHashChange(V))}getBaseHref(){return this._baseHref}path(V=!1){let ie=this._platformLocation.hash;return null==ie&&(ie="#"),ie.length>0?ie.substring(1):ie}prepareExternalUrl(V){const ie=pt(this._baseHref,V);return ie.length>0?"#"+ie:ie}pushState(V,ie,ye,lt){let It=this.prepareExternalUrl(ye+Rt(lt));0==It.length&&(It=this._platformLocation.pathname),this._platformLocation.pushState(V,ie,It)}replaceState(V,ie,ye,lt){let It=this.prepareExternalUrl(ye+Rt(lt));0==It.length&&(It=this._platformLocation.pathname),this._platformLocation.replaceState(V,ie,It)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(V=0){var ie,ye;null===(ye=(ie=this._platformLocation).historyGo)||void 0===ye||ye.call(ie,V)}}return U.\u0275fac=function(V){return new(V||U)(_.LFG(Ue),_.LFG(ke,8))},U.\u0275prov=_.Yz7({token:U,factory:U.\u0275fac}),U})(),nt=(()=>{class U{constructor(V,ie){this._subject=new _.vpe,this._urlChangeListeners=[],this._platformStrategy=V;const ye=this._platformStrategy.getBaseHref();this._platformLocation=ie,this._baseHref=Et(Dt(ye)),this._platformStrategy.onPopState(lt=>{this._subject.emit({url:this.path(!0),pop:!0,state:lt.state,type:lt.type})})}path(V=!1){return this.normalize(this._platformStrategy.path(V))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(V,ie=""){return this.path()==this.normalize(V+Rt(ie))}normalize(V){return U.stripTrailingSlash(function at(U,J){return U&&J.startsWith(U)?J.substring(U.length):J}(this._baseHref,Dt(V)))}prepareExternalUrl(V){return V&&"/"!==V[0]&&(V="/"+V),this._platformStrategy.prepareExternalUrl(V)}go(V,ie="",ye=null){this._platformStrategy.pushState(ye,"",V,ie),this._notifyUrlChangeListeners(this.prepareExternalUrl(V+Rt(ie)),ye)}replaceState(V,ie="",ye=null){this._platformStrategy.replaceState(ye,"",V,ie),this._notifyUrlChangeListeners(this.prepareExternalUrl(V+Rt(ie)),ye)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(V=0){var ie,ye;null===(ye=(ie=this._platformStrategy).historyGo)||void 0===ye||ye.call(ie,V)}onUrlChange(V){this._urlChangeListeners.push(V),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(ie=>{this._notifyUrlChangeListeners(ie.url,ie.state)}))}_notifyUrlChangeListeners(V="",ie){this._urlChangeListeners.forEach(ye=>ye(V,ie))}subscribe(V,ie,ye){return this._subject.subscribe({next:V,error:ie,complete:ye})}}return U.normalizeQueryParams=Rt,U.joinWithSlash=pt,U.stripTrailingSlash=Et,U.\u0275fac=function(V){return new(V||U)(_.LFG(tt),_.LFG(Ue))},U.\u0275prov=_.Yz7({token:U,factory:function(){return function Ye(){return new nt((0,_.LFG)(tt),(0,_.LFG)(Ue))}()},providedIn:"root"}),U})();function Dt(U){return U.replace(/\/index.html$/,"")}function Xr(U,J){J=encodeURIComponent(J);for(const V of U.split(";")){const ie=V.indexOf("="),[ye,lt]=-1==ie?[V,""]:[V.slice(0,ie),V.slice(ie+1)];if(ye.trim()===J)return decodeURIComponent(lt)}return null}class we{constructor(J,V,ie,ye){this.$implicit=J,this.ngForOf=V,this.index=ie,this.count=ye}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let fe=(()=>{class U{constructor(V,ie,ye){this._viewContainer=V,this._template=ie,this._differs=ye,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(V){this._ngForOf=V,this._ngForOfDirty=!0}set ngForTrackBy(V){this._trackByFn=V}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(V){V&&(this._template=V)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const V=this._ngForOf;!this._differ&&V&&(this._differ=this._differs.find(V).create(this.ngForTrackBy))}if(this._differ){const V=this._differ.diff(this._ngForOf);V&&this._applyChanges(V)}}_applyChanges(V){const ie=this._viewContainer;V.forEachOperation((ye,lt,It)=>{if(null==ye.previousIndex)ie.createEmbeddedView(this._template,new we(ye.item,this._ngForOf,-1,-1),null===It?void 0:It);else if(null==It)ie.remove(null===lt?void 0:lt);else if(null!==lt){const Kt=ie.get(lt);ie.move(Kt,It),re(Kt,ye)}});for(let ye=0,lt=ie.length;ye<lt;ye++){const Kt=ie.get(ye).context;Kt.index=ye,Kt.count=lt,Kt.ngForOf=this._ngForOf}V.forEachIdentityChange(ye=>{re(ie.get(ye.currentIndex),ye)})}static ngTemplateContextGuard(V,ie){return!0}}return U.\u0275fac=function(V){return new(V||U)(_.Y36(_.s_b),_.Y36(_.Rgc),_.Y36(_.ZZ4))},U.\u0275dir=_.lG2({type:U,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),U})();function re(U,J){U.context.$implicit=J.item}let it=(()=>{class U{constructor(V,ie){this._viewContainer=V,this._context=new Pt,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=ie}set ngIf(V){this._context.$implicit=this._context.ngIf=V,this._updateView()}set ngIfThen(V){kn("ngIfThen",V),this._thenTemplateRef=V,this._thenViewRef=null,this._updateView()}set ngIfElse(V){kn("ngIfElse",V),this._elseTemplateRef=V,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(V,ie){return!0}}return U.\u0275fac=function(V){return new(V||U)(_.Y36(_.s_b),_.Y36(_.Rgc))},U.\u0275dir=_.lG2({type:U,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),U})();class Pt{constructor(){this.$implicit=null,this.ngIf=null}}function kn(U,J){if(J&&!J.createEmbeddedView)throw new Error(`${U} must be a TemplateRef, but received '${(0,_.AaK)(J)}'.`)}let Fs=(()=>{class U{constructor(V,ie,ye){this._ngEl=V,this._differs=ie,this._renderer=ye,this._ngStyle=null,this._differ=null}set ngStyle(V){this._ngStyle=V,!this._differ&&V&&(this._differ=this._differs.find(V).create())}ngDoCheck(){if(this._differ){const V=this._differ.diff(this._ngStyle);V&&this._applyChanges(V)}}_setStyle(V,ie){const[ye,lt]=V.split(".");null!=(ie=null!=ie&&lt?`${ie}${lt}`:ie)?this._renderer.setStyle(this._ngEl.nativeElement,ye,ie):this._renderer.removeStyle(this._ngEl.nativeElement,ye)}_applyChanges(V){V.forEachRemovedItem(ie=>this._setStyle(ie.key,null)),V.forEachAddedItem(ie=>this._setStyle(ie.key,ie.currentValue)),V.forEachChangedItem(ie=>this._setStyle(ie.key,ie.currentValue))}}return U.\u0275fac=function(V){return new(V||U)(_.Y36(_.SBq),_.Y36(_.aQg),_.Y36(_.Qsj))},U.\u0275dir=_.lG2({type:U,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),U})(),ts=(()=>{class U{}return U.\u0275fac=function(V){return new(V||U)},U.\u0275mod=_.oAB({type:U}),U.\u0275inj=_.cJS({}),U})();const qr="browser";function ui(U){return"server"===U}let Gi=(()=>{class U{}return U.\u0275prov=(0,_.Yz7)({token:U,providedIn:"root",factory:()=>new Bn((0,_.LFG)(je),window)}),U})();class Bn{constructor(J,V){this.document=J,this.window=V,this.offset=()=>[0,0]}setOffset(J){this.offset=Array.isArray(J)?()=>J:J}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(J){this.supportsScrolling()&&this.window.scrollTo(J[0],J[1])}scrollToAnchor(J){if(!this.supportsScrolling())return;const V=function Os(U,J){const V=U.getElementById(J)||U.getElementsByName(J)[0];if(V)return V;if("function"==typeof U.createTreeWalker&&U.body&&(U.body.createShadowRoot||U.body.attachShadow)){const ie=U.createTreeWalker(U.body,NodeFilter.SHOW_ELEMENT);let ye=ie.currentNode;for(;ye;){const lt=ye.shadowRoot;if(lt){const It=lt.getElementById(J)||lt.querySelector(`[name="${J}"]`);if(It)return It}ye=ie.nextNode()}}return null}(this.document,J);V&&(this.scrollToElement(V),V.focus())}setHistoryScrollRestoration(J){if(this.supportScrollRestoration()){const V=this.window.history;V&&V.scrollRestoration&&(V.scrollRestoration=J)}}scrollToElement(J){const V=J.getBoundingClientRect(),ie=V.left+this.window.pageXOffset,ye=V.top+this.window.pageYOffset,lt=this.offset();this.window.scrollTo(ie-lt[0],ye-lt[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const J=ci(this.window.history)||ci(Object.getPrototypeOf(this.window.history));return!(!J||!J.writable&&!J.set)}catch(J){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(J){return!1}}}function ci(U){return Object.getOwnPropertyDescriptor(U,"scrollRestoration")}class Yn{}},520:(en,Xe,z)=>{"use strict";z.d(Xe,{JF:()=>un,eN:()=>Qe});var _=z(9808),B=z(5e3),oe=z(9646),Pe=z(8306),Ae=z(4351),xe=z(9300),je=z(4004);class Ue{}class We{}class _e{constructor(ge){this.normalizedNames=new Map,this.lazyUpdate=null,ge?this.lazyInit="string"==typeof ge?()=>{this.headers=new Map,ge.split("\n").forEach(be=>{const vt=be.indexOf(":");if(vt>0){const Be=be.slice(0,vt),gt=Be.toLowerCase(),xt=be.slice(vt+1).trim();this.maybeSetNormalizedName(Be,gt),this.headers.has(gt)?this.headers.get(gt).push(xt):this.headers.set(gt,[xt])}})}:()=>{this.headers=new Map,Object.keys(ge).forEach(be=>{let vt=ge[be];const Be=be.toLowerCase();"string"==typeof vt&&(vt=[vt]),vt.length>0&&(this.headers.set(Be,vt),this.maybeSetNormalizedName(be,Be))})}:this.headers=new Map}has(ge){return this.init(),this.headers.has(ge.toLowerCase())}get(ge){this.init();const be=this.headers.get(ge.toLowerCase());return be&&be.length>0?be[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(ge){return this.init(),this.headers.get(ge.toLowerCase())||null}append(ge,be){return this.clone({name:ge,value:be,op:"a"})}set(ge,be){return this.clone({name:ge,value:be,op:"s"})}delete(ge,be){return this.clone({name:ge,value:be,op:"d"})}maybeSetNormalizedName(ge,be){this.normalizedNames.has(be)||this.normalizedNames.set(be,ge)}init(){this.lazyInit&&(this.lazyInit instanceof _e?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(ge=>this.applyUpdate(ge)),this.lazyUpdate=null))}copyFrom(ge){ge.init(),Array.from(ge.headers.keys()).forEach(be=>{this.headers.set(be,ge.headers.get(be)),this.normalizedNames.set(be,ge.normalizedNames.get(be))})}clone(ge){const be=new _e;return be.lazyInit=this.lazyInit&&this.lazyInit instanceof _e?this.lazyInit:this,be.lazyUpdate=(this.lazyUpdate||[]).concat([ge]),be}applyUpdate(ge){const be=ge.name.toLowerCase();switch(ge.op){case"a":case"s":let vt=ge.value;if("string"==typeof vt&&(vt=[vt]),0===vt.length)return;this.maybeSetNormalizedName(ge.name,be);const Be=("a"===ge.op?this.headers.get(be):void 0)||[];Be.push(...vt),this.headers.set(be,Be);break;case"d":const gt=ge.value;if(gt){let xt=this.headers.get(be);if(!xt)return;xt=xt.filter(Kn=>-1===gt.indexOf(Kn)),0===xt.length?(this.headers.delete(be),this.normalizedNames.delete(be)):this.headers.set(be,xt)}else this.headers.delete(be),this.normalizedNames.delete(be)}}forEach(ge){this.init(),Array.from(this.normalizedNames.keys()).forEach(be=>ge(this.normalizedNames.get(be),this.headers.get(be)))}}class de{encodeKey(ge){return Et(ge)}encodeValue(ge){return Et(ge)}decodeKey(ge){return decodeURIComponent(ge)}decodeValue(ge){return decodeURIComponent(ge)}}const Mt=/%(\d[a-f0-9])/gi,pt={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function Et(ct){return encodeURIComponent(ct).replace(Mt,(ge,be)=>{var vt;return null!==(vt=pt[be])&&void 0!==vt?vt:ge})}function Rt(ct){return`${ct}`}class tt{constructor(ge={}){if(this.updates=null,this.cloneFrom=null,this.encoder=ge.encoder||new de,ge.fromString){if(ge.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Fe(ct,ge){const be=new Map;return ct.length>0&&ct.replace(/^\?/,"").split("&").forEach(Be=>{const gt=Be.indexOf("="),[xt,Kn]=-1==gt?[ge.decodeKey(Be),""]:[ge.decodeKey(Be.slice(0,gt)),ge.decodeValue(Be.slice(gt+1))],In=be.get(xt)||[];In.push(Kn),be.set(xt,In)}),be}(ge.fromString,this.encoder)}else ge.fromObject?(this.map=new Map,Object.keys(ge.fromObject).forEach(be=>{const vt=ge.fromObject[be];this.map.set(be,Array.isArray(vt)?vt:[vt])})):this.map=null}has(ge){return this.init(),this.map.has(ge)}get(ge){this.init();const be=this.map.get(ge);return be?be[0]:null}getAll(ge){return this.init(),this.map.get(ge)||null}keys(){return this.init(),Array.from(this.map.keys())}append(ge,be){return this.clone({param:ge,value:be,op:"a"})}appendAll(ge){const be=[];return Object.keys(ge).forEach(vt=>{const Be=ge[vt];Array.isArray(Be)?Be.forEach(gt=>{be.push({param:vt,value:gt,op:"a"})}):be.push({param:vt,value:Be,op:"a"})}),this.clone(be)}set(ge,be){return this.clone({param:ge,value:be,op:"s"})}delete(ge,be){return this.clone({param:ge,value:be,op:"d"})}toString(){return this.init(),this.keys().map(ge=>{const be=this.encoder.encodeKey(ge);return this.map.get(ge).map(vt=>be+"="+this.encoder.encodeValue(vt)).join("&")}).filter(ge=>""!==ge).join("&")}clone(ge){const be=new tt({encoder:this.encoder});return be.cloneFrom=this.cloneFrom||this,be.updates=(this.updates||[]).concat(ge),be}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(ge=>this.map.set(ge,this.cloneFrom.map.get(ge))),this.updates.forEach(ge=>{switch(ge.op){case"a":case"s":const be=("a"===ge.op?this.map.get(ge.param):void 0)||[];be.push(Rt(ge.value)),this.map.set(ge.param,be);break;case"d":if(void 0===ge.value){this.map.delete(ge.param);break}{let vt=this.map.get(ge.param)||[];const Be=vt.indexOf(Rt(ge.value));-1!==Be&&vt.splice(Be,1),vt.length>0?this.map.set(ge.param,vt):this.map.delete(ge.param)}}}),this.cloneFrom=this.updates=null)}}class ke{constructor(){this.map=new Map}set(ge,be){return this.map.set(ge,be),this}get(ge){return this.map.has(ge)||this.map.set(ge,ge.defaultValue()),this.map.get(ge)}delete(ge){return this.map.delete(ge),this}has(ge){return this.map.has(ge)}keys(){return this.map.keys()}}function dt(ct){return"undefined"!=typeof ArrayBuffer&&ct instanceof ArrayBuffer}function nt(ct){return"undefined"!=typeof Blob&&ct instanceof Blob}function Ye(ct){return"undefined"!=typeof FormData&&ct instanceof FormData}class Dt{constructor(ge,be,vt,Be){let gt;if(this.url=be,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=ge.toUpperCase(),function Ht(ct){switch(ct){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||Be?(this.body=void 0!==vt?vt:null,gt=Be):gt=vt,gt&&(this.reportProgress=!!gt.reportProgress,this.withCredentials=!!gt.withCredentials,gt.responseType&&(this.responseType=gt.responseType),gt.headers&&(this.headers=gt.headers),gt.context&&(this.context=gt.context),gt.params&&(this.params=gt.params)),this.headers||(this.headers=new _e),this.context||(this.context=new ke),this.params){const xt=this.params.toString();if(0===xt.length)this.urlWithParams=be;else{const Kn=be.indexOf("?");this.urlWithParams=be+(-1===Kn?"?":Kn<be.length-1?"&":"")+xt}}else this.params=new tt,this.urlWithParams=be}serializeBody(){return null===this.body?null:dt(this.body)||nt(this.body)||Ye(this.body)||function at(ct){return"undefined"!=typeof URLSearchParams&&ct instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof tt?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Ye(this.body)?null:nt(this.body)?this.body.type||null:dt(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof tt?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(ge={}){var be;const vt=ge.method||this.method,Be=ge.url||this.url,gt=ge.responseType||this.responseType,xt=void 0!==ge.body?ge.body:this.body,Kn=void 0!==ge.withCredentials?ge.withCredentials:this.withCredentials,In=void 0!==ge.reportProgress?ge.reportProgress:this.reportProgress;let sn=ge.headers||this.headers,$r=ge.params||this.params;const br=null!==(be=ge.context)&&void 0!==be?be:this.context;return void 0!==ge.setHeaders&&(sn=Object.keys(ge.setHeaders).reduce((sr,Lt)=>sr.set(Lt,ge.setHeaders[Lt]),sn)),ge.setParams&&($r=Object.keys(ge.setParams).reduce((sr,Lt)=>sr.set(Lt,ge.setParams[Lt]),$r)),new Dt(vt,Be,xt,{params:$r,headers:sn,context:br,reportProgress:In,responseType:gt,withCredentials:Kn})}}var ne=(()=>((ne=ne||{})[ne.Sent=0]="Sent",ne[ne.UploadProgress=1]="UploadProgress",ne[ne.ResponseHeader=2]="ResponseHeader",ne[ne.DownloadProgress=3]="DownloadProgress",ne[ne.Response=4]="Response",ne[ne.User=5]="User",ne))();class Oe{constructor(ge,be=200,vt="OK"){this.headers=ge.headers||new _e,this.status=void 0!==ge.status?ge.status:be,this.statusText=ge.statusText||vt,this.url=ge.url||null,this.ok=this.status>=200&&this.status<300}}class W extends Oe{constructor(ge={}){super(ge),this.type=ne.ResponseHeader}clone(ge={}){return new W({headers:ge.headers||this.headers,status:void 0!==ge.status?ge.status:this.status,statusText:ge.statusText||this.statusText,url:ge.url||this.url||void 0})}}class ze extends Oe{constructor(ge={}){super(ge),this.type=ne.Response,this.body=void 0!==ge.body?ge.body:null}clone(ge={}){return new ze({body:void 0!==ge.body?ge.body:this.body,headers:ge.headers||this.headers,status:void 0!==ge.status?ge.status:this.status,statusText:ge.statusText||this.statusText,url:ge.url||this.url||void 0})}}class He extends Oe{constructor(ge){super(ge,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${ge.url||"(unknown url)"}`:`Http failure response for ${ge.url||"(unknown url)"}: ${ge.status} ${ge.statusText}`,this.error=ge.error||null}}function ot(ct,ge){return{body:ge,headers:ct.headers,context:ct.context,observe:ct.observe,params:ct.params,reportProgress:ct.reportProgress,responseType:ct.responseType,withCredentials:ct.withCredentials}}let Qe=(()=>{class ct{constructor(be){this.handler=be}request(be,vt,Be={}){let gt;if(be instanceof Dt)gt=be;else{let In,sn;In=Be.headers instanceof _e?Be.headers:new _e(Be.headers),Be.params&&(sn=Be.params instanceof tt?Be.params:new tt({fromObject:Be.params})),gt=new Dt(be,vt,void 0!==Be.body?Be.body:null,{headers:In,context:Be.context,params:sn,reportProgress:Be.reportProgress,responseType:Be.responseType||"json",withCredentials:Be.withCredentials})}const xt=(0,oe.of)(gt).pipe((0,Ae.b)(In=>this.handler.handle(In)));if(be instanceof Dt||"events"===Be.observe)return xt;const Kn=xt.pipe((0,xe.h)(In=>In instanceof ze));switch(Be.observe||"body"){case"body":switch(gt.responseType){case"arraybuffer":return Kn.pipe((0,je.U)(In=>{if(null!==In.body&&!(In.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return In.body}));case"blob":return Kn.pipe((0,je.U)(In=>{if(null!==In.body&&!(In.body instanceof Blob))throw new Error("Response is not a Blob.");return In.body}));case"text":return Kn.pipe((0,je.U)(In=>{if(null!==In.body&&"string"!=typeof In.body)throw new Error("Response is not a string.");return In.body}));default:return Kn.pipe((0,je.U)(In=>In.body))}case"response":return Kn;default:throw new Error(`Unreachable: unhandled observe type ${Be.observe}}`)}}delete(be,vt={}){return this.request("DELETE",be,vt)}get(be,vt={}){return this.request("GET",be,vt)}head(be,vt={}){return this.request("HEAD",be,vt)}jsonp(be,vt){return this.request("JSONP",be,{params:(new tt).append(vt,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(be,vt={}){return this.request("OPTIONS",be,vt)}patch(be,vt,Be={}){return this.request("PATCH",be,ot(Be,vt))}post(be,vt,Be={}){return this.request("POST",be,ot(Be,vt))}put(be,vt,Be={}){return this.request("PUT",be,ot(Be,vt))}}return ct.\u0275fac=function(be){return new(be||ct)(B.LFG(Ue))},ct.\u0275prov=B.Yz7({token:ct,factory:ct.\u0275fac}),ct})();class En{constructor(ge,be){this.next=ge,this.interceptor=be}handle(ge){return this.interceptor.intercept(ge,this.next)}}const dn=new B.OlP("HTTP_INTERCEPTORS");let Qt=(()=>{class ct{intercept(be,vt){return vt.handle(be)}}return ct.\u0275fac=function(be){return new(be||ct)},ct.\u0275prov=B.Yz7({token:ct,factory:ct.\u0275fac}),ct})();const On=/^\)\]\}',?\n/;let Sn=(()=>{class ct{constructor(be){this.xhrFactory=be}handle(be){if("JSONP"===be.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Pe.y(vt=>{const Be=this.xhrFactory.build();if(Be.open(be.method,be.urlWithParams),be.withCredentials&&(Be.withCredentials=!0),be.headers.forEach((Lt,tr)=>Be.setRequestHeader(Lt,tr.join(","))),be.headers.has("Accept")||Be.setRequestHeader("Accept","application/json, text/plain, */*"),!be.headers.has("Content-Type")){const Lt=be.detectContentTypeHeader();null!==Lt&&Be.setRequestHeader("Content-Type",Lt)}if(be.responseType){const Lt=be.responseType.toLowerCase();Be.responseType="json"!==Lt?Lt:"text"}const gt=be.serializeBody();let xt=null;const Kn=()=>{if(null!==xt)return xt;const Lt=Be.statusText||"OK",tr=new _e(Be.getAllResponseHeaders()),Pn=function ir(ct){return"responseURL"in ct&&ct.responseURL?ct.responseURL:/^X-Request-URL:/m.test(ct.getAllResponseHeaders())?ct.getResponseHeader("X-Request-URL"):null}(Be)||be.url;return xt=new W({headers:tr,status:Be.status,statusText:Lt,url:Pn}),xt},In=()=>{let{headers:Lt,status:tr,statusText:Pn,url:qt}=Kn(),Le=null;204!==tr&&(Le=void 0===Be.response?Be.responseText:Be.response),0===tr&&(tr=Le?200:0);let Gt=tr>=200&&tr<300;if("json"===be.responseType&&"string"==typeof Le){const Jt=Le;Le=Le.replace(On,"");try{Le=""!==Le?JSON.parse(Le):null}catch(Rn){Le=Jt,Gt&&(Gt=!1,Le={error:Rn,text:Le})}}Gt?(vt.next(new ze({body:Le,headers:Lt,status:tr,statusText:Pn,url:qt||void 0})),vt.complete()):vt.error(new He({error:Le,headers:Lt,status:tr,statusText:Pn,url:qt||void 0}))},sn=Lt=>{const{url:tr}=Kn(),Pn=new He({error:Lt,status:Be.status||0,statusText:Be.statusText||"Unknown Error",url:tr||void 0});vt.error(Pn)};let $r=!1;const br=Lt=>{$r||(vt.next(Kn()),$r=!0);let tr={type:ne.DownloadProgress,loaded:Lt.loaded};Lt.lengthComputable&&(tr.total=Lt.total),"text"===be.responseType&&!!Be.responseText&&(tr.partialText=Be.responseText),vt.next(tr)},sr=Lt=>{let tr={type:ne.UploadProgress,loaded:Lt.loaded};Lt.lengthComputable&&(tr.total=Lt.total),vt.next(tr)};return Be.addEventListener("load",In),Be.addEventListener("error",sn),Be.addEventListener("timeout",sn),Be.addEventListener("abort",sn),be.reportProgress&&(Be.addEventListener("progress",br),null!==gt&&Be.upload&&Be.upload.addEventListener("progress",sr)),Be.send(gt),vt.next({type:ne.Sent}),()=>{Be.removeEventListener("error",sn),Be.removeEventListener("abort",sn),Be.removeEventListener("load",In),Be.removeEventListener("timeout",sn),be.reportProgress&&(Be.removeEventListener("progress",br),null!==gt&&Be.upload&&Be.upload.removeEventListener("progress",sr)),Be.readyState!==Be.DONE&&Be.abort()}})}}return ct.\u0275fac=function(be){return new(be||ct)(B.LFG(_.JF))},ct.\u0275prov=B.Yz7({token:ct,factory:ct.\u0275fac}),ct})();const Mr=new B.OlP("XSRF_COOKIE_NAME"),ar=new B.OlP("XSRF_HEADER_NAME");class fr{}let vn=(()=>{class ct{constructor(be,vt,Be){this.doc=be,this.platform=vt,this.cookieName=Be,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const be=this.doc.cookie||"";return be!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,_.Mx)(be,this.cookieName),this.lastCookieString=be),this.lastToken}}return ct.\u0275fac=function(be){return new(be||ct)(B.LFG(_.K0),B.LFG(B.Lbi),B.LFG(Mr))},ct.\u0275prov=B.Yz7({token:ct,factory:ct.\u0275fac}),ct})(),Nr=(()=>{class ct{constructor(be,vt){this.tokenService=be,this.headerName=vt}intercept(be,vt){const Be=be.url.toLowerCase();if("GET"===be.method||"HEAD"===be.method||Be.startsWith("http://")||Be.startsWith("https://"))return vt.handle(be);const gt=this.tokenService.getToken();return null!==gt&&!be.headers.has(this.headerName)&&(be=be.clone({headers:be.headers.set(this.headerName,gt)})),vt.handle(be)}}return ct.\u0275fac=function(be){return new(be||ct)(B.LFG(fr),B.LFG(ar))},ct.\u0275prov=B.Yz7({token:ct,factory:ct.\u0275fac}),ct})(),er=(()=>{class ct{constructor(be,vt){this.backend=be,this.injector=vt,this.chain=null}handle(be){if(null===this.chain){const vt=this.injector.get(dn,[]);this.chain=vt.reduceRight((Be,gt)=>new En(Be,gt),this.backend)}return this.chain.handle(be)}}return ct.\u0275fac=function(be){return new(be||ct)(B.LFG(We),B.LFG(B.zs3))},ct.\u0275prov=B.Yz7({token:ct,factory:ct.\u0275fac}),ct})(),Fn=(()=>{class ct{static disable(){return{ngModule:ct,providers:[{provide:Nr,useClass:Qt}]}}static withOptions(be={}){return{ngModule:ct,providers:[be.cookieName?{provide:Mr,useValue:be.cookieName}:[],be.headerName?{provide:ar,useValue:be.headerName}:[]]}}}return ct.\u0275fac=function(be){return new(be||ct)},ct.\u0275mod=B.oAB({type:ct}),ct.\u0275inj=B.cJS({providers:[Nr,{provide:dn,useExisting:Nr,multi:!0},{provide:fr,useClass:vn},{provide:Mr,useValue:"XSRF-TOKEN"},{provide:ar,useValue:"X-XSRF-TOKEN"}]}),ct})(),un=(()=>{class ct{}return ct.\u0275fac=function(be){return new(be||ct)},ct.\u0275mod=B.oAB({type:ct}),ct.\u0275inj=B.cJS({providers:[Qe,{provide:Ue,useClass:er},Sn,{provide:We,useExisting:Sn}],imports:[[Fn.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),ct})()},5e3:(en,Xe,z)=>{"use strict";z.d(Xe,{$8M:()=>Qi,$Z:()=>vs,AFp:()=>r0,AaK:()=>Ue,CHM:()=>cn,CRH:()=>Fw,CZH:()=>vv,CqO:()=>vg,EJc:()=>_b,EpF:()=>I_,F4k:()=>Xm,FYo:()=>pw,FiY:()=>lo,G48:()=>Ub,GfV:()=>gw,Gpc:()=>de,JOm:()=>ft,LFG:()=>Mn,LSH:()=>Fo,Lbi:()=>a0,MGl:()=>Nu,NdJ:()=>su,O4$:()=>Qo,OlP:()=>hi,Oqu:()=>xg,PXZ:()=>Rb,Q6J:()=>Ym,QGY:()=>_g,Qsj:()=>dE,R0b:()=>uc,RDi:()=>ci,Rgc:()=>qg,SBq:()=>$g,Sil:()=>wb,Suo:()=>kw,TTD:()=>Ps,TgZ:()=>Gh,VKq:()=>Cw,VLi:()=>xb,X6Q:()=>Vb,XFs:()=>zt,Xpm:()=>Un,Y36:()=>$h,YKP:()=>vw,YNc:()=>Hf,Yjl:()=>yn,Yz7:()=>rn,ZZ4:()=>Rv,_Bn:()=>dw,_UZ:()=>gg,_Vd:()=>Vy,_c5:()=>tC,_uU:()=>lc,aQg:()=>Ov,c2e:()=>u0,cJS:()=>fn,cg1:()=>bd,dDg:()=>h0,deG:()=>Wc,dqk:()=>sn,eFA:()=>g0,ekj:()=>vd,g9A:()=>o0,h0i:()=>cp,hGG:()=>nC,hij:()=>Fu,iGM:()=>Nw,ifc:()=>Be,ip1:()=>n0,kL8:()=>Ea,kcU:()=>Hl,lG2:()=>xn,n5z:()=>Gs,oAB:()=>$e,oxw:()=>ey,q4F:()=>mw,qLn:()=>zs,qOj:()=>kh,qZA:()=>Kf,s9C:()=>Eg,sBO:()=>Bb,sIi:()=>Fh,s_b:()=>jy,soG:()=>Ev,tBr:()=>ao,tb:()=>l0,tp0:()=>ra,uIk:()=>Bf,vHH:()=>Et,vpe:()=>Gc,wAp:()=>Xn,xp6:()=>ff,z2F:()=>Tv,zSh:()=>Up,zs3:()=>vl});var _=z(7579),B=z(727),oe=z(8306),Pe=z(6451),Ae=z(3099);function xe(n){for(let r in n)if(n[r]===xe)return r;throw Error("Could not find renamed property on target object.")}function je(n,r){for(const s in r)r.hasOwnProperty(s)&&!n.hasOwnProperty(s)&&(n[s]=r[s])}function Ue(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Ue).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const r=n.toString();if(null==r)return""+r;const s=r.indexOf("\n");return-1===s?r:r.substring(0,s)}function We(n,r){return null==n||""===n?null===r?"":r:null==r||""===r?n:n+" "+r}const _e=xe({__forward_ref__:xe});function de(n){return n.__forward_ref__=de,n.toString=function(){return Ue(this())},n}function Fe(n){return Mt(n)?n():n}function Mt(n){return"function"==typeof n&&n.hasOwnProperty(_e)&&n.__forward_ref__===de}class Et extends Error{constructor(r,s){super(function Rt(n,r){return`NG0${Math.abs(n)}${r?": "+r:""}`}(r,s)),this.code=r}}function tt(n){return"string"==typeof n?n:null==n?"":String(n)}function yt(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():tt(n)}function nt(n,r){const s=r?` in ${r}`:"";throw new Et(-201,`No provider for ${yt(n)} found${s}`)}function Ft(n,r){null==n&&function St(n,r,s,a){throw new Error(`ASSERTION ERROR: ${n}`+(null==a?"":` [Expected=> ${s} ${a} ${r} <=Actual]`))}(r,n,null,"!=")}function rn(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function fn(n){return{providers:n.providers||[],imports:n.imports||[]}}function On(n){return ir(n,fr)||ir(n,Nr)}function ir(n,r){return n.hasOwnProperty(r)?n[r]:null}function ar(n){return n&&(n.hasOwnProperty(vn)||n.hasOwnProperty(er))?n[vn]:null}const fr=xe({\u0275prov:xe}),vn=xe({\u0275inj:xe}),Nr=xe({ngInjectableDef:xe}),er=xe({ngInjectorDef:xe});var zt=(()=>((zt=zt||{})[zt.Default=0]="Default",zt[zt.Host=1]="Host",zt[zt.Self=2]="Self",zt[zt.SkipSelf=4]="SkipSelf",zt[zt.Optional=8]="Optional",zt))();let bn;function un(n){const r=bn;return bn=n,r}function zr(n,r,s){const a=On(n);return a&&"root"==a.providedIn?void 0===a.value?a.value=a.factory():a.value:s&zt.Optional?null:void 0!==r?r:void nt(Ue(n),"Injector")}function ct(n){return{toString:n}.toString()}var ge=(()=>((ge=ge||{})[ge.OnPush=0]="OnPush",ge[ge.Default=1]="Default",ge))(),Be=(()=>{return(n=Be||(Be={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",Be;var n})();const gt="undefined"!=typeof globalThis&&globalThis,xt="undefined"!=typeof window&&window,Kn="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,sn=gt||"undefined"!=typeof global&&global||xt||Kn,sr={},Lt=[],tr=xe({\u0275cmp:xe}),Pn=xe({\u0275dir:xe}),qt=xe({\u0275pipe:xe}),Le=xe({\u0275mod:xe}),Gt=xe({\u0275fac:xe}),Jt=xe({__NG_ELEMENT_ID__:xe});let Rn=0;function Un(n){return ct(()=>{const s={},a={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:s,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===ge.OnPush,directiveDefs:null,pipeDefs:null,selectors:n.selectors||Lt,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||Be.Emulated,id:"c",styles:n.styles||Lt,_:null,setInput:null,schemas:n.schemas||null,tView:null},h=n.directives,m=n.features,b=n.pipes;return a.id+=Rn++,a.inputs=on(n.inputs,s),a.outputs=on(n.outputs),m&&m.forEach(A=>A(a)),a.directiveDefs=h?()=>("function"==typeof h?h():h).map(he):null,a.pipeDefs=b?()=>("function"==typeof b?b():b).map(Me):null,a})}function he(n){return Zn(n)||function Tr(n){return n[Pn]||null}(n)}function Me(n){return function _n(n){return n[qt]||null}(n)}const st={};function $e(n){return ct(()=>{const r={type:n.type,bootstrap:n.bootstrap||Lt,declarations:n.declarations||Lt,imports:n.imports||Lt,exports:n.exports||Lt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(st[n.id]=n.type),r})}function on(n,r){if(null==n)return sr;const s={};for(const a in n)if(n.hasOwnProperty(a)){let h=n[a],m=h;Array.isArray(h)&&(m=h[1],h=h[0]),s[h]=a,r&&(r[h]=m)}return s}const xn=Un;function yn(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,onDestroy:n.type.prototype.ngOnDestroy||null}}function Zn(n){return n[tr]||null}function cr(n,r){const s=n[Le]||null;if(!s&&!0===r)throw new Error(`Type ${Ue(n)} does not have '\u0275mod' property.`);return s}function Ar(n){return Array.isArray(n)&&"object"==typeof n[1]}function ei(n){return Array.isArray(n)&&!0===n[1]}function yo(n){return 0!=(8&n.flags)}function os(n){return 2==(2&n.flags)}function as(n){return 1==(1&n.flags)}function Ui(n){return null!==n.template}function Fs(n){return 0!=(512&n[2])}function li(n,r){return n.hasOwnProperty(Gt)?n[Gt]:null}class ti{constructor(r,s,a){this.previousValue=r,this.currentValue=s,this.firstChange=a}isFirstChange(){return this.firstChange}}function Ps(){return Qs}function Qs(n){return n.type.prototype.ngOnChanges&&(n.setInput=us),Ao}function Ao(){const n=qr(this),r=null==n?void 0:n.current;if(r){const s=n.previous;if(s===sr)n.previous=r;else for(let a in r)s[a]=r[a];n.current=null,this.ngOnChanges(r)}}function us(n,r,s,a){const h=qr(n)||function xi(n,r){return n[ts]=r}(n,{previous:sr,current:null}),m=h.current||(h.current={}),b=h.previous,A=this.declaredInputs[s],N=b[A];m[A]=new ti(N&&N.currentValue,r,b===sr),n[a]=r}Ps.ngInherit=!0;const ts="__ngSimpleChanges__";function qr(n){return n[ts]||null}let Bn;function ci(n){Bn=n}function Yn(n){return!!n.listen}const U={createRenderer:(n,r)=>function Os(){return void 0!==Bn?Bn:"undefined"!=typeof document?document:void 0}()};function V(n){for(;Array.isArray(n);)n=n[0];return n}function lt(n,r){return V(r[n])}function It(n,r){return V(r[n.index])}function vr(n,r){return n.data[r]}function Jn(n,r){const s=r[n];return Ar(s)?s:s[0]}function zn(n){return 4==(4&n[2])}function jr(n){return 128==(128&n[2])}function Vr(n,r){return null==r?null:n[r]}function ds(n){n[18]=0}function wi(n,r){n[5]+=r;let s=n,a=n[3];for(;null!==a&&(1===r&&1===s[5]||-1===r&&0===s[5]);)a[5]+=r,s=a,a=a[3]}const $t={lFrame:fs(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function $(){return $t.bindingsEnabled}function G(){return $t.lFrame.lView}function qe(){return $t.lFrame.tView}function cn(n){return $t.lFrame.contextLView=n,n[8]}function $n(){let n=hr();for(;null!==n&&64===n.type;)n=n.parent;return n}function hr(){return $t.lFrame.currentTNode}function Mi(n,r){const s=$t.lFrame;s.currentTNode=n,s.isParent=r}function Us(){return $t.lFrame.isParent}function Lo(){return $t.isInCheckNoChangesMode}function Bs(n){$t.isInCheckNoChangesMode=n}function Yi(){return $t.lFrame.bindingIndex++}function Vo(n,r){const s=$t.lFrame;s.bindingIndex=s.bindingRootIndex=n,Ca(r)}function Ca(n){$t.lFrame.currentDirectiveIndex=n}function ha(){return $t.lFrame.currentQueryIndex}function rl(n){$t.lFrame.currentQueryIndex=n}function Zo(n){const r=n[1];return 2===r.type?r.declTNode:1===r.type?n[6]:null}function xo(n,r,s){if(s&zt.SkipSelf){let h=r,m=n;for(;!(h=h.parent,null!==h||s&zt.Host||(h=Zo(m),null===h||(m=m[15],10&h.type))););if(null===h)return!1;r=h,n=m}const a=$t.lFrame=Bo();return a.currentTNode=r,a.lView=n,!0}function js(n){const r=Bo(),s=n[1];$t.lFrame=r,r.currentTNode=s.firstChild,r.lView=n,r.tView=s,r.contextLView=n,r.bindingIndex=s.bindingStartIndex,r.inI18n=!1}function Bo(){const n=$t.lFrame,r=null===n?null:n.child;return null===r?fs(n):r}function fs(n){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=r),r}function Yo(){const n=$t.lFrame;return $t.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const $a=Yo;function Hs(){const n=Yo();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function bi(){return $t.lFrame.selectedIndex}function Is(n){$t.lFrame.selectedIndex=n}function di(){const n=$t.lFrame;return vr(n.tView,n.selectedIndex)}function Qo(){$t.lFrame.currentNamespace="svg"}function Hl(){!function Ia(){$t.lFrame.currentNamespace=null}()}function to(n,r){for(let s=r.directiveStart,a=r.directiveEnd;s<a;s++){const m=n.data[s].type.prototype,{ngAfterContentInit:b,ngAfterContentChecked:A,ngAfterViewInit:N,ngAfterViewChecked:Z,ngOnDestroy:te}=m;b&&(n.contentHooks||(n.contentHooks=[])).push(-s,b),A&&((n.contentHooks||(n.contentHooks=[])).push(s,A),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(s,A)),N&&(n.viewHooks||(n.viewHooks=[])).push(-s,N),Z&&((n.viewHooks||(n.viewHooks=[])).push(s,Z),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(s,Z)),null!=te&&(n.destroyHooks||(n.destroyHooks=[])).push(s,te)}}function ki(n,r,s){mi(n,r,3,s)}function Po(n,r,s,a){(3&n[2])===s&&mi(n,r,s,a)}function gi(n,r){let s=n[2];(3&s)===r&&(s&=2047,s+=1,n[2]=s)}function mi(n,r,s,a){const m=null!=a?a:-1,b=r.length-1;let A=0;for(let N=void 0!==a?65535&n[18]:0;N<b;N++)if("number"==typeof r[N+1]){if(A=r[N],null!=a&&A>=a)break}else r[N]<0&&(n[18]+=65536),(A<m||-1==m)&&(Aa(n,s,r,N),n[18]=(4294901760&n[18])+N+2),N++}function Aa(n,r,s,a){const h=s[a]<0,m=s[a+1],A=n[h?-s[a]:s[a]];if(h){if(n[2]>>11<n[18]>>16&&(3&n[2])===r){n[2]+=2048;try{m.call(A)}finally{}}}else try{m.call(A)}finally{}}class Ci{constructor(r,s,a){this.factory=r,this.resolving=!1,this.canSeeViewProviders=s,this.injectImpl=a}}function Ts(n,r,s){const a=Yn(n);let h=0;for(;h<s.length;){const m=s[h];if("number"==typeof m){if(0!==m)break;h++;const b=s[h++],A=s[h++],N=s[h++];a?n.setAttribute(r,A,N,b):r.setAttributeNS(b,A,N)}else{const b=m,A=s[++h];S(b)?a&&n.setProperty(r,b,A):a?n.setAttribute(r,b,A):r.setAttribute(b,A),h++}}return h}function $s(n){return 3===n||4===n||6===n}function S(n){return 64===n.charCodeAt(0)}function x(n,r){if(null!==r&&0!==r.length)if(null===n||0===n.length)n=r.slice();else{let s=-1;for(let a=0;a<r.length;a++){const h=r[a];"number"==typeof h?s=h:0===s||Q(n,s,h,null,-1===s||2===s?r[++a]:null)}}return n}function Q(n,r,s,a,h){let m=0,b=n.length;if(-1===r)b=-1;else for(;m<n.length;){const A=n[m++];if("number"==typeof A){if(A===r){b=-1;break}if(A>r){b=m-1;break}}}for(;m<n.length;){const A=n[m];if("number"==typeof A)break;if(A===s){if(null===a)return void(null!==h&&(n[m+1]=h));if(a===n[m+1])return void(n[m+2]=h)}m++,null!==a&&m++,null!==h&&m++}-1!==b&&(n.splice(b,0,r),m=b+1),n.splice(m++,0,s),null!==a&&n.splice(m++,0,a),null!==h&&n.splice(m++,0,h)}function ve(n){return-1!==n}function Je(n){return 32767&n}function Cr(n,r){let s=function pn(n){return n>>16}(n),a=r;for(;s>0;)a=a[15],s--;return a}let zi=!0;function ri(n){const r=zi;return zi=n,r}let Eo=0;function Nt(n,r){const s=no(n,r);if(-1!==s)return s;const a=r[1];a.firstCreatePass&&(n.injectorIndex=r.length,Gr(a.data,n),Gr(r,null),Gr(a.blueprint,null));const h=ro(n,r),m=n.injectorIndex;if(ve(h)){const b=Je(h),A=Cr(h,r),N=A[1].data;for(let Z=0;Z<8;Z++)r[m+Z]=A[b+Z]|N[b+Z]}return r[m+8]=h,m}function Gr(n,r){n.push(0,0,0,0,0,0,0,0,r)}function no(n,r){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===r[n.injectorIndex+8]?-1:n.injectorIndex}function ro(n,r){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let s=0,a=null,h=r;for(;null!==h;){const m=h[1],b=m.type;if(a=2===b?m.declTNode:1===b?h[6]:null,null===a)return-1;if(s++,h=h[15],-1!==a.injectorIndex)return a.injectorIndex|s<<16}return-1}function T(n,r,s){!function fa(n,r,s){let a;"string"==typeof s?a=s.charCodeAt(0)||0:s.hasOwnProperty(Jt)&&(a=s[Jt]),null==a&&(a=s[Jt]=Eo++);const h=255&a;r.data[n+(h>>5)]|=1<<h}(n,r,s)}function C(n,r,s){if(s&zt.Optional)return n;nt(r,"NodeInjector")}function R(n,r,s,a){if(s&zt.Optional&&void 0===a&&(a=null),0==(s&(zt.Self|zt.Host))){const h=n[9],m=un(void 0);try{return h?h.get(r,a,s&zt.Optional):zr(r,a,s&zt.Optional)}finally{un(m)}}return C(a,r,s)}function O(n,r,s,a=zt.Default,h){if(null!==n){const m=function Ir(n){if("string"==typeof n)return n.charCodeAt(0)||0;const r=n.hasOwnProperty(Jt)?n[Jt]:void 0;return"number"==typeof r?r>=0?255&r:ue:r}(s);if("function"==typeof m){if(!xo(r,n,a))return a&zt.Host?C(h,s,a):R(r,s,a,h);try{const b=m(a);if(null!=b||a&zt.Optional)return b;nt(s)}finally{$a()}}else if("number"==typeof m){let b=null,A=no(n,r),N=-1,Z=a&zt.Host?r[16][6]:null;for((-1===A||a&zt.SkipSelf)&&(N=-1===A?ro(n,r):r[A+8],-1!==N&&Wr(a,!1)?(b=r[1],A=Je(N),r=Cr(N,r)):A=-1);-1!==A;){const te=r[1];if(Dn(m,A,te.data)){const ce=Te(A,r,s,b,a,Z);if(ce!==q)return ce}N=r[A+8],-1!==N&&Wr(a,r[1].data[A+8]===Z)&&Dn(m,A,r)?(b=te,A=Je(N),r=Cr(N,r)):A=-1}}}return R(r,s,a,h)}const q={};function ue(){return new wr($n(),G())}function Te(n,r,s,a,h,m){const b=r[1],A=b.data[n+8],te=mt(A,b,s,null==a?os(A)&&zi:a!=b&&0!=(3&A.type),h&zt.Host&&m===A);return null!==te?nn(r,b,te,A):q}function mt(n,r,s,a,h){const m=n.providerIndexes,b=r.data,A=1048575&m,N=n.directiveStart,te=m>>20,Se=h?A+te:n.directiveEnd;for(let Ze=a?A:A+te;Ze<Se;Ze++){const Tt=b[Ze];if(Ze<N&&s===Tt||Ze>=N&&Tt.type===s)return Ze}if(h){const Ze=b[N];if(Ze&&Ui(Ze)&&Ze.type===s)return N}return null}function nn(n,r,s,a){let h=n[s];const m=r.data;if(function Ds(n){return n instanceof Ci}(h)){const b=h;b.resolving&&function ke(n,r){const s=r?`. Dependency path: ${r.join(" > ")} > ${n}`:"";throw new Et(-200,`Circular dependency in DI detected for ${n}${s}`)}(yt(m[s]));const A=ri(b.canSeeViewProviders);b.resolving=!0;const N=b.injectImpl?un(b.injectImpl):null;xo(n,a,zt.Default);try{h=n[s]=b.factory(void 0,m,n,a),r.firstCreatePass&&s>=a.directiveStart&&function Ta(n,r,s){const{ngOnChanges:a,ngOnInit:h,ngDoCheck:m}=r.type.prototype;if(a){const b=Qs(r);(s.preOrderHooks||(s.preOrderHooks=[])).push(n,b),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,b)}h&&(s.preOrderHooks||(s.preOrderHooks=[])).push(0-n,h),m&&((s.preOrderHooks||(s.preOrderHooks=[])).push(n,m),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,m))}(s,m[s],r)}finally{null!==N&&un(N),ri(A),b.resolving=!1,$a()}}return h}function Dn(n,r,s){return!!(s[r+(n>>5)]&1<<n)}function Wr(n,r){return!(n&zt.Self||n&zt.Host&&r)}class wr{constructor(r,s){this._tNode=r,this._lView=s}get(r,s,a){return O(this._tNode,this._lView,r,a,s)}}function Gs(n){return ct(()=>{const r=n.prototype.constructor,s=r[Gt]||io(r),a=Object.prototype;let h=Object.getPrototypeOf(n.prototype).constructor;for(;h&&h!==a;){const m=h[Gt]||io(h);if(m&&m!==s)return m;h=Object.getPrototypeOf(h)}return m=>new m})}function io(n){return Mt(n)?()=>{const r=io(Fe(n));return r&&r()}:li(n)}function Qi(n){return function I(n,r){if("class"===r)return n.classes;if("style"===r)return n.styles;const s=n.attrs;if(s){const a=s.length;let h=0;for(;h<a;){const m=s[h];if($s(m))break;if(0===m)h+=2;else if("number"==typeof m)for(h++;h<a&&"string"==typeof s[h];)h++;else{if(m===r)return s[h+1];h+=2}}}return null}($n(),n)}const ko="__parameters__";function Di(n,r,s){return ct(()=>{const a=function Gl(n){return function(...s){if(n){const a=n(...s);for(const h in a)this[h]=a[h]}}}(r);function h(...m){if(this instanceof h)return a.apply(this,m),this;const b=new h(...m);return A.annotation=b,A;function A(N,Z,te){const ce=N.hasOwnProperty(ko)?N[ko]:Object.defineProperty(N,ko,{value:[]})[ko];for(;ce.length<=te;)ce.push(null);return(ce[te]=ce[te]||[]).push(b),N}}return s&&(h.prototype=Object.create(s.prototype)),h.prototype.ngMetadataName=n,h.annotationCls=h,h})}class hi{constructor(r,s){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof s?this.__NG_ELEMENT_ID__=s:void 0!==s&&(this.\u0275prov=rn({token:this,providedIn:s.providedIn||"root",factory:s.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Wc=new hi("AnalyzeForEntryComponents");function ms(n,r){void 0===r&&(r=n);for(let s=0;s<n.length;s++){let a=n[s];Array.isArray(a)?(r===n&&(r=n.slice(0,s)),ms(a,r)):r!==n&&r.push(a)}return r}function Ho(n,r){n.forEach(s=>Array.isArray(s)?Ho(s,r):r(s))}function pa(n,r,s){r>=n.length?n.push(s):n.splice(r,0,s)}function Co(n,r){return r>=n.length-1?n.pop():n.splice(r,1)[0]}function As(n,r,s){let a=sl(n,r);return a>=0?n[1|a]=s:(a=~a,function Wl(n,r,s,a){let h=n.length;if(h==r)n.push(s,a);else if(1===h)n.push(a,n[0]),n[0]=s;else{for(h--,n.push(n[h-1],n[h]);h>r;)n[h]=n[h-2],h--;n[r]=s,n[r+1]=a}}(n,a,r,s)),a}function xa(n,r){const s=sl(n,r);if(s>=0)return n[1|s]}function sl(n,r){return function Xo(n,r,s){let a=0,h=n.length>>s;for(;h!==a;){const m=a+(h-a>>1),b=n[m<<s];if(r===b)return m<<s;b>r?h=m:a=m+1}return~(h<<s)}(n,r,1)}const ga={},Cl="__NG_DI_FLAG__",cu="ngTempTokenPath",H=/\n/gm,me="__source",Ge=xe({provide:String,useValue:xe});let et;function Bt(n){const r=et;return et=n,r}function mn(n,r=zt.Default){if(void 0===et)throw new Et(203,"");return null===et?zr(n,void 0,r):et.get(n,r&zt.Optional?null:void 0,r)}function Mn(n,r=zt.Default){return(function Fn(){return bn}()||mn)(Fe(n),r)}const Er=Mn;function gr(n){const r=[];for(let s=0;s<n.length;s++){const a=Fe(n[s]);if(Array.isArray(a)){if(0===a.length)throw new Et(900,"");let h,m=zt.Default;for(let b=0;b<a.length;b++){const A=a[b],N=Li(A);"number"==typeof N?-1===N?h=A.token:m|=N:h=A}r.push(Mn(h,m))}else r.push(Mn(a))}return r}function ys(n,r){return n[Cl]=r,n.prototype[Cl]=r,n}function Li(n){return n[Cl]}const ao=ys(Di("Inject",n=>({token:n})),-1),lo=ys(Di("Optional"),8),ra=ys(Di("SkipSelf"),4);class gu{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function ya(n){return n instanceof gu?n.changingThisBreaksApplicationSecurity:n}const pl=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Sl=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var Fr=(()=>((Fr=Fr||{})[Fr.NONE=0]="NONE",Fr[Fr.HTML=1]="HTML",Fr[Fr.STYLE=2]="STYLE",Fr[Fr.SCRIPT=3]="SCRIPT",Fr[Fr.URL=4]="URL",Fr[Fr.RESOURCE_URL=5]="RESOURCE_URL",Fr))();function Fo(n){const r=function wu(){const n=G();return n&&n[12]}();return r?r.sanitize(Fr.URL,n)||"":function mu(n,r){const s=function dl(n){return n instanceof gu&&n.getTypeName()||null}(n);if(null!=s&&s!==r){if("ResourceURL"===s&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${s} (see https://g.co/ng/security#xss)`)}return s===r}(n,"URL")?ya(n):function xl(n){return(n=String(n)).match(pl)||n.match(Sl)?n:"unsafe:"+n}(tt(n))}const Eu="__ngContext__";function co(n,r){n[Eu]=r}function bc(n){const r=function Ja(n){return n[Eu]||null}(n);return r?Array.isArray(r)?r:r.lView:null}function oa(n){return n.ngOriginalError}function Cc(n,...r){n.error(...r)}class zs{constructor(){this._console=console}handleError(r){const s=this._findOriginalError(r),a=function gl(n){return n&&n.ngErrorLogger||Cc}(r);a(this._console,"ERROR",r),s&&a(this._console,"ORIGINAL ERROR",s)}_findOriginalError(r){let s=r&&oa(r);for(;s&&oa(s);)s=oa(s);return s||null}}const Xc=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(sn))();function y(n){return n instanceof Function?n():n}var ft=(()=>((ft=ft||{})[ft.Important=1]="Important",ft[ft.DashCase=2]="DashCase",ft))();function ln(n,r){return undefined(n,r)}function Jr(n){const r=n[3];return ei(r)?r[3]:r}function Ju(n){return td(n[13])}function Xu(n){return td(n[4])}function td(n){for(;null!==n&&!ei(n);)n=n[4];return n}function Nl(n,r,s,a,h){if(null!=a){let m,b=!1;ei(a)?m=a:Ar(a)&&(b=!0,a=a[0]);const A=V(a);0===n&&null!==s?null==h?el(r,s,A):kl(r,s,A,h||null,!0):1===n&&null!==s?kl(r,s,A,h||null,!0):2===n?function wh(n,r,s){const a=Fl(n,r);a&&function od(n,r,s,a){Yn(n)?n.removeChild(r,s,a):r.removeChild(s)}(n,a,r,s)}(r,A,b):3===n&&r.destroyNode(A),null!=m&&function _l(n,r,s,a,h){const m=s[7];m!==V(s)&&Nl(r,n,a,m,h);for(let A=10;A<s.length;A++){const N=s[A];Va(N[1],N,n,r,a,m)}}(r,n,m,s,h)}}function Tc(n,r,s){if(Yn(n))return n.createElement(r,s);{const a=null!==s?function Gi(n){const r=n.toLowerCase();return"svg"===r?"http://www.w3.org/2000/svg":"math"===r?"http://www.w3.org/1998/MathML/":null}(s):null;return null===a?n.createElement(r):n.createElementNS(a,r)}}function nf(n,r){const s=n[9],a=s.indexOf(r),h=r[3];1024&r[2]&&(r[2]&=-1025,wi(h,-1)),s.splice(a,1)}function Fd(n,r){if(n.length<=10)return;const s=10+r,a=n[s];if(a){const h=a[17];null!==h&&h!==n&&nf(h,a),r>0&&(n[s-1][4]=a[4]);const m=Co(n,10+r);!function La(n,r){Va(n,r,r[11],2,null,null),r[0]=null,r[6]=null}(a[1],a);const b=m[19];null!==b&&b.detachView(m[1]),a[3]=null,a[4]=null,a[2]&=-129}return a}function rf(n,r){if(!(256&r[2])){const s=r[11];Yn(s)&&s.destroyNode&&Va(n,r,s,3,null,null),function ef(n){let r=n[13];if(!r)return Ld(n[1],n);for(;r;){let s=null;if(Ar(r))s=r[13];else{const a=r[10];a&&(s=a)}if(!s){for(;r&&!r[4]&&r!==n;)Ar(r)&&Ld(r[1],r),r=r[3];null===r&&(r=n),Ar(r)&&Ld(r[1],r),s=r&&r[4]}r=s}}(r)}}function Ld(n,r){if(!(256&r[2])){r[2]&=-129,r[2]|=256,function sf(n,r){let s;if(null!=n&&null!=(s=n.destroyHooks))for(let a=0;a<s.length;a+=2){const h=r[s[a]];if(!(h instanceof Ci)){const m=s[a+1];if(Array.isArray(m))for(let b=0;b<m.length;b+=2){const A=h[m[b]],N=m[b+1];try{N.call(A)}finally{}}else try{m.call(h)}finally{}}}}(n,r),function Zg(n,r){const s=n.cleanup,a=r[7];let h=-1;if(null!==s)for(let m=0;m<s.length-1;m+=2)if("string"==typeof s[m]){const b=s[m+1],A="function"==typeof b?b(r):V(r[b]),N=a[h=s[m+2]],Z=s[m+3];"boolean"==typeof Z?A.removeEventListener(s[m],N,Z):Z>=0?a[h=Z]():a[h=-Z].unsubscribe(),m+=2}else{const b=a[h=s[m+1]];s[m].call(b)}if(null!==a){for(let m=h+1;m<a.length;m++)a[m]();r[7]=null}}(n,r),1===r[1].type&&Yn(r[11])&&r[11].destroy();const s=r[17];if(null!==s&&ei(r[3])){s!==r[3]&&nf(s,r);const a=r[19];null!==a&&a.detachView(n)}}}function _h(n,r,s){return function wt(n,r,s){let a=r;for(;null!==a&&40&a.type;)a=(r=a).parent;if(null===a)return s[0];if(2&a.flags){const h=n.data[a.directiveStart].encapsulation;if(h===Be.None||h===Be.Emulated)return null}return It(a,s)}(n,r.parent,s)}function kl(n,r,s,a,h){Yn(n)?n.insertBefore(r,s,a,h):r.insertBefore(s,a,h)}function el(n,r,s){Yn(n)?n.appendChild(r,s):r.appendChild(s)}function of(n,r,s,a,h){null!==a?kl(n,r,s,a,h):el(n,r,s)}function Fl(n,r){return Yn(n)?n.parentNode(r):r.parentNode}let vh=function af(n,r,s){return 40&n.type?It(n,s):null};function Ac(n,r,s,a){const h=_h(n,a,r),m=r[11],A=function Du(n,r,s){return vh(n,r,s)}(a.parent||r[6],a,r);if(null!=h)if(Array.isArray(s))for(let N=0;N<s.length;N++)of(m,h,s[N],A,!1);else of(m,h,s,A,!1)}function ec(n,r){if(null!==r){const s=r.type;if(3&s)return It(r,n);if(4&s)return Ll(-1,n[r.index]);if(8&s){const a=r.child;if(null!==a)return ec(n,a);{const h=n[r.index];return ei(h)?Ll(-1,h):V(h)}}if(32&s)return ln(r,n)()||V(n[r.index]);{const a=Ud(n,r);return null!==a?Array.isArray(a)?a[0]:ec(Jr(n[16]),a):ec(n,r.next)}}return null}function Ud(n,r){return null!==r?n[16][6].projection[r.projection]:null}function Ll(n,r){const s=10+n+1;if(s<r.length){const a=r[s],h=a[1].firstChild;if(null!==h)return ec(a,h)}return r[7]}function Eh(n,r,s,a,h,m,b){for(;null!=s;){const A=a[s.index],N=s.type;if(b&&0===r&&(A&&co(V(A),a),s.flags|=4),64!=(64&s.flags))if(8&N)Eh(n,r,s.child,a,h,m,!1),Nl(r,n,h,A,m);else if(32&N){const Z=ln(s,a);let te;for(;te=Z();)Nl(r,n,h,te,m);Nl(r,n,h,A,m)}else 16&N?Ks(n,r,a,s,h,m):Nl(r,n,h,A,m);s=b?s.projectionNext:s.next}}function Va(n,r,s,a,h,m){Eh(s,a,n.firstChild,r,h,m,!1)}function Ks(n,r,s,a,h,m){const b=s[16],N=b[6].projection[a.projection];if(Array.isArray(N))for(let Z=0;Z<N.length;Z++)Nl(r,n,h,N[Z],m);else Eh(n,r,N,b[3],h,m,!0)}function xc(n,r,s){Yn(n)?n.setAttribute(r,"style",s):r.style.cssText=s}function Bd(n,r,s){Yn(n)?""===s?n.removeAttribute(r,"class"):n.setAttribute(r,"class",s):r.className=s}function jd(n,r,s){let a=n.length;for(;;){const h=n.indexOf(r,s);if(-1===h)return h;if(0===h||n.charCodeAt(h-1)<=32){const m=r.length;if(h+m===a||n.charCodeAt(h+m)<=32)return h}s=h+1}}const uf="ng-template";function gp(n,r,s){let a=0;for(;a<n.length;){let h=n[a++];if(s&&"class"===h){if(h=n[a],-1!==jd(h.toLowerCase(),r,0))return!0}else if(1===h){for(;a<n.length&&"string"==typeof(h=n[a++]);)if(h.toLowerCase()===r)return!0;return!1}}return!1}function bh(n){return 4===n.type&&n.value!==uf}function Ch(n,r,s){return r===(4!==n.type||s?n.value:uf)}function Hd(n,r,s){let a=4;const h=n.attrs||[],m=function df(n){for(let r=0;r<n.length;r++)if($s(n[r]))return r;return n.length}(h);let b=!1;for(let A=0;A<r.length;A++){const N=r[A];if("number"!=typeof N){if(!b)if(4&a){if(a=2|1&a,""!==N&&!Ch(n,N,s)||""===N&&1===r.length){if(qo(a))return!1;b=!0}}else{const Z=8&a?N:r[++A];if(8&a&&null!==n.attrs){if(!gp(n.attrs,Z,s)){if(qo(a))return!1;b=!0}continue}const ce=Tu(8&a?"class":N,h,bh(n),s);if(-1===ce){if(qo(a))return!1;b=!0;continue}if(""!==Z){let Se;Se=ce>m?"":h[ce+1].toLowerCase();const Ze=8&a?Se:null;if(Ze&&-1!==jd(Ze,Z,0)||2&a&&Z!==Se){if(qo(a))return!1;b=!0}}}}else{if(!b&&!qo(a)&&!qo(N))return!1;if(b&&qo(N))continue;b=!1,a=N|1&a}}return qo(a)||b}function qo(n){return 0==(1&n)}function Tu(n,r,s,a){if(null===r)return-1;let h=0;if(a||!s){let m=!1;for(;h<r.length;){const b=r[h];if(b===n)return h;if(3===b||6===b)m=!0;else{if(1===b||2===b){let A=r[++h];for(;"string"==typeof A;)A=r[++h];continue}if(4===b)break;if(0===b){h+=4;continue}}h+=m?1:2}return-1}return function mp(n,r){let s=n.indexOf(4);if(s>-1)for(s++;s<n.length;){const a=n[s];if("number"==typeof a)return-1;if(a===r)return s;s++}return-1}(r,n)}function Mc(n,r,s=!1){for(let a=0;a<r.length;a++)if(Hd(n,r[a],s))return!0;return!1}function tc(n,r){return n?":not("+r.trim()+")":r}function eu(n){let r=n[0],s=1,a=2,h="",m=!1;for(;s<n.length;){let b=n[s];if("string"==typeof b)if(2&a){const A=n[++s];h+="["+b+(A.length>0?'="'+A+'"':"")+"]"}else 8&a?h+="."+b:4&a&&(h+=" "+b);else""!==h&&!qo(b)&&(r+=tc(m,h),h=""),a=b,m=m||!qo(a);s++}return""!==h&&(r+=tc(m,h)),r}const Dr={};function ff(n){ad(qe(),G(),bi()+n,Lo())}function ad(n,r,s,a){if(!a)if(3==(3&r[2])){const m=n.preOrderCheckHooks;null!==m&&ki(r,m,s)}else{const m=n.preOrderHooks;null!==m&&Po(r,m,0,s)}Is(s)}function $d(n,r){return n<<17|r<<2}function Ua(n){return n>>17&32767}function Rc(n){return 2|n}function Vl(n){return(131068&n)>>2}function la(n,r){return-131069&n|r<<2}function d(n){return 1|n}function rm(n,r){const s=n.contentQueries;if(null!==s)for(let a=0;a<s.length;a+=2){const h=s[a],m=s[a+1];if(-1!==m){const b=n.data[m];rl(h),b.contentQueries(2,r[m],m)}}}function ld(n,r,s,a,h,m,b,A,N,Z){const te=r.blueprint.slice();return te[0]=h,te[2]=140|a,ds(te),te[3]=te[15]=n,te[8]=s,te[10]=b||n&&n[10],te[11]=A||n&&n[11],te[12]=N||n&&n[12]||null,te[9]=Z||n&&n[9]||null,te[6]=m,te[16]=2==r.type?n[16]:te,te}function rc(n,r,s,a,h){let m=n.data[r];if(null===m)m=function vf(n,r,s,a,h){const m=hr(),b=Us(),N=n.data[r]=function Xy(n,r,s,a,h,m){return{type:s,index:a,insertBeforeIndex:null,injectorIndex:r?r.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:m,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,b?m:m&&m.parent,s,r,a,h);return null===n.firstChild&&(n.firstChild=N),null!==m&&(b?null==m.child&&null!==N.parent&&(m.child=N):null===m.next&&(m.next=N)),N}(n,r,s,a,h),function So(){return $t.lFrame.inI18n}()&&(m.flags|=64);else if(64&m.type){m.type=s,m.value=a,m.attrs=h;const b=function Ei(){const n=$t.lFrame,r=n.currentTNode;return n.isParent?r:r.parent}();m.injectorIndex=null===b?-1:b.injectorIndex}return Mi(m,!0),m}function ud(n,r,s,a){if(0===s)return-1;const h=r.length;for(let m=0;m<s;m++)r.push(a),n.blueprint.push(a),n.data.push(null);return h}function Kd(n,r,s){js(r);try{const a=n.viewQuery;null!==a&&Qd(1,a,s);const h=n.template;null!==h&&im(n,r,h,1,s),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&rm(n,r),n.staticViewQueries&&Qd(2,n.viewQuery,s);const m=n.components;null!==m&&function qd(n,r){for(let s=0;s<r.length;s++)Rp(n,r[s])}(r,m)}catch(a){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),a}finally{r[2]&=-5,Hs()}}function Zd(n,r,s,a){const h=r[2];if(256==(256&h))return;js(r);const m=Lo();try{ds(r),function da(n){return $t.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==s&&im(n,r,s,2,a);const b=3==(3&h);if(!m)if(b){const Z=n.preOrderCheckHooks;null!==Z&&ki(r,Z,null)}else{const Z=n.preOrderHooks;null!==Z&&Po(r,Z,0,null),gi(r,0)}if(function xh(n){for(let r=Ju(n);null!==r;r=Xu(r)){if(!r[2])continue;const s=r[9];for(let a=0;a<s.length;a++){const h=s[a],m=h[3];0==(1024&h[2])&&wi(m,1),h[2]|=1024}}}(r),function Af(n){for(let r=Ju(n);null!==r;r=Xu(r))for(let s=10;s<r.length;s++){const a=r[s],h=a[1];jr(a)&&Zd(h,a,h.template,a[8])}}(r),null!==n.contentQueries&&rm(n,r),!m)if(b){const Z=n.contentCheckHooks;null!==Z&&ki(r,Z)}else{const Z=n.contentHooks;null!==Z&&Po(r,Z,1),gi(r,1)}!function nm(n,r){const s=n.hostBindingOpCodes;if(null!==s)try{for(let a=0;a<s.length;a++){const h=s[a];if(h<0)Is(~h);else{const m=h,b=s[++a],A=s[++a];Vo(b,m),A(2,r[m])}}}finally{Is(-1)}}(n,r);const A=n.components;null!==A&&function zd(n,r){for(let s=0;s<r.length;s++)Pp(n,r[s])}(r,A);const N=n.viewQuery;if(null!==N&&Qd(2,N,a),!m)if(b){const Z=n.viewCheckHooks;null!==Z&&ki(r,Z)}else{const Z=n.viewHooks;null!==Z&&Po(r,Z,2),gi(r,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),m||(r[2]&=-73),1024&r[2]&&(r[2]&=-1025,wi(r[3],-1))}finally{Hs()}}function Ep(n,r,s,a){const h=r[10],m=!Lo(),b=zn(r);try{m&&!b&&h.begin&&h.begin(),b&&Kd(n,r,a),Zd(n,r,s,a)}finally{m&&!b&&h.end&&h.end()}}function im(n,r,s,a,h){const m=bi(),b=2&a;try{Is(-1),b&&r.length>20&&ad(n,r,20,Lo()),s(a,h)}finally{Is(m)}}function bp(n,r,s){!$()||(function t_(n,r,s,a){const h=s.directiveStart,m=s.directiveEnd;n.firstCreatePass||Nt(s,r),co(a,r);const b=s.initialInputs;for(let A=h;A<m;A++){const N=n.data[A],Z=Ui(N);Z&&r_(r,s,N);const te=nn(r,n,A,s);co(te,r),null!==b&&Ah(0,A-h,te,N,0,b),Z&&(Jn(s.index,r)[8]=te)}}(n,r,s,It(s,r)),128==(128&s.flags)&&function n_(n,r,s){const a=s.directiveStart,h=s.directiveEnd,b=s.index,A=function Ko(){return $t.lFrame.currentDirectiveIndex}();try{Is(b);for(let N=a;N<h;N++){const Z=n.data[N],te=r[N];Ca(N),(null!==Z.hostBindings||0!==Z.hostVars||null!==Z.hostAttrs)&&Ap(Z,te)}}finally{Is(-1),Ca(A)}}(n,r,s))}function Cp(n,r,s=It){const a=r.localNames;if(null!==a){let h=r.index+1;for(let m=0;m<a.length;m+=2){const b=a[m+1],A=-1===b?s(r,n):n[b];n[h++]=A}}}function Ef(n){const r=n.tView;return null===r||r.incompleteFirstPass?n.tView=po(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):r}function po(n,r,s,a,h,m,b,A,N,Z){const te=20+a,ce=te+h,Se=function Jy(n,r){const s=[];for(let a=0;a<r;a++)s.push(a<n?null:Dr);return s}(te,ce),Ze="function"==typeof Z?Z():Z;return Se[1]={type:n,blueprint:Se,template:s,queries:null,viewQuery:A,declTNode:r,data:Se.slice().fill(null,te),bindingStartIndex:te,expandoStartIndex:ce,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof m?m():m,pipeRegistry:"function"==typeof b?b():b,firstChild:null,schemas:N,consts:Ze,incompleteFirstPass:!1}}function am(n,r,s,a){const h=cd(r);null===s?h.push(a):(h.push(s),n.firstCreatePass&&Pf(n).push(a,h.length-1))}function bf(n,r,s){for(let a in n)if(n.hasOwnProperty(a)){const h=n[a];(s=null===s?{}:s).hasOwnProperty(a)?s[a].push(r,h):s[a]=[r,h]}return s}function ja(n,r,s,a,h,m,b,A){const N=It(r,s);let te,Z=r.inputs;!A&&null!=Z&&(te=Z[a])?(Fp(n,s,te,a,h),os(r)&&function Cf(n,r){const s=Jn(r,n);16&s[2]||(s[2]|=64)}(s,r.index)):3&r.type&&(a=function um(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(a),h=null!=b?b(h,r.value||"",a):h,Yn(m)?m.setProperty(N,a,h):S(a)||(N.setProperty?N.setProperty(a,h):N[a]=h))}function Dp(n,r,s,a){let h=!1;if($()){const m=function Df(n,r,s){const a=n.directiveRegistry;let h=null;if(a)for(let m=0;m<a.length;m++){const b=a[m];Mc(s,b.selectors,!1)&&(h||(h=[]),T(Nt(s,r),n,b.type),Ui(b)?(Yd(n,s),h.unshift(b)):h.push(b))}return h}(n,r,s),b=null===a?null:{"":-1};if(null!==m){h=!0,pm(s,n.data.length,m.length);for(let te=0;te<m.length;te++){const ce=m[te];ce.providersResolver&&ce.providersResolver(ce)}let A=!1,N=!1,Z=ud(n,r,m.length,null);for(let te=0;te<m.length;te++){const ce=m[te];s.mergedAttrs=x(s.mergedAttrs,ce.hostAttrs),gm(n,s,r,Z,ce),fm(Z,ce,b),null!==ce.contentQueries&&(s.flags|=8),(null!==ce.hostBindings||null!==ce.hostAttrs||0!==ce.hostVars)&&(s.flags|=128);const Se=ce.type.prototype;!A&&(Se.ngOnChanges||Se.ngOnInit||Se.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(s.index),A=!0),!N&&(Se.ngOnChanges||Se.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(s.index),N=!0),Z++}!function lm(n,r){const a=r.directiveEnd,h=n.data,m=r.attrs,b=[];let A=null,N=null;for(let Z=r.directiveStart;Z<a;Z++){const te=h[Z],ce=te.inputs,Se=null===m||bh(r)?null:Mp(ce,m);b.push(Se),A=bf(ce,Z,A),N=bf(te.outputs,Z,N)}null!==A&&(A.hasOwnProperty("class")&&(r.flags|=16),A.hasOwnProperty("style")&&(r.flags|=32)),r.initialInputs=b,r.inputs=A,r.outputs=N}(n,s)}b&&function Sp(n,r,s){if(r){const a=n.localNames=[];for(let h=0;h<r.length;h+=2){const m=s[r[h+1]];if(null==m)throw new Et(-301,!1);a.push(r[h],m)}}}(s,a,b)}return s.mergedAttrs=x(s.mergedAttrs,s.attrs),h}function Tp(n,r,s,a,h,m){const b=m.hostBindings;if(b){let A=n.hostBindingOpCodes;null===A&&(A=n.hostBindingOpCodes=[]);const N=~r.index;(function e_(n){let r=n.length;for(;r>0;){const s=n[--r];if("number"==typeof s&&s<0)return s}return 0})(A)!=N&&A.push(N),A.push(a,h,b)}}function Ap(n,r){null!==n.hostBindings&&n.hostBindings(1,r)}function Yd(n,r){r.flags|=2,(n.components||(n.components=[])).push(r.index)}function fm(n,r,s){if(s){if(r.exportAs)for(let a=0;a<r.exportAs.length;a++)s[r.exportAs[a]]=n;Ui(r)&&(s[""]=n)}}function pm(n,r,s){n.flags|=1,n.directiveStart=r,n.directiveEnd=r+s,n.providerIndexes=r}function gm(n,r,s,a,h){n.data[a]=h;const m=h.factory||(h.factory=li(h.type)),b=new Ci(m,Ui(h),null);n.blueprint[a]=b,s[a]=b,Tp(n,r,0,a,ud(n,s,h.hostVars,Dr),h)}function r_(n,r,s){const a=It(r,n),h=Ef(s),m=n[10],b=nu(n,ld(n,h,null,s.onPush?64:16,a,r,m,m.createRenderer(a,s),null,null));n[r.index]=b}function Mu(n,r,s,a,h,m){const b=It(n,r);!function xp(n,r,s,a,h,m,b){if(null==m)Yn(n)?n.removeAttribute(r,h,s):r.removeAttribute(h);else{const A=null==b?tt(m):b(m,a||"",h);Yn(n)?n.setAttribute(r,h,A,s):s?r.setAttributeNS(s,h,A):r.setAttribute(h,A)}}(r[11],b,m,n.value,s,a,h)}function Ah(n,r,s,a,h,m){const b=m[r];if(null!==b){const A=a.setInput;for(let N=0;N<b.length;){const Z=b[N++],te=b[N++],ce=b[N++];null!==A?a.setInput(s,ce,Z,te):s[te]=ce}}}function Mp(n,r){let s=null,a=0;for(;a<r.length;){const h=r[a];if(0!==h)if(5!==h){if("number"==typeof h)break;n.hasOwnProperty(h)&&(null===s&&(s=[]),s.push(h,n[h],r[a+1])),a+=2}else a+=2;else a+=4}return s}function Tf(n,r,s,a){return new Array(n,!0,!1,r,null,0,a,s,null,null)}function Pp(n,r){const s=Jn(r,n);if(jr(s)){const a=s[1];80&s[2]?Zd(a,s,a.template,s[8]):s[5]>0&&Sf(s)}}function Sf(n){for(let a=Ju(n);null!==a;a=Xu(a))for(let h=10;h<a.length;h++){const m=a[h];if(1024&m[2]){const b=m[1];Zd(b,m,b.template,m[8])}else m[5]>0&&Sf(m)}const s=n[1].components;if(null!==s)for(let a=0;a<s.length;a++){const h=Jn(s[a],n);jr(h)&&h[5]>0&&Sf(h)}}function Rp(n,r){const s=Jn(r,n),a=s[1];(function Op(n,r){for(let s=r.length;s<n.blueprint.length;s++)r.push(n.blueprint[s])})(a,s),Kd(a,s,s[8])}function nu(n,r){return n[13]?n[14][4]=r:n[13]=r,n[14]=r,r}function xf(n){for(;n;){n[2]|=64;const r=Jr(n);if(Fs(n)&&!r)return n;n=r}return null}function Np(n,r,s){const a=r[10];a.begin&&a.begin();try{Zd(n,r,n.template,s)}catch(h){throw vm(r,h),h}finally{a.end&&a.end()}}function Mf(n){!function Mh(n){for(let r=0;r<n.components.length;r++){const s=n.components[r],a=bc(s),h=a[1];Ep(h,a,h.template,s)}}(n[8])}function Qd(n,r,s){rl(0),r(n,s)}const ym=(()=>Promise.resolve(null))();function cd(n){return n[7]||(n[7]=[])}function Pf(n){return n.cleanup||(n.cleanup=[])}function vm(n,r){const s=n[9],a=s?s.get(zs,null):null;a&&a.handleError(r)}function Fp(n,r,s,a,h){for(let m=0;m<s.length;){const b=s[m++],A=s[m++],N=r[b],Z=n.data[b];null!==Z.setInput?Z.setInput(N,h,a,A):N[A]=h}}function Pu(n,r,s){const a=lt(r,n);!function nd(n,r,s){Yn(n)?n.setValue(r,s):r.textContent=s}(n[11],a,s)}function Rf(n,r,s){let a=s?n.styles:null,h=s?n.classes:null,m=0;if(null!==r)for(let b=0;b<r.length;b++){const A=r[b];"number"==typeof A?m=A:1==m?h=We(h,A):2==m&&(a=We(a,A+": "+r[++b]+";"))}s?n.styles=a:n.stylesWithoutHost=a,s?n.classes=h:n.classesWithoutHost=h}const Vp=new hi("INJECTOR",-1);class Of{get(r,s=ga){if(s===ga){const a=new Error(`NullInjectorError: No provider for ${Ue(r)}!`);throw a.name="NullInjectorError",a}return s}}const Up=new hi("Set Injector scope."),dd={},Em={};let Ph;function Nf(){return void 0===Ph&&(Ph=new Of),Ph}function kf(n,r=null,s=null,a){const h=hd(n,r,s,a);return h._resolveInjectorDefTypes(),h}function hd(n,r=null,s=null,a){return new Nc(n,s,r||Nf(),a)}class Nc{constructor(r,s,a,h=null){this.parent=a,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const m=[];s&&Ho(s,A=>this.processProvider(A,r,s)),Ho([r],A=>this.processInjectorType(A,[],m)),this.records.set(Vp,ru(void 0,this));const b=this.records.get(Up);this.scope=null!=b?b.value:null,this.source=h||("object"==typeof r?null:Ue(r))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(r=>r.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(r,s=ga,a=zt.Default){this.assertNotDestroyed();const h=Bt(this),m=un(void 0);try{if(!(a&zt.SkipSelf)){let A=this.records.get(r);if(void 0===A){const N=function u_(n){return"function"==typeof n||"object"==typeof n&&n instanceof hi}(r)&&On(r);A=N&&this.injectableDefInScope(N)?ru(Rh(r),dd):null,this.records.set(r,A)}if(null!=A)return this.hydrate(r,A)}return(a&zt.Self?Nf():this.parent).get(r,s=a&zt.Optional&&s===ga?null:s)}catch(b){if("NullInjectorError"===b.name){if((b[cu]=b[cu]||[]).unshift(Ue(r)),h)throw b;return function $o(n,r,s,a){const h=n[cu];throw r[me]&&h.unshift(r[me]),n.message=function Pa(n,r,s,a=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.substr(2):n;let h=Ue(r);if(Array.isArray(r))h=r.map(Ue).join(" -> ");else if("object"==typeof r){let m=[];for(let b in r)if(r.hasOwnProperty(b)){let A=r[b];m.push(b+":"+("string"==typeof A?JSON.stringify(A):Ue(A)))}h=`{${m.join(", ")}}`}return`${s}${a?"("+a+")":""}[${h}]: ${n.replace(H,"\n  ")}`}("\n"+n.message,h,s,a),n.ngTokenPath=h,n[cu]=null,n}(b,r,"R3InjectorError",this.source)}throw b}finally{un(m),Bt(h)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(r=>this.get(r))}toString(){const r=[];return this.records.forEach((a,h)=>r.push(Ue(h))),`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Et(205,!1)}processInjectorType(r,s,a){if(!(r=Fe(r)))return!1;let h=ar(r);const m=null==h&&r.ngModule||void 0,b=void 0===m?r:m,A=-1!==a.indexOf(b);if(void 0!==m&&(h=ar(m)),null==h)return!1;if(null!=h.imports&&!A){let te;a.push(b);try{Ho(h.imports,ce=>{this.processInjectorType(ce,s,a)&&(void 0===te&&(te=[]),te.push(ce))})}finally{}if(void 0!==te)for(let ce=0;ce<te.length;ce++){const{ngModule:Se,providers:Ze}=te[ce];Ho(Ze,Tt=>this.processProvider(Tt,Se,Ze||Lt))}}this.injectorDefTypes.add(b);const N=li(b)||(()=>new b);this.records.set(b,ru(N,dd));const Z=h.providers;if(null!=Z&&!A){const te=r;Ho(Z,ce=>this.processProvider(ce,te,Z))}return void 0!==m&&void 0!==r.providers}processProvider(r,s,a){let h=kc(r=Fe(r))?r:Fe(r&&r.provide);const m=function Xd(n,r,s){return bm(n)?ru(void 0,n.useValue):ru(Bp(n),dd)}(r);if(kc(r)||!0!==r.multi)this.records.get(h);else{let b=this.records.get(h);b||(b=ru(void 0,dd,!0),b.factory=()=>gr(b.multi),this.records.set(h,b)),h=r,b.multi.push(r)}this.records.set(h,m)}hydrate(r,s){return s.value===dd&&(s.value=Em,s.value=s.factory()),"object"==typeof s.value&&s.value&&function l_(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(s.value)&&this.onDestroy.add(s.value),s.value}injectableDefInScope(r){if(!r.providedIn)return!1;const s=Fe(r.providedIn);return"string"==typeof s?"any"===s||s===this.scope:this.injectorDefTypes.has(s)}}function Rh(n){const r=On(n),s=null!==r?r.factory:li(n);if(null!==s)return s;if(n instanceof hi)throw new Et(204,!1);if(n instanceof Function)return function Jd(n){const r=n.length;if(r>0)throw function Ws(n,r){const s=[];for(let a=0;a<n;a++)s.push(r);return s}(r,"?"),new Et(204,!1);const s=function Sn(n){const r=n&&(n[fr]||n[Nr]);if(r){const s=function Mr(n){if(n.hasOwnProperty("name"))return n.name;const r=(""+n).match(/^function\s*([^\s(]+)/);return null===r?"":r[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${s}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${s}" class.`),r}return null}(n);return null!==s?()=>s.factory(n):()=>new n}(n);throw new Et(204,!1)}function Bp(n,r,s){let a;if(kc(n)){const h=Fe(n);return li(h)||Rh(h)}if(bm(n))a=()=>Fe(n.useValue);else if(function jp(n){return!(!n||!n.useFactory)}(n))a=()=>n.useFactory(...gr(n.deps||[]));else if(function a_(n){return!(!n||!n.useExisting)}(n))a=()=>Mn(Fe(n.useExisting));else{const h=Fe(n&&(n.useClass||n.provide));if(!function $p(n){return!!n.deps}(n))return li(h)||Rh(h);a=()=>new h(...gr(n.deps))}return a}function ru(n,r,s=!1){return{factory:n,value:r,multi:s?[]:void 0}}function bm(n){return null!==n&&"object"==typeof n&&Ge in n}function kc(n){return"function"==typeof n}let vl=(()=>{class n{static create(s,a){var h;if(Array.isArray(s))return kf({name:""},a,s,"");{const m=null!==(h=s.name)&&void 0!==h?h:"";return kf({name:m},s.parent,s.providers,m)}}}return n.THROW_IF_NOT_FOUND=ga,n.NULL=new Of,n.\u0275prov=rn({token:n,providedIn:"any",factory:()=>Mn(Vp)}),n.__NG_ELEMENT_ID__=-1,n})();function Zp(n,r){to(bc(n)[1],$n())}function kh(n){let r=function Vf(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),s=!0;const a=[n];for(;r;){let h;if(Ui(n))h=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new Et(903,"");h=r.\u0275dir}if(h){if(s){a.push(h);const b=n;b.inputs=Fc(n.inputs),b.declaredInputs=Fc(n.declaredInputs),b.outputs=Fc(n.outputs);const A=h.hostBindings;A&&h_(n,A);const N=h.viewQuery,Z=h.contentQueries;if(N&&km(n,N),Z&&Qp(n,Z),je(n.inputs,h.inputs),je(n.declaredInputs,h.declaredInputs),je(n.outputs,h.outputs),Ui(h)&&h.data.animation){const te=n.data;te.animation=(te.animation||[]).concat(h.data.animation)}}const m=h.features;if(m)for(let b=0;b<m.length;b++){const A=m[b];A&&A.ngInherit&&A(n),A===kh&&(s=!1)}}r=Object.getPrototypeOf(r)}!function Yp(n){let r=0,s=null;for(let a=n.length-1;a>=0;a--){const h=n[a];h.hostVars=r+=h.hostVars,h.hostAttrs=x(h.hostAttrs,s=x(s,h.hostAttrs))}}(a)}function Fc(n){return n===sr?{}:n===Lt?[]:n}function km(n,r){const s=n.viewQuery;n.viewQuery=s?(a,h)=>{r(a,h),s(a,h)}:r}function Qp(n,r){const s=n.contentQueries;n.contentQueries=s?(a,h,m)=>{r(a,h,m),s(a,h,m)}:r}function h_(n,r){const s=n.hostBindings;n.hostBindings=s?(a,h)=>{r(a,h),s(a,h)}:r}let Uf=null;function Lc(){if(!Uf){const n=sn.Symbol;if(n&&n.iterator)Uf=n.iterator;else{const r=Object.getOwnPropertyNames(Map.prototype);for(let s=0;s<r.length;++s){const a=r[s];"entries"!==a&&"size"!==a&&Map.prototype[a]===Map.prototype.entries&&(Uf=a)}}}return Uf}function Fh(n){return!!Lh(n)&&(Array.isArray(n)||!(n instanceof Map)&&Lc()in n)}function Lh(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function va(n,r,s){return!Object.is(n[r],s)&&(n[r]=s,!0)}function Bf(n,r,s,a){const h=G();return va(h,Yi(),r)&&(qe(),Mu(di(),h,n,r,s,a)),Bf}function th(n,r,s,a){return va(n,Yi(),s)?r+tt(s)+a:Dr}function Hf(n,r,s,a,h,m,b,A){const N=G(),Z=qe(),te=n+20,ce=Z.firstCreatePass?function jm(n,r,s,a,h,m,b,A,N){const Z=r.consts,te=rc(r,n,4,b||null,Vr(Z,A));Dp(r,s,te,Vr(Z,N)),to(r,te);const ce=te.tViews=po(2,te,a,h,m,r.directiveRegistry,r.pipeRegistry,null,r.schemas,Z);return null!==r.queries&&(r.queries.template(r,te),ce.queries=r.queries.embeddedTView(te)),te}(te,Z,N,r,s,a,h,m,b):Z.data[te];Mi(ce,!1);const Se=N[11].createComment("");Ac(Z,N,Se,ce),co(Se,N),nu(N,N[te]=Tf(Se,N,Se,ce)),as(ce)&&bp(Z,N,ce),null!=b&&Cp(N,ce,A)}function $h(n,r=zt.Default){const s=G();return null===s?Mn(n,r):O($n(),s,Fe(n),r)}function vs(){throw new Error("invalid")}function Ym(n,r,s){const a=G();return va(a,Yi(),r)&&ja(qe(),di(),a,n,r,a[11],s,!1),Ym}function Qm(n,r,s,a,h){const b=h?"class":"style";Fp(n,s,r.inputs[b],b,a)}function Gh(n,r,s,a){const h=G(),m=qe(),b=20+n,A=h[11],N=h[b]=Tc(A,r,function Da(){return $t.lFrame.currentNamespace}()),Z=m.firstCreatePass?function To(n,r,s,a,h,m,b){const A=r.consts,Z=rc(r,n,2,h,Vr(A,m));return Dp(r,s,Z,Vr(A,b)),null!==Z.attrs&&Rf(Z,Z.attrs,!1),null!==Z.mergedAttrs&&Rf(Z,Z.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,Z),Z}(b,m,h,0,r,s,a):m.data[b];Mi(Z,!0);const te=Z.mergedAttrs;null!==te&&Ts(A,N,te);const ce=Z.classes;null!==ce&&Bd(A,N,ce);const Se=Z.styles;return null!==Se&&xc(A,N,Se),64!=(64&Z.flags)&&Ac(m,h,N,Z),0===function wo(){return $t.lFrame.elementDepthCount}()&&co(N,h),function Vs(){$t.lFrame.elementDepthCount++}(),as(Z)&&(bp(m,h,Z),function wf(n,r,s){if(yo(r)){const h=r.directiveEnd;for(let m=r.directiveStart;m<h;m++){const b=n.data[m];b.contentQueries&&b.contentQueries(1,s[m],m)}}}(m,Z,h)),null!==a&&Cp(h,Z),Gh}function Kf(){let n=$n();Us()?function ns(){$t.lFrame.isParent=!1}():(n=n.parent,Mi(n,!1));const r=n;!function Wi(){$t.lFrame.elementDepthCount--}();const s=qe();return s.firstCreatePass&&(to(s,n),yo(n)&&s.queries.elementEnd(n)),null!=r.classesWithoutHost&&function Oo(n){return 0!=(16&n.flags)}(r)&&Qm(s,r,G(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function Ns(n){return 0!=(32&n.flags)}(r)&&Qm(s,r,G(),r.stylesWithoutHost,!1),Kf}function gg(n,r,s,a){return Gh(n,r,s,a),Kf(),gg}function I_(){return G()}function _g(n){return!!n&&"function"==typeof n.then}function Xm(n){return!!n&&"function"==typeof n.subscribe}const vg=Xm;function su(n,r,s,a){const h=G(),m=qe(),b=$n();return function Hc(n,r,s,a,h,m,b,A){const N=as(a),te=n.firstCreatePass&&Pf(n),ce=r[8],Se=cd(r);let Ze=!0;if(3&a.type||A){const gn=It(a,r),Ln=A?A(gn):gn,kt=Se.length,ur=A?oi=>A(V(oi[a.index])):a.index;if(Yn(s)){let oi=null;if(!A&&N&&(oi=function Ou(n,r,s,a){const h=n.cleanup;if(null!=h)for(let m=0;m<h.length-1;m+=2){const b=h[m];if(b===s&&h[m+1]===a){const A=r[7],N=h[m+2];return A.length>N?A[N]:null}"string"==typeof b&&(m+=2)}return null}(n,r,h,a.index)),null!==oi)(oi.__ngLastListenerFn__||oi).__ngNextListenerFn__=m,oi.__ngLastListenerFn__=m,Ze=!1;else{m=wg(a,r,ce,m,!1);const qi=s.listen(Ln,h,m);Se.push(m,qi),te&&te.push(h,ur,kt,kt+1)}}else m=wg(a,r,ce,m,!0),Ln.addEventListener(h,m,b),Se.push(m),te&&te.push(h,ur,kt,b)}else m=wg(a,r,ce,m,!1);const Tt=a.outputs;let Xt;if(Ze&&null!==Tt&&(Xt=Tt[h])){const gn=Xt.length;if(gn)for(let Ln=0;Ln<gn;Ln+=2){const lu=r[Xt[Ln]][Xt[Ln+1]].subscribe(m),Jh=Se.length;Se.push(m,lu),te&&te.push(h,a.index,Jh,-(Jh+1))}}}(m,h,h[11],b,n,r,!!s,a),su}function Wh(n,r,s,a){try{return!1!==s(a)}catch(h){return vm(n,h),!1}}function wg(n,r,s,a,h){return function m(b){if(b===Function)return a;const A=2&n.flags?Jn(n.index,r):r;0==(32&r[2])&&xf(A);let N=Wh(r,0,a,b),Z=m.__ngNextListenerFn__;for(;Z;)N=Wh(r,0,Z,b)&&N,Z=Z.__ngNextListenerFn__;return h&&!1===N&&(b.preventDefault(),b.returnValue=!1),N}}function ey(n=1){return function Mo(n){return($t.lFrame.contextLView=function Ga(n,r){for(;n>0;)r=r[15],n--;return r}(n,$t.lFrame.contextLView))[8]}(n)}function Eg(n,r,s){return Nu(n,"",r,"",s),Eg}function Nu(n,r,s,a,h){const m=G(),b=th(m,r,s,a);return b!==Dr&&ja(qe(),di(),m,n,b,m[11],h,!1),Nu}function Cg(n,r,s,a,h){const m=n[s+1],b=null===r;let A=a?Ua(m):Vl(m),N=!1;for(;0!==A&&(!1===N||b);){const te=n[A+1];ly(n[A],r)&&(N=!0,n[A+1]=a?d(te):Rc(te)),A=a?Ua(te):Vl(te)}N&&(n[s+1]=a?Rc(m):d(m))}function ly(n,r){return null===n||null==r||(Array.isArray(n)?n[1]:n)===r||!(!Array.isArray(n)||"string"!=typeof r)&&sl(n,r)>=0}function vd(n,r){return function ou(n,r,s,a){const h=G(),m=qe(),b=function ji(n){const r=$t.lFrame,s=r.bindingIndex;return r.bindingIndex=r.bindingIndex+n,s}(2);m.firstUpdatePass&&function fy(n,r,s,a){const h=n.data;if(null===h[s+1]){const m=h[bi()],b=function hy(n,r){return r>=n.expandoStartIndex}(n,s);(function Sg(n,r){return 0!=(n.flags&(r?16:32))})(m,a)&&null===r&&!b&&(r=!1),r=function py(n,r,s,a){const h=function Uo(n){const r=$t.lFrame.currentDirectiveIndex;return-1===r?null:n[r]}(n);let m=a?r.residualClasses:r.residualStyles;if(null===h)0===(a?r.classBindings:r.styleBindings)&&(s=Kh(s=Dg(null,n,r,s,a),r.attrs,a),m=null);else{const b=r.directiveStylingLast;if(-1===b||n[b]!==h)if(s=Dg(h,n,r,s,a),null===m){let N=function M_(n,r,s){const a=s?r.classBindings:r.styleBindings;if(0!==Vl(a))return n[Ua(a)]}(n,r,a);void 0!==N&&Array.isArray(N)&&(N=Dg(null,n,r,N[1],a),N=Kh(N,r.attrs,a),function P_(n,r,s,a){n[Ua(s?r.classBindings:r.styleBindings)]=a}(n,r,a,N))}else m=function gy(n,r,s){let a;const h=r.directiveEnd;for(let m=1+r.directiveStylingLast;m<h;m++)a=Kh(a,n[m].hostAttrs,s);return Kh(a,r.attrs,s)}(n,r,a)}return void 0!==m&&(a?r.residualClasses=m:r.residualStyles=m),s}(h,m,r,a),function ay(n,r,s,a,h,m){let b=m?r.classBindings:r.styleBindings,A=Ua(b),N=Vl(b);n[a]=s;let te,Z=!1;if(Array.isArray(s)){const ce=s;te=ce[1],(null===te||sl(ce,te)>0)&&(Z=!0)}else te=s;if(h)if(0!==N){const Se=Ua(n[A+1]);n[a+1]=$d(Se,A),0!==Se&&(n[Se+1]=la(n[Se+1],a)),n[A+1]=function Gd(n,r){return 131071&n|r<<17}(n[A+1],a)}else n[a+1]=$d(A,0),0!==A&&(n[A+1]=la(n[A+1],a)),A=a;else n[a+1]=$d(N,0),0===A?A=a:n[N+1]=la(n[N+1],a),N=a;Z&&(n[a+1]=Rc(n[a+1])),Cg(n,te,a,!0),Cg(n,te,a,!1),function yd(n,r,s,a,h){const m=h?n.residualClasses:n.residualStyles;null!=m&&"string"==typeof r&&sl(m,r)>=0&&(s[a+1]=d(s[a+1]))}(r,te,n,a,m),b=$d(A,N),m?r.classBindings=b:r.styleBindings=b}(h,m,r,s,b,a)}}(m,n,b,a),r!==Dr&&va(h,b,r)&&function Ag(n,r,s,a,h,m,b,A){if(!(3&r.type))return;const N=n.data,Z=N[A+1];wd(function Ih(n){return 1==(1&n)}(Z)?ep(N,r,s,h,Vl(Z),b):void 0)||(wd(m)||function Pc(n){return 2==(2&n)}(Z)&&(m=ep(N,null,s,h,A,b)),function Sc(n,r,s,a,h){const m=Yn(n);if(r)h?m?n.addClass(s,a):s.classList.add(a):m?n.removeClass(s,a):s.classList.remove(a);else{let b=-1===a.indexOf("-")?void 0:ft.DashCase;if(null==h)m?n.removeStyle(s,a,b):s.style.removeProperty(a);else{const A="string"==typeof h&&h.endsWith("!important");A&&(h=h.slice(0,-10),b|=ft.Important),m?n.setStyle(s,a,h,b):s.style.setProperty(a,h,A?"important":"")}}}(a,b,lt(bi(),s),h,m))}(m,m.data[bi()],h,h[11],n,h[b+1]=function R_(n,r){return null==n||("string"==typeof r?n+=r:"object"==typeof n&&(n=Ue(ya(n)))),n}(r,s),a,b)}(n,r,null,!0),vd}function Dg(n,r,s,a,h){let m=null;const b=s.directiveEnd;let A=s.directiveStylingLast;for(-1===A?A=s.directiveStart:A++;A<b&&(m=r[A],a=Kh(a,m.hostAttrs,h),m!==n);)A++;return null!==n&&(s.directiveStylingLast=A),a}function Kh(n,r,s){const a=s?1:2;let h=-1;if(null!==r)for(let m=0;m<r.length;m++){const b=r[m];"number"==typeof b?h=b:h===a&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),As(n,b,!!s||r[++m]))}return void 0===n?null:n}function ep(n,r,s,a,h,m){const b=null===r;let A;for(;h>0;){const N=n[h],Z=Array.isArray(N),te=Z?N[1]:N,ce=null===te;let Se=s[h+1];Se===Dr&&(Se=ce?Lt:void 0);let Ze=ce?xa(Se,a):te===a?Se:void 0;if(Z&&!wd(Ze)&&(Ze=xa(N,a)),wd(Ze)&&(A=Ze,b))return A;const Tt=n[h+1];h=b?Ua(Tt):Vl(Tt)}if(null!==r){let N=m?r.residualClasses:r.residualStyles;null!=N&&(A=xa(N,a))}return A}function wd(n){return void 0!==n}function lc(n,r=""){const s=G(),a=qe(),h=n+20,m=a.firstCreatePass?rc(a,h,1,r,null):a.data[h],b=s[h]=function Dc(n,r){return Yn(n)?n.createText(r):n.createTextNode(r)}(s[11],r);Ac(a,s,b,m),Mi(m,!1)}function xg(n){return Fu("",n,""),xg}function Fu(n,r,s){const a=G(),h=th(a,n,r,s);return h!==Dr&&Pu(a,bi(),h),Fu}const wl=void 0;var Ha=["en",[["a","p"],["AM","PM"],wl],[["AM","PM"],wl,wl],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],wl,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],wl,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",wl,"{1} 'at' {0}",wl],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function jl(n){const s=Math.floor(Math.abs(n)),a=n.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===a?1:5}];let Ed={};function bd(n){const r=function Cd(n){return n.toLowerCase().replace(/_/g,"-")}(n);let s=xy(r);if(s)return s;const a=r.split("-")[0];if(s=xy(a),s)return s;if("en"===a)return Ha;throw new Error(`Missing locale data for the locale "${n}".`)}function Ea(n){return bd(n)[Xn.PluralCase]}function xy(n){return n in Ed||(Ed[n]=sn.ng&&sn.ng.common&&sn.ng.common.locales&&sn.ng.common.locales[n]),Ed[n]}var Xn=(()=>((Xn=Xn||{})[Xn.LocaleId=0]="LocaleId",Xn[Xn.DayPeriodsFormat=1]="DayPeriodsFormat",Xn[Xn.DayPeriodsStandalone=2]="DayPeriodsStandalone",Xn[Xn.DaysFormat=3]="DaysFormat",Xn[Xn.DaysStandalone=4]="DaysStandalone",Xn[Xn.MonthsFormat=5]="MonthsFormat",Xn[Xn.MonthsStandalone=6]="MonthsStandalone",Xn[Xn.Eras=7]="Eras",Xn[Xn.FirstDayOfWeek=8]="FirstDayOfWeek",Xn[Xn.WeekendRange=9]="WeekendRange",Xn[Xn.DateFormat=10]="DateFormat",Xn[Xn.TimeFormat=11]="TimeFormat",Xn[Xn.DateTimeFormat=12]="DateTimeFormat",Xn[Xn.NumberSymbols=13]="NumberSymbols",Xn[Xn.NumberFormats=14]="NumberFormats",Xn[Xn.CurrencyCode=15]="CurrencyCode",Xn[Xn.CurrencySymbol=16]="CurrencySymbol",Xn[Xn.CurrencyName=17]="CurrencyName",Xn[Xn.Currencies=18]="Currencies",Xn[Xn.Directionality=19]="Directionality",Xn[Xn.PluralCase=20]="PluralCase",Xn[Xn.ExtraData=21]="ExtraData",Xn))();const rp="en-US";let Py=rp;function X_(n,r,s,a,h){if(n=Fe(n),Array.isArray(n))for(let m=0;m<n.length;m++)X_(n[m],r,s,a,h);else{const m=qe(),b=G();let A=kc(n)?n:Fe(n.provide),N=Bp(n);const Z=$n(),te=1048575&Z.providerIndexes,ce=Z.directiveStart,Se=Z.providerIndexes>>20;if(kc(n)||!n.multi){const Ze=new Ci(N,h,$h),Tt=tv(A,r,h?te:te+Se,ce);-1===Tt?(T(Nt(Z,b),m,A),ev(m,n,r.length),r.push(A),Z.directiveStart++,Z.directiveEnd++,h&&(Z.providerIndexes+=1048576),s.push(Ze),b.push(Ze)):(s[Tt]=Ze,b[Tt]=Ze)}else{const Ze=tv(A,r,te+Se,ce),Tt=tv(A,r,te,te+Se),Xt=Ze>=0&&s[Ze],gn=Tt>=0&&s[Tt];if(h&&!gn||!h&&!Xt){T(Nt(Z,b),m,A);const Ln=function sE(n,r,s,a,h){const m=new Ci(n,s,$h);return m.multi=[],m.index=r,m.componentProviders=0,cw(m,h,a&&!s),m}(h?iE:rE,s.length,h,a,N);!h&&gn&&(s[Tt].providerFactory=Ln),ev(m,n,r.length,0),r.push(A),Z.directiveStart++,Z.directiveEnd++,h&&(Z.providerIndexes+=1048576),s.push(Ln),b.push(Ln)}else ev(m,n,Ze>-1?Ze:Tt,cw(s[h?Tt:Ze],N,!h&&a));!h&&a&&gn&&s[Tt].componentProviders++}}}function ev(n,r,s,a){const h=kc(r),m=function Hp(n){return!!n.useClass}(r);if(h||m){const N=(m?Fe(r.useClass):r).prototype.ngOnDestroy;if(N){const Z=n.destroyHooks||(n.destroyHooks=[]);if(!h&&r.multi){const te=Z.indexOf(s);-1===te?Z.push(s,[a,N]):Z[te+1].push(a,N)}else Z.push(s,N)}}}function cw(n,r,s){return s&&n.componentProviders++,n.multi.push(r)-1}function tv(n,r,s,a){for(let h=s;h<a;h++)if(r[h]===n)return h;return-1}function rE(n,r,s,a){return nv(this.multi,[])}function iE(n,r,s,a){const h=this.multi;let m;if(this.providerFactory){const b=this.providerFactory.componentProviders,A=nn(s,s[1],this.providerFactory.index,a);m=A.slice(0,b),nv(h,m);for(let N=b;N<A.length;N++)m.push(A[N])}else m=[],nv(h,m);return m}function nv(n,r){for(let s=0;s<n.length;s++)r.push((0,n[s])());return r}function dw(n,r=[]){return s=>{s.providersResolver=(a,h)=>function nE(n,r,s){const a=qe();if(a.firstCreatePass){const h=Ui(n);X_(s,a.data,a.blueprint,h,!0),X_(r,a.data,a.blueprint,h,!1)}}(a,h?h(n):n,r)}}class hw{}class lE{resolveComponentFactory(r){throw function aE(n){const r=Error(`No component factory found for ${Ue(n)}. Did you add it to @NgModule.entryComponents?`);return r.ngComponent=n,r}(r)}}let Vy=(()=>{class n{}return n.NULL=new lE,n})();function uE(){return up($n(),G())}function up(n,r){return new $g(It(n,r))}let $g=(()=>{class n{constructor(s){this.nativeElement=s}}return n.__NG_ELEMENT_ID__=uE,n})();function cE(n){return n instanceof $g?n.nativeElement:n}class pw{}let dE=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function fE(){const n=G(),s=Jn($n().index,n);return function hE(n){return n[11]}(Ar(s)?s:n)}(),n})(),pE=(()=>{class n{}return n.\u0275prov=rn({token:n,providedIn:"root",factory:()=>null}),n})();class gw{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const mw=new gw("13.3.1"),rv={};function Uy(n,r,s,a,h=!1){for(;null!==s;){const m=r[s.index];if(null!==m&&a.push(V(m)),ei(m))for(let A=10;A<m.length;A++){const N=m[A],Z=N[1].firstChild;null!==Z&&Uy(N[1],N,Z,a)}const b=s.type;if(8&b)Uy(n,r,s.child,a);else if(32&b){const A=ln(s,r);let N;for(;N=A();)a.push(N)}else if(16&b){const A=Ud(r,s);if(Array.isArray(A))a.push(...A);else{const N=Jr(r[16]);Uy(N[1],N,A,a,!0)}}s=h?s.projectionNext:s.next}return a}class Gg{constructor(r,s){this._lView=r,this._cdRefInjectingView=s,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const r=this._lView,s=r[1];return Uy(s,r,s.firstChild,[])}get context(){return this._lView[8]}set context(r){this._lView[8]=r}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[3];if(ei(r)){const s=r[8],a=s?s.indexOf(this):-1;a>-1&&(Fd(r,a),Co(s,a))}this._attachedToViewContainer=!1}rf(this._lView[1],this._lView)}onDestroy(r){am(this._lView[1],this._lView,null,r)}markForCheck(){xf(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Np(this._lView[1],this._lView,this.context)}checkNoChanges(){!function s_(n,r,s){Bs(!0);try{Np(n,r,s)}finally{Bs(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Et(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function sd(n,r){Va(n,r,r[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new Et(902,"");this._appRef=r}}class gE extends Gg{constructor(r){super(r),this._view=r}detectChanges(){Mf(this._view)}checkNoChanges(){!function kp(n){Bs(!0);try{Mf(n)}finally{Bs(!1)}}(this._view)}get context(){return null}}class yw extends Vy{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const s=Zn(r);return new iv(s,this.ngModule)}}function _w(n){const r=[];for(let s in n)n.hasOwnProperty(s)&&r.push({propName:n[s],templateName:s});return r}class iv extends hw{constructor(r,s){super(),this.componentDef=r,this.ngModule=s,this.componentType=r.type,this.selector=function Au(n){return n.map(eu).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!s}get inputs(){return _w(this.componentDef.inputs)}get outputs(){return _w(this.componentDef.outputs)}create(r,s,a,h){const m=(h=h||this.ngModule)?function yE(n,r){return{get:(s,a,h)=>{const m=n.get(s,rv,h);return m!==rv||a===rv?m:r.get(s,a,h)}}}(r,h.injector):r,b=m.get(pw,U),A=m.get(pE,null),N=b.createRenderer(null,this.componentDef),Z=this.componentDef.selectors[0][0]||"div",te=a?function om(n,r,s){if(Yn(n))return n.selectRootElement(r,s===Be.ShadowDom);let a="string"==typeof r?n.querySelector(r):r;return a.textContent="",a}(N,a,this.componentDef.encapsulation):Tc(b.createRenderer(null,this.componentDef),Z,function mE(n){const r=n.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(Z)),ce=this.componentDef.onPush?576:528,Se=function Nm(n,r){return{components:[],scheduler:n||Xc,clean:ym,playerHandler:r||null,flags:0}}(),Ze=po(0,null,null,1,0,null,null,null,null,null),Tt=ld(null,Ze,Se,ce,null,null,b,N,A,m);let Xt,gn;js(Tt);try{const Ln=function Om(n,r,s,a,h,m){const b=s[1];s[20]=n;const N=rc(b,20,2,"#host",null),Z=N.mergedAttrs=r.hostAttrs;null!==Z&&(Rf(N,Z,!0),null!==n&&(Ts(h,n,Z),null!==N.classes&&Bd(h,n,N.classes),null!==N.styles&&xc(h,n,N.styles)));const te=a.createRenderer(n,r),ce=ld(s,Ef(r),null,r.onPush?64:16,s[20],N,a,te,m||null,null);return b.firstCreatePass&&(T(Nt(N,s),b,r.type),Yd(b,N),pm(N,s.length,1)),nu(s,ce),s[20]=ce}(te,this.componentDef,Tt,b,N);if(te)if(a)Ts(N,te,["ng-version",mw.full]);else{const{attrs:kt,classes:ur}=function hf(n){const r=[],s=[];let a=1,h=2;for(;a<n.length;){let m=n[a];if("string"==typeof m)2===h?""!==m&&r.push(m,n[++a]):8===h&&s.push(m);else{if(!qo(h))break;h=m}a++}return{attrs:r,classes:s}}(this.componentDef.selectors[0]);kt&&Ts(N,te,kt),ur&&ur.length>0&&Bd(N,te,ur.join(" "))}if(gn=vr(Ze,20),void 0!==s){const kt=gn.projection=[];for(let ur=0;ur<this.ngContentSelectors.length;ur++){const oi=s[ur];kt.push(null!=oi?Array.from(oi):null)}}Xt=function Lf(n,r,s,a,h){const m=s[1],b=function hm(n,r,s){const a=$n();n.firstCreatePass&&(s.providersResolver&&s.providersResolver(s),gm(n,a,r,ud(n,r,1,null),s));const h=nn(r,n,a.directiveStart,a);co(h,r);const m=It(a,r);return m&&co(m,r),h}(m,s,r);if(a.components.push(b),n[8]=b,h&&h.forEach(N=>N(b,r)),r.contentQueries){const N=$n();r.contentQueries(1,b,N.directiveStart)}const A=$n();return!m.firstCreatePass||null===r.hostBindings&&null===r.hostAttrs||(Is(A.index),Tp(s[1],A,0,A.directiveStart,A.directiveEnd,r),Ap(r,b)),b}(Ln,this.componentDef,Tt,Se,[Zp]),Kd(Ze,Tt,null)}finally{Hs()}return new vE(this.componentType,Xt,up(gn,Tt),Tt,gn)}}class vE extends class oE{}{constructor(r,s,a,h,m){super(),this.location=a,this._rootLView=h,this._tNode=m,this.instance=s,this.hostView=this.changeDetectorRef=new gE(h),this.componentType=r}get injector(){return new wr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}class cp{}class vw{}const dp=new Map;class bw extends cp{constructor(r,s){super(),this._parent=s,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new yw(this);const a=cr(r);this._bootstrapComponents=y(a.bootstrap),this._r3Injector=hd(r,s,[{provide:cp,useValue:this},{provide:Vy,useValue:this.componentFactoryResolver}],Ue(r)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(r)}get(r,s=vl.THROW_IF_NOT_FOUND,a=zt.Default){return r===vl||r===cp||r===Vp?this:this._r3Injector.get(r,s,a)}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(s=>s()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class sv extends vw{constructor(r){super(),this.moduleType=r,null!==cr(r)&&function EE(n){const r=new Set;!function s(a){const h=cr(a,!0),m=h.id;null!==m&&(function ww(n,r,s){if(r&&r!==s)throw new Error(`Duplicate module registered for ${n} - ${Ue(r)} vs ${Ue(r.name)}`)}(m,dp.get(m),a),dp.set(m,a));const b=y(h.imports);for(const A of b)r.has(A)||(r.add(A),s(A))}(n)}(r)}create(r){return new bw(this.moduleType,r)}}function Cw(n,r,s,a){return function Iw(n,r,s,a,h,m){const b=r+s;return va(n,b,h)?function Ru(n,r,s){return n[r]=s}(n,b+1,m?a.call(m,h):a(h)):function Wg(n,r){const s=n[r];return s===Dr?void 0:s}(n,b+1)}(G(),function Bi(){const n=$t.lFrame;let r=n.bindingRootIndex;return-1===r&&(r=n.bindingRootIndex=n.tView.bindingStartIndex),r}(),n,r,s,a)}function ov(n){return r=>{setTimeout(n,void 0,r)}}const Gc=class VE extends _.x{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,s,a){var h,m,b;let A=r,N=s||(()=>null),Z=a;if(r&&"object"==typeof r){const ce=r;A=null===(h=ce.next)||void 0===h?void 0:h.bind(ce),N=null===(m=ce.error)||void 0===m?void 0:m.bind(ce),Z=null===(b=ce.complete)||void 0===b?void 0:b.bind(ce)}this.__isAsync&&(N=ov(N),A&&(A=ov(A)),Z&&(Z=ov(Z)));const te=super.subscribe({next:A,error:N,complete:Z});return r instanceof B.w0&&r.add(te),te}};function UE(){return this._results[Lc()]()}class av{constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const s=Lc(),a=av.prototype;a[s]||(a[s]=UE)}get changes(){return this._changes||(this._changes=new Gc)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,s){return this._results.reduce(r,s)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,s){const a=this;a.dirty=!1;const h=ms(r);(this._changesDetected=!function uu(n,r,s){if(n.length!==r.length)return!1;for(let a=0;a<n.length;a++){let h=n[a],m=r[a];if(s&&(h=s(h),m=s(m)),m!==h)return!1}return!0}(a._results,h,s))&&(a._results=h,a.length=h.length,a.last=h[this.length-1],a.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let qg=(()=>{class n{}return n.__NG_ELEMENT_ID__=HE,n})();const BE=qg,jE=class extends BE{constructor(r,s,a){super(),this._declarationLView=r,this._declarationTContainer=s,this.elementRef=a}createEmbeddedView(r){const s=this._declarationTContainer.tViews,a=ld(this._declarationLView,s,r,16,null,s.declTNode,null,null,null,null);a[17]=this._declarationLView[this._declarationTContainer.index];const m=this._declarationLView[19];return null!==m&&(a[19]=m.createEmbeddedView(s)),Kd(s,a,r),new Gg(a)}};function HE(){return By($n(),G())}function By(n,r){return 4&n.type?new jE(r,n,up(n,r)):null}let jy=(()=>{class n{}return n.__NG_ELEMENT_ID__=$E,n})();function $E(){return Pw($n(),G())}const GE=jy,xw=class extends GE{constructor(r,s,a){super(),this._lContainer=r,this._hostTNode=s,this._hostLView=a}get element(){return up(this._hostTNode,this._hostLView)}get injector(){return new wr(this._hostTNode,this._hostLView)}get parentInjector(){const r=ro(this._hostTNode,this._hostLView);if(ve(r)){const s=Cr(r,this._hostLView),a=Je(r);return new wr(s[1].data[a+8],s)}return new wr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const s=Mw(this._lContainer);return null!==s&&s[r]||null}get length(){return this._lContainer.length-10}createEmbeddedView(r,s,a){const h=r.createEmbeddedView(s||{});return this.insert(h,a),h}createComponent(r,s,a,h,m){const b=r&&!function jo(n){return"function"==typeof n}(r);let A;if(b)A=s;else{const ce=s||{};A=ce.index,a=ce.injector,h=ce.projectableNodes,m=ce.ngModuleRef}const N=b?r:new iv(Zn(r)),Z=a||this.parentInjector;if(!m&&null==N.ngModule){const Se=(b?Z:this.parentInjector).get(cp,null);Se&&(m=Se)}const te=N.create(Z,h,void 0,m);return this.insert(te.hostView,A),te}insert(r,s){const a=r._lView,h=a[1];if(function Or(n){return ei(n[3])}(a)){const te=this.indexOf(r);if(-1!==te)this.detach(te);else{const ce=a[3],Se=new xw(ce,ce[6],ce[3]);Se.detach(Se.indexOf(r))}}const m=this._adjustIndex(s),b=this._lContainer;!function fp(n,r,s,a){const h=10+a,m=s.length;a>0&&(s[h-1][4]=r),a<m-10?(r[4]=s[h],pa(s,10+a,r)):(s.push(r),r[4]=null),r[3]=s;const b=r[17];null!==b&&s!==b&&function tf(n,r){const s=n[9];r[16]!==r[3][3][16]&&(n[2]=!0),null===s?n[9]=[r]:s.push(r)}(b,r);const A=r[19];null!==A&&A.insertView(n),r[2]|=128}(h,a,b,m);const A=Ll(m,b),N=a[11],Z=Fl(N,b[7]);return null!==Z&&function id(n,r,s,a,h,m){a[0]=h,a[6]=r,Va(n,a,s,1,h,m)}(h,b[6],N,a,Z,A),r.attachToViewContainerRef(),pa(lv(b),m,r),r}move(r,s){return this.insert(r,s)}indexOf(r){const s=Mw(this._lContainer);return null!==s?s.indexOf(r):-1}remove(r){const s=this._adjustIndex(r,-1),a=Fd(this._lContainer,s);a&&(Co(lv(this._lContainer),s),rf(a[1],a))}detach(r){const s=this._adjustIndex(r,-1),a=Fd(this._lContainer,s);return a&&null!=Co(lv(this._lContainer),s)?new Gg(a):null}_adjustIndex(r,s=0){return null==r?this.length+s:r}};function Mw(n){return n[8]}function lv(n){return n[8]||(n[8]=[])}function Pw(n,r){let s;const a=r[n.index];if(ei(a))s=a;else{let h;if(8&n.type)h=V(a);else{const m=r[11];h=m.createComment("");const b=It(n,r);kl(m,Fl(m,b),h,function pp(n,r){return Yn(n)?n.nextSibling(r):r.nextSibling}(m,b),!1)}r[n.index]=s=Tf(a,r,h,n),nu(r,s)}return new xw(s,n,r)}class uv{constructor(r){this.queryList=r,this.matches=null}clone(){return new uv(this.queryList)}setDirty(){this.queryList.setDirty()}}class cv{constructor(r=[]){this.queries=r}createEmbeddedView(r){const s=r.queries;if(null!==s){const a=null!==r.contentQueries?r.contentQueries[0]:s.length,h=[];for(let m=0;m<a;m++){const b=s.getByIndex(m);h.push(this.queries[b.indexInDeclarationView].clone())}return new cv(h)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let s=0;s<this.queries.length;s++)null!==Uw(r,s).matches&&this.queries[s].setDirty()}}class Rw{constructor(r,s,a=null){this.predicate=r,this.flags=s,this.read=a}}class dv{constructor(r=[]){this.queries=r}elementStart(r,s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementStart(r,s)}elementEnd(r){for(let s=0;s<this.queries.length;s++)this.queries[s].elementEnd(r)}embeddedTView(r){let s=null;for(let a=0;a<this.length;a++){const h=null!==s?s.length:0,m=this.getByIndex(a).embeddedTView(r,h);m&&(m.indexInDeclarationView=a,null!==s?s.push(m):s=[m])}return null!==s?new dv(s):null}template(r,s){for(let a=0;a<this.queries.length;a++)this.queries[a].template(r,s)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class hv{constructor(r,s=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=s}elementStart(r,s){this.isApplyingToNode(s)&&this.matchTNode(r,s)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,s){this.elementStart(r,s)}embeddedTView(r,s){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,s),new hv(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const s=this._declarationNodeIndex;let a=r.parent;for(;null!==a&&8&a.type&&a.index!==s;)a=a.parent;return s===(null!==a?a.index:-1)}return this._appliesToNextNode}matchTNode(r,s){const a=this.metadata.predicate;if(Array.isArray(a))for(let h=0;h<a.length;h++){const m=a[h];this.matchTNodeWithReadOption(r,s,qE(s,m)),this.matchTNodeWithReadOption(r,s,mt(s,r,m,!1,!1))}else a===qg?4&s.type&&this.matchTNodeWithReadOption(r,s,-1):this.matchTNodeWithReadOption(r,s,mt(s,r,a,!1,!1))}matchTNodeWithReadOption(r,s,a){if(null!==a){const h=this.metadata.read;if(null!==h)if(h===$g||h===jy||h===qg&&4&s.type)this.addMatch(s.index,-2);else{const m=mt(s,r,h,!1,!1);null!==m&&this.addMatch(s.index,m)}else this.addMatch(s.index,a)}}addMatch(r,s){null===this.matches?this.matches=[r,s]:this.matches.push(r,s)}}function qE(n,r){const s=n.localNames;if(null!==s)for(let a=0;a<s.length;a+=2)if(s[a]===r)return s[a+1];return null}function ZE(n,r,s,a){return-1===s?function KE(n,r){return 11&n.type?up(n,r):4&n.type?By(n,r):null}(r,n):-2===s?function YE(n,r,s){return s===$g?up(r,n):s===qg?By(r,n):s===jy?Pw(r,n):void 0}(n,r,a):nn(n,n[1],s,r)}function Ow(n,r,s,a){const h=r[19].queries[a];if(null===h.matches){const m=n.data,b=s.matches,A=[];for(let N=0;N<b.length;N+=2){const Z=b[N];A.push(Z<0?null:ZE(r,m[Z],b[N+1],s.metadata.read))}h.matches=A}return h.matches}function fv(n,r,s,a){const h=n.queries.getByIndex(s),m=h.matches;if(null!==m){const b=Ow(n,r,h,s);for(let A=0;A<m.length;A+=2){const N=m[A];if(N>0)a.push(b[A/2]);else{const Z=m[A+1],te=r[-N];for(let ce=10;ce<te.length;ce++){const Se=te[ce];Se[17]===Se[3]&&fv(Se[1],Se,Z,a)}if(null!==te[9]){const ce=te[9];for(let Se=0;Se<ce.length;Se++){const Ze=ce[Se];fv(Ze[1],Ze,Z,a)}}}}}return a}function Nw(n){const r=G(),s=qe(),a=ha();rl(a+1);const h=Uw(s,a);if(n.dirty&&zn(r)===(2==(2&h.metadata.flags))){if(null===h.matches)n.reset([]);else{const m=h.crossesNgTemplate?fv(s,r,a,[]):Ow(s,r,h,a);n.reset(m,cE),n.notifyOnChanges()}return!0}return!1}function kw(n,r,s,a){const h=qe();if(h.firstCreatePass){const m=$n();(function Vw(n,r,s){null===n.queries&&(n.queries=new dv),n.queries.track(new hv(r,s))})(h,new Rw(r,s,a),m.index),function XE(n,r){const s=n.contentQueries||(n.contentQueries=[]);r!==(s.length?s[s.length-1]:-1)&&s.push(n.queries.length-1,r)}(h,n),2==(2&s)&&(h.staticContentQueries=!0)}!function Lw(n,r,s){const a=new av(4==(4&s));am(n,r,a,a.destroy),null===r[19]&&(r[19]=new cv),r[19].queries.push(new uv(a))}(h,G(),s)}function Fw(){return function JE(n,r){return n[19].queries[r].queryList}(G(),ha())}function Uw(n,r){return n.queries.getByIndex(r)}function Gy(...n){}const n0=new hi("Application Initializer");let vv=(()=>{class n{constructor(s){this.appInits=s,this.resolve=Gy,this.reject=Gy,this.initialized=!1,this.done=!1,this.donePromise=new Promise((a,h)=>{this.resolve=a,this.reject=h})}runInitializers(){if(this.initialized)return;const s=[],a=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const m=this.appInits[h]();if(_g(m))s.push(m);else if(vg(m)){const b=new Promise((A,N)=>{m.subscribe({complete:A,error:N})});s.push(b)}}Promise.all(s).then(()=>{a()}).catch(h=>{this.reject(h)}),0===s.length&&a(),this.initialized=!0}}return n.\u0275fac=function(s){return new(s||n)(Mn(n0,8))},n.\u0275prov=rn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const r0=new hi("AppId",{providedIn:"root",factory:function s0(){return`${wv()}${wv()}${wv()}`}});function wv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const o0=new hi("Platform Initializer"),a0=new hi("Platform ID"),l0=new hi("appBootstrapListener");let u0=(()=>{class n{log(s){console.log(s)}warn(s){console.warn(s)}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=rn({token:n,factory:n.\u0275fac}),n})();const Ev=new hi("LocaleId",{providedIn:"root",factory:()=>Er(Ev,zt.Optional|zt.SkipSelf)||function yb(){return"undefined"!=typeof $localize&&$localize.locale||rp}()}),_b=new hi("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class vb{constructor(r,s){this.ngModuleFactory=r,this.componentFactories=s}}let wb=(()=>{class n{compileModuleSync(s){return new sv(s)}compileModuleAsync(s){return Promise.resolve(this.compileModuleSync(s))}compileModuleAndAllComponentsSync(s){const a=this.compileModuleSync(s),m=y(cr(s).declarations).reduce((b,A)=>{const N=Zn(A);return N&&b.push(new iv(N)),b},[]);return new vb(a,m)}compileModuleAndAllComponentsAsync(s){return Promise.resolve(this.compileModuleAndAllComponentsSync(s))}clearCache(){}clearCacheFor(s){}getModuleId(s){}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=rn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const bb=(()=>Promise.resolve(0))();function bv(n){"undefined"==typeof Zone?bb.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class uc{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:s=!1,shouldCoalesceRunChangeDetection:a=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Gc(!1),this.onMicrotaskEmpty=new Gc(!1),this.onStable=new Gc(!1),this.onError=new Gc(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!a&&s,h.shouldCoalesceRunChangeDetection=a,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function Cb(){let n=sn.requestAnimationFrame,r=sn.cancelAnimationFrame;if("undefined"!=typeof Zone&&n&&r){const s=n[Zone.__symbol__("OriginalDelegate")];s&&(n=s);const a=r[Zone.__symbol__("OriginalDelegate")];a&&(r=a)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:r}}().nativeRequestAnimationFrame,function Tb(n){const r=()=>{!function Db(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(sn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,Iv(n),n.isCheckStableRunning=!0,Cv(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),Iv(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(s,a,h,m,b,A)=>{try{return c0(n),s.invokeTask(h,m,b,A)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||n.shouldCoalesceRunChangeDetection)&&r(),d0(n)}},onInvoke:(s,a,h,m,b,A,N)=>{try{return c0(n),s.invoke(h,m,b,A,N)}finally{n.shouldCoalesceRunChangeDetection&&r(),d0(n)}},onHasTask:(s,a,h,m)=>{s.hasTask(h,m),a===h&&("microTask"==m.change?(n._hasPendingMicrotasks=m.microTask,Iv(n),Cv(n)):"macroTask"==m.change&&(n.hasPendingMacrotasks=m.macroTask))},onHandleError:(s,a,h,m)=>(s.handleError(h,m),n.runOutsideAngular(()=>n.onError.emit(m)),!1)})}(h)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!uc.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(uc.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(r,s,a){return this._inner.run(r,s,a)}runTask(r,s,a,h){const m=this._inner,b=m.scheduleEventTask("NgZoneEvent: "+h,r,Ib,Gy,Gy);try{return m.runTask(b,s,a)}finally{m.cancelTask(b)}}runGuarded(r,s,a){return this._inner.runGuarded(r,s,a)}runOutsideAngular(r){return this._outer.run(r)}}const Ib={};function Cv(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Iv(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function c0(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function d0(n){n._nesting--,Cv(n)}class Ab{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Gc,this.onMicrotaskEmpty=new Gc,this.onStable=new Gc,this.onError=new Gc}run(r,s,a){return r.apply(s,a)}runGuarded(r,s,a){return r.apply(s,a)}runOutsideAngular(r){return r()}runTask(r,s,a,h){return r.apply(s,a)}}let h0=(()=>{class n{constructor(s){this._ngZone=s,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),s.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{uc.assertNotInAngularZone(),bv(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())bv(()=>{for(;0!==this._callbacks.length;){let s=this._callbacks.pop();clearTimeout(s.timeoutId),s.doneCb(this._didWork)}this._didWork=!1});else{let s=this.getPendingTasks();this._callbacks=this._callbacks.filter(a=>!a.updateCb||!a.updateCb(s)||(clearTimeout(a.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(s=>({source:s.source,creationLocation:s.creationLocation,data:s.data})):[]}addCallback(s,a,h){let m=-1;a&&a>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(b=>b.timeoutId!==m),s(this._didWork,this.getPendingTasks())},a)),this._callbacks.push({doneCb:s,timeoutId:m,updateCb:h})}whenStable(s,a,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(s,a,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(s,a,h){return[]}}return n.\u0275fac=function(s){return new(s||n)(Mn(uc))},n.\u0275prov=rn({token:n,factory:n.\u0275fac}),n})(),f0=(()=>{class n{constructor(){this._applications=new Map,Dv.addToWindow(this)}registerApplication(s,a){this._applications.set(s,a)}unregisterApplication(s){this._applications.delete(s)}unregisterAllApplications(){this._applications.clear()}getTestability(s){return this._applications.get(s)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(s,a=!0){return Dv.findTestabilityInTree(this,s,a)}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=rn({token:n,factory:n.\u0275fac}),n})();class Sb{addToWindow(r){}findTestabilityInTree(r,s,a){return null}}function xb(n){Dv=n}let cc,Dv=new Sb;const p0=new hi("AllowMultipleToken");class Rb{constructor(r,s){this.name=r,this.token=s}}function g0(n,r,s=[]){const a=`Platform: ${r}`,h=new hi(a);return(m=[])=>{let b=m0();if(!b||b.injector.get(p0,!1))if(n)n(s.concat(m).concat({provide:h,useValue:!0}));else{const A=s.concat(m).concat({provide:h,useValue:!0},{provide:Up,useValue:"platform"});!function Ob(n){if(cc&&!cc.destroyed&&!cc.injector.get(p0,!1))throw new Et(400,"");cc=n.get(y0);const r=n.get(o0,null);r&&r.forEach(s=>s())}(vl.create({providers:A,name:a}))}return function Nb(n){const r=m0();if(!r)throw new Et(401,"");return r}()}}function m0(){return cc&&!cc.destroyed?cc:null}let y0=(()=>{class n{constructor(s){this._injector=s,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(s,a){const A=function kb(n,r){let s;return s="noop"===n?new Ab:("zone.js"===n?void 0:n)||new uc({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==r?void 0:r.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==r?void 0:r.ngZoneRunCoalescing)}),s}(a?a.ngZone:void 0,{ngZoneEventCoalescing:a&&a.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:a&&a.ngZoneRunCoalescing||!1}),N=[{provide:uc,useValue:A}];return A.run(()=>{const Z=vl.create({providers:N,parent:this.injector,name:s.moduleType.name}),te=s.create(Z),ce=te.injector.get(zs,null);if(!ce)throw new Et(402,"");return A.runOutsideAngular(()=>{const Se=A.onError.subscribe({next:Ze=>{ce.handleError(Ze)}});te.onDestroy(()=>{Av(this._modules,te),Se.unsubscribe()})}),function Fb(n,r,s){try{const a=s();return _g(a)?a.catch(h=>{throw r.runOutsideAngular(()=>n.handleError(h)),h}):a}catch(a){throw r.runOutsideAngular(()=>n.handleError(a)),a}}(ce,A,()=>{const Se=te.injector.get(vv);return Se.runInitializers(),Se.donePromise.then(()=>(function Ry(n){Ft(n,"Expected localeId to be defined"),"string"==typeof n&&(Py=n.toLowerCase().replace(/_/g,"-"))}(te.injector.get(Ev,rp)||rp),this._moduleDoBootstrap(te),te))})})}bootstrapModule(s,a=[]){const h=_0({},a);return function Mb(n,r,s){const a=new sv(s);return Promise.resolve(a)}(0,0,s).then(m=>this.bootstrapModuleFactory(m,h))}_moduleDoBootstrap(s){const a=s.injector.get(Tv);if(s._bootstrapComponents.length>0)s._bootstrapComponents.forEach(h=>a.bootstrap(h));else{if(!s.instance.ngDoBootstrap)throw new Et(403,"");s.instance.ngDoBootstrap(a)}this._modules.push(s)}onDestroy(s){this._destroyListeners.push(s)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Et(404,"");this._modules.slice().forEach(s=>s.destroy()),this._destroyListeners.forEach(s=>s()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(s){return new(s||n)(Mn(vl))},n.\u0275prov=rn({token:n,factory:n.\u0275fac}),n})();function _0(n,r){return Array.isArray(r)?r.reduce(_0,n):Object.assign(Object.assign({},n),r)}let Tv=(()=>{class n{constructor(s,a,h,m,b){this._zone=s,this._injector=a,this._exceptionHandler=h,this._componentFactoryResolver=m,this._initStatus=b,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const A=new oe.y(Z=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{Z.next(this._stable),Z.complete()})}),N=new oe.y(Z=>{let te;this._zone.runOutsideAngular(()=>{te=this._zone.onStable.subscribe(()=>{uc.assertNotInAngularZone(),bv(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,Z.next(!0))})})});const ce=this._zone.onUnstable.subscribe(()=>{uc.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{Z.next(!1)}))});return()=>{te.unsubscribe(),ce.unsubscribe()}});this.isStable=(0,Pe.T)(A,N.pipe((0,Ae.B)()))}bootstrap(s,a){if(!this._initStatus.done)throw new Et(405,"");let h;h=s instanceof hw?s:this._componentFactoryResolver.resolveComponentFactory(s),this.componentTypes.push(h.componentType);const m=function Pb(n){return n.isBoundToModule}(h)?void 0:this._injector.get(cp),A=h.create(vl.NULL,[],a||h.selector,m),N=A.location.nativeElement,Z=A.injector.get(h0,null),te=Z&&A.injector.get(f0);return Z&&te&&te.registerApplication(N,Z),A.onDestroy(()=>{this.detachView(A.hostView),Av(this.components,A),te&&te.unregisterApplication(N)}),this._loadComponent(A),A}tick(){if(this._runningTick)throw new Et(101,"");try{this._runningTick=!0;for(let s of this._views)s.detectChanges()}catch(s){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(s))}finally{this._runningTick=!1}}attachView(s){const a=s;this._views.push(a),a.attachToAppRef(this)}detachView(s){const a=s;Av(this._views,a),a.detachFromAppRef()}_loadComponent(s){this.attachView(s.hostView),this.tick(),this.components.push(s),this._injector.get(l0,[]).concat(this._bootstrapListeners).forEach(h=>h(s))}ngOnDestroy(){this._views.slice().forEach(s=>s.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return n.\u0275fac=function(s){return new(s||n)(Mn(uc),Mn(vl),Mn(zs),Mn(Vy),Mn(vv))},n.\u0275prov=rn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Av(n,r){const s=n.indexOf(r);s>-1&&n.splice(s,1)}let w0=!0,E0=!1;function Vb(){return E0=!0,w0}function Ub(){if(E0)throw new Error("Cannot enable prod mode after platform setup.");w0=!1}let Bb=(()=>{class n{}return n.__NG_ELEMENT_ID__=jb,n})();function jb(n){return function Hb(n,r,s){if(os(n)&&!s){const a=Jn(n.index,r);return new Gg(a,a)}return 47&n.type?new Gg(r[16],r):null}($n(),G(),16==(16&n))}class D0{constructor(){}supports(r){return Fh(r)}create(r){return new Kb(r)}}const qb=(n,r)=>r;class Kb{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||qb}forEachItem(r){let s;for(s=this._itHead;null!==s;s=s._next)r(s)}forEachOperation(r){let s=this._itHead,a=this._removalsHead,h=0,m=null;for(;s||a;){const b=!a||s&&s.currentIndex<A0(a,h,m)?s:a,A=A0(b,h,m),N=b.currentIndex;if(b===a)h--,a=a._nextRemoved;else if(s=s._next,null==b.previousIndex)h++;else{m||(m=[]);const Z=A-h,te=N-h;if(Z!=te){for(let Se=0;Se<Z;Se++){const Ze=Se<m.length?m[Se]:m[Se]=0,Tt=Ze+Se;te<=Tt&&Tt<Z&&(m[Se]=Ze+1)}m[b.previousIndex]=te-Z}}A!==N&&r(b,A,N)}}forEachPreviousItem(r){let s;for(s=this._previousItHead;null!==s;s=s._nextPrevious)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachMovedItem(r){let s;for(s=this._movesHead;null!==s;s=s._nextMoved)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}forEachIdentityChange(r){let s;for(s=this._identityChangesHead;null!==s;s=s._nextIdentityChange)r(s)}diff(r){if(null==r&&(r=[]),!Fh(r))throw new Et(900,"");return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let h,m,b,s=this._itHead,a=!1;if(Array.isArray(r)){this.length=r.length;for(let A=0;A<this.length;A++)m=r[A],b=this._trackByFn(A,m),null!==s&&Object.is(s.trackById,b)?(a&&(s=this._verifyReinsertion(s,m,b,A)),Object.is(s.item,m)||this._addIdentityChange(s,m)):(s=this._mismatch(s,m,b,A),a=!0),s=s._next}else h=0,function p_(n,r){if(Array.isArray(n))for(let s=0;s<n.length;s++)r(n[s]);else{const s=n[Lc()]();let a;for(;!(a=s.next()).done;)r(a.value)}}(r,A=>{b=this._trackByFn(h,A),null!==s&&Object.is(s.trackById,b)?(a&&(s=this._verifyReinsertion(s,A,b,h)),Object.is(s.item,A)||this._addIdentityChange(s,A)):(s=this._mismatch(s,A,b,h),a=!0),s=s._next,h++}),this.length=h;return this._truncate(s),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,s,a,h){let m;return null===r?m=this._itTail:(m=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._reinsertAfter(r,m,h)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(a,h))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._moveAfter(r,m,h)):r=this._addAfter(new Zb(s,a),m,h),r}_verifyReinsertion(r,s,a,h){let m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null);return null!==m?r=this._reinsertAfter(m,r._prev,h):r.currentIndex!=h&&(r.currentIndex=h,this._addToMoves(r,h)),r}_truncate(r){for(;null!==r;){const s=r._next;this._addToRemovals(this._unlink(r)),r=s}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,s,a){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const h=r._prevRemoved,m=r._nextRemoved;return null===h?this._removalsHead=m:h._nextRemoved=m,null===m?this._removalsTail=h:m._prevRemoved=h,this._insertAfter(r,s,a),this._addToMoves(r,a),r}_moveAfter(r,s,a){return this._unlink(r),this._insertAfter(r,s,a),this._addToMoves(r,a),r}_addAfter(r,s,a){return this._insertAfter(r,s,a),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,s,a){const h=null===s?this._itHead:s._next;return r._next=h,r._prev=s,null===h?this._itTail=r:h._prev=r,null===s?this._itHead=r:s._next=r,null===this._linkedRecords&&(this._linkedRecords=new T0),this._linkedRecords.put(r),r.currentIndex=a,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const s=r._prev,a=r._next;return null===s?this._itHead=a:s._next=a,null===a?this._itTail=s:a._prev=s,r}_addToMoves(r,s){return r.previousIndex===s||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new T0),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,s){return r.item=s,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class Zb{constructor(r,s){this.item=r,this.trackById=s,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Yb{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,s){let a;for(a=this._head;null!==a;a=a._nextDup)if((null===s||s<=a.currentIndex)&&Object.is(a.trackById,r))return a;return null}remove(r){const s=r._prevDup,a=r._nextDup;return null===s?this._head=a:s._nextDup=a,null===a?this._tail=s:a._prevDup=s,null===this._head}}class T0{constructor(){this.map=new Map}put(r){const s=r.trackById;let a=this.map.get(s);a||(a=new Yb,this.map.set(s,a)),a.add(r)}get(r,s){const h=this.map.get(r);return h?h.get(r,s):null}remove(r){const s=r.trackById;return this.map.get(s).remove(r)&&this.map.delete(s),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function A0(n,r,s){const a=n.previousIndex;if(null===a)return a;let h=0;return s&&a<s.length&&(h=s[a]),a+r+h}class S0{constructor(){}supports(r){return r instanceof Map||Lh(r)}create(){return new Qb}}class Qb{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let s;for(s=this._mapHead;null!==s;s=s._next)r(s)}forEachPreviousItem(r){let s;for(s=this._previousMapHead;null!==s;s=s._nextPrevious)r(s)}forEachChangedItem(r){let s;for(s=this._changesHead;null!==s;s=s._nextChanged)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}diff(r){if(r){if(!(r instanceof Map||Lh(r)))throw new Et(900,"")}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let s=this._mapHead;if(this._appendAfter=null,this._forEach(r,(a,h)=>{if(s&&s.key===h)this._maybeAddToChanges(s,a),this._appendAfter=s,s=s._next;else{const m=this._getOrCreateRecordForKey(h,a);s=this._insertBeforeOrAppend(s,m)}}),s){s._prev&&(s._prev._next=null),this._removalsHead=s;for(let a=s;null!==a;a=a._nextRemoved)a===this._mapHead&&(this._mapHead=null),this._records.delete(a.key),a._nextRemoved=a._next,a.previousValue=a.currentValue,a.currentValue=null,a._prev=null,a._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,s){if(r){const a=r._prev;return s._next=r,s._prev=a,r._prev=s,a&&(a._next=s),r===this._mapHead&&(this._mapHead=s),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=s,s._prev=this._appendAfter):this._mapHead=s,this._appendAfter=s,null}_getOrCreateRecordForKey(r,s){if(this._records.has(r)){const h=this._records.get(r);this._maybeAddToChanges(h,s);const m=h._prev,b=h._next;return m&&(m._next=b),b&&(b._prev=m),h._next=null,h._prev=null,h}const a=new Jb(r);return this._records.set(r,a),a.currentValue=s,this._addToAdditions(a),a}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,s){Object.is(s,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=s,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,s){r instanceof Map?r.forEach(s):Object.keys(r).forEach(a=>s(r[a],a))}}class Jb{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function x0(){return new Rv([new D0])}let Rv=(()=>{class n{constructor(s){this.factories=s}static create(s,a){if(null!=a){const h=a.factories.slice();s=s.concat(h)}return new n(s)}static extend(s){return{provide:n,useFactory:a=>n.create(s,a||x0()),deps:[[n,new ra,new lo]]}}find(s){const a=this.factories.find(h=>h.supports(s));if(null!=a)return a;throw new Et(901,"")}}return n.\u0275prov=rn({token:n,providedIn:"root",factory:x0}),n})();function M0(){return new Ov([new S0])}let Ov=(()=>{class n{constructor(s){this.factories=s}static create(s,a){if(a){const h=a.factories.slice();s=s.concat(h)}return new n(s)}static extend(s){return{provide:n,useFactory:a=>n.create(s,a||M0()),deps:[[n,new ra,new lo]]}}find(s){const a=this.factories.find(m=>m.supports(s));if(a)return a;throw new Et(901,"")}}return n.\u0275prov=rn({token:n,providedIn:"root",factory:M0}),n})();const tC=g0(null,"core",[{provide:a0,useValue:"unknown"},{provide:y0,deps:[vl]},{provide:f0,deps:[]},{provide:u0,deps:[]}]);let nC=(()=>{class n{constructor(s){}}return n.\u0275fac=function(s){return new(s||n)(Mn(Tv))},n.\u0275mod=$e({type:n}),n.\u0275inj=fn({}),n})()},2382:(en,Xe,z)=>{"use strict";z.d(Xe,{Fj:()=>dt,u5:()=>$t,JJ:()=>ge,On:()=>Ls});var _=z(5e3),B=z(9808),oe=z(8306),Pe=z(4742),Ae=z(8421),xe=z(7669),je=z(5403),Ue=z(3268),We=z(1810),de=z(8996),Fe=z(4004);let Mt=(()=>{class ${constructor(F,G){this._renderer=F,this._elementRef=G,this.onChange=qe=>{},this.onTouched=()=>{}}setProperty(F,G){this._renderer.setProperty(this._elementRef.nativeElement,F,G)}registerOnTouched(F){this.onTouched=F}registerOnChange(F){this.onChange=F}setDisabledState(F){this.setProperty("disabled",F)}}return $.\u0275fac=function(F){return new(F||$)(_.Y36(_.Qsj),_.Y36(_.SBq))},$.\u0275dir=_.lG2({type:$}),$})(),pt=(()=>{class $ extends Mt{}return $.\u0275fac=function(){let L;return function(G){return(L||(L=_.n5z($)))(G||$)}}(),$.\u0275dir=_.lG2({type:$,features:[_.qOj]}),$})();const Et=new _.OlP("NgValueAccessor"),yt={provide:Et,useExisting:(0,_.Gpc)(()=>dt),multi:!0},Ht=new _.OlP("CompositionEventMode");let dt=(()=>{class $ extends Mt{constructor(F,G,qe){super(F,G),this._compositionMode=qe,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function ke(){const $=(0,B.q)()?(0,B.q)().getUserAgent():"";return/android (\d+)/.test($.toLowerCase())}())}writeValue(F){this.setProperty("value",null==F?"":F)}_handleInput(F){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(F)}_compositionStart(){this._composing=!0}_compositionEnd(F){this._composing=!1,this._compositionMode&&this.onChange(F)}}return $.\u0275fac=function(F){return new(F||$)(_.Y36(_.Qsj),_.Y36(_.SBq),_.Y36(Ht,8))},$.\u0275dir=_.lG2({type:$,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(F,G){1&F&&_.NdJ("input",function(cn){return G._handleInput(cn.target.value)})("blur",function(){return G.onTouched()})("compositionstart",function(){return G._compositionStart()})("compositionend",function(cn){return G._compositionEnd(cn.target.value)})},features:[_._Bn([yt]),_.qOj]}),$})();const at=new _.OlP("NgValidators"),Dt=new _.OlP("NgAsyncValidators");function St($){return null!=$}function hn($){const L=(0,_.QGY)($)?(0,de.D)($):$;return(0,_.CqO)(L),L}function Wt($){let L={};return $.forEach(F=>{L=null!=F?Object.assign(Object.assign({},L),F):L}),0===Object.keys(L).length?null:L}function Vn($,L){return L.map(F=>F($))}function Cn($){return $.map(L=>function rn($){return!$.validate}(L)?L:F=>L.validate(F))}function On($){return null!=$?function fn($){if(!$)return null;const L=$.filter(St);return 0==L.length?null:function(F){return Wt(Vn(F,L))}}(Cn($)):null}function Sn($){return null!=$?function ir($){if(!$)return null;const L=$.filter(St);return 0==L.length?null:function(F){return function _e(...$){const L=(0,xe.jO)($),{args:F,keys:G}=(0,Pe.D)($),qe=new oe.y(cn=>{const{length:$n}=F;if(!$n)return void cn.complete();const hr=new Array($n);let Ei=$n,Mi=$n;for(let Us=0;Us<$n;Us++){let ns=!1;(0,Ae.Xf)(F[Us]).subscribe((0,je.x)(cn,ca=>{ns||(ns=!0,Mi--),hr[Us]=ca},()=>Ei--,void 0,()=>{(!Ei||!ns)&&(Mi||cn.next(G?(0,We.n)(G,hr):hr),cn.complete())}))}});return L?qe.pipe((0,Ue.Z)(L)):qe}(Vn(F,L).map(hn)).pipe((0,Fe.U)(Wt))}}(Cn($)):null}function Mr($,L){return null===$?[L]:Array.isArray($)?[...$,L]:[$,L]}function vn($){return $?Array.isArray($)?$:[$]:[]}function Nr($,L){return Array.isArray($)?$.includes(L):$===L}function er($,L){const F=vn(L);return vn($).forEach(qe=>{Nr(F,qe)||F.push(qe)}),F}function zt($,L){return vn(L).filter(F=>!Nr($,F))}class bn{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(L){this._rawValidators=L||[],this._composedValidatorFn=On(this._rawValidators)}_setAsyncValidators(L){this._rawAsyncValidators=L||[],this._composedAsyncValidatorFn=Sn(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(L){this._onDestroyCallbacks.push(L)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(L=>L()),this._onDestroyCallbacks=[]}reset(L){this.control&&this.control.reset(L)}hasError(L,F){return!!this.control&&this.control.hasError(L,F)}getError(L,F){return this.control?this.control.getError(L,F):null}}class Fn extends bn{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class un extends bn{get formDirective(){return null}get path(){return null}}let ge=(()=>{class $ extends class zr{constructor(L){this._cd=L}is(L){var F,G,qe;return"submitted"===L?!!(null===(F=this._cd)||void 0===F?void 0:F.submitted):!!(null===(qe=null===(G=this._cd)||void 0===G?void 0:G.control)||void 0===qe?void 0:qe[L])}}{constructor(F){super(F)}}return $.\u0275fac=function(F){return new(F||$)(_.Y36(Fn,2))},$.\u0275dir=_.lG2({type:$,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(F,G){2&F&&_.ekj("ng-untouched",G.is("untouched"))("ng-touched",G.is("touched"))("ng-pristine",G.is("pristine"))("ng-dirty",G.is("dirty"))("ng-valid",G.is("valid"))("ng-invalid",G.is("invalid"))("ng-pending",G.is("pending"))},features:[_.qOj]}),$})();function Rn($,L){(function Me($,L){const F=function ar($){return $._rawValidators}($);null!==L.validator?$.setValidators(Mr(F,L.validator)):"function"==typeof F&&$.setValidators([F]);const G=function fr($){return $._rawAsyncValidators}($);null!==L.asyncValidator?$.setAsyncValidators(Mr(G,L.asyncValidator)):"function"==typeof G&&$.setAsyncValidators([G]);const qe=()=>$.updateValueAndValidity();Ee(L._rawValidators,qe),Ee(L._rawAsyncValidators,qe)})($,L),L.valueAccessor.writeValue($.value),function $e($,L){L.valueAccessor.registerOnChange(F=>{$._pendingValue=F,$._pendingChange=!0,$._pendingDirty=!0,"change"===$.updateOn&&on($,L)})}($,L),function xn($,L){const F=(G,qe)=>{L.valueAccessor.writeValue(G),qe&&L.viewToModelUpdate(G)};$.registerOnChange(F),L._registerOnDestroy(()=>{$._unregisterOnChange(F)})}($,L),function jt($,L){L.valueAccessor.registerOnTouched(()=>{$._pendingTouched=!0,"blur"===$.updateOn&&$._pendingChange&&on($,L),"submit"!==$.updateOn&&$.markAsTouched()})}($,L),function he($,L){if(L.valueAccessor.setDisabledState){const F=G=>{L.valueAccessor.setDisabledState(G)};$.registerOnDisabledChange(F),L._registerOnDestroy(()=>{$._unregisterOnDisabledChange(F)})}}($,L)}function Ee($,L){$.forEach(F=>{F.registerOnValidatorChange&&F.registerOnValidatorChange(L)})}function on($,L){$._pendingDirty&&$.markAsDirty(),$.setValue($._pendingValue,{emitModelToViewChange:!1}),L.viewToModelUpdate($._pendingValue),$._pendingChange=!1}function Pr($,L){const F=$.indexOf(L);F>-1&&$.splice(F,1)}const Ct="VALID",Nn="INVALID",lr="PENDING",Lr="DISABLED";function kr($){return(Sr($)?$.validators:$)||null}function pi($){return Array.isArray($)?On($):$||null}function nr($,L){return(Sr(L)?L.asyncValidators:$)||null}function Rr($){return Array.isArray($)?Sn($):$||null}function Sr($){return null!=$&&!Array.isArray($)&&"object"==typeof $}const Xr=$=>$ instanceof it;function bs($){return($=>$ instanceof Ie)($)?$.value:$.getRawValue()}function we($,L){const F=Xr($),G=$.controls;if(!(F?Object.keys(G):G).length)throw new _.vHH(1e3,"");if(!G[L])throw new _.vHH(1001,"")}function fe($,L){Xr($),$._forEachChild((G,qe)=>{if(void 0===L[qe])throw new _.vHH(1002,"")})}class re{constructor(L,F){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=L,this._rawAsyncValidators=F,this._composedValidatorFn=pi(this._rawValidators),this._composedAsyncValidatorFn=Rr(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(L){this._rawValidators=this._composedValidatorFn=L}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(L){this._rawAsyncValidators=this._composedAsyncValidatorFn=L}get parent(){return this._parent}get valid(){return this.status===Ct}get invalid(){return this.status===Nn}get pending(){return this.status==lr}get disabled(){return this.status===Lr}get enabled(){return this.status!==Lr}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(L){this._rawValidators=L,this._composedValidatorFn=pi(L)}setAsyncValidators(L){this._rawAsyncValidators=L,this._composedAsyncValidatorFn=Rr(L)}addValidators(L){this.setValidators(er(L,this._rawValidators))}addAsyncValidators(L){this.setAsyncValidators(er(L,this._rawAsyncValidators))}removeValidators(L){this.setValidators(zt(L,this._rawValidators))}removeAsyncValidators(L){this.setAsyncValidators(zt(L,this._rawAsyncValidators))}hasValidator(L){return Nr(this._rawValidators,L)}hasAsyncValidator(L){return Nr(this._rawAsyncValidators,L)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(L={}){this.touched=!0,this._parent&&!L.onlySelf&&this._parent.markAsTouched(L)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(L=>L.markAllAsTouched())}markAsUntouched(L={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(F=>{F.markAsUntouched({onlySelf:!0})}),this._parent&&!L.onlySelf&&this._parent._updateTouched(L)}markAsDirty(L={}){this.pristine=!1,this._parent&&!L.onlySelf&&this._parent.markAsDirty(L)}markAsPristine(L={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(F=>{F.markAsPristine({onlySelf:!0})}),this._parent&&!L.onlySelf&&this._parent._updatePristine(L)}markAsPending(L={}){this.status=lr,!1!==L.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!L.onlySelf&&this._parent.markAsPending(L)}disable(L={}){const F=this._parentMarkedDirty(L.onlySelf);this.status=Lr,this.errors=null,this._forEachChild(G=>{G.disable(Object.assign(Object.assign({},L),{onlySelf:!0}))}),this._updateValue(),!1!==L.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},L),{skipPristineCheck:F})),this._onDisabledChange.forEach(G=>G(!0))}enable(L={}){const F=this._parentMarkedDirty(L.onlySelf);this.status=Ct,this._forEachChild(G=>{G.enable(Object.assign(Object.assign({},L),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:L.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},L),{skipPristineCheck:F})),this._onDisabledChange.forEach(G=>G(!1))}_updateAncestors(L){this._parent&&!L.onlySelf&&(this._parent.updateValueAndValidity(L),L.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(L){this._parent=L}updateValueAndValidity(L={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ct||this.status===lr)&&this._runAsyncValidator(L.emitEvent)),!1!==L.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!L.onlySelf&&this._parent.updateValueAndValidity(L)}_updateTreeValidity(L={emitEvent:!0}){this._forEachChild(F=>F._updateTreeValidity(L)),this.updateValueAndValidity({onlySelf:!0,emitEvent:L.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Lr:Ct}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(L){if(this.asyncValidator){this.status=lr,this._hasOwnPendingAsyncValidator=!0;const F=hn(this.asyncValidator(this));this._asyncValidationSubscription=F.subscribe(G=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(G,{emitEvent:L})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(L,F={}){this.errors=L,this._updateControlsErrors(!1!==F.emitEvent)}get(L){return function es($,L,F){if(null==L||(Array.isArray(L)||(L=L.split(F)),Array.isArray(L)&&0===L.length))return null;let G=$;return L.forEach(qe=>{G=Xr(G)?G.controls.hasOwnProperty(qe)?G.controls[qe]:null:($=>$ instanceof Pt)(G)&&G.at(qe)||null}),G}(this,L,".")}getError(L,F){const G=F?this.get(F):this;return G&&G.errors?G.errors[L]:null}hasError(L,F){return!!this.getError(L,F)}get root(){let L=this;for(;L._parent;)L=L._parent;return L}_updateControlsErrors(L){this.status=this._calculateStatus(),L&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(L)}_initObservables(){this.valueChanges=new _.vpe,this.statusChanges=new _.vpe}_calculateStatus(){return this._allControlsDisabled()?Lr:this.errors?Nn:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(lr)?lr:this._anyControlsHaveStatus(Nn)?Nn:Ct}_anyControlsHaveStatus(L){return this._anyControls(F=>F.status===L)}_anyControlsDirty(){return this._anyControls(L=>L.dirty)}_anyControlsTouched(){return this._anyControls(L=>L.touched)}_updatePristine(L={}){this.pristine=!this._anyControlsDirty(),this._parent&&!L.onlySelf&&this._parent._updatePristine(L)}_updateTouched(L={}){this.touched=this._anyControlsTouched(),this._parent&&!L.onlySelf&&this._parent._updateTouched(L)}_isBoxedValue(L){return"object"==typeof L&&null!==L&&2===Object.keys(L).length&&"value"in L&&"disabled"in L}_registerOnCollectionChange(L){this._onCollectionChange=L}_setUpdateStrategy(L){Sr(L)&&null!=L.updateOn&&(this._updateOn=L.updateOn)}_parentMarkedDirty(L){return!L&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Ie extends re{constructor(L=null,F,G){super(kr(F),nr(G,F)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(L),this._setUpdateStrategy(F),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Sr(F)&&F.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(L)?L.value:L)}setValue(L,F={}){this.value=this._pendingValue=L,this._onChange.length&&!1!==F.emitModelToViewChange&&this._onChange.forEach(G=>G(this.value,!1!==F.emitViewToModelChange)),this.updateValueAndValidity(F)}patchValue(L,F={}){this.setValue(L,F)}reset(L=this.defaultValue,F={}){this._applyFormState(L),this.markAsPristine(F),this.markAsUntouched(F),this.setValue(this.value,F),this._pendingChange=!1}_updateValue(){}_anyControls(L){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(L){this._onChange.push(L)}_unregisterOnChange(L){Pr(this._onChange,L)}registerOnDisabledChange(L){this._onDisabledChange.push(L)}_unregisterOnDisabledChange(L){Pr(this._onDisabledChange,L)}_forEachChild(L){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(L){this._isBoxedValue(L)?(this.value=this._pendingValue=L.value,L.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=L}}class it extends re{constructor(L,F,G){super(kr(F),nr(G,F)),this.controls=L,this._initObservables(),this._setUpdateStrategy(F),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(L,F){return this.controls[L]?this.controls[L]:(this.controls[L]=F,F.setParent(this),F._registerOnCollectionChange(this._onCollectionChange),F)}addControl(L,F,G={}){this.registerControl(L,F),this.updateValueAndValidity({emitEvent:G.emitEvent}),this._onCollectionChange()}removeControl(L,F={}){this.controls[L]&&this.controls[L]._registerOnCollectionChange(()=>{}),delete this.controls[L],this.updateValueAndValidity({emitEvent:F.emitEvent}),this._onCollectionChange()}setControl(L,F,G={}){this.controls[L]&&this.controls[L]._registerOnCollectionChange(()=>{}),delete this.controls[L],F&&this.registerControl(L,F),this.updateValueAndValidity({emitEvent:G.emitEvent}),this._onCollectionChange()}contains(L){return this.controls.hasOwnProperty(L)&&this.controls[L].enabled}setValue(L,F={}){fe(this,L),Object.keys(L).forEach(G=>{we(this,G),this.controls[G].setValue(L[G],{onlySelf:!0,emitEvent:F.emitEvent})}),this.updateValueAndValidity(F)}patchValue(L,F={}){null!=L&&(Object.keys(L).forEach(G=>{this.controls[G]&&this.controls[G].patchValue(L[G],{onlySelf:!0,emitEvent:F.emitEvent})}),this.updateValueAndValidity(F))}reset(L={},F={}){this._forEachChild((G,qe)=>{G.reset(L[qe],{onlySelf:!0,emitEvent:F.emitEvent})}),this._updatePristine(F),this._updateTouched(F),this.updateValueAndValidity(F)}getRawValue(){return this._reduceChildren({},(L,F,G)=>(L[G]=bs(F),L))}_syncPendingControls(){let L=this._reduceChildren(!1,(F,G)=>!!G._syncPendingControls()||F);return L&&this.updateValueAndValidity({onlySelf:!0}),L}_forEachChild(L){Object.keys(this.controls).forEach(F=>{const G=this.controls[F];G&&L(G,F)})}_setUpControls(){this._forEachChild(L=>{L.setParent(this),L._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(L){for(const F of Object.keys(this.controls)){const G=this.controls[F];if(this.contains(F)&&L(G))return!0}return!1}_reduceValue(){return this._reduceChildren({},(L,F,G)=>((F.enabled||this.disabled)&&(L[G]=F.value),L))}_reduceChildren(L,F){let G=L;return this._forEachChild((qe,cn)=>{G=F(G,qe,cn)}),G}_allControlsDisabled(){for(const L of Object.keys(this.controls))if(this.controls[L].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class Pt extends re{constructor(L,F,G){super(kr(F),nr(G,F)),this.controls=L,this._initObservables(),this._setUpdateStrategy(F),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(L){return this.controls[L]}push(L,F={}){this.controls.push(L),this._registerControl(L),this.updateValueAndValidity({emitEvent:F.emitEvent}),this._onCollectionChange()}insert(L,F,G={}){this.controls.splice(L,0,F),this._registerControl(F),this.updateValueAndValidity({emitEvent:G.emitEvent})}removeAt(L,F={}){this.controls[L]&&this.controls[L]._registerOnCollectionChange(()=>{}),this.controls.splice(L,1),this.updateValueAndValidity({emitEvent:F.emitEvent})}setControl(L,F,G={}){this.controls[L]&&this.controls[L]._registerOnCollectionChange(()=>{}),this.controls.splice(L,1),F&&(this.controls.splice(L,0,F),this._registerControl(F)),this.updateValueAndValidity({emitEvent:G.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(L,F={}){fe(this,L),L.forEach((G,qe)=>{we(this,qe),this.at(qe).setValue(G,{onlySelf:!0,emitEvent:F.emitEvent})}),this.updateValueAndValidity(F)}patchValue(L,F={}){null!=L&&(L.forEach((G,qe)=>{this.at(qe)&&this.at(qe).patchValue(G,{onlySelf:!0,emitEvent:F.emitEvent})}),this.updateValueAndValidity(F))}reset(L=[],F={}){this._forEachChild((G,qe)=>{G.reset(L[qe],{onlySelf:!0,emitEvent:F.emitEvent})}),this._updatePristine(F),this._updateTouched(F),this.updateValueAndValidity(F)}getRawValue(){return this.controls.map(L=>bs(L))}clear(L={}){this.controls.length<1||(this._forEachChild(F=>F._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:L.emitEvent}))}_syncPendingControls(){let L=this.controls.reduce((F,G)=>!!G._syncPendingControls()||F,!1);return L&&this.updateValueAndValidity({onlySelf:!0}),L}_forEachChild(L){this.controls.forEach((F,G)=>{L(F,G)})}_updateValue(){this.value=this.controls.filter(L=>L.enabled||this.disabled).map(L=>L.value)}_anyControls(L){return this.controls.some(F=>F.enabled&&L(F))}_setUpControls(){this._forEachChild(L=>this._registerControl(L))}_allControlsDisabled(){for(const L of this.controls)if(L.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(L){L.setParent(this),L._registerOnCollectionChange(this._onCollectionChange)}}const Ys={provide:Fn,useExisting:(0,_.Gpc)(()=>Ls)},xr=(()=>Promise.resolve(null))();let Ls=(()=>{class $ extends Fn{constructor(F,G,qe,cn,$n){super(),this._changeDetectorRef=$n,this.control=new Ie,this._registered=!1,this.update=new _.vpe,this._parent=F,this._setValidators(G),this._setAsyncValidators(qe),this.valueAccessor=function Yr($,L){if(!L)return null;let F,G,qe;return Array.isArray(L),L.forEach(cn=>{cn.constructor===dt?F=cn:function Xi($){return Object.getPrototypeOf($.constructor)===pt}(cn)?G=cn:qe=cn}),qe||G||F||null}(0,cn)}ngOnChanges(F){if(this._checkForErrors(),!this._registered||"name"in F){if(this._registered&&(this._checkName(),this.formDirective)){const G=F.name.previousValue;this.formDirective.removeControl({name:G,path:this._getPath(G)})}this._setUpControl()}"isDisabled"in F&&this._updateDisabled(F),function Ri($,L){if(!$.hasOwnProperty("model"))return!1;const F=$.model;return!!F.isFirstChange()||!Object.is(L,F.currentValue)}(F,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(F){this.viewModel=F,this.update.emit(F)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Rn(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(F){xr.then(()=>{var G;this.control.setValue(F,{emitViewToModelChange:!1}),null===(G=this._changeDetectorRef)||void 0===G||G.markForCheck()})}_updateDisabled(F){const G=F.isDisabled.currentValue,qe=""===G||G&&"false"!==G;xr.then(()=>{var cn;qe&&!this.control.disabled?this.control.disable():!qe&&this.control.disabled&&this.control.enable(),null===(cn=this._changeDetectorRef)||void 0===cn||cn.markForCheck()})}_getPath(F){return this._parent?function Jt($,L){return[...L.path,$]}(F,this._parent):[F]}}return $.\u0275fac=function(F){return new(F||$)(_.Y36(un,9),_.Y36(at,10),_.Y36(Dt,10),_.Y36(Et,10),_.Y36(_.sBO,8))},$.\u0275dir=_.lG2({type:$,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[_._Bn([Ys]),_.qOj,_.TTD]}),$})(),_t=(()=>{class ${}return $.\u0275fac=function(F){return new(F||$)},$.\u0275mod=_.oAB({type:$}),$.\u0275inj=_.cJS({}),$})(),wi=(()=>{class ${}return $.\u0275fac=function(F){return new(F||$)},$.\u0275mod=_.oAB({type:$}),$.\u0275inj=_.cJS({imports:[[_t]]}),$})(),$t=(()=>{class ${}return $.\u0275fac=function(F){return new(F||$)},$.\u0275mod=_.oAB({type:$}),$.\u0275inj=_.cJS({imports:[wi]}),$})()},3809:(en,Xe,z)=>{"use strict";z.d(Xe,{F0:()=>mi,rH:()=>Ci,yS:()=>Ds,Bz:()=>Je,lC:()=>Gi});var _=z(5e3),B=z(7579);class oe extends B.x{constructor(I){super(),this._value=I}get value(){return this.getValue()}_subscribe(I){const C=super._subscribe(I);return!C.closed&&I.next(this._value),C}getValue(){const{hasError:I,thrownError:C,_value:R}=this;if(I)throw C;return this._throwIfClosed(),R}next(I){super.next(this._value=I)}}var Pe=z(8306),Ae=z(4742),xe=z(8996),je=z(4671),Ue=z(3268),We=z(7669),_e=z(1810),de=z(5403),Fe=z(9672);function Et(T,I,C){T?(0,Fe.f)(C,T,I):I()}var Rt=z(576);function tt(T,I){const C=(0,Rt.m)(T)?T:()=>T,R=O=>O.error(C());return new Pe.y(I?O=>I.schedule(R,0,O):R)}var yt=z(8421);function ke(T){return new Pe.y(I=>{(0,yt.Xf)(T()).subscribe(I)})}var Ht=z(727),dt=z(4482);function nt(){return(0,dt.e)((T,I)=>{let C=null;T._refCount++;const R=(0,de.x)(I,void 0,void 0,void 0,()=>{if(!T||T._refCount<=0||0<--T._refCount)return void(C=null);const O=T._connection,q=C;C=null,O&&(!q||O===q)&&O.unsubscribe(),I.unsubscribe()});T.subscribe(R),R.closed||(C=T.connect())})}class Ye extends Pe.y{constructor(I,C){super(),this.source=I,this.subjectFactory=C,this._subject=null,this._refCount=0,this._connection=null,(0,dt.A)(I)&&(this.lift=I.lift)}_subscribe(I){return this.getSubject().subscribe(I)}getSubject(){const I=this._subject;return(!I||I.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:I}=this;this._subject=this._connection=null,null==I||I.unsubscribe()}connect(){let I=this._connection;if(!I){I=this._connection=new Ht.w0;const C=this.getSubject();I.add(this.source.subscribe((0,de.x)(C,void 0,()=>{this._teardown(),C.complete()},R=>{this._teardown(),C.error(R)},()=>this._teardown()))),I.closed&&(this._connection=null,I=Ht.w0.EMPTY)}return I}refCount(){return nt()(this)}}var at=z(9646),Dt=z(6805),ne=z(7272),Oe=z(515);function W(T){return(0,dt.e)((I,C)=>{let q,R=null,O=!1;R=I.subscribe((0,de.x)(C,void 0,void 0,ue=>{q=(0,yt.Xf)(T(ue,W(T)(I))),R?(R.unsubscribe(),R=null,q.subscribe(C)):O=!0})),O&&(R.unsubscribe(),R=null,q.subscribe(C))})}var ze=z(9300);function He(T){return T<=0?()=>Oe.E:(0,dt.e)((I,C)=>{let R=[];I.subscribe((0,de.x)(C,O=>{R.push(O),T<R.length&&R.shift()},()=>{for(const O of R)C.next(O);C.complete()},void 0,()=>{R=null}))})}var ot=z(8068),Qe=z(6590),Qt=z(4004),Ft=z(3900),St=z(5698),hn=z(8675),Wt=z(5026),Vn=z(4351),rn=z(590),Cn=z(5577),fn=z(8505),On=z(8189),ir=z(9808);class Sn{constructor(I,C){this.id=I,this.url=C}}class Mr extends Sn{constructor(I,C,R="imperative",O=null){super(I,C),this.navigationTrigger=R,this.restoredState=O}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ar extends Sn{constructor(I,C,R){super(I,C),this.urlAfterRedirects=R}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class fr extends Sn{constructor(I,C,R){super(I,C),this.reason=R}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class vn extends Sn{constructor(I,C,R){super(I,C),this.error=R}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Nr extends Sn{constructor(I,C,R,O){super(I,C),this.urlAfterRedirects=R,this.state=O}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class er extends Sn{constructor(I,C,R,O){super(I,C),this.urlAfterRedirects=R,this.state=O}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class zt extends Sn{constructor(I,C,R,O,q){super(I,C),this.urlAfterRedirects=R,this.state=O,this.shouldActivate=q}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class bn extends Sn{constructor(I,C,R,O){super(I,C),this.urlAfterRedirects=R,this.state=O}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Fn extends Sn{constructor(I,C,R,O){super(I,C),this.urlAfterRedirects=R,this.state=O}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class un{constructor(I){this.route=I}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class zr{constructor(I){this.route=I}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class _i{constructor(I){this.snapshot=I}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ct{constructor(I){this.snapshot=I}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ge{constructor(I){this.snapshot=I}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class be{constructor(I){this.snapshot=I}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class vt{constructor(I,C,R){this.routerEvent=I,this.position=C,this.anchor=R}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Be="primary";class gt{constructor(I){this.params=I||{}}has(I){return Object.prototype.hasOwnProperty.call(this.params,I)}get(I){if(this.has(I)){const C=this.params[I];return Array.isArray(C)?C[0]:C}return null}getAll(I){if(this.has(I)){const C=this.params[I];return Array.isArray(C)?C:[C]}return[]}get keys(){return Object.keys(this.params)}}function xt(T){return new gt(T)}const Kn="ngNavigationCancelingError";function In(T){const I=Error("NavigationCancelingError: "+T);return I[Kn]=!0,I}function $r(T,I,C){const R=C.path.split("/");if(R.length>T.length||"full"===C.pathMatch&&(I.hasChildren()||R.length<T.length))return null;const O={};for(let q=0;q<R.length;q++){const ue=R[q],Te=T[q];if(ue.startsWith(":"))O[ue.substring(1)]=Te;else if(ue!==Te.path)return null}return{consumed:T.slice(0,R.length),posParams:O}}function sr(T,I){const C=T?Object.keys(T):void 0,R=I?Object.keys(I):void 0;if(!C||!R||C.length!=R.length)return!1;let O;for(let q=0;q<C.length;q++)if(O=C[q],!Lt(T[O],I[O]))return!1;return!0}function Lt(T,I){if(Array.isArray(T)&&Array.isArray(I)){if(T.length!==I.length)return!1;const C=[...T].sort(),R=[...I].sort();return C.every((O,q)=>R[q]===O)}return T===I}function tr(T){return Array.prototype.concat.apply([],T)}function Pn(T){return T.length>0?T[T.length-1]:null}function Le(T,I){for(const C in T)T.hasOwnProperty(C)&&I(T[C],C)}function Gt(T){return(0,_.CqO)(T)?T:(0,_.QGY)(T)?(0,xe.D)(Promise.resolve(T)):(0,at.of)(T)}const Rn={exact:function Me(T,I,C){if(!_n(T.segments,I.segments)||!on(T.segments,I.segments,C)||T.numberOfChildren!==I.numberOfChildren)return!1;for(const R in I.children)if(!T.children[R]||!Me(T.children[R],I.children[R],C))return!1;return!0},subset:$e},Un={exact:function he(T,I){return sr(T,I)},subset:function st(T,I){return Object.keys(I).length<=Object.keys(T).length&&Object.keys(I).every(C=>Lt(T[C],I[C]))},ignored:()=>!0};function Ee(T,I,C){return Rn[C.paths](T.root,I.root,C.matrixParams)&&Un[C.queryParams](T.queryParams,I.queryParams)&&!("exact"===C.fragment&&T.fragment!==I.fragment)}function $e(T,I,C){return jt(T,I,I.segments,C)}function jt(T,I,C,R){if(T.segments.length>C.length){const O=T.segments.slice(0,C.length);return!(!_n(O,C)||I.hasChildren()||!on(O,C,R))}if(T.segments.length===C.length){if(!_n(T.segments,C)||!on(T.segments,C,R))return!1;for(const O in I.children)if(!T.children[O]||!$e(T.children[O],I.children[O],R))return!1;return!0}{const O=C.slice(0,T.segments.length),q=C.slice(T.segments.length);return!!(_n(T.segments,O)&&on(T.segments,O,R)&&T.children[Be])&&jt(T.children[Be],I,q,R)}}function on(T,I,C){return I.every((R,O)=>Un[C](T[O].parameters,R.parameters))}class xn{constructor(I,C,R){this.root=I,this.queryParams=C,this.fragment=R}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=xt(this.queryParams)),this._queryParamMap}toString(){return Xi.serialize(this)}}class yn{constructor(I,C){this.segments=I,this.children=C,this.parent=null,Le(C,(R,O)=>R.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Oi(this)}}class Zn{constructor(I,C){this.path=I,this.parameters=C}get parameterMap(){return this._parameterMap||(this._parameterMap=xt(this.parameters)),this._parameterMap}toString(){return Lr(this)}}function _n(T,I){return T.length===I.length&&T.every((C,R)=>C.path===I[R].path)}class Zr{}class Ri{parse(I){const C=new Ki(I);return new xn(C.parseRootSegment(),C.parseQueryParams(),C.parseFragment())}serialize(I){const C=`/${Yr(I.root,!0)}`,R=function kr(T){const I=Object.keys(T).map(C=>{const R=T[C];return Array.isArray(R)?R.map(O=>`${Ni(C)}=${Ni(O)}`).join("&"):`${Ni(C)}=${Ni(R)}`}).filter(C=>!!C);return I.length?`?${I.join("&")}`:""}(I.queryParams);return`${C}${R}${"string"==typeof I.fragment?`#${function Zt(T){return encodeURI(T)}(I.fragment)}`:""}`}}const Xi=new Ri;function Oi(T){return T.segments.map(I=>Lr(I)).join("/")}function Yr(T,I){if(!T.hasChildren())return Oi(T);if(I){const C=T.children[Be]?Yr(T.children[Be],!1):"",R=[];return Le(T.children,(O,q)=>{q!==Be&&R.push(`${q}:${Yr(O,!1)}`)}),R.length>0?`${C}(${R.join("//")})`:C}{const C=function cr(T,I){let C=[];return Le(T.children,(R,O)=>{O===Be&&(C=C.concat(I(R,O)))}),Le(T.children,(R,O)=>{O!==Be&&(C=C.concat(I(R,O)))}),C}(T,(R,O)=>O===Be?[Yr(T.children[Be],!1)]:[`${O}:${Yr(R,!1)}`]);return 1===Object.keys(T.children).length&&null!=T.children[Be]?`${Oi(T)}/${C[0]}`:`${Oi(T)}/(${C.join("//")})`}}function Pr(T){return encodeURIComponent(T).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ni(T){return Pr(T).replace(/%3B/gi,";")}function Ct(T){return Pr(T).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Nn(T){return decodeURIComponent(T)}function lr(T){return Nn(T.replace(/\+/g,"%20"))}function Lr(T){return`${Ct(T.path)}${function es(T){return Object.keys(T).map(I=>`;${Ct(I)}=${Ct(T[I])}`).join("")}(T.parameters)}`}const pi=/^[^\/()?;=#]+/;function nr(T){const I=T.match(pi);return I?I[0]:""}const Rr=/^[^=?&#]+/,Gn=/^[^&#]+/;class Ki{constructor(I){this.url=I,this.remaining=I}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new yn([],{}):new yn([],this.parseChildren())}parseQueryParams(){const I={};if(this.consumeOptional("?"))do{this.parseQueryParam(I)}while(this.consumeOptional("&"));return I}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const I=[];for(this.peekStartsWith("(")||I.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),I.push(this.parseSegment());let C={};this.peekStartsWith("/(")&&(this.capture("/"),C=this.parseParens(!0));let R={};return this.peekStartsWith("(")&&(R=this.parseParens(!1)),(I.length>0||Object.keys(C).length>0)&&(R[Be]=new yn(I,C)),R}parseSegment(){const I=nr(this.remaining);if(""===I&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(I),new Zn(Nn(I),this.parseMatrixParams())}parseMatrixParams(){const I={};for(;this.consumeOptional(";");)this.parseParam(I);return I}parseParam(I){const C=nr(this.remaining);if(!C)return;this.capture(C);let R="";if(this.consumeOptional("=")){const O=nr(this.remaining);O&&(R=O,this.capture(R))}I[Nn(C)]=Nn(R)}parseQueryParam(I){const C=function Sr(T){const I=T.match(Rr);return I?I[0]:""}(this.remaining);if(!C)return;this.capture(C);let R="";if(this.consumeOptional("=")){const ue=function Xr(T){const I=T.match(Gn);return I?I[0]:""}(this.remaining);ue&&(R=ue,this.capture(R))}const O=lr(C),q=lr(R);if(I.hasOwnProperty(O)){let ue=I[O];Array.isArray(ue)||(ue=[ue],I[O]=ue),ue.push(q)}else I[O]=q}parseParens(I){const C={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const R=nr(this.remaining),O=this.remaining[R.length];if("/"!==O&&")"!==O&&";"!==O)throw new Error(`Cannot parse url '${this.url}'`);let q;R.indexOf(":")>-1?(q=R.substr(0,R.indexOf(":")),this.capture(q),this.capture(":")):I&&(q=Be);const ue=this.parseChildren();C[q]=1===Object.keys(ue).length?ue[Be]:new yn([],ue),this.consumeOptional("//")}return C}peekStartsWith(I){return this.remaining.startsWith(I)}consumeOptional(I){return!!this.peekStartsWith(I)&&(this.remaining=this.remaining.substring(I.length),!0)}capture(I){if(!this.consumeOptional(I))throw new Error(`Expected "${I}".`)}}class bs{constructor(I){this._root=I}get root(){return this._root.value}parent(I){const C=this.pathFromRoot(I);return C.length>1?C[C.length-2]:null}children(I){const C=we(I,this._root);return C?C.children.map(R=>R.value):[]}firstChild(I){const C=we(I,this._root);return C&&C.children.length>0?C.children[0].value:null}siblings(I){const C=fe(I,this._root);return C.length<2?[]:C[C.length-2].children.map(O=>O.value).filter(O=>O!==I)}pathFromRoot(I){return fe(I,this._root).map(C=>C.value)}}function we(T,I){if(T===I.value)return I;for(const C of I.children){const R=we(T,C);if(R)return R}return null}function fe(T,I){if(T===I.value)return[I];for(const C of I.children){const R=fe(T,C);if(R.length)return R.unshift(I),R}return[]}class re{constructor(I,C){this.value=I,this.children=C}toString(){return`TreeNode(${this.value})`}}function Ie(T){const I={};return T&&T.children.forEach(C=>I[C.value.outlet]=C),I}class it extends bs{constructor(I,C){super(I),this.snapshot=C,as(this,I)}toString(){return this.snapshot.toString()}}function Pt(T,I){const C=function kn(T,I){const ue=new yo([],{},{},"",{},Be,I,null,T.root,-1,{});return new os("",new re(ue,[]))}(T,I),R=new oe([new Zn("",{})]),O=new oe({}),q=new oe({}),ue=new oe({}),Te=new oe(""),mt=new pr(R,O,ue,Te,q,Be,I,C.root);return mt.snapshot=C.root,new it(new re(mt,[]),C)}class pr{constructor(I,C,R,O,q,ue,Te,mt){this.url=I,this.params=C,this.queryParams=R,this.fragment=O,this.data=q,this.outlet=ue,this.component=Te,this._futureSnapshot=mt}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Qt.U)(I=>xt(I)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Qt.U)(I=>xt(I)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Ar(T,I="emptyOnly"){const C=T.pathFromRoot;let R=0;if("always"!==I)for(R=C.length-1;R>=1;){const O=C[R],q=C[R-1];if(O.routeConfig&&""===O.routeConfig.path)R--;else{if(q.component)break;R--}}return function ei(T){return T.reduce((I,C)=>({params:Object.assign(Object.assign({},I.params),C.params),data:Object.assign(Object.assign({},I.data),C.data),resolve:Object.assign(Object.assign({},I.resolve),C._resolvedData)}),{params:{},data:{},resolve:{}})}(C.slice(R))}class yo{constructor(I,C,R,O,q,ue,Te,mt,nn,Ir,Dn){this.url=I,this.params=C,this.queryParams=R,this.fragment=O,this.data=q,this.outlet=ue,this.component=Te,this.routeConfig=mt,this._urlSegment=nn,this._lastPathIndex=Ir,this._resolve=Dn}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=xt(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=xt(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(R=>R.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class os extends bs{constructor(I,C){super(C),this.url=I,as(this,C)}toString(){return Ui(this._root)}}function as(T,I){I.value._routerState=T,I.children.forEach(C=>as(T,C))}function Ui(T){const I=T.children.length>0?` { ${T.children.map(Ui).join(", ")} } `:"";return`${T.value}${I}`}function Fs(T){if(T.snapshot){const I=T.snapshot,C=T._futureSnapshot;T.snapshot=C,sr(I.queryParams,C.queryParams)||T.queryParams.next(C.queryParams),I.fragment!==C.fragment&&T.fragment.next(C.fragment),sr(I.params,C.params)||T.params.next(C.params),function br(T,I){if(T.length!==I.length)return!1;for(let C=0;C<T.length;++C)if(!sr(T[C],I[C]))return!1;return!0}(I.url,C.url)||T.url.next(C.url),sr(I.data,C.data)||T.data.next(C.data)}else T.snapshot=T._futureSnapshot,T.data.next(T._futureSnapshot.data)}function vi(T,I){const C=sr(T.params,I.params)&&function Tr(T,I){return _n(T,I)&&T.every((C,R)=>sr(C.parameters,I[R].parameters))}(T.url,I.url);return C&&!(!T.parent!=!I.parent)&&(!T.parent||vi(T.parent,I.parent))}function xr(T,I,C){if(C&&T.shouldReuseRoute(I.value,C.value.snapshot)){const R=C.value;R._futureSnapshot=I.value;const O=function Ls(T,I,C){return I.children.map(R=>{for(const O of C.children)if(T.shouldReuseRoute(R.value,O.value.snapshot))return xr(T,R,O);return xr(T,R)})}(T,I,C);return new re(R,O)}{if(T.shouldAttach(I.value)){const q=T.retrieve(I.value);if(null!==q){const ue=q.route;return ue.value._futureSnapshot=I.value,ue.children=I.children.map(Te=>xr(T,Te)),ue}}const R=function _o(T){return new pr(new oe(T.url),new oe(T.params),new oe(T.queryParams),new oe(T.fragment),new oe(T.data),T.outlet,T.component,T)}(I.value),O=I.children.map(q=>xr(T,q));return new re(R,O)}}function De(T){return"object"==typeof T&&null!=T&&!T.outlets&&!T.segmentPath}function Ke(T){return"object"==typeof T&&null!=T&&T.outlets}function bt(T,I,C,R,O){let q={};if(R&&Le(R,(Te,mt)=>{q[mt]=Array.isArray(Te)?Te.map(nn=>`${nn}`):`${Te}`}),T===I)return new xn(C,q,O);const ue=_t(T,I,C);return new xn(ue,q,O)}function _t(T,I,C){const R={};return Le(T.children,(O,q)=>{R[q]=O===I?C:_t(O,I,C)}),new yn(T.segments,R)}class Ut{constructor(I,C,R){if(this.isAbsolute=I,this.numberOfDoubleDots=C,this.commands=R,I&&R.length>0&&De(R[0]))throw new Error("Root segment cannot have matrix parameters");const O=R.find(Ke);if(O&&O!==Pn(R))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class _r{constructor(I,C,R){this.segmentGroup=I,this.processChildren=C,this.index=R}}function $i(T,I,C){if(T||(T=new yn([],{})),0===T.segments.length&&T.hasChildren())return Cs(T,I,C);const R=function mr(T,I,C){let R=0,O=I;const q={match:!1,pathIndex:0,commandIndex:0};for(;O<T.segments.length;){if(R>=C.length)return q;const ue=T.segments[O],Te=C[R];if(Ke(Te))break;const mt=`${Te}`,nn=R<C.length-1?C[R+1]:null;if(O>0&&void 0===mt)break;if(mt&&nn&&"object"==typeof nn&&void 0===nn.outlets){if(!li(mt,nn,ue))return q;R+=2}else{if(!li(mt,{},ue))return q;R++}O++}return{match:!0,pathIndex:O,commandIndex:R}}(T,I,C),O=C.slice(R.commandIndex);if(R.match&&R.pathIndex<T.segments.length){const q=new yn(T.segments.slice(0,R.pathIndex),{});return q.children[Be]=new yn(T.segments.slice(R.pathIndex),T.children),Cs(q,0,O)}return R.match&&0===O.length?new yn(T.segments,{}):R.match&&!T.hasChildren()?Wn(T,I,C):R.match?Cs(T,0,O):Wn(T,I,C)}function Cs(T,I,C){if(0===C.length)return new yn(T.segments,{});{const R=function ls(T){return Ke(T[0])?T[0].outlets:{[Be]:T}}(C),O={};return Le(R,(q,ue)=>{"string"==typeof q&&(q=[q]),null!==q&&(O[ue]=$i(T.children[ue],I,q))}),Le(T.children,(q,ue)=>{void 0===R[ue]&&(O[ue]=q)}),new yn(T.segments,O)}}function Wn(T,I,C){const R=T.segments.slice(0,I);let O=0;for(;O<C.length;){const q=C[O];if(Ke(q)){const mt=ai(q.outlets);return new yn(R,mt)}if(0===O&&De(C[0])){R.push(new Zn(T.segments[I].path,Ms(C[0]))),O++;continue}const ue=Ke(q)?q.outlets[Be]:`${q}`,Te=O<C.length-1?C[O+1]:null;ue&&Te&&De(Te)?(R.push(new Zn(ue,Ms(Te))),O+=2):(R.push(new Zn(ue,{})),O++)}return new yn(R,{})}function ai(T){const I={};return Le(T,(C,R)=>{"string"==typeof C&&(C=[C]),null!==C&&(I[R]=Wn(new yn([],{}),0,C))}),I}function Ms(T){const I={};return Le(T,(C,R)=>I[R]=`${C}`),I}function li(T,I,C){return T==C.path&&sr(I,C.parameters)}class Ps{constructor(I,C,R,O){this.routeReuseStrategy=I,this.futureState=C,this.currState=R,this.forwardEvent=O}activate(I){const C=this.futureState._root,R=this.currState?this.currState._root:null;this.deactivateChildRoutes(C,R,I),Fs(this.futureState.root),this.activateChildRoutes(C,R,I)}deactivateChildRoutes(I,C,R){const O=Ie(C);I.children.forEach(q=>{const ue=q.value.outlet;this.deactivateRoutes(q,O[ue],R),delete O[ue]}),Le(O,(q,ue)=>{this.deactivateRouteAndItsChildren(q,R)})}deactivateRoutes(I,C,R){const O=I.value,q=C?C.value:null;if(O===q)if(O.component){const ue=R.getContext(O.outlet);ue&&this.deactivateChildRoutes(I,C,ue.children)}else this.deactivateChildRoutes(I,C,R);else q&&this.deactivateRouteAndItsChildren(C,R)}deactivateRouteAndItsChildren(I,C){I.value.component&&this.routeReuseStrategy.shouldDetach(I.value.snapshot)?this.detachAndStoreRouteSubtree(I,C):this.deactivateRouteAndOutlet(I,C)}detachAndStoreRouteSubtree(I,C){const R=C.getContext(I.value.outlet),O=R&&I.value.component?R.children:C,q=Ie(I);for(const ue of Object.keys(q))this.deactivateRouteAndItsChildren(q[ue],O);if(R&&R.outlet){const ue=R.outlet.detach(),Te=R.children.onOutletDeactivated();this.routeReuseStrategy.store(I.value.snapshot,{componentRef:ue,route:I,contexts:Te})}}deactivateRouteAndOutlet(I,C){const R=C.getContext(I.value.outlet),O=R&&I.value.component?R.children:C,q=Ie(I);for(const ue of Object.keys(q))this.deactivateRouteAndItsChildren(q[ue],O);R&&R.outlet&&(R.outlet.deactivate(),R.children.onOutletDeactivated(),R.attachRef=null,R.resolver=null,R.route=null)}activateChildRoutes(I,C,R){const O=Ie(C);I.children.forEach(q=>{this.activateRoutes(q,O[q.value.outlet],R),this.forwardEvent(new be(q.value.snapshot))}),I.children.length&&this.forwardEvent(new ct(I.value.snapshot))}activateRoutes(I,C,R){const O=I.value,q=C?C.value:null;if(Fs(O),O===q)if(O.component){const ue=R.getOrCreateContext(O.outlet);this.activateChildRoutes(I,C,ue.children)}else this.activateChildRoutes(I,C,R);else if(O.component){const ue=R.getOrCreateContext(O.outlet);if(this.routeReuseStrategy.shouldAttach(O.snapshot)){const Te=this.routeReuseStrategy.retrieve(O.snapshot);this.routeReuseStrategy.store(O.snapshot,null),ue.children.onOutletReAttached(Te.contexts),ue.attachRef=Te.componentRef,ue.route=Te.route.value,ue.outlet&&ue.outlet.attach(Te.componentRef,Te.route.value),Fs(Te.route.value),this.activateChildRoutes(I,null,ue.children)}else{const Te=function Qs(T){for(let I=T.parent;I;I=I.parent){const C=I.routeConfig;if(C&&C._loadedConfig)return C._loadedConfig;if(C&&C.component)return null}return null}(O.snapshot),mt=Te?Te.module.componentFactoryResolver:null;ue.attachRef=null,ue.route=O,ue.resolver=mt,ue.outlet&&ue.outlet.activateWith(O,mt),this.activateChildRoutes(I,null,ue.children)}}else this.activateChildRoutes(I,null,R)}}class Ao{constructor(I,C){this.routes=I,this.module=C}}function us(T){return"function"==typeof T}function qr(T){return T instanceof xn}const ui=Symbol("INITIAL_VALUE");function Xs(){return(0,Ft.w)(T=>function Mt(...T){const I=(0,We.yG)(T),C=(0,We.jO)(T),{args:R,keys:O}=(0,Ae.D)(T);if(0===R.length)return(0,xe.D)([],I);const q=new Pe.y(function pt(T,I,C=je.y){return R=>{Et(I,()=>{const{length:O}=T,q=new Array(O);let ue=O,Te=O;for(let mt=0;mt<O;mt++)Et(I,()=>{const nn=(0,xe.D)(T[mt],I);let Ir=!1;nn.subscribe((0,de.x)(R,Dn=>{q[mt]=Dn,Ir||(Ir=!0,Te--),Te||R.next(C(q.slice()))},()=>{--ue||R.complete()}))},R)},R)}}(R,I,O?ue=>(0,_e.n)(O,ue):je.y));return C?q.pipe((0,Ue.Z)(C)):q}(T.map(I=>I.pipe((0,St.q)(1),(0,hn.O)(ui)))).pipe((0,Wt.R)((I,C)=>{let R=!1;return C.reduce((O,q,ue)=>O!==ui?O:(q===ui&&(R=!0),R||!1!==q&&ue!==C.length-1&&!qr(q)?O:q),I)},ui),(0,ze.h)(I=>I!==ui),(0,Qt.U)(I=>qr(I)?I:!0===I),(0,St.q)(1)))}class vo{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Zi,this.attachRef=null}}class Zi{constructor(){this.contexts=new Map}onChildOutletCreated(I,C){const R=this.getOrCreateContext(I);R.outlet=C,this.contexts.set(I,R)}onChildOutletDestroyed(I){const C=this.getContext(I);C&&(C.outlet=null,C.attachRef=null)}onOutletDeactivated(){const I=this.contexts;return this.contexts=new Map,I}onOutletReAttached(I){this.contexts=I}getOrCreateContext(I){let C=this.getContext(I);return C||(C=new vo,this.contexts.set(I,C)),C}getContext(I){return this.contexts.get(I)||null}}let Gi=(()=>{class T{constructor(C,R,O,q,ue){this.parentContexts=C,this.location=R,this.resolver=O,this.changeDetector=ue,this.activated=null,this._activatedRoute=null,this.activateEvents=new _.vpe,this.deactivateEvents=new _.vpe,this.attachEvents=new _.vpe,this.detachEvents=new _.vpe,this.name=q||Be,C.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const C=this.parentContexts.getContext(this.name);C&&C.route&&(C.attachRef?this.attach(C.attachRef,C.route):this.activateWith(C.route,C.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const C=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(C.instance),C}attach(C,R){this.activated=C,this._activatedRoute=R,this.location.insert(C.hostView),this.attachEvents.emit(C.instance)}deactivate(){if(this.activated){const C=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(C)}}activateWith(C,R){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=C;const ue=(R=R||this.resolver).resolveComponentFactory(C._futureSnapshot.routeConfig.component),Te=this.parentContexts.getOrCreateContext(this.name).children,mt=new Bn(C,Te,this.location.injector);this.activated=this.location.createComponent(ue,this.location.length,mt),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return T.\u0275fac=function(C){return new(C||T)(_.Y36(Zi),_.Y36(_.s_b),_.Y36(_._Vd),_.$8M("name"),_.Y36(_.sBO))},T.\u0275dir=_.lG2({type:T,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),T})();class Bn{constructor(I,C,R){this.route=I,this.childContexts=C,this.parent=R}get(I,C){return I===pr?this.route:I===Zi?this.childContexts:this.parent.get(I,C)}}let ci=(()=>{class T{}return T.\u0275fac=function(C){return new(C||T)},T.\u0275cmp=_.Xpm({type:T,selectors:[["ng-component"]],decls:1,vars:0,template:function(C,R){1&C&&_._UZ(0,"router-outlet")},directives:[Gi],encapsulation:2}),T})();function Os(T,I=""){for(let C=0;C<T.length;C++){const R=T[C];cs(R,Yn(I,R))}}function cs(T,I){T.children&&Os(T.children,I)}function Yn(T,I){return I?T||I.path?T&&!I.path?`${T}/`:!T&&I.path?I.path:`${T}/${I.path}`:"":T}function U(T){const I=T.children&&T.children.map(U),C=I?Object.assign(Object.assign({},T),{children:I}):Object.assign({},T);return!C.component&&(I||C.loadChildren)&&C.outlet&&C.outlet!==Be&&(C.component=ci),C}function J(T){return T.outlet||Be}function V(T,I){const C=T.filter(R=>J(R)===I);return C.push(...T.filter(R=>J(R)!==I)),C}const ie={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ye(T,I,C){var R;if(""===I.path)return"full"===I.pathMatch&&(T.hasChildren()||C.length>0)?Object.assign({},ie):{matched:!0,consumedSegments:[],remainingSegments:C,parameters:{},positionalParamSegments:{}};const q=(I.matcher||$r)(C,T,I);if(!q)return Object.assign({},ie);const ue={};Le(q.posParams,(mt,nn)=>{ue[nn]=mt.path});const Te=q.consumed.length>0?Object.assign(Object.assign({},ue),q.consumed[q.consumed.length-1].parameters):ue;return{matched:!0,consumedSegments:q.consumed,remainingSegments:C.slice(q.consumed.length),parameters:Te,positionalParamSegments:null!==(R=q.posParams)&&void 0!==R?R:{}}}function lt(T,I,C,R,O="corrected"){if(C.length>0&&function vr(T,I,C){return C.some(R=>Jn(T,I,R)&&J(R)!==Be)}(T,C,R)){const ue=new yn(I,function Kt(T,I,C,R){const O={};O[Be]=R,R._sourceSegment=T,R._segmentIndexShift=I.length;for(const q of C)if(""===q.path&&J(q)!==Be){const ue=new yn([],{});ue._sourceSegment=T,ue._segmentIndexShift=I.length,O[J(q)]=ue}return O}(T,I,R,new yn(C,T.children)));return ue._sourceSegment=T,ue._segmentIndexShift=I.length,{segmentGroup:ue,slicedSegments:[]}}if(0===C.length&&function dr(T,I,C){return C.some(R=>Jn(T,I,R))}(T,C,R)){const ue=new yn(T.segments,function It(T,I,C,R,O,q){const ue={};for(const Te of R)if(Jn(T,C,Te)&&!O[J(Te)]){const mt=new yn([],{});mt._sourceSegment=T,mt._segmentIndexShift="legacy"===q?T.segments.length:I.length,ue[J(Te)]=mt}return Object.assign(Object.assign({},O),ue)}(T,I,C,R,T.children,O));return ue._sourceSegment=T,ue._segmentIndexShift=I.length,{segmentGroup:ue,slicedSegments:C}}const q=new yn(T.segments,T.children);return q._sourceSegment=T,q._segmentIndexShift=I.length,{segmentGroup:q,slicedSegments:C}}function Jn(T,I,C){return(!(T.hasChildren()||I.length>0)||"full"!==C.pathMatch)&&""===C.path}function zn(T,I,C,R){return!!(J(T)===R||R!==Be&&Jn(I,C,T))&&("**"===T.path||ye(I,T,C).matched)}function jr(T,I,C){return 0===I.length&&!T.children[C]}class Or{constructor(I){this.segmentGroup=I||null}}class Vr{constructor(I){this.urlTree=I}}function ds(T){return tt(new Or(T))}function wi(T){return tt(new Vr(T))}class Vs{constructor(I,C,R,O,q){this.configLoader=C,this.urlSerializer=R,this.urlTree=O,this.config=q,this.allowRedirects=!0,this.ngModule=I.get(_.h0i)}apply(){const I=lt(this.urlTree.root,[],[],this.config).segmentGroup,C=new yn(I.segments,I.children);return this.expandSegmentGroup(this.ngModule,this.config,C,Be).pipe((0,Qt.U)(q=>this.createUrlTree($(q),this.urlTree.queryParams,this.urlTree.fragment))).pipe(W(q=>{if(q instanceof Vr)return this.allowRedirects=!1,this.match(q.urlTree);throw q instanceof Or?this.noMatchError(q):q}))}match(I){return this.expandSegmentGroup(this.ngModule,this.config,I.root,Be).pipe((0,Qt.U)(O=>this.createUrlTree($(O),I.queryParams,I.fragment))).pipe(W(O=>{throw O instanceof Or?this.noMatchError(O):O}))}noMatchError(I){return new Error(`Cannot match any routes. URL Segment: '${I.segmentGroup}'`)}createUrlTree(I,C,R){const O=I.segments.length>0?new yn([],{[Be]:I}):I;return new xn(O,C,R)}expandSegmentGroup(I,C,R,O){return 0===R.segments.length&&R.hasChildren()?this.expandChildren(I,C,R).pipe((0,Qt.U)(q=>new yn([],q))):this.expandSegment(I,R,C,R.segments,O,!0)}expandChildren(I,C,R){const O=[];for(const q of Object.keys(R.children))"primary"===q?O.unshift(q):O.push(q);return(0,xe.D)(O).pipe((0,Vn.b)(q=>{const ue=R.children[q],Te=V(C,q);return this.expandSegmentGroup(I,Te,ue,q).pipe((0,Qt.U)(mt=>({segment:mt,outlet:q})))}),(0,Wt.R)((q,ue)=>(q[ue.outlet]=ue.segment,q),{}),function En(T,I){const C=arguments.length>=2;return R=>R.pipe(T?(0,ze.h)((O,q)=>T(O,q,R)):je.y,He(1),C?(0,Qe.d)(I):(0,ot.T)(()=>new Dt.K))}())}expandSegment(I,C,R,O,q,ue){return(0,xe.D)(R).pipe((0,Vn.b)(Te=>this.expandSegmentAgainstRoute(I,C,R,Te,O,q,ue).pipe(W(nn=>{if(nn instanceof Or)return(0,at.of)(null);throw nn}))),(0,rn.P)(Te=>!!Te),W((Te,mt)=>{if(Te instanceof Dt.K||"EmptyError"===Te.name)return jr(C,O,q)?(0,at.of)(new yn([],{})):ds(C);throw Te}))}expandSegmentAgainstRoute(I,C,R,O,q,ue,Te){return zn(O,C,q,ue)?void 0===O.redirectTo?this.matchSegmentAgainstRoute(I,C,O,q,ue):Te&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(I,C,R,O,q,ue):ds(C):ds(C)}expandSegmentAgainstRouteUsingRedirect(I,C,R,O,q,ue){return"**"===O.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(I,R,O,ue):this.expandRegularSegmentAgainstRouteUsingRedirect(I,C,R,O,q,ue)}expandWildCardWithParamsAgainstRouteUsingRedirect(I,C,R,O){const q=this.applyRedirectCommands([],R.redirectTo,{});return R.redirectTo.startsWith("/")?wi(q):this.lineralizeSegments(R,q).pipe((0,Cn.z)(ue=>{const Te=new yn(ue,{});return this.expandSegment(I,Te,C,ue,O,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(I,C,R,O,q,ue){const{matched:Te,consumedSegments:mt,remainingSegments:nn,positionalParamSegments:Ir}=ye(C,O,q);if(!Te)return ds(C);const Dn=this.applyRedirectCommands(mt,O.redirectTo,Ir);return O.redirectTo.startsWith("/")?wi(Dn):this.lineralizeSegments(O,Dn).pipe((0,Cn.z)(Wr=>this.expandSegment(I,C,R,Wr.concat(nn),ue,!1)))}matchSegmentAgainstRoute(I,C,R,O,q){if("**"===R.path)return R.loadChildren?(R._loadedConfig?(0,at.of)(R._loadedConfig):this.configLoader.load(I.injector,R)).pipe((0,Qt.U)(Dn=>(R._loadedConfig=Dn,new yn(O,{})))):(0,at.of)(new yn(O,{}));const{matched:ue,consumedSegments:Te,remainingSegments:mt}=ye(C,R,O);return ue?this.getChildConfig(I,R,O).pipe((0,Cn.z)(Ir=>{const Dn=Ir.module,Wr=Ir.routes,{segmentGroup:wr,slicedSegments:Gs}=lt(C,Te,mt,Wr),io=new yn(wr.segments,wr.children);if(0===Gs.length&&io.hasChildren())return this.expandChildren(Dn,Wr,io).pipe((0,Qt.U)(jn=>new yn(Te,jn)));if(0===Wr.length&&0===Gs.length)return(0,at.of)(new yn(Te,{}));const Qi=J(R)===q;return this.expandSegment(Dn,io,Wr,Gs,Qi?Be:q,!0).pipe((0,Qt.U)(ko=>new yn(Te.concat(ko.segments),ko.children)))})):ds(C)}getChildConfig(I,C,R){return C.children?(0,at.of)(new Ao(C.children,I)):C.loadChildren?void 0!==C._loadedConfig?(0,at.of)(C._loadedConfig):this.runCanLoadGuards(I.injector,C,R).pipe((0,Cn.z)(O=>O?this.configLoader.load(I.injector,C).pipe((0,Qt.U)(q=>(C._loadedConfig=q,q))):function eo(T){return tt(In(`Cannot load children because the guard of the route "path: '${T.path}'" returned false`))}(C))):(0,at.of)(new Ao([],I))}runCanLoadGuards(I,C,R){const O=C.canLoad;if(!O||0===O.length)return(0,at.of)(!0);const q=O.map(ue=>{const Te=I.get(ue);let mt;if(function xi(T){return T&&us(T.canLoad)}(Te))mt=Te.canLoad(C,R);else{if(!us(Te))throw new Error("Invalid CanLoad guard");mt=Te(C,R)}return Gt(mt)});return(0,at.of)(q).pipe(Xs(),(0,fn.b)(ue=>{if(!qr(ue))return;const Te=In(`Redirecting to "${this.urlSerializer.serialize(ue)}"`);throw Te.url=ue,Te}),(0,Qt.U)(ue=>!0===ue))}lineralizeSegments(I,C){let R=[],O=C.root;for(;;){if(R=R.concat(O.segments),0===O.numberOfChildren)return(0,at.of)(R);if(O.numberOfChildren>1||!O.children[Be])return tt(new Error(`Only absolute redirects can have named outlets. redirectTo: '${I.redirectTo}'`));O=O.children[Be]}}applyRedirectCommands(I,C,R){return this.applyRedirectCreatreUrlTree(C,this.urlSerializer.parse(C),I,R)}applyRedirectCreatreUrlTree(I,C,R,O){const q=this.createSegmentGroup(I,C.root,R,O);return new xn(q,this.createQueryParams(C.queryParams,this.urlTree.queryParams),C.fragment)}createQueryParams(I,C){const R={};return Le(I,(O,q)=>{if("string"==typeof O&&O.startsWith(":")){const Te=O.substring(1);R[q]=C[Te]}else R[q]=O}),R}createSegmentGroup(I,C,R,O){const q=this.createSegments(I,C.segments,R,O);let ue={};return Le(C.children,(Te,mt)=>{ue[mt]=this.createSegmentGroup(I,Te,R,O)}),new yn(q,ue)}createSegments(I,C,R,O){return C.map(q=>q.path.startsWith(":")?this.findPosParam(I,q,O):this.findOrReturn(q,R))}findPosParam(I,C,R){const O=R[C.path.substring(1)];if(!O)throw new Error(`Cannot redirect to '${I}'. Cannot find '${C.path}'.`);return O}findOrReturn(I,C){let R=0;for(const O of C){if(O.path===I.path)return C.splice(R),O;R++}return I}}function $(T){const I={};for(const R of Object.keys(T.children)){const q=$(T.children[R]);(q.segments.length>0||q.hasChildren())&&(I[R]=q)}return function Wi(T){if(1===T.numberOfChildren&&T.children[Be]){const I=T.children[Be];return new yn(T.segments.concat(I.segments),I.children)}return T}(new yn(T.segments,I))}class F{constructor(I){this.path=I,this.route=this.path[this.path.length-1]}}class G{constructor(I,C){this.component=I,this.route=C}}function qe(T,I,C){const R=T._root;return Ei(R,I?I._root:null,C,[R.value])}function $n(T,I,C){const R=function hr(T){if(!T)return null;for(let I=T.parent;I;I=I.parent){const C=I.routeConfig;if(C&&C._loadedConfig)return C._loadedConfig}return null}(I);return(R?R.module.injector:C).get(T)}function Ei(T,I,C,R,O={canDeactivateChecks:[],canActivateChecks:[]}){const q=Ie(I);return T.children.forEach(ue=>{(function Mi(T,I,C,R,O={canDeactivateChecks:[],canActivateChecks:[]}){const q=T.value,ue=I?I.value:null,Te=C?C.getContext(T.value.outlet):null;if(ue&&q.routeConfig===ue.routeConfig){const mt=function Us(T,I,C){if("function"==typeof C)return C(T,I);switch(C){case"pathParamsChange":return!_n(T.url,I.url);case"pathParamsOrQueryParamsChange":return!_n(T.url,I.url)||!sr(T.queryParams,I.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!vi(T,I)||!sr(T.queryParams,I.queryParams);default:return!vi(T,I)}}(ue,q,q.routeConfig.runGuardsAndResolvers);mt?O.canActivateChecks.push(new F(R)):(q.data=ue.data,q._resolvedData=ue._resolvedData),Ei(T,I,q.component?Te?Te.children:null:C,R,O),mt&&Te&&Te.outlet&&Te.outlet.isActivated&&O.canDeactivateChecks.push(new G(Te.outlet.component,ue))}else ue&&ns(I,Te,O),O.canActivateChecks.push(new F(R)),Ei(T,null,q.component?Te?Te.children:null:C,R,O)})(ue,q[ue.value.outlet],C,R.concat([ue.value]),O),delete q[ue.value.outlet]}),Le(q,(ue,Te)=>ns(ue,C.getContext(Te),O)),O}function ns(T,I,C){const R=Ie(T),O=T.value;Le(R,(q,ue)=>{ns(q,O.component?I?I.children.getContext(ue):null:I,C)}),C.canDeactivateChecks.push(new G(O.component&&I&&I.outlet&&I.outlet.isActivated?I.outlet.component:null,O))}class ji{}function So(T){return new Pe.y(I=>I.error(T))}class Vo{constructor(I,C,R,O,q,ue){this.rootComponentType=I,this.config=C,this.urlTree=R,this.url=O,this.paramsInheritanceStrategy=q,this.relativeLinkResolution=ue}recognize(){const I=lt(this.urlTree.root,[],[],this.config.filter(ue=>void 0===ue.redirectTo),this.relativeLinkResolution).segmentGroup,C=this.processSegmentGroup(this.config,I,Be);if(null===C)return null;const R=new yo([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Be,this.rootComponentType,null,this.urlTree.root,-1,{}),O=new re(R,C),q=new os(this.url,O);return this.inheritParamsAndData(q._root),q}inheritParamsAndData(I){const C=I.value,R=Ar(C,this.paramsInheritanceStrategy);C.params=Object.freeze(R.params),C.data=Object.freeze(R.data),I.children.forEach(O=>this.inheritParamsAndData(O))}processSegmentGroup(I,C,R){return 0===C.segments.length&&C.hasChildren()?this.processChildren(I,C):this.processSegment(I,C,C.segments,R)}processChildren(I,C){const R=[];for(const q of Object.keys(C.children)){const ue=C.children[q],Te=V(I,q),mt=this.processSegmentGroup(Te,ue,q);if(null===mt)return null;R.push(...mt)}const O=ha(R);return function Ko(T){T.sort((I,C)=>I.value.outlet===Be?-1:C.value.outlet===Be?1:I.value.outlet.localeCompare(C.value.outlet))}(O),O}processSegment(I,C,R,O){for(const q of I){const ue=this.processSegmentAgainstRoute(q,C,R,O);if(null!==ue)return ue}return jr(C,R,O)?[]:null}processSegmentAgainstRoute(I,C,R,O){if(I.redirectTo||!zn(I,C,R,O))return null;let q,ue=[],Te=[];if("**"===I.path){const wr=R.length>0?Pn(R).parameters:{};q=new yo(R,wr,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,js(I),J(I),I.component,I,Zo(C),xo(C)+R.length,Bo(I))}else{const wr=ye(C,I,R);if(!wr.matched)return null;ue=wr.consumedSegments,Te=wr.remainingSegments,q=new yo(ue,wr.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,js(I),J(I),I.component,I,Zo(C),xo(C)+ue.length,Bo(I))}const mt=function Ca(T){return T.children?T.children:T.loadChildren?T._loadedConfig.routes:[]}(I),{segmentGroup:nn,slicedSegments:Ir}=lt(C,ue,Te,mt.filter(wr=>void 0===wr.redirectTo),this.relativeLinkResolution);if(0===Ir.length&&nn.hasChildren()){const wr=this.processChildren(mt,nn);return null===wr?null:[new re(q,wr)]}if(0===mt.length&&0===Ir.length)return[new re(q,[])];const Dn=J(I)===O,Wr=this.processSegment(mt,nn,Ir,Dn?Be:O);return null===Wr?null:[new re(q,Wr)]}}function Uo(T){const I=T.value.routeConfig;return I&&""===I.path&&void 0===I.redirectTo}function ha(T){const I=[],C=new Set;for(const R of T){if(!Uo(R)){I.push(R);continue}const O=I.find(q=>R.value.routeConfig===q.value.routeConfig);void 0!==O?(O.children.push(...R.children),C.add(O)):I.push(R)}for(const R of C){const O=ha(R.children);I.push(new re(R.value,O))}return I.filter(R=>!C.has(R))}function Zo(T){let I=T;for(;I._sourceSegment;)I=I._sourceSegment;return I}function xo(T){let I=T,C=I._segmentIndexShift?I._segmentIndexShift:0;for(;I._sourceSegment;)I=I._sourceSegment,C+=I._segmentIndexShift?I._segmentIndexShift:0;return C-1}function js(T){return T.data||{}}function Bo(T){return T.resolve||{}}function Mo(T){return[...Object.keys(T),...Object.getOwnPropertySymbols(T)]}function bi(T){return(0,Ft.w)(I=>{const C=T(I);return C?(0,xe.D)(C).pipe((0,Qt.U)(()=>I)):(0,at.of)(I)})}class Qo extends class di{shouldDetach(I){return!1}store(I,C){}shouldAttach(I){return!1}retrieve(I){return null}shouldReuseRoute(I,C){return I.routeConfig===C.routeConfig}}{}const Wa=new _.OlP("ROUTES");class Hl{constructor(I,C,R,O){this.injector=I,this.compiler=C,this.onLoadStartListener=R,this.onLoadEndListener=O}load(I,C){if(C._loader$)return C._loader$;this.onLoadStartListener&&this.onLoadStartListener(C);const O=this.loadModuleFactory(C.loadChildren).pipe((0,Qt.U)(q=>{this.onLoadEndListener&&this.onLoadEndListener(C);const ue=q.create(I);return new Ao(tr(ue.injector.get(Wa,void 0,_.XFs.Self|_.XFs.Optional)).map(U),ue)}),W(q=>{throw C._loader$=void 0,q}));return C._loader$=new Ye(O,()=>new B.x).pipe(nt()),C._loader$}loadModuleFactory(I){return Gt(I()).pipe((0,Cn.z)(C=>C instanceof _.YKP?(0,at.of)(C):(0,xe.D)(this.compiler.compileModuleAsync(C))))}}class Da{shouldProcessUrl(I){return!0}extract(I){return I}merge(I,C){return I}}function Ta(T){throw T}function to(T,I,C){return I.parse("/")}function ki(T,I){return(0,at.of)(null)}const Po={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},gi={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let mi=(()=>{class T{constructor(C,R,O,q,ue,Te,mt){this.rootComponentType=C,this.urlSerializer=R,this.rootContexts=O,this.location=q,this.config=mt,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new B.x,this.errorHandler=Ta,this.malformedUriErrorHandler=to,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:ki,afterPreactivation:ki},this.urlHandlingStrategy=new Da,this.routeReuseStrategy=new Qo,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=ue.get(_.h0i),this.console=ue.get(_.c2e);const Dn=ue.get(_.R0b);this.isNgZoneEnabled=Dn instanceof _.R0b&&_.R0b.isInAngularZone(),this.resetConfig(mt),this.currentUrlTree=function Jt(){return new xn(new yn([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Hl(ue,Te,Wr=>this.triggerEvent(new un(Wr)),Wr=>this.triggerEvent(new zr(Wr))),this.routerState=Pt(this.currentUrlTree,this.rootComponentType),this.transitions=new oe({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var C;return null===(C=this.location.getState())||void 0===C?void 0:C.\u0275routerPageId}setupNavigations(C){const R=this.events;return C.pipe((0,ze.h)(O=>0!==O.id),(0,Qt.U)(O=>Object.assign(Object.assign({},O),{extractedUrl:this.urlHandlingStrategy.extract(O.rawUrl)})),(0,Ft.w)(O=>{let q=!1,ue=!1;return(0,at.of)(O).pipe((0,fn.b)(Te=>{this.currentNavigation={id:Te.id,initialUrl:Te.currentRawUrl,extractedUrl:Te.extractedUrl,trigger:Te.source,extras:Te.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,Ft.w)(Te=>{const mt=this.browserUrlTree.toString(),nn=!this.navigated||Te.extractedUrl.toString()!==mt||mt!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||nn)&&this.urlHandlingStrategy.shouldProcessUrl(Te.rawUrl))return rs(Te.source)&&(this.browserUrlTree=Te.extractedUrl),(0,at.of)(Te).pipe((0,Ft.w)(Dn=>{const Wr=this.transitions.getValue();return R.next(new Mr(Dn.id,this.serializeUrl(Dn.extractedUrl),Dn.source,Dn.restoredState)),Wr!==this.transitions.getValue()?Oe.E:Promise.resolve(Dn)}),function L(T,I,C,R){return(0,Ft.w)(O=>function wo(T,I,C,R,O){return new Vs(T,I,C,R,O).apply()}(T,I,C,O.extractedUrl,R).pipe((0,Qt.U)(q=>Object.assign(Object.assign({},O),{urlAfterRedirects:q}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,fn.b)(Dn=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:Dn.urlAfterRedirects})}),function fs(T,I,C,R,O){return(0,Cn.z)(q=>function ni(T,I,C,R,O="emptyOnly",q="legacy"){try{const ue=new Vo(T,I,C,R,O,q).recognize();return null===ue?So(new ji):(0,at.of)(ue)}catch(ue){return So(ue)}}(T,I,q.urlAfterRedirects,C(q.urlAfterRedirects),R,O).pipe((0,Qt.U)(ue=>Object.assign(Object.assign({},q),{targetSnapshot:ue}))))}(this.rootComponentType,this.config,Dn=>this.serializeUrl(Dn),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,fn.b)(Dn=>{if("eager"===this.urlUpdateStrategy){if(!Dn.extras.skipLocationChange){const wr=this.urlHandlingStrategy.merge(Dn.urlAfterRedirects,Dn.rawUrl);this.setBrowserUrl(wr,Dn)}this.browserUrlTree=Dn.urlAfterRedirects}const Wr=new Nr(Dn.id,this.serializeUrl(Dn.extractedUrl),this.serializeUrl(Dn.urlAfterRedirects),Dn.targetSnapshot);R.next(Wr)}));if(nn&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:Wr,extractedUrl:wr,source:Gs,restoredState:io,extras:Qi}=Te,bo=new Mr(Wr,this.serializeUrl(wr),Gs,io);R.next(bo);const ko=Pt(wr,this.rootComponentType).snapshot;return(0,at.of)(Object.assign(Object.assign({},Te),{targetSnapshot:ko,urlAfterRedirects:wr,extras:Object.assign(Object.assign({},Qi),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=Te.rawUrl,Te.resolve(null),Oe.E}),bi(Te=>{const{targetSnapshot:mt,id:nn,extractedUrl:Ir,rawUrl:Dn,extras:{skipLocationChange:Wr,replaceUrl:wr}}=Te;return this.hooks.beforePreactivation(mt,{navigationId:nn,appliedUrlTree:Ir,rawUrlTree:Dn,skipLocationChange:!!Wr,replaceUrl:!!wr})}),(0,fn.b)(Te=>{const mt=new er(Te.id,this.serializeUrl(Te.extractedUrl),this.serializeUrl(Te.urlAfterRedirects),Te.targetSnapshot);this.triggerEvent(mt)}),(0,Qt.U)(Te=>Object.assign(Object.assign({},Te),{guards:qe(Te.targetSnapshot,Te.currentSnapshot,this.rootContexts)})),function ca(T,I){return(0,Cn.z)(C=>{const{targetSnapshot:R,currentSnapshot:O,guards:{canActivateChecks:q,canDeactivateChecks:ue}}=C;return 0===ue.length&&0===q.length?(0,at.of)(Object.assign(Object.assign({},C),{guardsResult:!0})):function nl(T,I,C,R){return(0,xe.D)(T).pipe((0,Cn.z)(O=>function Yi(T,I,C,R,O){const q=I&&I.routeConfig?I.routeConfig.canDeactivate:null;if(!q||0===q.length)return(0,at.of)(!0);const ue=q.map(Te=>{const mt=$n(Te,I,O);let nn;if(function Br(T){return T&&us(T.canDeactivate)}(mt))nn=Gt(mt.canDeactivate(T,I,C,R));else{if(!us(mt))throw new Error("Invalid CanDeactivate guard");nn=Gt(mt(T,I,C,R))}return nn.pipe((0,rn.P)())});return(0,at.of)(ue).pipe(Xs())}(O.component,O.route,C,I,R)),(0,rn.P)(O=>!0!==O,!0))}(ue,R,O,T).pipe((0,Cn.z)(Te=>Te&&function ts(T){return"boolean"==typeof T}(Te)?function Lo(T,I,C,R){return(0,xe.D)(I).pipe((0,Vn.b)(O=>(0,ne.z)(function Bi(T,I){return null!==T&&I&&I(new _i(T)),(0,at.of)(!0)}(O.route.parent,R),function Bs(T,I){return null!==T&&I&&I(new ge(T)),(0,at.of)(!0)}(O.route,R),function da(T,I,C){const R=I[I.length-1],q=I.slice(0,I.length-1).reverse().map(ue=>function cn(T){const I=T.routeConfig?T.routeConfig.canActivateChild:null;return I&&0!==I.length?{node:T,guards:I}:null}(ue)).filter(ue=>null!==ue).map(ue=>ke(()=>{const Te=ue.guards.map(mt=>{const nn=$n(mt,ue.node,C);let Ir;if(function Rs(T){return T&&us(T.canActivateChild)}(nn))Ir=Gt(nn.canActivateChild(R,T));else{if(!us(nn))throw new Error("Invalid CanActivateChild guard");Ir=Gt(nn(R,T))}return Ir.pipe((0,rn.P)())});return(0,at.of)(Te).pipe(Xs())}));return(0,at.of)(q).pipe(Xs())}(T,O.path,C),function hs(T,I,C){const R=I.routeConfig?I.routeConfig.canActivate:null;if(!R||0===R.length)return(0,at.of)(!0);const O=R.map(q=>ke(()=>{const ue=$n(q,I,C);let Te;if(function Js(T){return T&&us(T.canActivate)}(ue))Te=Gt(ue.canActivate(I,T));else{if(!us(ue))throw new Error("Invalid CanActivate guard");Te=Gt(ue(I,T))}return Te.pipe((0,rn.P)())}));return(0,at.of)(O).pipe(Xs())}(T,O.route,C))),(0,rn.P)(O=>!0!==O,!0))}(R,q,T,I):(0,at.of)(Te)),(0,Qt.U)(Te=>Object.assign(Object.assign({},C),{guardsResult:Te})))})}(this.ngModule.injector,Te=>this.triggerEvent(Te)),(0,fn.b)(Te=>{if(qr(Te.guardsResult)){const nn=In(`Redirecting to "${this.serializeUrl(Te.guardsResult)}"`);throw nn.url=Te.guardsResult,nn}const mt=new zt(Te.id,this.serializeUrl(Te.extractedUrl),this.serializeUrl(Te.urlAfterRedirects),Te.targetSnapshot,!!Te.guardsResult);this.triggerEvent(mt)}),(0,ze.h)(Te=>!!Te.guardsResult||(this.restoreHistory(Te),this.cancelNavigationTransition(Te,""),!1)),bi(Te=>{if(Te.guards.canActivateChecks.length)return(0,at.of)(Te).pipe((0,fn.b)(mt=>{const nn=new bn(mt.id,this.serializeUrl(mt.extractedUrl),this.serializeUrl(mt.urlAfterRedirects),mt.targetSnapshot);this.triggerEvent(nn)}),(0,Ft.w)(mt=>{let nn=!1;return(0,at.of)(mt).pipe(function Yo(T,I){return(0,Cn.z)(C=>{const{targetSnapshot:R,guards:{canActivateChecks:O}}=C;if(!O.length)return(0,at.of)(C);let q=0;return(0,xe.D)(O).pipe((0,Vn.b)(ue=>function $a(T,I,C,R){return function Hs(T,I,C,R){const O=Mo(T);if(0===O.length)return(0,at.of)({});const q={};return(0,xe.D)(O).pipe((0,Cn.z)(ue=>function Ga(T,I,C,R){const O=$n(T,I,R);return Gt(O.resolve?O.resolve(I,C):O(I,C))}(T[ue],I,C,R).pipe((0,fn.b)(Te=>{q[ue]=Te}))),He(1),(0,Cn.z)(()=>Mo(q).length===O.length?(0,at.of)(q):Oe.E))}(T._resolve,T,I,R).pipe((0,Qt.U)(q=>(T._resolvedData=q,T.data=Object.assign(Object.assign({},T.data),Ar(T,C).resolve),null)))}(ue.route,R,T,I)),(0,fn.b)(()=>q++),He(1),(0,Cn.z)(ue=>q===O.length?(0,at.of)(C):Oe.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,fn.b)({next:()=>nn=!0,complete:()=>{nn||(this.restoreHistory(mt),this.cancelNavigationTransition(mt,"At least one route resolver didn't emit any value."))}}))}),(0,fn.b)(mt=>{const nn=new Fn(mt.id,this.serializeUrl(mt.extractedUrl),this.serializeUrl(mt.urlAfterRedirects),mt.targetSnapshot);this.triggerEvent(nn)}))}),bi(Te=>{const{targetSnapshot:mt,id:nn,extractedUrl:Ir,rawUrl:Dn,extras:{skipLocationChange:Wr,replaceUrl:wr}}=Te;return this.hooks.afterPreactivation(mt,{navigationId:nn,appliedUrlTree:Ir,rawUrlTree:Dn,skipLocationChange:!!Wr,replaceUrl:!!wr})}),(0,Qt.U)(Te=>{const mt=function Ys(T,I,C){const R=xr(T,I._root,C?C._root:void 0);return new it(R,I)}(this.routeReuseStrategy,Te.targetSnapshot,Te.currentRouterState);return Object.assign(Object.assign({},Te),{targetRouterState:mt})}),(0,fn.b)(Te=>{this.currentUrlTree=Te.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(Te.urlAfterRedirects,Te.rawUrl),this.routerState=Te.targetRouterState,"deferred"===this.urlUpdateStrategy&&(Te.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,Te),this.browserUrlTree=Te.urlAfterRedirects)}),((T,I,C)=>(0,Qt.U)(R=>(new Ps(I,R.targetRouterState,R.currentRouterState,C).activate(T),R)))(this.rootContexts,this.routeReuseStrategy,Te=>this.triggerEvent(Te)),(0,fn.b)({next(){q=!0},complete(){q=!0}}),function dn(T){return(0,dt.e)((I,C)=>{try{I.subscribe(C)}finally{C.add(T)}})}(()=>{var Te;q||ue||this.cancelNavigationTransition(O,`Navigation ID ${O.id} is not equal to the current navigation id ${this.navigationId}`),(null===(Te=this.currentNavigation)||void 0===Te?void 0:Te.id)===O.id&&(this.currentNavigation=null)}),W(Te=>{if(ue=!0,function sn(T){return T&&T[Kn]}(Te)){const mt=qr(Te.url);mt||(this.navigated=!0,this.restoreHistory(O,!0));const nn=new fr(O.id,this.serializeUrl(O.extractedUrl),Te.message);R.next(nn),mt?setTimeout(()=>{const Ir=this.urlHandlingStrategy.merge(Te.url,this.rawUrlTree),Dn={skipLocationChange:O.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||rs(O.source)};this.scheduleNavigation(Ir,"imperative",null,Dn,{resolve:O.resolve,reject:O.reject,promise:O.promise})},0):O.resolve(!1)}else{this.restoreHistory(O,!0);const mt=new vn(O.id,this.serializeUrl(O.extractedUrl),Te);R.next(mt);try{O.resolve(this.errorHandler(Te))}catch(nn){O.reject(nn)}}return Oe.E}))}))}resetRootComponentType(C){this.rootComponentType=C,this.routerState.root.component=this.rootComponentType}setTransition(C){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),C))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(C=>{const R="popstate"===C.type?"popstate":"hashchange";"popstate"===R&&setTimeout(()=>{var O;const q={replaceUrl:!0},ue=(null===(O=C.state)||void 0===O?void 0:O.navigationId)?C.state:null;if(ue){const mt=Object.assign({},ue);delete mt.navigationId,delete mt.\u0275routerPageId,0!==Object.keys(mt).length&&(q.state=mt)}const Te=this.parseUrl(C.url);this.scheduleNavigation(Te,R,ue,q)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(C){this.events.next(C)}resetConfig(C){Os(C),this.config=C.map(U),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(C,R={}){const{relativeTo:O,queryParams:q,fragment:ue,queryParamsHandling:Te,preserveFragment:mt}=R,nn=O||this.routerState.root,Ir=mt?this.currentUrlTree.fragment:ue;let Dn=null;switch(Te){case"merge":Dn=Object.assign(Object.assign({},this.currentUrlTree.queryParams),q);break;case"preserve":Dn=this.currentUrlTree.queryParams;break;default:Dn=q||null}return null!==Dn&&(Dn=this.removeEmptyProps(Dn)),function Ne(T,I,C,R,O){if(0===C.length)return bt(I.root,I.root,I.root,R,O);const q=function an(T){if("string"==typeof T[0]&&1===T.length&&"/"===T[0])return new Ut(!0,0,T);let I=0,C=!1;const R=T.reduce((O,q,ue)=>{if("object"==typeof q&&null!=q){if(q.outlets){const Te={};return Le(q.outlets,(mt,nn)=>{Te[nn]="string"==typeof mt?mt.split("/"):mt}),[...O,{outlets:Te}]}if(q.segmentPath)return[...O,q.segmentPath]}return"string"!=typeof q?[...O,q]:0===ue?(q.split("/").forEach((Te,mt)=>{0==mt&&"."===Te||(0==mt&&""===Te?C=!0:".."===Te?I++:""!=Te&&O.push(Te))}),O):[...O,q]},[]);return new Ut(C,I,R)}(C);if(q.toRoot())return bt(I.root,I.root,new yn([],{}),R,O);const ue=function wn(T,I,C){if(T.isAbsolute)return new _r(I.root,!0,0);if(-1===C.snapshot._lastPathIndex){const q=C.snapshot._urlSegment;return new _r(q,q===I.root,0)}const R=De(T.commands[0])?0:1;return function Si(T,I,C){let R=T,O=I,q=C;for(;q>O;){if(q-=O,R=R.parent,!R)throw new Error("Invalid number of '../'");O=R.segments.length}return new _r(R,!1,O-q)}(C.snapshot._urlSegment,C.snapshot._lastPathIndex+R,T.numberOfDoubleDots)}(q,I,T),Te=ue.processChildren?Cs(ue.segmentGroup,ue.index,q.commands):$i(ue.segmentGroup,ue.index,q.commands);return bt(I.root,ue.segmentGroup,Te,R,O)}(nn,this.currentUrlTree,C,Dn,null!=Ir?Ir:null)}navigateByUrl(C,R={skipLocationChange:!1}){const O=qr(C)?C:this.parseUrl(C),q=this.urlHandlingStrategy.merge(O,this.rawUrlTree);return this.scheduleNavigation(q,"imperative",null,R)}navigate(C,R={skipLocationChange:!1}){return function Aa(T){for(let I=0;I<T.length;I++){const C=T[I];if(null==C)throw new Error(`The requested path contains ${C} segment at index ${I}`)}}(C),this.navigateByUrl(this.createUrlTree(C,R),R)}serializeUrl(C){return this.urlSerializer.serialize(C)}parseUrl(C){let R;try{R=this.urlSerializer.parse(C)}catch(O){R=this.malformedUriErrorHandler(O,this.urlSerializer,C)}return R}isActive(C,R){let O;if(O=!0===R?Object.assign({},Po):!1===R?Object.assign({},gi):R,qr(C))return Ee(this.currentUrlTree,C,O);const q=this.parseUrl(C);return Ee(this.currentUrlTree,q,O)}removeEmptyProps(C){return Object.keys(C).reduce((R,O)=>{const q=C[O];return null!=q&&(R[O]=q),R},{})}processNavigations(){this.navigations.subscribe(C=>{this.navigated=!0,this.lastSuccessfulId=C.id,this.currentPageId=C.targetPageId,this.events.next(new ar(C.id,this.serializeUrl(C.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,C.resolve(!0)},C=>{this.console.warn(`Unhandled Navigation Error: ${C}`)})}scheduleNavigation(C,R,O,q,ue){var Te,mt;if(this.disposed)return Promise.resolve(!1);let nn,Ir,Dn;ue?(nn=ue.resolve,Ir=ue.reject,Dn=ue.promise):Dn=new Promise((Gs,io)=>{nn=Gs,Ir=io});const Wr=++this.navigationId;let wr;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(O=this.location.getState()),wr=O&&O.\u0275routerPageId?O.\u0275routerPageId:q.replaceUrl||q.skipLocationChange?null!==(Te=this.browserPageId)&&void 0!==Te?Te:0:(null!==(mt=this.browserPageId)&&void 0!==mt?mt:0)+1):wr=0,this.setTransition({id:Wr,targetPageId:wr,source:R,restoredState:O,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:C,extras:q,resolve:nn,reject:Ir,promise:Dn,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Dn.catch(Gs=>Promise.reject(Gs))}setBrowserUrl(C,R){const O=this.urlSerializer.serialize(C),q=Object.assign(Object.assign({},R.extras.state),this.generateNgRouterState(R.id,R.targetPageId));this.location.isCurrentPathEqualTo(O)||R.extras.replaceUrl?this.location.replaceState(O,"",q):this.location.go(O,"",q)}restoreHistory(C,R=!1){var O,q;if("computed"===this.canceledNavigationResolution){const ue=this.currentPageId-C.targetPageId;"popstate"!==C.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(O=this.currentNavigation)||void 0===O?void 0:O.finalUrl)||0===ue?this.currentUrlTree===(null===(q=this.currentNavigation)||void 0===q?void 0:q.finalUrl)&&0===ue&&(this.resetState(C),this.browserUrlTree=C.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(ue)}else"replace"===this.canceledNavigationResolution&&(R&&this.resetState(C),this.resetUrlToCurrentUrlTree())}resetState(C){this.routerState=C.currentRouterState,this.currentUrlTree=C.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,C.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(C,R){const O=new fr(C.id,this.serializeUrl(C.extractedUrl),R);this.triggerEvent(O),C.resolve(!1)}generateNgRouterState(C,R){return"computed"===this.canceledNavigationResolution?{navigationId:C,\u0275routerPageId:R}:{navigationId:C}}}return T.\u0275fac=function(C){_.$Z()},T.\u0275prov=_.Yz7({token:T,factory:T.\u0275fac}),T})();function rs(T){return"imperative"!==T}let Ci=(()=>{class T{constructor(C,R,O,q,ue){this.router=C,this.route=R,this.tabIndexAttribute=O,this.renderer=q,this.el=ue,this.commands=null,this.onChanges=new B.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(C){if(null!=this.tabIndexAttribute)return;const R=this.renderer,O=this.el.nativeElement;null!==C?R.setAttribute(O,"tabindex",C):R.removeAttribute(O,"tabindex")}ngOnChanges(C){this.onChanges.next(this)}set routerLink(C){null!=C?(this.commands=Array.isArray(C)?C:[C],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const C={skipLocationChange:Ii(this.skipLocationChange),replaceUrl:Ii(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,C),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Ii(this.preserveFragment)})}}return T.\u0275fac=function(C){return new(C||T)(_.Y36(mi),_.Y36(pr),_.$8M("tabindex"),_.Y36(_.Qsj),_.Y36(_.SBq))},T.\u0275dir=_.lG2({type:T,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(C,R){1&C&&_.NdJ("click",function(){return R.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[_.TTD]}),T})(),Ds=(()=>{class T{constructor(C,R,O){this.router=C,this.route=R,this.locationStrategy=O,this.commands=null,this.href=null,this.onChanges=new B.x,this.subscription=C.events.subscribe(q=>{q instanceof ar&&this.updateTargetUrlAndHref()})}set routerLink(C){this.commands=null!=C?Array.isArray(C)?C:[C]:null}ngOnChanges(C){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(C,R,O,q,ue){if(0!==C||R||O||q||ue||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const Te={skipLocationChange:Ii(this.skipLocationChange),replaceUrl:Ii(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,Te),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Ii(this.preserveFragment)})}}return T.\u0275fac=function(C){return new(C||T)(_.Y36(mi),_.Y36(pr),_.Y36(ir.S$))},T.\u0275dir=_.lG2({type:T,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(C,R){1&C&&_.NdJ("click",function(q){return R.onClick(q.button,q.ctrlKey,q.shiftKey,q.altKey,q.metaKey)}),2&C&&_.uIk("target",R.target)("href",R.href,_.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[_.TTD]}),T})();function Ii(T){return""===T||!!T}class Oo{}class $l{preload(I,C){return(0,at.of)(null)}}let Fi=(()=>{class T{constructor(C,R,O,q){this.router=C,this.injector=O,this.preloadingStrategy=q,this.loader=new Hl(O,R,mt=>C.triggerEvent(new un(mt)),mt=>C.triggerEvent(new zr(mt)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,ze.h)(C=>C instanceof ar),(0,Vn.b)(()=>this.preload())).subscribe(()=>{})}preload(){const C=this.injector.get(_.h0i);return this.processRoutes(C,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(C,R){const O=[];for(const q of R)if(q.loadChildren&&!q.canLoad&&q._loadedConfig){const ue=q._loadedConfig;O.push(this.processRoutes(ue.module,ue.routes))}else q.loadChildren&&!q.canLoad?O.push(this.preloadConfig(C,q)):q.children&&O.push(this.processRoutes(C,q.children));return(0,xe.D)(O).pipe((0,On.J)(),(0,Qt.U)(q=>{}))}preloadConfig(C,R){return this.preloadingStrategy.preload(R,()=>(R._loadedConfig?(0,at.of)(R._loadedConfig):this.loader.load(C.injector,R)).pipe((0,Cn.z)(q=>(R._loadedConfig=q,this.processRoutes(q.module,q.routes)))))}}return T.\u0275fac=function(C){return new(C||T)(_.LFG(mi),_.LFG(_.Sil),_.LFG(_.zs3),_.LFG(Oo))},T.\u0275prov=_.Yz7({token:T,factory:T.\u0275fac}),T})(),Ts=(()=>{class T{constructor(C,R,O={}){this.router=C,this.viewportScroller=R,this.options=O,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},O.scrollPositionRestoration=O.scrollPositionRestoration||"disabled",O.anchorScrolling=O.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(C=>{C instanceof Mr?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=C.navigationTrigger,this.restoredId=C.restoredState?C.restoredState.navigationId:0):C instanceof ar&&(this.lastId=C.id,this.scheduleScrollEvent(C,this.router.parseUrl(C.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(C=>{C instanceof vt&&(C.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(C.position):C.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(C.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(C,R){this.router.triggerEvent(new vt(C,"popstate"===this.lastSource?this.store[this.restoredId]:null,R))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return T.\u0275fac=function(C){_.$Z()},T.\u0275prov=_.Yz7({token:T,factory:T.\u0275fac}),T})();const S=new _.OlP("ROUTER_CONFIGURATION"),x=new _.OlP("ROUTER_FORROOT_GUARD"),Q=[ir.Ye,{provide:Zr,useClass:Ri},{provide:mi,useFactory:function yi(T,I,C,R,O,q,ue={},Te,mt){const nn=new mi(null,T,I,C,R,O,tr(q));return Te&&(nn.urlHandlingStrategy=Te),mt&&(nn.routeReuseStrategy=mt),function ps(T,I){T.errorHandler&&(I.errorHandler=T.errorHandler),T.malformedUriErrorHandler&&(I.malformedUriErrorHandler=T.malformedUriErrorHandler),T.onSameUrlNavigation&&(I.onSameUrlNavigation=T.onSameUrlNavigation),T.paramsInheritanceStrategy&&(I.paramsInheritanceStrategy=T.paramsInheritanceStrategy),T.relativeLinkResolution&&(I.relativeLinkResolution=T.relativeLinkResolution),T.urlUpdateStrategy&&(I.urlUpdateStrategy=T.urlUpdateStrategy),T.canceledNavigationResolution&&(I.canceledNavigationResolution=T.canceledNavigationResolution)}(ue,nn),ue.enableTracing&&nn.events.subscribe(Ir=>{var Dn,Wr;null===(Dn=console.group)||void 0===Dn||Dn.call(console,`Router Event: ${Ir.constructor.name}`),console.log(Ir.toString()),console.log(Ir),null===(Wr=console.groupEnd)||void 0===Wr||Wr.call(console)}),nn},deps:[Zr,Zi,ir.Ye,_.zs3,_.Sil,Wa,S,[class Ia{},new _.FiY],[class Is{},new _.FiY]]},Zi,{provide:pr,useFactory:function No(T){return T.routerState.root},deps:[mi]},Fi,$l,class Ns{preload(I,C){return C().pipe(W(()=>(0,at.of)(null)))}},{provide:S,useValue:{enableTracing:!1}}];function ve(){return new _.PXZ("Router",mi)}let Je=(()=>{class T{constructor(C,R){}static forRoot(C,R){return{ngModule:T,providers:[Q,ri(C),{provide:x,useFactory:zi,deps:[[mi,new _.FiY,new _.tp0]]},{provide:S,useValue:R||{}},{provide:ir.S$,useFactory:Cr,deps:[ir.lw,[new _.tBr(ir.mr),new _.FiY],S]},{provide:Ts,useFactory:pn,deps:[mi,ir.EM,S]},{provide:Oo,useExisting:R&&R.preloadingStrategy?R.preloadingStrategy:$l},{provide:_.PXZ,multi:!0,useFactory:ve},[Eo,{provide:_.ip1,multi:!0,useFactory:fa,deps:[Eo]},{provide:Gr,useFactory:Nt,deps:[Eo]},{provide:_.tb,multi:!0,useExisting:Gr}]]}}static forChild(C){return{ngModule:T,providers:[ri(C)]}}}return T.\u0275fac=function(C){return new(C||T)(_.LFG(x,8),_.LFG(mi,8))},T.\u0275mod=_.oAB({type:T}),T.\u0275inj=_.cJS({}),T})();function pn(T,I,C){return C.scrollOffset&&I.setOffset(C.scrollOffset),new Ts(T,I,C)}function Cr(T,I,C={}){return C.useHash?new ir.Do(T,I):new ir.b0(T,I)}function zi(T){return"guarded"}function ri(T){return[{provide:_.deG,multi:!0,useValue:T},{provide:Wa,multi:!0,useValue:T}]}let Eo=(()=>{class T{constructor(C){this.injector=C,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new B.x}appInitializer(){return this.injector.get(ir.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let R=null;const O=new Promise(Te=>R=Te),q=this.injector.get(mi),ue=this.injector.get(S);return"disabled"===ue.initialNavigation?(q.setUpLocationChangeListener(),R(!0)):"enabled"===ue.initialNavigation||"enabledBlocking"===ue.initialNavigation?(q.hooks.afterPreactivation=()=>this.initNavigation?(0,at.of)(null):(this.initNavigation=!0,R(!0),this.resultOfPreactivationDone),q.initialNavigation()):R(!0),O})}bootstrapListener(C){const R=this.injector.get(S),O=this.injector.get(Fi),q=this.injector.get(Ts),ue=this.injector.get(mi),Te=this.injector.get(_.z2F);C===Te.components[0]&&(("enabledNonBlocking"===R.initialNavigation||void 0===R.initialNavigation)&&ue.initialNavigation(),O.setUpPreloading(),q.init(),ue.resetRootComponentType(Te.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return T.\u0275fac=function(C){return new(C||T)(_.LFG(_.zs3))},T.\u0275prov=_.Yz7({token:T,factory:T.\u0275fac}),T})();function fa(T){return T.appInitializer.bind(T)}function Nt(T){return T.bootstrapListener.bind(T)}const Gr=new _.OlP("Router Initializer")},3942:(en,Xe,z)=>{"use strict";z.d(Xe,{Z:()=>Et});var _=z(2090),B=z(4859),oe=z(9681),Pe=z(1877);class Ae{constructor(tt,yt){this._delegate=tt,this.firebase=yt,(0,oe._addComponent)(tt,new B.wA("app-compat",()=>this,"PUBLIC")),this.container=tt.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(tt){this._delegate.automaticDataCollectionEnabled=tt}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(tt=>{this._delegate.checkDestroyed(),tt()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,oe.deleteApp)(this._delegate)))}_getService(tt,yt=oe._DEFAULT_ENTRY_NAME){var ke;this._delegate.checkDestroyed();const Ht=this._delegate.container.getProvider(tt);return!Ht.isInitialized()&&"EXPLICIT"===(null===(ke=Ht.getComponent())||void 0===ke?void 0:ke.instantiationMode)&&Ht.initialize(),Ht.getImmediate({identifier:yt})}_removeServiceInstance(tt,yt=oe._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(tt).clearInstance(yt)}_addComponent(tt){(0,oe._addComponent)(this._delegate,tt)}_addOrOverwriteComponent(tt){(0,oe._addOrOverwriteComponent)(this._delegate,tt)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const je=new _.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),_e=function We(){const Rt=function Ue(Rt){const tt={},yt={__esModule:!0,initializeApp:function dt(Dt,ne={}){const Oe=oe.initializeApp(Dt,ne);if((0,_.r3)(tt,Oe.name))return tt[Oe.name];const W=new Rt(Oe,yt);return tt[Oe.name]=W,W},app:Ht,registerVersion:oe.registerVersion,setLogLevel:oe.setLogLevel,onLog:oe.onLog,apps:null,SDK_VERSION:oe.SDK_VERSION,INTERNAL:{registerComponent:function Ye(Dt){const ne=Dt.name,Oe=ne.replace("-compat","");if(oe._registerComponent(Dt)&&"PUBLIC"===Dt.type){const W=(ze=Ht())=>{if("function"!=typeof ze[Oe])throw je.create("invalid-app-argument",{appName:ne});return ze[Oe]()};void 0!==Dt.serviceProps&&(0,_.ZB)(W,Dt.serviceProps),yt[Oe]=W,Rt.prototype[Oe]=function(...ze){return this._getService.bind(this,ne).apply(this,Dt.multipleInstances?ze:[])}}return"PUBLIC"===Dt.type?yt[Oe]:null},removeApp:function ke(Dt){delete tt[Dt]},useAsService:function at(Dt,ne){return"serverAuth"===ne?null:ne},modularAPIs:oe}};function Ht(Dt){if(!(0,_.r3)(tt,Dt=Dt||oe._DEFAULT_ENTRY_NAME))throw je.create("no-app",{appName:Dt});return tt[Dt]}return yt.default=yt,Object.defineProperty(yt,"apps",{get:function nt(){return Object.keys(tt).map(Dt=>tt[Dt])}}),Ht.App=Rt,yt}(Ae);return Rt.INTERNAL=Object.assign(Object.assign({},Rt.INTERNAL),{createFirebaseNamespace:We,extendNamespace:function tt(yt){(0,_.ZB)(Rt,yt)},createSubscribe:_.ne,ErrorFactory:_.LL,deepExtend:_.ZB}),Rt}(),de=new Pe.Yd("@firebase/app-compat");if((0,_.jU)()&&void 0!==self.firebase){de.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Rt=self.firebase.SDK_VERSION;Rt&&Rt.indexOf("LITE")>=0&&de.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Et=_e;!function pt(Rt){(0,oe.registerVersion)("@firebase/app-compat","0.1.22",Rt)}()},9681:(en,Xe,z)=>{"use strict";z.r(Xe),z.d(Xe,{FirebaseError:()=>Pe.ZR,SDK_VERSION:()=>ar,_DEFAULT_ENTRY_NAME:()=>Qt,_addComponent:()=>Wt,_addOrOverwriteComponent:()=>Vn,_apps:()=>St,_clearComponents:()=>On,_components:()=>hn,_getProvider:()=>Cn,_registerComponent:()=>rn,_removeServiceInstance:()=>fn,deleteApp:()=>er,getApp:()=>vn,getApps:()=>Nr,initializeApp:()=>fr,onLog:()=>Fn,registerVersion:()=>bn,setLogLevel:()=>un});var _=z(5861),B=z(4859),oe=z(1877),Pe=z(2090);class Ae{constructor(Le){this.container=Le}getPlatformInfoString(){return this.container.getProviders().map(Gt=>{if(function xe(qt){const Le=qt.getComponent();return"VERSION"===(null==Le?void 0:Le.type)}(Gt)){const Jt=Gt.getImmediate();return`${Jt.library}/${Jt.version}`}return null}).filter(Gt=>Gt).join(" ")}}const je="@firebase/app",We=new oe.Yd("@firebase/app"),Qt="[DEFAULT]",Ft={[je]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},St=new Map,hn=new Map;function Wt(qt,Le){try{qt.container.addComponent(Le)}catch(Gt){We.debug(`Component ${Le.name} failed to register with FirebaseApp ${qt.name}`,Gt)}}function Vn(qt,Le){qt.container.addOrOverwriteComponent(Le)}function rn(qt){const Le=qt.name;if(hn.has(Le))return We.debug(`There were multiple attempts to register component ${Le}.`),!1;hn.set(Le,qt);for(const Gt of St.values())Wt(Gt,qt);return!0}function Cn(qt,Le){const Gt=qt.container.getProvider("heartbeat").getImmediate({optional:!0});return Gt&&Gt.triggerHeartbeat(),qt.container.getProvider(Le)}function fn(qt,Le,Gt=Qt){Cn(qt,Le).clearInstance(Gt)}function On(){hn.clear()}const Sn=new Pe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Mr{constructor(Le,Gt,Jt){this._isDeleted=!1,this._options=Object.assign({},Le),this._config=Object.assign({},Gt),this._name=Gt.name,this._automaticDataCollectionEnabled=Gt.automaticDataCollectionEnabled,this._container=Jt,this.container.addComponent(new B.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Le){this.checkDestroyed(),this._automaticDataCollectionEnabled=Le}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Le){this._isDeleted=Le}checkDestroyed(){if(this.isDeleted)throw Sn.create("app-deleted",{appName:this._name})}}const ar="9.6.11";function fr(qt,Le={}){"object"!=typeof Le&&(Le={name:Le});const Gt=Object.assign({name:Qt,automaticDataCollectionEnabled:!1},Le),Jt=Gt.name;if("string"!=typeof Jt||!Jt)throw Sn.create("bad-app-name",{appName:String(Jt)});const Rn=St.get(Jt);if(Rn){if((0,Pe.vZ)(qt,Rn.options)&&(0,Pe.vZ)(Gt,Rn.config))return Rn;throw Sn.create("duplicate-app",{appName:Jt})}const Un=new B.H0(Jt);for(const he of hn.values())Un.addComponent(he);const Ee=new Mr(qt,Gt,Un);return St.set(Jt,Ee),Ee}function vn(qt=Qt){const Le=St.get(qt);if(!Le)throw Sn.create("no-app",{appName:qt});return Le}function Nr(){return Array.from(St.values())}function er(qt){return zt.apply(this,arguments)}function zt(){return(zt=(0,_.Z)(function*(qt){const Le=qt.name;St.has(Le)&&(St.delete(Le),yield Promise.all(qt.container.getProviders().map(Gt=>Gt.delete())),qt.isDeleted=!0)})).apply(this,arguments)}function bn(qt,Le,Gt){var Jt;let Rn=null!==(Jt=Ft[qt])&&void 0!==Jt?Jt:qt;Gt&&(Rn+=`-${Gt}`);const Un=Rn.match(/\s|\//),Ee=Le.match(/\s|\//);if(Un||Ee){const he=[`Unable to register library "${Rn}" with version "${Le}":`];return Un&&he.push(`library name "${Rn}" contains illegal characters (whitespace or "/")`),Un&&Ee&&he.push("and"),Ee&&he.push(`version name "${Le}" contains illegal characters (whitespace or "/")`),void We.warn(he.join(" "))}rn(new B.wA(`${Rn}-version`,()=>({library:Rn,version:Le}),"VERSION"))}function Fn(qt,Le){if(null!==qt&&"function"!=typeof qt)throw Sn.create("invalid-log-argument");(0,oe.Am)(qt,Le)}function un(qt){(0,oe.Ub)(qt)}const ct="firebase-heartbeat-store";let ge=null;function be(){return ge||(ge=(0,Pe.X3)("firebase-heartbeat-database",1,(qt,Le)=>{0===Le&&qt.createObjectStore(ct)}).catch(qt=>{throw Sn.create("storage-open",{originalErrorMessage:qt.message})})),ge}function Be(){return(Be=(0,_.Z)(function*(qt){try{return(yield be()).transaction(ct).objectStore(ct).get(Kn(qt))}catch(Le){throw Sn.create("storage-get",{originalErrorMessage:Le.message})}})).apply(this,arguments)}function gt(qt,Le){return xt.apply(this,arguments)}function xt(){return(xt=(0,_.Z)(function*(qt,Le){try{const Jt=(yield be()).transaction(ct,"readwrite");return yield Jt.objectStore(ct).put(Le,Kn(qt)),Jt.complete}catch(Gt){throw Sn.create("storage-set",{originalErrorMessage:Gt.message})}})).apply(this,arguments)}function Kn(qt){return`${qt.name}!${qt.options.appId}`}class $r{constructor(Le){this.container=Le,this._heartbeatsCache=null;const Gt=this.container.getProvider("app").getImmediate();this._storage=new Lt(Gt),this._heartbeatsCachePromise=this._storage.read().then(Jt=>(this._heartbeatsCache=Jt,Jt))}triggerHeartbeat(){var Le=this;return(0,_.Z)(function*(){const Jt=Le.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Rn=br();if(null===Le._heartbeatsCache&&(Le._heartbeatsCache=yield Le._heartbeatsCachePromise),Le._heartbeatsCache.lastSentHeartbeatDate!==Rn&&!Le._heartbeatsCache.heartbeats.some(Un=>Un.date===Rn))return Le._heartbeatsCache.heartbeats.push({date:Rn,agent:Jt}),Le._heartbeatsCache.heartbeats=Le._heartbeatsCache.heartbeats.filter(Un=>{const Ee=new Date(Un.date).valueOf();return Date.now()-Ee<=2592e6}),Le._storage.overwrite(Le._heartbeatsCache)})()}getHeartbeatsHeader(){var Le=this;return(0,_.Z)(function*(){if(null===Le._heartbeatsCache&&(yield Le._heartbeatsCachePromise),null===Le._heartbeatsCache||0===Le._heartbeatsCache.heartbeats.length)return"";const Gt=br(),{heartbeatsToSend:Jt,unsentEntries:Rn}=function sr(qt,Le=1024){const Gt=[];let Jt=qt.slice();for(const Rn of qt){const Un=Gt.find(Ee=>Ee.agent===Rn.agent);if(Un){if(Un.dates.push(Rn.date),tr(Gt)>Le){Un.dates.pop();break}}else if(Gt.push({agent:Rn.agent,dates:[Rn.date]}),tr(Gt)>Le){Gt.pop();break}Jt=Jt.slice(1)}return{heartbeatsToSend:Gt,unsentEntries:Jt}}(Le._heartbeatsCache.heartbeats),Un=(0,Pe.L)(JSON.stringify({version:2,heartbeats:Jt}));return Le._heartbeatsCache.lastSentHeartbeatDate=Gt,Rn.length>0?(Le._heartbeatsCache.heartbeats=Rn,yield Le._storage.overwrite(Le._heartbeatsCache)):(Le._heartbeatsCache.heartbeats=[],Le._storage.overwrite(Le._heartbeatsCache)),Un})()}}function br(){return(new Date).toISOString().substring(0,10)}class Lt{constructor(Le){this.app=Le,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,_.Z)(function*(){return!!(0,Pe.hl)()&&(0,Pe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Le=this;return(0,_.Z)(function*(){return(yield Le._canUseIndexedDBPromise)&&(yield function vt(qt){return Be.apply(this,arguments)}(Le.app))||{heartbeats:[]}})()}overwrite(Le){var Gt=this;return(0,_.Z)(function*(){var Jt;if(yield Gt._canUseIndexedDBPromise){const Un=yield Gt.read();return gt(Gt.app,{lastSentHeartbeatDate:null!==(Jt=Le.lastSentHeartbeatDate)&&void 0!==Jt?Jt:Un.lastSentHeartbeatDate,heartbeats:Le.heartbeats})}})()}add(Le){var Gt=this;return(0,_.Z)(function*(){var Jt;if(yield Gt._canUseIndexedDBPromise){const Un=yield Gt.read();return gt(Gt.app,{lastSentHeartbeatDate:null!==(Jt=Le.lastSentHeartbeatDate)&&void 0!==Jt?Jt:Un.lastSentHeartbeatDate,heartbeats:[...Un.heartbeats,...Le.heartbeats]})}})()}}function tr(qt){return(0,Pe.L)(JSON.stringify({version:2,heartbeats:qt})).length}!function Pn(qt){rn(new B.wA("platform-logger",Le=>new Ae(Le),"PRIVATE")),rn(new B.wA("heartbeat",Le=>new $r(Le),"PRIVATE")),bn(je,"0.7.21",qt),bn(je,"0.7.21","esm2017"),bn("fire-js","")}("")},4859:(en,Xe,z)=>{"use strict";z.d(Xe,{H0:()=>Ue,wA:()=>oe,zt:()=>Ae});var _=z(5861),B=z(2090);class oe{constructor(_e,de,Fe){this.name=_e,this.instanceFactory=de,this.type=Fe,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(_e){return this.instantiationMode=_e,this}setMultipleInstances(_e){return this.multipleInstances=_e,this}setServiceProps(_e){return this.serviceProps=_e,this}setInstanceCreatedCallback(_e){return this.onInstanceCreated=_e,this}}const Pe="[DEFAULT]";class Ae{constructor(_e,de){this.name=_e,this.container=de,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(_e){const de=this.normalizeInstanceIdentifier(_e);if(!this.instancesDeferred.has(de)){const Fe=new B.BH;if(this.instancesDeferred.set(de,Fe),this.isInitialized(de)||this.shouldAutoInitialize())try{const Mt=this.getOrInitializeService({instanceIdentifier:de});Mt&&Fe.resolve(Mt)}catch(Mt){}}return this.instancesDeferred.get(de).promise}getImmediate(_e){var de;const Fe=this.normalizeInstanceIdentifier(null==_e?void 0:_e.identifier),Mt=null!==(de=null==_e?void 0:_e.optional)&&void 0!==de&&de;if(!this.isInitialized(Fe)&&!this.shouldAutoInitialize()){if(Mt)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Fe})}catch(pt){if(Mt)return null;throw pt}}getComponent(){return this.component}setComponent(_e){if(_e.name!==this.name)throw Error(`Mismatching Component ${_e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=_e,this.shouldAutoInitialize()){if(function je(We){return"EAGER"===We.instantiationMode}(_e))try{this.getOrInitializeService({instanceIdentifier:Pe})}catch(de){}for(const[de,Fe]of this.instancesDeferred.entries()){const Mt=this.normalizeInstanceIdentifier(de);try{const pt=this.getOrInitializeService({instanceIdentifier:Mt});Fe.resolve(pt)}catch(pt){}}}}clearInstance(_e=Pe){this.instancesDeferred.delete(_e),this.instancesOptions.delete(_e),this.instances.delete(_e)}delete(){var _e=this;return(0,_.Z)(function*(){const de=Array.from(_e.instances.values());yield Promise.all([...de.filter(Fe=>"INTERNAL"in Fe).map(Fe=>Fe.INTERNAL.delete()),...de.filter(Fe=>"_delete"in Fe).map(Fe=>Fe._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(_e=Pe){return this.instances.has(_e)}getOptions(_e=Pe){return this.instancesOptions.get(_e)||{}}initialize(_e={}){const{options:de={}}=_e,Fe=this.normalizeInstanceIdentifier(_e.instanceIdentifier);if(this.isInitialized(Fe))throw Error(`${this.name}(${Fe}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Mt=this.getOrInitializeService({instanceIdentifier:Fe,options:de});for(const[pt,Et]of this.instancesDeferred.entries())Fe===this.normalizeInstanceIdentifier(pt)&&Et.resolve(Mt);return Mt}onInit(_e,de){var Fe;const Mt=this.normalizeInstanceIdentifier(de),pt=null!==(Fe=this.onInitCallbacks.get(Mt))&&void 0!==Fe?Fe:new Set;pt.add(_e),this.onInitCallbacks.set(Mt,pt);const Et=this.instances.get(Mt);return Et&&_e(Et,Mt),()=>{pt.delete(_e)}}invokeOnInitCallbacks(_e,de){const Fe=this.onInitCallbacks.get(de);if(Fe)for(const Mt of Fe)try{Mt(_e,de)}catch(pt){}}getOrInitializeService({instanceIdentifier:_e,options:de={}}){let Fe=this.instances.get(_e);if(!Fe&&this.component&&(Fe=this.component.instanceFactory(this.container,{instanceIdentifier:(We=_e,We===Pe?void 0:We),options:de}),this.instances.set(_e,Fe),this.instancesOptions.set(_e,de),this.invokeOnInitCallbacks(Fe,_e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,_e,Fe)}catch(Mt){}var We;return Fe||null}normalizeInstanceIdentifier(_e=Pe){return this.component?this.component.multipleInstances?_e:Pe:_e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ue{constructor(_e){this.name=_e,this.providers=new Map}addComponent(_e){const de=this.getProvider(_e.name);if(de.isComponentSet())throw new Error(`Component ${_e.name} has already been registered with ${this.name}`);de.setComponent(_e)}addOrOverwriteComponent(_e){this.getProvider(_e.name).isComponentSet()&&this.providers.delete(_e.name),this.addComponent(_e)}getProvider(_e){if(this.providers.has(_e))return this.providers.get(_e);const de=new Ae(_e,this);return this.providers.set(_e,de),de}getProviders(){return Array.from(this.providers.values())}}},1877:(en,Xe,z)=>{"use strict";z.d(Xe,{Am:()=>We,Ub:()=>Ue,Yd:()=>je,in:()=>B});const _=[];var B=(()=>{return(_e=B||(B={}))[_e.DEBUG=0]="DEBUG",_e[_e.VERBOSE=1]="VERBOSE",_e[_e.INFO=2]="INFO",_e[_e.WARN=3]="WARN",_e[_e.ERROR=4]="ERROR",_e[_e.SILENT=5]="SILENT",B;var _e})();const oe={debug:B.DEBUG,verbose:B.VERBOSE,info:B.INFO,warn:B.WARN,error:B.ERROR,silent:B.SILENT},Pe=B.INFO,Ae={[B.DEBUG]:"log",[B.VERBOSE]:"log",[B.INFO]:"info",[B.WARN]:"warn",[B.ERROR]:"error"},xe=(_e,de,...Fe)=>{if(de<_e.logLevel)return;const Mt=(new Date).toISOString(),pt=Ae[de];if(!pt)throw new Error(`Attempted to log a message with an invalid logType (value: ${de})`);console[pt](`[${Mt}]  ${_e.name}:`,...Fe)};class je{constructor(de){this.name=de,this._logLevel=Pe,this._logHandler=xe,this._userLogHandler=null,_.push(this)}get logLevel(){return this._logLevel}set logLevel(de){if(!(de in B))throw new TypeError(`Invalid value "${de}" assigned to \`logLevel\``);this._logLevel=de}setLogLevel(de){this._logLevel="string"==typeof de?oe[de]:de}get logHandler(){return this._logHandler}set logHandler(de){if("function"!=typeof de)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=de}get userLogHandler(){return this._userLogHandler}set userLogHandler(de){this._userLogHandler=de}debug(...de){this._userLogHandler&&this._userLogHandler(this,B.DEBUG,...de),this._logHandler(this,B.DEBUG,...de)}log(...de){this._userLogHandler&&this._userLogHandler(this,B.VERBOSE,...de),this._logHandler(this,B.VERBOSE,...de)}info(...de){this._userLogHandler&&this._userLogHandler(this,B.INFO,...de),this._logHandler(this,B.INFO,...de)}warn(...de){this._userLogHandler&&this._userLogHandler(this,B.WARN,...de),this._logHandler(this,B.WARN,...de)}error(...de){this._userLogHandler&&this._userLogHandler(this,B.ERROR,...de),this._logHandler(this,B.ERROR,...de)}}function Ue(_e){_.forEach(de=>{de.setLogLevel(_e)})}function We(_e,de){for(const Fe of _){let Mt=null;de&&de.level&&(Mt=oe[de.level]),Fe.userLogHandler=null===_e?null:(pt,Et,...Rt)=>{const tt=Rt.map(yt=>{if(null==yt)return null;if("string"==typeof yt)return yt;if("number"==typeof yt||"boolean"==typeof yt)return yt.toString();if(yt instanceof Error)return yt.message;try{return JSON.stringify(yt)}catch(ke){return null}}).filter(yt=>yt).join(" ");Et>=(null!=Mt?Mt:pt.logLevel)&&_e({level:B[Et].toLowerCase(),message:tt,args:Rt,type:pt.name})}}}},5861:(en,Xe,z)=>{"use strict";function _(oe,Pe,Ae,xe,je,Ue,We){try{var _e=oe[Ue](We),de=_e.value}catch(Fe){return void Ae(Fe)}_e.done?Pe(de):Promise.resolve(de).then(xe,je)}function B(oe){return function(){var Pe=this,Ae=arguments;return new Promise(function(xe,je){var Ue=oe.apply(Pe,Ae);function We(de){_(Ue,xe,je,We,_e,"next",de)}function _e(de){_(Ue,xe,je,We,_e,"throw",de)}We(void 0)})}}z.d(Xe,{Z:()=>B})}},en=>{en(en.s=9098)}]);